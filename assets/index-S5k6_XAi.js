(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function ay(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var wh={exports:{}},La={},bh={exports:{}},De={};var xg;function Wx(){if(xg)return De;xg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.iterator;function C(R){return R===null||typeof R!="object"?null:(R=I&&R[I]||R["@@iterator"],typeof R=="function"?R:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,H={};function L(R,Q,le){this.props=R,this.context=Q,this.refs=H,this.updater=le||O}L.prototype.isReactComponent={},L.prototype.setState=function(R,Q){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,Q,"setState")},L.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function X(){}X.prototype=L.prototype;function F(R,Q,le){this.props=R,this.context=Q,this.refs=H,this.updater=le||O}var M=F.prototype=new X;M.constructor=F,q(M,L.prototype),M.isPureReactComponent=!0;var U=Array.isArray,Z=Object.prototype.hasOwnProperty,ie={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function b(R,Q,le){var we,ve={},je=null,Me=null;if(Q!=null)for(we in Q.ref!==void 0&&(Me=Q.ref),Q.key!==void 0&&(je=""+Q.key),Q)Z.call(Q,we)&&!A.hasOwnProperty(we)&&(ve[we]=Q[we]);var ze=arguments.length-2;if(ze===1)ve.children=le;else if(1<ze){for(var Qe=Array(ze),xt=0;xt<ze;xt++)Qe[xt]=arguments[xt+2];ve.children=Qe}if(R&&R.defaultProps)for(we in ze=R.defaultProps,ze)ve[we]===void 0&&(ve[we]=ze[we]);return{$$typeof:r,type:R,key:je,ref:Me,props:ve,_owner:ie.current}}function N(R,Q){return{$$typeof:r,type:R.type,key:Q,ref:R.ref,props:R.props,_owner:R._owner}}function S(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function j(R){var Q={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(le){return Q[le]})}var P=/\/+/g;function T(R,Q){return typeof R=="object"&&R!==null&&R.key!=null?j(""+R.key):Q.toString(36)}function ce(R,Q,le,we,ve){var je=typeof R;(je==="undefined"||je==="boolean")&&(R=null);var Me=!1;if(R===null)Me=!0;else switch(je){case"string":case"number":Me=!0;break;case"object":switch(R.$$typeof){case r:case e:Me=!0}}if(Me)return Me=R,ve=ve(Me),R=we===""?"."+T(Me,0):we,U(ve)?(le="",R!=null&&(le=R.replace(P,"$&/")+"/"),ce(ve,Q,le,"",function(xt){return xt})):ve!=null&&(S(ve)&&(ve=N(ve,le+(!ve.key||Me&&Me.key===ve.key?"":(""+ve.key).replace(P,"$&/")+"/")+R)),Q.push(ve)),1;if(Me=0,we=we===""?".":we+":",U(R))for(var ze=0;ze<R.length;ze++){je=R[ze];var Qe=we+T(je,ze);Me+=ce(je,Q,le,Qe,ve)}else if(Qe=C(R),typeof Qe=="function")for(R=Qe.call(R),ze=0;!(je=R.next()).done;)je=je.value,Qe=we+T(je,ze++),Me+=ce(je,Q,le,Qe,ve);else if(je==="object")throw Q=String(R),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Me}function Ee(R,Q,le){if(R==null)return R;var we=[],ve=0;return ce(R,we,"","",function(je){return Q.call(le,je,ve++)}),we}function Pe(R){if(R._status===-1){var Q=R._result;Q=Q(),Q.then(function(le){(R._status===0||R._status===-1)&&(R._status=1,R._result=le)},function(le){(R._status===0||R._status===-1)&&(R._status=2,R._result=le)}),R._status===-1&&(R._status=0,R._result=Q)}if(R._status===1)return R._result.default;throw R._result}var me={current:null},re={transition:null},fe={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:re,ReactCurrentOwner:ie};function z(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:Ee,forEach:function(R,Q,le){Ee(R,function(){Q.apply(this,arguments)},le)},count:function(R){var Q=0;return Ee(R,function(){Q++}),Q},toArray:function(R){return Ee(R,function(Q){return Q})||[]},only:function(R){if(!S(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},De.Component=L,De.Fragment=t,De.Profiler=o,De.PureComponent=F,De.StrictMode=i,De.Suspense=m,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,De.act=z,De.cloneElement=function(R,Q,le){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var we=q({},R.props),ve=R.key,je=R.ref,Me=R._owner;if(Q!=null){if(Q.ref!==void 0&&(je=Q.ref,Me=ie.current),Q.key!==void 0&&(ve=""+Q.key),R.type&&R.type.defaultProps)var ze=R.type.defaultProps;for(Qe in Q)Z.call(Q,Qe)&&!A.hasOwnProperty(Qe)&&(we[Qe]=Q[Qe]===void 0&&ze!==void 0?ze[Qe]:Q[Qe])}var Qe=arguments.length-2;if(Qe===1)we.children=le;else if(1<Qe){ze=Array(Qe);for(var xt=0;xt<Qe;xt++)ze[xt]=arguments[xt+2];we.children=ze}return{$$typeof:r,type:R.type,key:ve,ref:je,props:we,_owner:Me}},De.createContext=function(R){return R={$$typeof:h,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:l,_context:R},R.Consumer=R},De.createElement=b,De.createFactory=function(R){var Q=b.bind(null,R);return Q.type=R,Q},De.createRef=function(){return{current:null}},De.forwardRef=function(R){return{$$typeof:p,render:R}},De.isValidElement=S,De.lazy=function(R){return{$$typeof:w,_payload:{_status:-1,_result:R},_init:Pe}},De.memo=function(R,Q){return{$$typeof:v,type:R,compare:Q===void 0?null:Q}},De.startTransition=function(R){var Q=re.transition;re.transition={};try{R()}finally{re.transition=Q}},De.unstable_act=z,De.useCallback=function(R,Q){return me.current.useCallback(R,Q)},De.useContext=function(R){return me.current.useContext(R)},De.useDebugValue=function(){},De.useDeferredValue=function(R){return me.current.useDeferredValue(R)},De.useEffect=function(R,Q){return me.current.useEffect(R,Q)},De.useId=function(){return me.current.useId()},De.useImperativeHandle=function(R,Q,le){return me.current.useImperativeHandle(R,Q,le)},De.useInsertionEffect=function(R,Q){return me.current.useInsertionEffect(R,Q)},De.useLayoutEffect=function(R,Q){return me.current.useLayoutEffect(R,Q)},De.useMemo=function(R,Q){return me.current.useMemo(R,Q)},De.useReducer=function(R,Q,le){return me.current.useReducer(R,Q,le)},De.useRef=function(R){return me.current.useRef(R)},De.useState=function(R){return me.current.useState(R)},De.useSyncExternalStore=function(R,Q,le){return me.current.useSyncExternalStore(R,Q,le)},De.useTransition=function(){return me.current.useTransition()},De.version="18.3.1",De}var wg;function gf(){return wg||(wg=1,bh.exports=Wx()),bh.exports}var bg;function Kx(){if(bg)return La;bg=1;var r=gf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,v){var w,I={},C=null,O=null;v!==void 0&&(C=""+v),m.key!==void 0&&(C=""+m.key),m.ref!==void 0&&(O=m.ref);for(w in m)i.call(m,w)&&!l.hasOwnProperty(w)&&(I[w]=m[w]);if(p&&p.defaultProps)for(w in m=p.defaultProps,m)I[w]===void 0&&(I[w]=m[w]);return{$$typeof:e,type:p,key:C,ref:O,props:I,_owner:o.current}}return La.Fragment=t,La.jsx=h,La.jsxs=h,La}var Eg;function Gx(){return Eg||(Eg=1,wh.exports=Kx()),wh.exports}var u=Gx(),Y=gf();const Ke=ay(Y);var Oc={},Eh={exports:{}},rn={},Th={exports:{}},Ih={};var Tg;function Qx(){return Tg||(Tg=1,(function(r){function e(re,fe){var z=re.length;re.push(fe);e:for(;0<z;){var R=z-1>>>1,Q=re[R];if(0<o(Q,fe))re[R]=fe,re[z]=Q,z=R;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var fe=re[0],z=re.pop();if(z!==fe){re[0]=z;e:for(var R=0,Q=re.length,le=Q>>>1;R<le;){var we=2*(R+1)-1,ve=re[we],je=we+1,Me=re[je];if(0>o(ve,z))je<Q&&0>o(Me,ve)?(re[R]=Me,re[je]=z,R=je):(re[R]=ve,re[we]=z,R=we);else if(je<Q&&0>o(Me,z))re[R]=Me,re[je]=z,R=je;else break e}}return fe}function o(re,fe){var z=re.sortIndex-fe.sortIndex;return z!==0?z:re.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var m=[],v=[],w=1,I=null,C=3,O=!1,q=!1,H=!1,L=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(re){for(var fe=t(v);fe!==null;){if(fe.callback===null)i(v);else if(fe.startTime<=re)i(v),fe.sortIndex=fe.expirationTime,e(m,fe);else break;fe=t(v)}}function U(re){if(H=!1,M(re),!q)if(t(m)!==null)q=!0,Pe(Z);else{var fe=t(v);fe!==null&&me(U,fe.startTime-re)}}function Z(re,fe){q=!1,H&&(H=!1,X(b),b=-1),O=!0;var z=C;try{for(M(fe),I=t(m);I!==null&&(!(I.expirationTime>fe)||re&&!j());){var R=I.callback;if(typeof R=="function"){I.callback=null,C=I.priorityLevel;var Q=R(I.expirationTime<=fe);fe=r.unstable_now(),typeof Q=="function"?I.callback=Q:I===t(m)&&i(m),M(fe)}else i(m);I=t(m)}if(I!==null)var le=!0;else{var we=t(v);we!==null&&me(U,we.startTime-fe),le=!1}return le}finally{I=null,C=z,O=!1}}var ie=!1,A=null,b=-1,N=5,S=-1;function j(){return!(r.unstable_now()-S<N)}function P(){if(A!==null){var re=r.unstable_now();S=re;var fe=!0;try{fe=A(!0,re)}finally{fe?T():(ie=!1,A=null)}}else ie=!1}var T;if(typeof F=="function")T=function(){F(P)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Ee=ce.port2;ce.port1.onmessage=P,T=function(){Ee.postMessage(null)}}else T=function(){L(P,0)};function Pe(re){A=re,ie||(ie=!0,T())}function me(re,fe){b=L(function(){re(r.unstable_now())},fe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){q||O||(q=!0,Pe(Z))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(re){switch(C){case 1:case 2:case 3:var fe=3;break;default:fe=C}var z=C;C=fe;try{return re()}finally{C=z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,fe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var z=C;C=re;try{return fe()}finally{C=z}},r.unstable_scheduleCallback=function(re,fe,z){var R=r.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?R+z:R):z=R,re){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=z+Q,re={id:w++,callback:fe,priorityLevel:re,startTime:z,expirationTime:Q,sortIndex:-1},z>R?(re.sortIndex=z,e(v,re),t(m)===null&&re===t(v)&&(H?(X(b),b=-1):H=!0,me(U,z-R))):(re.sortIndex=Q,e(m,re),q||O||(q=!0,Pe(Z))),re},r.unstable_shouldYield=j,r.unstable_wrapCallback=function(re){var fe=C;return function(){var z=C;C=fe;try{return re.apply(this,arguments)}finally{C=z}}}})(Ih)),Ih}var Ig;function Yx(){return Ig||(Ig=1,Th.exports=Qx()),Th.exports}var Ng;function Xx(){if(Ng)return rn;Ng=1;var r=gf(),e=Yx();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},I={};function C(n){return m.call(I,n)?!0:m.call(w,n)?!1:v.test(n)?I[n]=!0:(w[n]=!0,!1)}function O(n,s,a,d){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,s,a,d){if(s===null||typeof s>"u"||O(n,s,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function H(n,s,a,d,f,y,x){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=x}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){L[n]=new H(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];L[s]=new H(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){L[n]=new H(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){L[n]=new H(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){L[n]=new H(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){L[n]=new H(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){L[n]=new H(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){L[n]=new H(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){L[n]=new H(n,5,!1,n.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function F(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(X,F);L[s]=new H(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(X,F);L[s]=new H(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(X,F);L[s]=new H(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){L[n]=new H(n,1,!1,n.toLowerCase(),null,!1,!1)}),L.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){L[n]=new H(n,1,!1,n.toLowerCase(),null,!0,!0)});function M(n,s,a,d){var f=L.hasOwnProperty(s)?L[s]:null;(f!==null?f.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(q(s,a,f,d)&&(a=null),d||f===null?C(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,d=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?n.setAttributeNS(d,s,a):n.setAttribute(s,a))))}var U=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),ie=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),j=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),re=Symbol.iterator;function fe(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var z=Object.assign,R;function Q(n){if(R===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);R=s&&s[1]||""}return`
`+R+n}var le=!1;function we(n,s){if(!n||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(K){var d=K}Reflect.construct(n,[],s)}else{try{s.call()}catch(K){d=K}n.call(s.prototype)}else{try{throw Error()}catch(K){d=K}n()}}catch(K){if(K&&d&&typeof K.stack=="string"){for(var f=K.stack.split(`
`),y=d.stack.split(`
`),x=f.length-1,k=y.length-1;1<=x&&0<=k&&f[x]!==y[k];)k--;for(;1<=x&&0<=k;x--,k--)if(f[x]!==y[k]){if(x!==1||k!==1)do if(x--,k--,0>k||f[x]!==y[k]){var D=`
`+f[x].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=x&&0<=k);break}}}finally{le=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function ve(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=we(n.type,!1),n;case 11:return n=we(n.type.render,!1),n;case 1:return n=we(n.type,!0),n;default:return""}}function je(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case A:return"Fragment";case ie:return"Portal";case N:return"Profiler";case b:return"StrictMode";case T:return"Suspense";case ce:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case j:return(n.displayName||"Context")+".Consumer";case S:return(n._context.displayName||"Context")+".Provider";case P:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ee:return s=n.displayName||null,s!==null?s:je(n.type)||"Memo";case Pe:s=n._payload,n=n._init;try{return je(n(s))}catch{}}return null}function Me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(s);case 8:return s===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ze(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Qe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function xt(n){var s=Qe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),d=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,y=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(x){d=""+x,y.call(this,x)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function hr(n){n._valueTracker||(n._valueTracker=xt(n))}function wi(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),d="";return n&&(d=Qe(n)?n.checked?"true":"false":n.value),n=d,n!==a?(s.setValue(n),!0):!1}function Br(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ps(n,s){var a=s.checked;return z({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function bi(n,s){var a=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;a=ze(s.value!=null?s.value:a),n._wrapperState={initialChecked:d,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Bo(n,s){s=s.checked,s!=null&&M(n,"checked",s,!1)}function $o(n,s){Bo(n,s);var a=ze(s.value),d=s.type;if(a!=null)d==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Ei(n,s.type,a):s.hasOwnProperty("defaultValue")&&Ei(n,s.type,ze(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function El(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ei(n,s,a){(s!=="number"||Br(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var fr=Array.isArray;function pr(n,s,a,d){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&d&&(n[a].defaultSelected=!0)}else{for(a=""+ze(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,d&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function qo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return z({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ti(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(fr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:ze(a)}}function Ii(n,s){var a=ze(s.value),d=ze(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),d!=null&&(n.defaultValue=""+d)}function Ho(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function pt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?pt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var mr,Wo=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,d,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,d,f)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(mr=mr||document.createElement("div"),mr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function $r(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rs=["Webkit","ms","Moz","O"];Object.keys(js).forEach(function(n){Rs.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),js[s]=js[n]})});function Ko(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||js.hasOwnProperty(n)&&js[n]?(""+s).trim():s+"px"}function Go(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=Ko(a,s[a],d);a==="float"&&(a="cssFloat"),d?n.setProperty(a,f):n[a]=f}}var Qo=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yo(n,s){if(s){if(Qo[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Xo(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ds=null;function Ni(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ki=null,mn=null,Kn=null;function Si(n){if(n=wa(n)){if(typeof ki!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Zl(s),ki(n.stateNode,n.type,s))}}function Gn(n){mn?Kn?Kn.push(n):Kn=[n]:mn=n}function Jo(){if(mn){var n=mn,s=Kn;if(Kn=mn=null,Si(n),s)for(n=0;n<s.length;n++)Si(s[n])}}function Ms(n,s){return n(s)}function Zo(){}var gr=!1;function ea(n,s,a){if(gr)return n(s,a);gr=!0;try{return Ms(n,s,a)}finally{gr=!1,(mn!==null||Kn!==null)&&(Zo(),Jo())}}function at(n,s){var a=n.stateNode;if(a===null)return null;var d=Zl(a);if(d===null)return null;a=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ci=!1;if(p)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{Ci=!1}function Ls(n,s,a,d,f,y,x,k,D){var K=Array.prototype.slice.call(arguments,3);try{s.apply(a,K)}catch(te){this.onError(te)}}var Vs=!1,Ai=null,Sn=!1,ta=null,Qu={onError:function(n){Vs=!0,Ai=n}};function Pi(n,s,a,d,f,y,x,k,D){Vs=!1,Ai=null,Ls.apply(Qu,arguments)}function Tl(n,s,a,d,f,y,x,k,D){if(Pi.apply(this,arguments),Vs){if(Vs){var K=Ai;Vs=!1,Ai=null}else throw Error(t(198));Sn||(Sn=!0,ta=K)}}function Cn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Os(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function An(n){if(Cn(n)!==n)throw Error(t(188))}function Il(n){var s=n.alternate;if(!s){if(s=Cn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,d=s;;){var f=a.return;if(f===null)break;var y=f.alternate;if(y===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===a)return An(f),n;if(y===d)return An(f),s;y=y.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=y;else{for(var x=!1,k=f.child;k;){if(k===a){x=!0,a=f,d=y;break}if(k===d){x=!0,d=f,a=y;break}k=k.sibling}if(!x){for(k=y.child;k;){if(k===a){x=!0,a=y,d=f;break}if(k===d){x=!0,d=y,a=f;break}k=k.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function na(n){return n=Il(n),n!==null?ji(n):null}function ji(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=ji(n);if(s!==null)return s;n=n.sibling}return null}var Ri=e.unstable_scheduleCallback,ra=e.unstable_cancelCallback,Nl=e.unstable_shouldYield,Yu=e.unstable_requestPaint,Ye=e.unstable_now,kl=e.unstable_getCurrentPriorityLevel,Fs=e.unstable_ImmediatePriority,qr=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,sa=e.unstable_LowPriority,Sl=e.unstable_IdlePriority,Us=null,on=null;function Cl(n){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Us,n,void 0,(n.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:Pl,ia=Math.log,Al=Math.LN2;function Pl(n){return n>>>=0,n===0?32:31-(ia(n)/Al|0)|0}var Di=64,Mi=4194304;function Hr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function zs(n,s){var a=n.pendingLanes;if(a===0)return 0;var d=0,f=n.suspendedLanes,y=n.pingedLanes,x=a&268435455;if(x!==0){var k=x&~f;k!==0?d=Hr(k):(y&=x,y!==0&&(d=Hr(y)))}else x=a&~f,x!==0?d=Hr(x):y!==0&&(d=Hr(y));if(d===0)return 0;if(s!==0&&s!==d&&(s&f)===0&&(f=d&-d,y=s&-s,f>=y||f===16&&(y&4194240)!==0))return s;if((d&4)!==0&&(d|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=d;0<s;)a=31-qt(s),f=1<<a,d|=n[a],s&=~f;return d}function Xu(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(n,s){for(var a=n.suspendedLanes,d=n.pingedLanes,f=n.expirationTimes,y=n.pendingLanes;0<y;){var x=31-qt(y),k=1<<x,D=f[x];D===-1?((k&a)===0||(k&d)!==0)&&(f[x]=Xu(k,s)):D<=s&&(n.expiredLanes|=k),y&=~k}}function an(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Bs(){var n=Di;return Di<<=1,(Di&4194240)===0&&(Di=64),n}function Wr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Kr(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-qt(s),n[s]=a}function Ge(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-qt(a),y=1<<f;s[f]=0,d[f]=-1,n[f]=-1,a&=~y}}function Gr(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var d=31-qt(a),f=1<<d;f&s|n[d]&s&&(n[d]|=s),a&=~f}}var Ve=0;function Qr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var jl,Li,Rl,Dl,Ml,oa=!1,Qn=[],St=null,Pn=null,jn=null,Yr=new Map,yn=new Map,Yn=[],Ju="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ll(n,s){switch(n){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":Yr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(s.pointerId)}}function Yt(n,s,a,d,f,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:a,eventSystemFlags:d,nativeEvent:y,targetContainers:[f]},s!==null&&(s=wa(s),s!==null&&Li(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Zu(n,s,a,d,f){switch(s){case"focusin":return St=Yt(St,n,s,a,d,f),!0;case"dragenter":return Pn=Yt(Pn,n,s,a,d,f),!0;case"mouseover":return jn=Yt(jn,n,s,a,d,f),!0;case"pointerover":var y=f.pointerId;return Yr.set(y,Yt(Yr.get(y)||null,n,s,a,d,f)),!0;case"gotpointercapture":return y=f.pointerId,yn.set(y,Yt(yn.get(y)||null,n,s,a,d,f)),!0}return!1}function Vl(n){var s=Ks(n.target);if(s!==null){var a=Cn(s);if(a!==null){if(s=a.tag,s===13){if(s=Os(a),s!==null){n.blockedOn=s,Ml(n.priority,function(){Rl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _r(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Vi(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var d=new a.constructor(a.type,a);Ds=d,a.target.dispatchEvent(d),Ds=null}else return s=wa(a),s!==null&&Li(s),n.blockedOn=a,!1;s.shift()}return!0}function $s(n,s,a){_r(n)&&a.delete(s)}function Ol(){oa=!1,St!==null&&_r(St)&&(St=null),Pn!==null&&_r(Pn)&&(Pn=null),jn!==null&&_r(jn)&&(jn=null),Yr.forEach($s),yn.forEach($s)}function Rn(n,s){n.blockedOn===s&&(n.blockedOn=null,oa||(oa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ol)))}function Dn(n){function s(f){return Rn(f,n)}if(0<Qn.length){Rn(Qn[0],n);for(var a=1;a<Qn.length;a++){var d=Qn[a];d.blockedOn===n&&(d.blockedOn=null)}}for(St!==null&&Rn(St,n),Pn!==null&&Rn(Pn,n),jn!==null&&Rn(jn,n),Yr.forEach(s),yn.forEach(s),a=0;a<Yn.length;a++)d=Yn[a],d.blockedOn===n&&(d.blockedOn=null);for(;0<Yn.length&&(a=Yn[0],a.blockedOn===null);)Vl(a),a.blockedOn===null&&Yn.shift()}var vr=U.ReactCurrentBatchConfig,Xr=!0;function tt(n,s,a,d){var f=Ve,y=vr.transition;vr.transition=null;try{Ve=1,aa(n,s,a,d)}finally{Ve=f,vr.transition=y}}function ed(n,s,a,d){var f=Ve,y=vr.transition;vr.transition=null;try{Ve=4,aa(n,s,a,d)}finally{Ve=f,vr.transition=y}}function aa(n,s,a,d){if(Xr){var f=Vi(n,s,a,d);if(f===null)dd(n,s,d,qs,a),Ll(n,d);else if(Zu(f,n,s,a,d))d.stopPropagation();else if(Ll(n,d),s&4&&-1<Ju.indexOf(n)){for(;f!==null;){var y=wa(f);if(y!==null&&jl(y),y=Vi(n,s,a,d),y===null&&dd(n,s,d,qs,a),y===f)break;f=y}f!==null&&d.stopPropagation()}else dd(n,s,d,null,a)}}var qs=null;function Vi(n,s,a,d){if(qs=null,n=Ni(d),n=Ks(n),n!==null)if(s=Cn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Os(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return qs=n,null}function la(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kl()){case Fs:return 1;case qr:return 4;case gn:case sa:return 16;case Sl:return 536870912;default:return 16}default:return 16}}var ln=null,Oi=null,Xt=null;function ca(){if(Xt)return Xt;var n,s=Oi,a=s.length,d,f="value"in ln?ln.value:ln.textContent,y=f.length;for(n=0;n<a&&s[n]===f[n];n++);var x=a-n;for(d=1;d<=x&&s[a-d]===f[y-d];d++);return Xt=f.slice(n,1<d?1-d:void 0)}function Fi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Xn(){return!0}function ua(){return!1}function Ct(n){function s(a,d,f,y,x){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Xn:ua,this.isPropagationStopped=ua,this}return z(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),s}var Mn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=Ct(Mn),Jn=z({},Mn,{view:0,detail:0}),td=Ct(Jn),zi,xr,Jr,Hs=z({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Jr&&(Jr&&n.type==="mousemove"?(zi=n.screenX-Jr.screenX,xr=n.screenY-Jr.screenY):xr=zi=0,Jr=n),zi)},movementY:function(n){return"movementY"in n?n.movementY:xr}}),Bi=Ct(Hs),da=z({},Hs,{dataTransfer:0}),Fl=Ct(da),$i=z({},Jn,{relatedTarget:0}),qi=Ct($i),Ul=z({},Mn,{animationName:0,elapsedTime:0,pseudoElement:0}),wr=Ct(Ul),zl=z({},Mn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Bl=Ct(zl),$l=z({},Mn,{data:0}),ha=Ct($l),Hi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ht={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=ql[n])?!!s[n]:!1}function Zn(){return Hl}var c=z({},Jn,{key:function(n){if(n.key){var s=Hi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Fi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ht[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(n){return n.type==="keypress"?Fi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),g=Ct(c),_=z({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Ct(_),B=z({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn}),G=Ct(B),ae=z({},Mn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Ct(ae),gt=z({},Hs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Ct(gt),wt=[9,13,27,32],ut=p&&"CompositionEvent"in window,_n=null;p&&"documentMode"in document&&(_n=document.documentMode);var cn=p&&"TextEvent"in window&&!_n,Ws=p&&(!ut||_n&&8<_n&&11>=_n),Wi=" ",pp=!1;function mp(n,s){switch(n){case"keyup":return wt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ki=!1;function $v(n,s){switch(n){case"compositionend":return gp(s);case"keypress":return s.which!==32?null:(pp=!0,Wi);case"textInput":return n=s.data,n===Wi&&pp?null:n;default:return null}}function qv(n,s){if(Ki)return n==="compositionend"||!ut&&mp(n,s)?(n=ca(),Xt=Oi=ln=null,Ki=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ws&&s.locale!=="ko"?null:s.data;default:return null}}var Hv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Hv[n.type]:s==="textarea"}function _p(n,s,a,d){Gn(d),s=Yl(s,"onChange"),0<s.length&&(a=new Ui("onChange","change",null,a,d),n.push({event:a,listeners:s}))}var fa=null,pa=null;function Wv(n){Lp(n,0)}function Wl(n){var s=Ji(n);if(wi(s))return n}function Kv(n,s){if(n==="change")return s}var vp=!1;if(p){var nd;if(p){var rd="oninput"in document;if(!rd){var xp=document.createElement("div");xp.setAttribute("oninput","return;"),rd=typeof xp.oninput=="function"}nd=rd}else nd=!1;vp=nd&&(!document.documentMode||9<document.documentMode)}function wp(){fa&&(fa.detachEvent("onpropertychange",bp),pa=fa=null)}function bp(n){if(n.propertyName==="value"&&Wl(pa)){var s=[];_p(s,pa,n,Ni(n)),ea(Wv,s)}}function Gv(n,s,a){n==="focusin"?(wp(),fa=s,pa=a,fa.attachEvent("onpropertychange",bp)):n==="focusout"&&wp()}function Qv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Wl(pa)}function Yv(n,s){if(n==="click")return Wl(s)}function Xv(n,s){if(n==="input"||n==="change")return Wl(s)}function Jv(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Ln=typeof Object.is=="function"?Object.is:Jv;function ma(n,s){if(Ln(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),d=Object.keys(s);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!m.call(s,f)||!Ln(n[f],s[f]))return!1}return!0}function Ep(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Tp(n,s){var a=Ep(n);n=0;for(var d;a;){if(a.nodeType===3){if(d=n+a.textContent.length,n<=s&&d>=s)return{node:a,offset:s-n};n=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ep(a)}}function Ip(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Ip(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Np(){for(var n=window,s=Br();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Br(n.document)}return s}function sd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Zv(n){var s=Np(),a=n.focusedElem,d=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Ip(a.ownerDocument.documentElement,a)){if(d!==null&&sd(a)){if(s=d.start,n=d.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,y=Math.min(d.start,f);d=d.end===void 0?y:Math.min(d.end,f),!n.extend&&y>d&&(f=d,d=y,y=f),f=Tp(a,y);var x=Tp(a,d);f&&x&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),y>d?(n.addRange(s),n.extend(x.node,x.offset)):(s.setEnd(x.node,x.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ex=p&&"documentMode"in document&&11>=document.documentMode,Gi=null,id=null,ga=null,od=!1;function kp(n,s,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;od||Gi==null||Gi!==Br(d)||(d=Gi,"selectionStart"in d&&sd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ga&&ma(ga,d)||(ga=d,d=Yl(id,"onSelect"),0<d.length&&(s=new Ui("onSelect","select",null,s,a),n.push({event:s,listeners:d}),s.target=Gi)))}function Kl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Qi={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},ad={},Sp={};p&&(Sp=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Gl(n){if(ad[n])return ad[n];if(!Qi[n])return n;var s=Qi[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Sp)return ad[n]=s[a];return n}var Cp=Gl("animationend"),Ap=Gl("animationiteration"),Pp=Gl("animationstart"),jp=Gl("transitionend"),Rp=new Map,Dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(n,s){Rp.set(n,s),l(s,[n])}for(var ld=0;ld<Dp.length;ld++){var cd=Dp[ld],tx=cd.toLowerCase(),nx=cd[0].toUpperCase()+cd.slice(1);Zr(tx,"on"+nx)}Zr(Cp,"onAnimationEnd"),Zr(Ap,"onAnimationIteration"),Zr(Pp,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(jp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function Mp(n,s,a){var d=n.type||"unknown-event";n.currentTarget=a,Tl(d,s,void 0,n),n.currentTarget=null}function Lp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var d=n[a],f=d.event;d=d.listeners;e:{var y=void 0;if(s)for(var x=d.length-1;0<=x;x--){var k=d[x],D=k.instance,K=k.currentTarget;if(k=k.listener,D!==y&&f.isPropagationStopped())break e;Mp(f,k,K),y=D}else for(x=0;x<d.length;x++){if(k=d[x],D=k.instance,K=k.currentTarget,k=k.listener,D!==y&&f.isPropagationStopped())break e;Mp(f,k,K),y=D}}}if(Sn)throw n=ta,Sn=!1,ta=null,n}function Je(n,s){var a=s[yd];a===void 0&&(a=s[yd]=new Set);var d=n+"__bubble";a.has(d)||(Vp(s,n,2,!1),a.add(d))}function ud(n,s,a){var d=0;s&&(d|=4),Vp(a,n,d,s)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function _a(n){if(!n[Ql]){n[Ql]=!0,i.forEach(function(a){a!=="selectionchange"&&(rx.has(a)||ud(a,!1,n),ud(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Ql]||(s[Ql]=!0,ud("selectionchange",!1,s))}}function Vp(n,s,a,d){switch(la(s)){case 1:var f=tt;break;case 4:f=ed;break;default:f=aa}a=f.bind(null,s,a,n),f=void 0,!Ci||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),d?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function dd(n,s,a,d,f){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var k=d.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(x===4)for(x=d.return;x!==null;){var D=x.tag;if((D===3||D===4)&&(D=x.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;x=x.return}for(;k!==null;){if(x=Ks(k),x===null)return;if(D=x.tag,D===5||D===6){d=y=x;continue e}k=k.parentNode}}d=d.return}ea(function(){var K=y,te=Ni(a),se=[];e:{var ee=Rp.get(n);if(ee!==void 0){var ue=Ui,pe=n;switch(n){case"keypress":if(Fi(a)===0)break e;case"keydown":case"keyup":ue=g;break;case"focusin":pe="focus",ue=qi;break;case"focusout":pe="blur",ue=qi;break;case"beforeblur":case"afterblur":ue=qi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Bi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=G;break;case Cp:case Ap:case Pp:ue=wr;break;case jp:ue=He;break;case"scroll":ue=td;break;case"wheel":ue=Fe;break;case"copy":case"cut":case"paste":ue=Bl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=E}var ge=(s&4)!==0,lt=!ge&&n==="scroll",$=ge?ee!==null?ee+"Capture":null:ee;ge=[];for(var V=K,W;V!==null;){W=V;var oe=W.stateNode;if(W.tag===5&&oe!==null&&(W=oe,$!==null&&(oe=at(V,$),oe!=null&&ge.push(va(V,oe,W)))),lt)break;V=V.return}0<ge.length&&(ee=new ue(ee,pe,null,a,te),se.push({event:ee,listeners:ge}))}}if((s&7)===0){e:{if(ee=n==="mouseover"||n==="pointerover",ue=n==="mouseout"||n==="pointerout",ee&&a!==Ds&&(pe=a.relatedTarget||a.fromElement)&&(Ks(pe)||pe[br]))break e;if((ue||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,ue?(pe=a.relatedTarget||a.toElement,ue=K,pe=pe?Ks(pe):null,pe!==null&&(lt=Cn(pe),pe!==lt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ue=null,pe=K),ue!==pe)){if(ge=Bi,oe="onMouseLeave",$="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ge=E,oe="onPointerLeave",$="onPointerEnter",V="pointer"),lt=ue==null?ee:Ji(ue),W=pe==null?ee:Ji(pe),ee=new ge(oe,V+"leave",ue,a,te),ee.target=lt,ee.relatedTarget=W,oe=null,Ks(te)===K&&(ge=new ge($,V+"enter",pe,a,te),ge.target=W,ge.relatedTarget=lt,oe=ge),lt=oe,ue&&pe)t:{for(ge=ue,$=pe,V=0,W=ge;W;W=Yi(W))V++;for(W=0,oe=$;oe;oe=Yi(oe))W++;for(;0<V-W;)ge=Yi(ge),V--;for(;0<W-V;)$=Yi($),W--;for(;V--;){if(ge===$||$!==null&&ge===$.alternate)break t;ge=Yi(ge),$=Yi($)}ge=null}else ge=null;ue!==null&&Op(se,ee,ue,ge,!1),pe!==null&&lt!==null&&Op(se,lt,pe,ge,!0)}}e:{if(ee=K?Ji(K):window,ue=ee.nodeName&&ee.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ee.type==="file")var xe=Kv;else if(yp(ee))if(vp)xe=Xv;else{xe=Qv;var Te=Gv}else(ue=ee.nodeName)&&ue.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(xe=Yv);if(xe&&(xe=xe(n,K))){_p(se,xe,a,te);break e}Te&&Te(n,ee,K),n==="focusout"&&(Te=ee._wrapperState)&&Te.controlled&&ee.type==="number"&&Ei(ee,"number",ee.value)}switch(Te=K?Ji(K):window,n){case"focusin":(yp(Te)||Te.contentEditable==="true")&&(Gi=Te,id=K,ga=null);break;case"focusout":ga=id=Gi=null;break;case"mousedown":od=!0;break;case"contextmenu":case"mouseup":case"dragend":od=!1,kp(se,a,te);break;case"selectionchange":if(ex)break;case"keydown":case"keyup":kp(se,a,te)}var Ie;if(ut)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Ki?mp(n,a)&&(ke="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Ws&&a.locale!=="ko"&&(Ki||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Ki&&(Ie=ca()):(ln=te,Oi="value"in ln?ln.value:ln.textContent,Ki=!0)),Te=Yl(K,ke),0<Te.length&&(ke=new ha(ke,n,null,a,te),se.push({event:ke,listeners:Te}),Ie?ke.data=Ie:(Ie=gp(a),Ie!==null&&(ke.data=Ie)))),(Ie=cn?$v(n,a):qv(n,a))&&(K=Yl(K,"onBeforeInput"),0<K.length&&(te=new ha("onBeforeInput","beforeinput",null,a,te),se.push({event:te,listeners:K}),te.data=Ie))}Lp(se,s)})}function va(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Yl(n,s){for(var a=s+"Capture",d=[];n!==null;){var f=n,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=at(n,a),y!=null&&d.unshift(va(n,y,f)),y=at(n,s),y!=null&&d.push(va(n,y,f))),n=n.return}return d}function Yi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Op(n,s,a,d,f){for(var y=s._reactName,x=[];a!==null&&a!==d;){var k=a,D=k.alternate,K=k.stateNode;if(D!==null&&D===d)break;k.tag===5&&K!==null&&(k=K,f?(D=at(a,y),D!=null&&x.unshift(va(a,D,k))):f||(D=at(a,y),D!=null&&x.push(va(a,D,k)))),a=a.return}x.length!==0&&n.push({event:s,listeners:x})}var sx=/\r\n?/g,ix=/\u0000|\uFFFD/g;function Fp(n){return(typeof n=="string"?n:""+n).replace(sx,`
`).replace(ix,"")}function Xl(n,s,a){if(s=Fp(s),Fp(n)!==s&&a)throw Error(t(425))}function Jl(){}var hd=null,fd=null;function pd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var md=typeof setTimeout=="function"?setTimeout:void 0,ox=typeof clearTimeout=="function"?clearTimeout:void 0,Up=typeof Promise=="function"?Promise:void 0,ax=typeof queueMicrotask=="function"?queueMicrotask:typeof Up<"u"?function(n){return Up.resolve(null).then(n).catch(lx)}:md;function lx(n){setTimeout(function(){throw n})}function gd(n,s){var a=s,d=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){n.removeChild(f),Dn(s);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);Dn(s)}function es(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function zp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),er="__reactFiber$"+Xi,xa="__reactProps$"+Xi,br="__reactContainer$"+Xi,yd="__reactEvents$"+Xi,cx="__reactListeners$"+Xi,ux="__reactHandles$"+Xi;function Ks(n){var s=n[er];if(s)return s;for(var a=n.parentNode;a;){if(s=a[br]||a[er]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=zp(n);n!==null;){if(a=n[er])return a;n=zp(n)}return s}n=a,a=n.parentNode}return null}function wa(n){return n=n[er]||n[br],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ji(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Zl(n){return n[xa]||null}var _d=[],Zi=-1;function ts(n){return{current:n}}function Ze(n){0>Zi||(n.current=_d[Zi],_d[Zi]=null,Zi--)}function Xe(n,s){Zi++,_d[Zi]=n.current,n.current=s}var ns={},Lt=ts(ns),Jt=ts(!1),Gs=ns;function eo(n,s){var a=n.type.contextTypes;if(!a)return ns;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in a)f[y]=s[y];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Zt(n){return n=n.childContextTypes,n!=null}function ec(){Ze(Jt),Ze(Lt)}function Bp(n,s,a){if(Lt.current!==ns)throw Error(t(168));Xe(Lt,s),Xe(Jt,a)}function $p(n,s,a){var d=n.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in s))throw Error(t(108,Me(n)||"Unknown",f));return z({},a,d)}function tc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ns,Gs=Lt.current,Xe(Lt,n),Xe(Jt,Jt.current),!0}function qp(n,s,a){var d=n.stateNode;if(!d)throw Error(t(169));a?(n=$p(n,s,Gs),d.__reactInternalMemoizedMergedChildContext=n,Ze(Jt),Ze(Lt),Xe(Lt,n)):Ze(Jt),Xe(Jt,a)}var Er=null,nc=!1,vd=!1;function Hp(n){Er===null?Er=[n]:Er.push(n)}function dx(n){nc=!0,Hp(n)}function rs(){if(!vd&&Er!==null){vd=!0;var n=0,s=Ve;try{var a=Er;for(Ve=1;n<a.length;n++){var d=a[n];do d=d(!0);while(d!==null)}Er=null,nc=!1}catch(f){throw Er!==null&&(Er=Er.slice(n+1)),Ri(Fs,rs),f}finally{Ve=s,vd=!1}}return null}var to=[],no=0,rc=null,sc=0,vn=[],xn=0,Qs=null,Tr=1,Ir="";function Ys(n,s){to[no++]=sc,to[no++]=rc,rc=n,sc=s}function Wp(n,s,a){vn[xn++]=Tr,vn[xn++]=Ir,vn[xn++]=Qs,Qs=n;var d=Tr;n=Ir;var f=32-qt(d)-1;d&=~(1<<f),a+=1;var y=32-qt(s)+f;if(30<y){var x=f-f%5;y=(d&(1<<x)-1).toString(32),d>>=x,f-=x,Tr=1<<32-qt(s)+f|a<<f|d,Ir=y+n}else Tr=1<<y|a<<f|d,Ir=n}function xd(n){n.return!==null&&(Ys(n,1),Wp(n,1,0))}function wd(n){for(;n===rc;)rc=to[--no],to[no]=null,sc=to[--no],to[no]=null;for(;n===Qs;)Qs=vn[--xn],vn[xn]=null,Ir=vn[--xn],vn[xn]=null,Tr=vn[--xn],vn[xn]=null}var un=null,dn=null,nt=!1,Vn=null;function Kp(n,s){var a=Tn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Gp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,un=n,dn=es(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,un=n,dn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Qs!==null?{id:Tr,overflow:Ir}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Tn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,un=n,dn=null,!0):!1;default:return!1}}function bd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ed(n){if(nt){var s=dn;if(s){var a=s;if(!Gp(n,s)){if(bd(n))throw Error(t(418));s=es(a.nextSibling);var d=un;s&&Gp(n,s)?Kp(d,a):(n.flags=n.flags&-4097|2,nt=!1,un=n)}}else{if(bd(n))throw Error(t(418));n.flags=n.flags&-4097|2,nt=!1,un=n}}}function Qp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;un=n}function ic(n){if(n!==un)return!1;if(!nt)return Qp(n),nt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!pd(n.type,n.memoizedProps)),s&&(s=dn)){if(bd(n))throw Yp(),Error(t(418));for(;s;)Kp(n,s),s=es(s.nextSibling)}if(Qp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){dn=es(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}dn=null}}else dn=un?es(n.stateNode.nextSibling):null;return!0}function Yp(){for(var n=dn;n;)n=es(n.nextSibling)}function ro(){dn=un=null,nt=!1}function Td(n){Vn===null?Vn=[n]:Vn.push(n)}var hx=U.ReactCurrentBatchConfig;function ba(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,n));var f=d,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(x){var k=f.refs;x===null?delete k[y]:k[y]=x},s._stringRef=y,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function oc(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Xp(n){var s=n._init;return s(n._payload)}function Jp(n){function s($,V){if(n){var W=$.deletions;W===null?($.deletions=[V],$.flags|=16):W.push(V)}}function a($,V){if(!n)return null;for(;V!==null;)s($,V),V=V.sibling;return null}function d($,V){for($=new Map;V!==null;)V.key!==null?$.set(V.key,V):$.set(V.index,V),V=V.sibling;return $}function f($,V){return $=ds($,V),$.index=0,$.sibling=null,$}function y($,V,W){return $.index=W,n?(W=$.alternate,W!==null?(W=W.index,W<V?($.flags|=2,V):W):($.flags|=2,V)):($.flags|=1048576,V)}function x($){return n&&$.alternate===null&&($.flags|=2),$}function k($,V,W,oe){return V===null||V.tag!==6?(V=mh(W,$.mode,oe),V.return=$,V):(V=f(V,W),V.return=$,V)}function D($,V,W,oe){var xe=W.type;return xe===A?te($,V,W.props.children,oe,W.key):V!==null&&(V.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Pe&&Xp(xe)===V.type)?(oe=f(V,W.props),oe.ref=ba($,V,W),oe.return=$,oe):(oe=Ac(W.type,W.key,W.props,null,$.mode,oe),oe.ref=ba($,V,W),oe.return=$,oe)}function K($,V,W,oe){return V===null||V.tag!==4||V.stateNode.containerInfo!==W.containerInfo||V.stateNode.implementation!==W.implementation?(V=gh(W,$.mode,oe),V.return=$,V):(V=f(V,W.children||[]),V.return=$,V)}function te($,V,W,oe,xe){return V===null||V.tag!==7?(V=si(W,$.mode,oe,xe),V.return=$,V):(V=f(V,W),V.return=$,V)}function se($,V,W){if(typeof V=="string"&&V!==""||typeof V=="number")return V=mh(""+V,$.mode,W),V.return=$,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Z:return W=Ac(V.type,V.key,V.props,null,$.mode,W),W.ref=ba($,null,V),W.return=$,W;case ie:return V=gh(V,$.mode,W),V.return=$,V;case Pe:var oe=V._init;return se($,oe(V._payload),W)}if(fr(V)||fe(V))return V=si(V,$.mode,W,null),V.return=$,V;oc($,V)}return null}function ee($,V,W,oe){var xe=V!==null?V.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return xe!==null?null:k($,V,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Z:return W.key===xe?D($,V,W,oe):null;case ie:return W.key===xe?K($,V,W,oe):null;case Pe:return xe=W._init,ee($,V,xe(W._payload),oe)}if(fr(W)||fe(W))return xe!==null?null:te($,V,W,oe,null);oc($,W)}return null}function ue($,V,W,oe,xe){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return $=$.get(W)||null,k(V,$,""+oe,xe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case Z:return $=$.get(oe.key===null?W:oe.key)||null,D(V,$,oe,xe);case ie:return $=$.get(oe.key===null?W:oe.key)||null,K(V,$,oe,xe);case Pe:var Te=oe._init;return ue($,V,W,Te(oe._payload),xe)}if(fr(oe)||fe(oe))return $=$.get(W)||null,te(V,$,oe,xe,null);oc(V,oe)}return null}function pe($,V,W,oe){for(var xe=null,Te=null,Ie=V,ke=V=0,Tt=null;Ie!==null&&ke<W.length;ke++){Ie.index>ke?(Tt=Ie,Ie=null):Tt=Ie.sibling;var $e=ee($,Ie,W[ke],oe);if($e===null){Ie===null&&(Ie=Tt);break}n&&Ie&&$e.alternate===null&&s($,Ie),V=y($e,V,ke),Te===null?xe=$e:Te.sibling=$e,Te=$e,Ie=Tt}if(ke===W.length)return a($,Ie),nt&&Ys($,ke),xe;if(Ie===null){for(;ke<W.length;ke++)Ie=se($,W[ke],oe),Ie!==null&&(V=y(Ie,V,ke),Te===null?xe=Ie:Te.sibling=Ie,Te=Ie);return nt&&Ys($,ke),xe}for(Ie=d($,Ie);ke<W.length;ke++)Tt=ue(Ie,$,ke,W[ke],oe),Tt!==null&&(n&&Tt.alternate!==null&&Ie.delete(Tt.key===null?ke:Tt.key),V=y(Tt,V,ke),Te===null?xe=Tt:Te.sibling=Tt,Te=Tt);return n&&Ie.forEach(function(hs){return s($,hs)}),nt&&Ys($,ke),xe}function ge($,V,W,oe){var xe=fe(W);if(typeof xe!="function")throw Error(t(150));if(W=xe.call(W),W==null)throw Error(t(151));for(var Te=xe=null,Ie=V,ke=V=0,Tt=null,$e=W.next();Ie!==null&&!$e.done;ke++,$e=W.next()){Ie.index>ke?(Tt=Ie,Ie=null):Tt=Ie.sibling;var hs=ee($,Ie,$e.value,oe);if(hs===null){Ie===null&&(Ie=Tt);break}n&&Ie&&hs.alternate===null&&s($,Ie),V=y(hs,V,ke),Te===null?xe=hs:Te.sibling=hs,Te=hs,Ie=Tt}if($e.done)return a($,Ie),nt&&Ys($,ke),xe;if(Ie===null){for(;!$e.done;ke++,$e=W.next())$e=se($,$e.value,oe),$e!==null&&(V=y($e,V,ke),Te===null?xe=$e:Te.sibling=$e,Te=$e);return nt&&Ys($,ke),xe}for(Ie=d($,Ie);!$e.done;ke++,$e=W.next())$e=ue(Ie,$,ke,$e.value,oe),$e!==null&&(n&&$e.alternate!==null&&Ie.delete($e.key===null?ke:$e.key),V=y($e,V,ke),Te===null?xe=$e:Te.sibling=$e,Te=$e);return n&&Ie.forEach(function(Hx){return s($,Hx)}),nt&&Ys($,ke),xe}function lt($,V,W,oe){if(typeof W=="object"&&W!==null&&W.type===A&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Z:e:{for(var xe=W.key,Te=V;Te!==null;){if(Te.key===xe){if(xe=W.type,xe===A){if(Te.tag===7){a($,Te.sibling),V=f(Te,W.props.children),V.return=$,$=V;break e}}else if(Te.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Pe&&Xp(xe)===Te.type){a($,Te.sibling),V=f(Te,W.props),V.ref=ba($,Te,W),V.return=$,$=V;break e}a($,Te);break}else s($,Te);Te=Te.sibling}W.type===A?(V=si(W.props.children,$.mode,oe,W.key),V.return=$,$=V):(oe=Ac(W.type,W.key,W.props,null,$.mode,oe),oe.ref=ba($,V,W),oe.return=$,$=oe)}return x($);case ie:e:{for(Te=W.key;V!==null;){if(V.key===Te)if(V.tag===4&&V.stateNode.containerInfo===W.containerInfo&&V.stateNode.implementation===W.implementation){a($,V.sibling),V=f(V,W.children||[]),V.return=$,$=V;break e}else{a($,V);break}else s($,V);V=V.sibling}V=gh(W,$.mode,oe),V.return=$,$=V}return x($);case Pe:return Te=W._init,lt($,V,Te(W._payload),oe)}if(fr(W))return pe($,V,W,oe);if(fe(W))return ge($,V,W,oe);oc($,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,V!==null&&V.tag===6?(a($,V.sibling),V=f(V,W),V.return=$,$=V):(a($,V),V=mh(W,$.mode,oe),V.return=$,$=V),x($)):a($,V)}return lt}var so=Jp(!0),Zp=Jp(!1),ac=ts(null),lc=null,io=null,Id=null;function Nd(){Id=io=lc=null}function kd(n){var s=ac.current;Ze(ac),n._currentValue=s}function Sd(n,s,a){for(;n!==null;){var d=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),n===a)break;n=n.return}}function oo(n,s){lc=n,Id=io=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(en=!0),n.firstContext=null)}function wn(n){var s=n._currentValue;if(Id!==n)if(n={context:n,memoizedValue:s,next:null},io===null){if(lc===null)throw Error(t(308));io=n,lc.dependencies={lanes:0,firstContext:n}}else io=io.next=n;return s}var Xs=null;function Cd(n){Xs===null?Xs=[n]:Xs.push(n)}function em(n,s,a,d){var f=s.interleaved;return f===null?(a.next=a,Cd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Nr(n,d)}function Nr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ss=!1;function Ad(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function kr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function is(n,s,a){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Be&2)!==0){var f=d.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s,Nr(n,a)}return f=d.interleaved,f===null?(s.next=s,Cd(d)):(s.next=f.next,f.next=s),d.interleaved=s,Nr(n,a)}function cc(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var d=s.lanes;d&=n.pendingLanes,a|=d,s.lanes=a,Gr(n,a)}}function nm(n,s){var a=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?f=y=x:y=y.next=x,a=a.next}while(a!==null);y===null?f=y=s:y=y.next=s}else f=y=s;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:d.shared,effects:d.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function uc(n,s,a,d){var f=n.updateQueue;ss=!1;var y=f.firstBaseUpdate,x=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var D=k,K=D.next;D.next=null,x===null?y=K:x.next=K,x=D;var te=n.alternate;te!==null&&(te=te.updateQueue,k=te.lastBaseUpdate,k!==x&&(k===null?te.firstBaseUpdate=K:k.next=K,te.lastBaseUpdate=D))}if(y!==null){var se=f.baseState;x=0,te=K=D=null,k=y;do{var ee=k.lane,ue=k.eventTime;if((d&ee)===ee){te!==null&&(te=te.next={eventTime:ue,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var pe=n,ge=k;switch(ee=s,ue=a,ge.tag){case 1:if(pe=ge.payload,typeof pe=="function"){se=pe.call(ue,se,ee);break e}se=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ge.payload,ee=typeof pe=="function"?pe.call(ue,se,ee):pe,ee==null)break e;se=z({},se,ee);break e;case 2:ss=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,ee=f.effects,ee===null?f.effects=[k]:ee.push(k))}else ue={eventTime:ue,lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},te===null?(K=te=ue,D=se):te=te.next=ue,x|=ee;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;ee=k,k=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);if(te===null&&(D=se),f.baseState=D,f.firstBaseUpdate=K,f.lastBaseUpdate=te,s=f.shared.interleaved,s!==null){f=s;do x|=f.lane,f=f.next;while(f!==s)}else y===null&&(f.shared.lanes=0);ei|=x,n.lanes=x,n.memoizedState=se}}function rm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var d=n[s],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var Ea={},tr=ts(Ea),Ta=ts(Ea),Ia=ts(Ea);function Js(n){if(n===Ea)throw Error(t(174));return n}function Pd(n,s){switch(Xe(Ia,s),Xe(Ta,n),Xe(tr,Ea),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:mt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=mt(s,n)}Ze(tr),Xe(tr,s)}function ao(){Ze(tr),Ze(Ta),Ze(Ia)}function sm(n){Js(Ia.current);var s=Js(tr.current),a=mt(s,n.type);s!==a&&(Xe(Ta,n),Xe(tr,a))}function jd(n){Ta.current===n&&(Ze(tr),Ze(Ta))}var rt=ts(0);function dc(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Rd=[];function Dd(){for(var n=0;n<Rd.length;n++)Rd[n]._workInProgressVersionPrimary=null;Rd.length=0}var hc=U.ReactCurrentDispatcher,Md=U.ReactCurrentBatchConfig,Zs=0,st=null,yt=null,bt=null,fc=!1,Na=!1,ka=0,fx=0;function Vt(){throw Error(t(321))}function Ld(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Ln(n[a],s[a]))return!1;return!0}function Vd(n,s,a,d,f,y){if(Zs=y,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,hc.current=n===null||n.memoizedState===null?yx:_x,n=a(d,f),Na){y=0;do{if(Na=!1,ka=0,25<=y)throw Error(t(301));y+=1,bt=yt=null,s.updateQueue=null,hc.current=vx,n=a(d,f)}while(Na)}if(hc.current=gc,s=yt!==null&&yt.next!==null,Zs=0,bt=yt=st=null,fc=!1,s)throw Error(t(300));return n}function Od(){var n=ka!==0;return ka=0,n}function nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?st.memoizedState=bt=n:bt=bt.next=n,bt}function bn(){if(yt===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=yt.next;var s=bt===null?st.memoizedState:bt.next;if(s!==null)bt=s,yt=n;else{if(n===null)throw Error(t(310));yt=n,n={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},bt===null?st.memoizedState=bt=n:bt=bt.next=n}return bt}function Sa(n,s){return typeof s=="function"?s(n):s}function Fd(n){var s=bn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=yt,f=d.baseQueue,y=a.pending;if(y!==null){if(f!==null){var x=f.next;f.next=y.next,y.next=x}d.baseQueue=f=y,a.pending=null}if(f!==null){y=f.next,d=d.baseState;var k=x=null,D=null,K=y;do{var te=K.lane;if((Zs&te)===te)D!==null&&(D=D.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),d=K.hasEagerState?K.eagerState:n(d,K.action);else{var se={lane:te,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};D===null?(k=D=se,x=d):D=D.next=se,st.lanes|=te,ei|=te}K=K.next}while(K!==null&&K!==y);D===null?x=d:D.next=k,Ln(d,s.memoizedState)||(en=!0),s.memoizedState=d,s.baseState=x,s.baseQueue=D,a.lastRenderedState=d}if(n=a.interleaved,n!==null){f=n;do y=f.lane,st.lanes|=y,ei|=y,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Ud(n){var s=bn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=a.dispatch,f=a.pending,y=s.memoizedState;if(f!==null){a.pending=null;var x=f=f.next;do y=n(y,x.action),x=x.next;while(x!==f);Ln(y,s.memoizedState)||(en=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,d]}function im(){}function om(n,s){var a=st,d=bn(),f=s(),y=!Ln(d.memoizedState,f);if(y&&(d.memoizedState=f,en=!0),d=d.queue,zd(cm.bind(null,a,d,n),[n]),d.getSnapshot!==s||y||bt!==null&&bt.memoizedState.tag&1){if(a.flags|=2048,Ca(9,lm.bind(null,a,d,f,s),void 0,null),Et===null)throw Error(t(349));(Zs&30)!==0||am(a,s,f)}return f}function am(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function lm(n,s,a,d){s.value=a,s.getSnapshot=d,um(s)&&dm(n)}function cm(n,s,a){return a(function(){um(s)&&dm(n)})}function um(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Ln(n,a)}catch{return!0}}function dm(n){var s=Nr(n,1);s!==null&&zn(s,n,1,-1)}function hm(n){var s=nr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:n},s.queue=n,n=n.dispatch=gx.bind(null,st,n),[s.memoizedState,n]}function Ca(n,s,a,d){return n={tag:n,create:s,destroy:a,deps:d,next:null},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(d=a.next,a.next=n,n.next=d,s.lastEffect=n)),n}function fm(){return bn().memoizedState}function pc(n,s,a,d){var f=nr();st.flags|=n,f.memoizedState=Ca(1|s,a,void 0,d===void 0?null:d)}function mc(n,s,a,d){var f=bn();d=d===void 0?null:d;var y=void 0;if(yt!==null){var x=yt.memoizedState;if(y=x.destroy,d!==null&&Ld(d,x.deps)){f.memoizedState=Ca(s,a,y,d);return}}st.flags|=n,f.memoizedState=Ca(1|s,a,y,d)}function pm(n,s){return pc(8390656,8,n,s)}function zd(n,s){return mc(2048,8,n,s)}function mm(n,s){return mc(4,2,n,s)}function gm(n,s){return mc(4,4,n,s)}function ym(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function _m(n,s,a){return a=a!=null?a.concat([n]):null,mc(4,4,ym.bind(null,s,n),a)}function Bd(){}function vm(n,s){var a=bn();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Ld(s,d[1])?d[0]:(a.memoizedState=[n,s],n)}function xm(n,s){var a=bn();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Ld(s,d[1])?d[0]:(n=n(),a.memoizedState=[n,s],n)}function wm(n,s,a){return(Zs&21)===0?(n.baseState&&(n.baseState=!1,en=!0),n.memoizedState=a):(Ln(a,s)||(a=Bs(),st.lanes|=a,ei|=a,n.baseState=!0),s)}function px(n,s){var a=Ve;Ve=a!==0&&4>a?a:4,n(!0);var d=Md.transition;Md.transition={};try{n(!1),s()}finally{Ve=a,Md.transition=d}}function bm(){return bn().memoizedState}function mx(n,s,a){var d=cs(n);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},Em(n))Tm(s,a);else if(a=em(n,s,a,d),a!==null){var f=Kt();zn(a,n,d,f),Im(a,s,d)}}function gx(n,s,a){var d=cs(n),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(Em(n))Tm(s,f);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var x=s.lastRenderedState,k=y(x,a);if(f.hasEagerState=!0,f.eagerState=k,Ln(k,x)){var D=s.interleaved;D===null?(f.next=f,Cd(s)):(f.next=D.next,D.next=f),s.interleaved=f;return}}catch{}a=em(n,s,f,d),a!==null&&(f=Kt(),zn(a,n,d,f),Im(a,s,d))}}function Em(n){var s=n.alternate;return n===st||s!==null&&s===st}function Tm(n,s){Na=fc=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Im(n,s,a){if((a&4194240)!==0){var d=s.lanes;d&=n.pendingLanes,a|=d,s.lanes=a,Gr(n,a)}}var gc={readContext:wn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},yx={readContext:wn,useCallback:function(n,s){return nr().memoizedState=[n,s===void 0?null:s],n},useContext:wn,useEffect:pm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,pc(4194308,4,ym.bind(null,s,n),a)},useLayoutEffect:function(n,s){return pc(4194308,4,n,s)},useInsertionEffect:function(n,s){return pc(4,2,n,s)},useMemo:function(n,s){var a=nr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var d=nr();return s=a!==void 0?a(s):s,d.memoizedState=d.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},d.queue=n,n=n.dispatch=mx.bind(null,st,n),[d.memoizedState,n]},useRef:function(n){var s=nr();return n={current:n},s.memoizedState=n},useState:hm,useDebugValue:Bd,useDeferredValue:function(n){return nr().memoizedState=n},useTransition:function(){var n=hm(!1),s=n[0];return n=px.bind(null,n[1]),nr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var d=st,f=nr();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Et===null)throw Error(t(349));(Zs&30)!==0||am(d,s,a)}f.memoizedState=a;var y={value:a,getSnapshot:s};return f.queue=y,pm(cm.bind(null,d,y,n),[n]),d.flags|=2048,Ca(9,lm.bind(null,d,y,a,s),void 0,null),a},useId:function(){var n=nr(),s=Et.identifierPrefix;if(nt){var a=Ir,d=Tr;a=(d&~(1<<32-qt(d)-1)).toString(32)+a,s=":"+s+"R"+a,a=ka++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=fx++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},_x={readContext:wn,useCallback:vm,useContext:wn,useEffect:zd,useImperativeHandle:_m,useInsertionEffect:mm,useLayoutEffect:gm,useMemo:xm,useReducer:Fd,useRef:fm,useState:function(){return Fd(Sa)},useDebugValue:Bd,useDeferredValue:function(n){var s=bn();return wm(s,yt.memoizedState,n)},useTransition:function(){var n=Fd(Sa)[0],s=bn().memoizedState;return[n,s]},useMutableSource:im,useSyncExternalStore:om,useId:bm,unstable_isNewReconciler:!1},vx={readContext:wn,useCallback:vm,useContext:wn,useEffect:zd,useImperativeHandle:_m,useInsertionEffect:mm,useLayoutEffect:gm,useMemo:xm,useReducer:Ud,useRef:fm,useState:function(){return Ud(Sa)},useDebugValue:Bd,useDeferredValue:function(n){var s=bn();return yt===null?s.memoizedState=n:wm(s,yt.memoizedState,n)},useTransition:function(){var n=Ud(Sa)[0],s=bn().memoizedState;return[n,s]},useMutableSource:im,useSyncExternalStore:om,useId:bm,unstable_isNewReconciler:!1};function On(n,s){if(n&&n.defaultProps){s=z({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function $d(n,s,a,d){s=n.memoizedState,a=a(d,s),a=a==null?s:z({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var yc={isMounted:function(n){return(n=n._reactInternals)?Cn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var d=Kt(),f=cs(n),y=kr(d,f);y.payload=s,a!=null&&(y.callback=a),s=is(n,y,f),s!==null&&(zn(s,n,f,d),cc(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var d=Kt(),f=cs(n),y=kr(d,f);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=is(n,y,f),s!==null&&(zn(s,n,f,d),cc(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Kt(),d=cs(n),f=kr(a,d);f.tag=2,s!=null&&(f.callback=s),s=is(n,f,d),s!==null&&(zn(s,n,d,a),cc(s,n,d))}};function Nm(n,s,a,d,f,y,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,x):s.prototype&&s.prototype.isPureReactComponent?!ma(a,d)||!ma(f,y):!0}function km(n,s,a){var d=!1,f=ns,y=s.contextType;return typeof y=="object"&&y!==null?y=wn(y):(f=Zt(s)?Gs:Lt.current,d=s.contextTypes,y=(d=d!=null)?eo(n,f):ns),s=new s(a,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=yc,n.stateNode=s,s._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=y),s}function Sm(n,s,a,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,d),s.state!==n&&yc.enqueueReplaceState(s,s.state,null)}function qd(n,s,a,d){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Ad(n);var y=s.contextType;typeof y=="object"&&y!==null?f.context=wn(y):(y=Zt(s)?Gs:Lt.current,f.context=eo(n,y)),f.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&($d(n,s,y,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&yc.enqueueReplaceState(f,f.state,null),uc(n,a,f,d),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function lo(n,s){try{var a="",d=s;do a+=ve(d),d=d.return;while(d);var f=a}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:f,digest:null}}function Hd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Wd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var xx=typeof WeakMap=="function"?WeakMap:Map;function Cm(n,s,a){a=kr(-1,a),a.tag=3,a.payload={element:null};var d=s.value;return a.callback=function(){Tc||(Tc=!0,ah=d),Wd(n,s)},a}function Am(n,s,a){a=kr(-1,a),a.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var f=s.value;a.payload=function(){return d(f)},a.callback=function(){Wd(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){Wd(n,s),typeof d!="function"&&(as===null?as=new Set([this]):as.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})}),a}function Pm(n,s,a){var d=n.pingCache;if(d===null){d=n.pingCache=new xx;var f=new Set;d.set(s,f)}else f=d.get(s),f===void 0&&(f=new Set,d.set(s,f));f.has(a)||(f.add(a),n=Dx.bind(null,n,s,a),s.then(n,n))}function jm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Rm(n,s,a,d,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=kr(-1,1),s.tag=2,is(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var wx=U.ReactCurrentOwner,en=!1;function Wt(n,s,a,d){s.child=n===null?Zp(s,null,a,d):so(s,n.child,a,d)}function Dm(n,s,a,d,f){a=a.render;var y=s.ref;return oo(s,f),d=Vd(n,s,a,d,y,f),a=Od(),n!==null&&!en?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Sr(n,s,f)):(nt&&a&&xd(s),s.flags|=1,Wt(n,s,d,f),s.child)}function Mm(n,s,a,d,f){if(n===null){var y=a.type;return typeof y=="function"&&!ph(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=y,Lm(n,s,y,d,f)):(n=Ac(a.type,null,d,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,(n.lanes&f)===0){var x=y.memoizedProps;if(a=a.compare,a=a!==null?a:ma,a(x,d)&&n.ref===s.ref)return Sr(n,s,f)}return s.flags|=1,n=ds(y,d),n.ref=s.ref,n.return=s,s.child=n}function Lm(n,s,a,d,f){if(n!==null){var y=n.memoizedProps;if(ma(y,d)&&n.ref===s.ref)if(en=!1,s.pendingProps=d=y,(n.lanes&f)!==0)(n.flags&131072)!==0&&(en=!0);else return s.lanes=n.lanes,Sr(n,s,f)}return Kd(n,s,a,d,f)}function Vm(n,s,a){var d=s.pendingProps,f=d.children,y=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(uo,hn),hn|=a;else{if((a&1073741824)===0)return n=y!==null?y.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Xe(uo,hn),hn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:a,Xe(uo,hn),hn|=d}else y!==null?(d=y.baseLanes|a,s.memoizedState=null):d=a,Xe(uo,hn),hn|=d;return Wt(n,s,f,a),s.child}function Om(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Kd(n,s,a,d,f){var y=Zt(a)?Gs:Lt.current;return y=eo(s,y),oo(s,f),a=Vd(n,s,a,d,y,f),d=Od(),n!==null&&!en?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Sr(n,s,f)):(nt&&d&&xd(s),s.flags|=1,Wt(n,s,a,f),s.child)}function Fm(n,s,a,d,f){if(Zt(a)){var y=!0;tc(s)}else y=!1;if(oo(s,f),s.stateNode===null)vc(n,s),km(s,a,d),qd(s,a,d,f),d=!0;else if(n===null){var x=s.stateNode,k=s.memoizedProps;x.props=k;var D=x.context,K=a.contextType;typeof K=="object"&&K!==null?K=wn(K):(K=Zt(a)?Gs:Lt.current,K=eo(s,K));var te=a.getDerivedStateFromProps,se=typeof te=="function"||typeof x.getSnapshotBeforeUpdate=="function";se||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==d||D!==K)&&Sm(s,x,d,K),ss=!1;var ee=s.memoizedState;x.state=ee,uc(s,d,x,f),D=s.memoizedState,k!==d||ee!==D||Jt.current||ss?(typeof te=="function"&&($d(s,a,te,d),D=s.memoizedState),(k=ss||Nm(s,a,k,d,ee,D,K))?(se||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=D),x.props=d,x.state=D,x.context=K,d=k):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{x=s.stateNode,tm(n,s),k=s.memoizedProps,K=s.type===s.elementType?k:On(s.type,k),x.props=K,se=s.pendingProps,ee=x.context,D=a.contextType,typeof D=="object"&&D!==null?D=wn(D):(D=Zt(a)?Gs:Lt.current,D=eo(s,D));var ue=a.getDerivedStateFromProps;(te=typeof ue=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==se||ee!==D)&&Sm(s,x,d,D),ss=!1,ee=s.memoizedState,x.state=ee,uc(s,d,x,f);var pe=s.memoizedState;k!==se||ee!==pe||Jt.current||ss?(typeof ue=="function"&&($d(s,a,ue,d),pe=s.memoizedState),(K=ss||Nm(s,a,K,d,ee,pe,D)||!1)?(te||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,pe,D),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,pe,D)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||k===n.memoizedProps&&ee===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&ee===n.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=pe),x.props=d,x.state=pe,x.context=D,d=K):(typeof x.componentDidUpdate!="function"||k===n.memoizedProps&&ee===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&ee===n.memoizedState||(s.flags|=1024),d=!1)}return Gd(n,s,a,d,y,f)}function Gd(n,s,a,d,f,y){Om(n,s);var x=(s.flags&128)!==0;if(!d&&!x)return f&&qp(s,a,!1),Sr(n,s,y);d=s.stateNode,wx.current=s;var k=x&&typeof a.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,n!==null&&x?(s.child=so(s,n.child,null,y),s.child=so(s,null,k,y)):Wt(n,s,k,y),s.memoizedState=d.state,f&&qp(s,a,!0),s.child}function Um(n){var s=n.stateNode;s.pendingContext?Bp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Bp(n,s.context,!1),Pd(n,s.containerInfo)}function zm(n,s,a,d,f){return ro(),Td(f),s.flags|=256,Wt(n,s,a,d),s.child}var Qd={dehydrated:null,treeContext:null,retryLane:0};function Yd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Bm(n,s,a){var d=s.pendingProps,f=rt.current,y=!1,x=(s.flags&128)!==0,k;if((k=x)||(k=n!==null&&n.memoizedState===null?!1:(f&2)!==0),k?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Xe(rt,f&1),n===null)return Ed(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(x=d.children,n=d.fallback,y?(d=s.mode,y=s.child,x={mode:"hidden",children:x},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=x):y=Pc(x,d,0,null),n=si(n,d,a,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=Yd(a),s.memoizedState=Qd,n):Xd(s,x));if(f=n.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return bx(n,s,x,d,k,f,a);if(y){y=d.fallback,x=s.mode,f=n.child,k=f.sibling;var D={mode:"hidden",children:d.children};return(x&1)===0&&s.child!==f?(d=s.child,d.childLanes=0,d.pendingProps=D,s.deletions=null):(d=ds(f,D),d.subtreeFlags=f.subtreeFlags&14680064),k!==null?y=ds(k,y):(y=si(y,x,a,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,x=n.child.memoizedState,x=x===null?Yd(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},y.memoizedState=x,y.childLanes=n.childLanes&~a,s.memoizedState=Qd,d}return y=n.child,n=y.sibling,d=ds(y,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=a),d.return=s,d.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=d,s.memoizedState=null,d}function Xd(n,s){return s=Pc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function _c(n,s,a,d){return d!==null&&Td(d),so(s,n.child,null,a),n=Xd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function bx(n,s,a,d,f,y,x){if(a)return s.flags&256?(s.flags&=-257,d=Hd(Error(t(422))),_c(n,s,x,d)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=d.fallback,f=s.mode,d=Pc({mode:"visible",children:d.children},f,0,null),y=si(y,f,x,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,(s.mode&1)!==0&&so(s,n.child,null,x),s.child.memoizedState=Yd(x),s.memoizedState=Qd,y);if((s.mode&1)===0)return _c(n,s,x,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var k=d.dgst;return d=k,y=Error(t(419)),d=Hd(y,d,void 0),_c(n,s,x,d)}if(k=(x&n.childLanes)!==0,en||k){if(d=Et,d!==null){switch(x&-x){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|x))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,Nr(n,f),zn(d,n,f,-1))}return fh(),d=Hd(Error(t(421))),_c(n,s,x,d)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=Mx.bind(null,n),f._reactRetry=s,null):(n=y.treeContext,dn=es(f.nextSibling),un=s,nt=!0,Vn=null,n!==null&&(vn[xn++]=Tr,vn[xn++]=Ir,vn[xn++]=Qs,Tr=n.id,Ir=n.overflow,Qs=s),s=Xd(s,d.children),s.flags|=4096,s)}function $m(n,s,a){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s),Sd(n.return,s,a)}function Jd(n,s,a,d,f){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=a,y.tailMode=f)}function qm(n,s,a){var d=s.pendingProps,f=d.revealOrder,y=d.tail;if(Wt(n,s,d.children,a),d=rt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$m(n,a,s);else if(n.tag===19)$m(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(Xe(rt,d),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&dc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Jd(s,!1,f,a,y);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&dc(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Jd(s,!0,a,null,y);break;case"together":Jd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function vc(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Sr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ei|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=ds(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ds(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Ex(n,s,a){switch(s.tag){case 3:Um(s),ro();break;case 5:sm(s);break;case 1:Zt(s.type)&&tc(s);break;case 4:Pd(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,f=s.memoizedProps.value;Xe(ac,d._currentValue),d._currentValue=f;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Xe(rt,rt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Bm(n,s,a):(Xe(rt,rt.current&1),n=Sr(n,s,a),n!==null?n.sibling:null);Xe(rt,rt.current&1);break;case 19:if(d=(a&s.childLanes)!==0,(n.flags&128)!==0){if(d)return qm(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Xe(rt,rt.current),d)break;return null;case 22:case 23:return s.lanes=0,Vm(n,s,a)}return Sr(n,s,a)}var Hm,Zd,Wm,Km;Hm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Zd=function(){},Wm=function(n,s,a,d){var f=n.memoizedProps;if(f!==d){n=s.stateNode,Js(tr.current);var y=null;switch(a){case"input":f=Ps(n,f),d=Ps(n,d),y=[];break;case"select":f=z({},f,{value:void 0}),d=z({},d,{value:void 0}),y=[];break;case"textarea":f=qo(n,f),d=qo(n,d),y=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=Jl)}Yo(a,d);var x;a=null;for(K in f)if(!d.hasOwnProperty(K)&&f.hasOwnProperty(K)&&f[K]!=null)if(K==="style"){var k=f[K];for(x in k)k.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?y||(y=[]):(y=y||[]).push(K,null));for(K in d){var D=d[K];if(k=f?.[K],d.hasOwnProperty(K)&&D!==k&&(D!=null||k!=null))if(K==="style")if(k){for(x in k)!k.hasOwnProperty(x)||D&&D.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in D)D.hasOwnProperty(x)&&k[x]!==D[x]&&(a||(a={}),a[x]=D[x])}else a||(y||(y=[]),y.push(K,a)),a=D;else K==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,k=k?k.__html:void 0,D!=null&&k!==D&&(y=y||[]).push(K,D)):K==="children"?typeof D!="string"&&typeof D!="number"||(y=y||[]).push(K,""+D):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(D!=null&&K==="onScroll"&&Je("scroll",n),y||k===D||(y=[])):(y=y||[]).push(K,D))}a&&(y=y||[]).push("style",a);var K=y;(s.updateQueue=K)&&(s.flags|=4)}},Km=function(n,s,a,d){a!==d&&(s.flags|=4)};function Aa(n,s){if(!nt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Ot(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,d=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=d,n.childLanes=a,s}function Tx(n,s,a){var d=s.pendingProps;switch(wd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(s),null;case 1:return Zt(s.type)&&ec(),Ot(s),null;case 3:return d=s.stateNode,ao(),Ze(Jt),Ze(Lt),Dd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(ic(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Vn!==null&&(uh(Vn),Vn=null))),Zd(n,s),Ot(s),null;case 5:jd(s);var f=Js(Ia.current);if(a=s.type,n!==null&&s.stateNode!=null)Wm(n,s,a,d,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return Ot(s),null}if(n=Js(tr.current),ic(s)){d=s.stateNode,a=s.type;var y=s.memoizedProps;switch(d[er]=s,d[xa]=y,n=(s.mode&1)!==0,a){case"dialog":Je("cancel",d),Je("close",d);break;case"iframe":case"object":case"embed":Je("load",d);break;case"video":case"audio":for(f=0;f<ya.length;f++)Je(ya[f],d);break;case"source":Je("error",d);break;case"img":case"image":case"link":Je("error",d),Je("load",d);break;case"details":Je("toggle",d);break;case"input":bi(d,y),Je("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},Je("invalid",d);break;case"textarea":Ti(d,y),Je("invalid",d)}Yo(a,y),f=null;for(var x in y)if(y.hasOwnProperty(x)){var k=y[x];x==="children"?typeof k=="string"?d.textContent!==k&&(y.suppressHydrationWarning!==!0&&Xl(d.textContent,k,n),f=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(y.suppressHydrationWarning!==!0&&Xl(d.textContent,k,n),f=["children",""+k]):o.hasOwnProperty(x)&&k!=null&&x==="onScroll"&&Je("scroll",d)}switch(a){case"input":hr(d),El(d,y,!0);break;case"textarea":hr(d),Ho(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Jl)}d=f,s.updateQueue=d,d!==null&&(s.flags|=4)}else{x=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=pt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=x.createElement(a,{is:d.is}):(n=x.createElement(a),a==="select"&&(x=n,d.multiple?x.multiple=!0:d.size&&(x.size=d.size))):n=x.createElementNS(n,a),n[er]=s,n[xa]=d,Hm(n,s,!1,!1),s.stateNode=n;e:{switch(x=Xo(a,d),a){case"dialog":Je("cancel",n),Je("close",n),f=d;break;case"iframe":case"object":case"embed":Je("load",n),f=d;break;case"video":case"audio":for(f=0;f<ya.length;f++)Je(ya[f],n);f=d;break;case"source":Je("error",n),f=d;break;case"img":case"image":case"link":Je("error",n),Je("load",n),f=d;break;case"details":Je("toggle",n),f=d;break;case"input":bi(n,d),f=Ps(n,d),Je("invalid",n);break;case"option":f=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},f=z({},d,{value:void 0}),Je("invalid",n);break;case"textarea":Ti(n,d),f=qo(n,d),Je("invalid",n);break;default:f=d}Yo(a,f),k=f;for(y in k)if(k.hasOwnProperty(y)){var D=k[y];y==="style"?Go(n,D):y==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Wo(n,D)):y==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&$r(n,D):typeof D=="number"&&$r(n,""+D):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?D!=null&&y==="onScroll"&&Je("scroll",n):D!=null&&M(n,y,D,x))}switch(a){case"input":hr(n),El(n,d,!1);break;case"textarea":hr(n),Ho(n);break;case"option":d.value!=null&&n.setAttribute("value",""+ze(d.value));break;case"select":n.multiple=!!d.multiple,y=d.value,y!=null?pr(n,!!d.multiple,y,!1):d.defaultValue!=null&&pr(n,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Jl)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ot(s),null;case 6:if(n&&s.stateNode!=null)Km(n,s,n.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(a=Js(Ia.current),Js(tr.current),ic(s)){if(d=s.stateNode,a=s.memoizedProps,d[er]=s,(y=d.nodeValue!==a)&&(n=un,n!==null))switch(n.tag){case 3:Xl(d.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Xl(d.nodeValue,a,(n.mode&1)!==0)}y&&(s.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[er]=s,s.stateNode=d}return Ot(s),null;case 13:if(Ze(rt),d=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&dn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Yp(),ro(),s.flags|=98560,y=!1;else if(y=ic(s),d!==null&&d.dehydrated!==null){if(n===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[er]=s}else ro(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ot(s),y=!1}else Vn!==null&&(uh(Vn),Vn=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(rt.current&1)!==0?_t===0&&(_t=3):fh())),s.updateQueue!==null&&(s.flags|=4),Ot(s),null);case 4:return ao(),Zd(n,s),n===null&&_a(s.stateNode.containerInfo),Ot(s),null;case 10:return kd(s.type._context),Ot(s),null;case 17:return Zt(s.type)&&ec(),Ot(s),null;case 19:if(Ze(rt),y=s.memoizedState,y===null)return Ot(s),null;if(d=(s.flags&128)!==0,x=y.rendering,x===null)if(d)Aa(y,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(x=dc(n),x!==null){for(s.flags|=128,Aa(y,!1),d=x.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=a,a=s.child;a!==null;)y=a,n=d,y.flags&=14680066,x=y.alternate,x===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,n=x.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Xe(rt,rt.current&1|2),s.child}n=n.sibling}y.tail!==null&&Ye()>ho&&(s.flags|=128,d=!0,Aa(y,!1),s.lanes=4194304)}else{if(!d)if(n=dc(x),n!==null){if(s.flags|=128,d=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Aa(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!nt)return Ot(s),null}else 2*Ye()-y.renderingStartTime>ho&&a!==1073741824&&(s.flags|=128,d=!0,Aa(y,!1),s.lanes=4194304);y.isBackwards?(x.sibling=s.child,s.child=x):(a=y.last,a!==null?a.sibling=x:s.child=x,y.last=x)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Ye(),s.sibling=null,a=rt.current,Xe(rt,d?a&1|2:a&1),s):(Ot(s),null);case 22:case 23:return hh(),d=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(hn&1073741824)!==0&&(Ot(s),s.subtreeFlags&6&&(s.flags|=8192)):Ot(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Ix(n,s){switch(wd(s),s.tag){case 1:return Zt(s.type)&&ec(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ao(),Ze(Jt),Ze(Lt),Dd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return jd(s),null;case 13:if(Ze(rt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ro()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ze(rt),null;case 4:return ao(),null;case 10:return kd(s.type._context),null;case 22:case 23:return hh(),null;case 24:return null;default:return null}}var xc=!1,Ft=!1,Nx=typeof WeakSet=="function"?WeakSet:Set,he=null;function co(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){ot(n,s,d)}else a.current=null}function eh(n,s,a){try{a()}catch(d){ot(n,s,d)}}var Gm=!1;function kx(n,s){if(hd=Xr,n=Np(),sd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var x=0,k=-1,D=-1,K=0,te=0,se=n,ee=null;t:for(;;){for(var ue;se!==a||f!==0&&se.nodeType!==3||(k=x+f),se!==y||d!==0&&se.nodeType!==3||(D=x+d),se.nodeType===3&&(x+=se.nodeValue.length),(ue=se.firstChild)!==null;)ee=se,se=ue;for(;;){if(se===n)break t;if(ee===a&&++K===f&&(k=x),ee===y&&++te===d&&(D=x),(ue=se.nextSibling)!==null)break;se=ee,ee=se.parentNode}se=ue}a=k===-1||D===-1?null:{start:k,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(fd={focusedElem:n,selectionRange:a},Xr=!1,he=s;he!==null;)if(s=he,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,he=n;else for(;he!==null;){s=he;try{var pe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ge=pe.memoizedProps,lt=pe.memoizedState,$=s.stateNode,V=$.getSnapshotBeforeUpdate(s.elementType===s.type?ge:On(s.type,ge),lt);$.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var W=s.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){ot(s,s.return,oe)}if(n=s.sibling,n!==null){n.return=s.return,he=n;break}he=s.return}return pe=Gm,Gm=!1,pe}function Pa(n,s,a){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&n)===n){var y=f.destroy;f.destroy=void 0,y!==void 0&&eh(s,a,y)}f=f.next}while(f!==d)}}function wc(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var d=a.create;a.destroy=d()}a=a.next}while(a!==s)}}function th(n){var s=n.ref;if(s!==null){var a=n.stateNode;n.tag,n=a,typeof s=="function"?s(n):s.current=n}}function Qm(n){var s=n.alternate;s!==null&&(n.alternate=null,Qm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[er],delete s[xa],delete s[yd],delete s[cx],delete s[ux])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Ym(n){return n.tag===5||n.tag===3||n.tag===4}function Xm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ym(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function nh(n,s,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Jl));else if(d!==4&&(n=n.child,n!==null))for(nh(n,s,a),n=n.sibling;n!==null;)nh(n,s,a),n=n.sibling}function rh(n,s,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(rh(n,s,a),n=n.sibling;n!==null;)rh(n,s,a),n=n.sibling}var At=null,Fn=!1;function os(n,s,a){for(a=a.child;a!==null;)Jm(n,s,a),a=a.sibling}function Jm(n,s,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Us,a)}catch{}switch(a.tag){case 5:Ft||co(a,s);case 6:var d=At,f=Fn;At=null,os(n,s,a),At=d,Fn=f,At!==null&&(Fn?(n=At,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):At.removeChild(a.stateNode));break;case 18:At!==null&&(Fn?(n=At,a=a.stateNode,n.nodeType===8?gd(n.parentNode,a):n.nodeType===1&&gd(n,a),Dn(n)):gd(At,a.stateNode));break;case 4:d=At,f=Fn,At=a.stateNode.containerInfo,Fn=!0,os(n,s,a),At=d,Fn=f;break;case 0:case 11:case 14:case 15:if(!Ft&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var y=f,x=y.destroy;y=y.tag,x!==void 0&&((y&2)!==0||(y&4)!==0)&&eh(a,s,x),f=f.next}while(f!==d)}os(n,s,a);break;case 1:if(!Ft&&(co(a,s),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(k){ot(a,s,k)}os(n,s,a);break;case 21:os(n,s,a);break;case 22:a.mode&1?(Ft=(d=Ft)||a.memoizedState!==null,os(n,s,a),Ft=d):os(n,s,a);break;default:os(n,s,a)}}function Zm(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Nx),s.forEach(function(d){var f=Lx.bind(null,n,d);a.has(d)||(a.add(d),d.then(f,f))})}}function Un(n,s){var a=s.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var y=n,x=s,k=x;e:for(;k!==null;){switch(k.tag){case 5:At=k.stateNode,Fn=!1;break e;case 3:At=k.stateNode.containerInfo,Fn=!0;break e;case 4:At=k.stateNode.containerInfo,Fn=!0;break e}k=k.return}if(At===null)throw Error(t(160));Jm(y,x,f),At=null,Fn=!1;var D=f.alternate;D!==null&&(D.return=null),f.return=null}catch(K){ot(f,s,K)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)eg(s,n),s=s.sibling}function eg(n,s){var a=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Un(s,n),rr(n),d&4){try{Pa(3,n,n.return),wc(3,n)}catch(ge){ot(n,n.return,ge)}try{Pa(5,n,n.return)}catch(ge){ot(n,n.return,ge)}}break;case 1:Un(s,n),rr(n),d&512&&a!==null&&co(a,a.return);break;case 5:if(Un(s,n),rr(n),d&512&&a!==null&&co(a,a.return),n.flags&32){var f=n.stateNode;try{$r(f,"")}catch(ge){ot(n,n.return,ge)}}if(d&4&&(f=n.stateNode,f!=null)){var y=n.memoizedProps,x=a!==null?a.memoizedProps:y,k=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{k==="input"&&y.type==="radio"&&y.name!=null&&Bo(f,y),Xo(k,x);var K=Xo(k,y);for(x=0;x<D.length;x+=2){var te=D[x],se=D[x+1];te==="style"?Go(f,se):te==="dangerouslySetInnerHTML"?Wo(f,se):te==="children"?$r(f,se):M(f,te,se,K)}switch(k){case"input":$o(f,y);break;case"textarea":Ii(f,y);break;case"select":var ee=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var ue=y.value;ue!=null?pr(f,!!y.multiple,ue,!1):ee!==!!y.multiple&&(y.defaultValue!=null?pr(f,!!y.multiple,y.defaultValue,!0):pr(f,!!y.multiple,y.multiple?[]:"",!1))}f[xa]=y}catch(ge){ot(n,n.return,ge)}}break;case 6:if(Un(s,n),rr(n),d&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,y=n.memoizedProps;try{f.nodeValue=y}catch(ge){ot(n,n.return,ge)}}break;case 3:if(Un(s,n),rr(n),d&4&&a!==null&&a.memoizedState.isDehydrated)try{Dn(s.containerInfo)}catch(ge){ot(n,n.return,ge)}break;case 4:Un(s,n),rr(n);break;case 13:Un(s,n),rr(n),f=n.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(oh=Ye())),d&4&&Zm(n);break;case 22:if(te=a!==null&&a.memoizedState!==null,n.mode&1?(Ft=(K=Ft)||te,Un(s,n),Ft=K):Un(s,n),rr(n),d&8192){if(K=n.memoizedState!==null,(n.stateNode.isHidden=K)&&!te&&(n.mode&1)!==0)for(he=n,te=n.child;te!==null;){for(se=he=te;he!==null;){switch(ee=he,ue=ee.child,ee.tag){case 0:case 11:case 14:case 15:Pa(4,ee,ee.return);break;case 1:co(ee,ee.return);var pe=ee.stateNode;if(typeof pe.componentWillUnmount=="function"){d=ee,a=ee.return;try{s=d,pe.props=s.memoizedProps,pe.state=s.memoizedState,pe.componentWillUnmount()}catch(ge){ot(d,a,ge)}}break;case 5:co(ee,ee.return);break;case 22:if(ee.memoizedState!==null){rg(se);continue}}ue!==null?(ue.return=ee,he=ue):rg(se)}te=te.sibling}e:for(te=null,se=n;;){if(se.tag===5){if(te===null){te=se;try{f=se.stateNode,K?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(k=se.stateNode,D=se.memoizedProps.style,x=D!=null&&D.hasOwnProperty("display")?D.display:null,k.style.display=Ko("display",x))}catch(ge){ot(n,n.return,ge)}}}else if(se.tag===6){if(te===null)try{se.stateNode.nodeValue=K?"":se.memoizedProps}catch(ge){ot(n,n.return,ge)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===n)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===n)break e;for(;se.sibling===null;){if(se.return===null||se.return===n)break e;te===se&&(te=null),se=se.return}te===se&&(te=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Un(s,n),rr(n),d&4&&Zm(n);break;case 21:break;default:Un(s,n),rr(n)}}function rr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Ym(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&($r(f,""),d.flags&=-33);var y=Xm(n);rh(n,y,f);break;case 3:case 4:var x=d.stateNode.containerInfo,k=Xm(n);nh(n,k,x);break;default:throw Error(t(161))}}catch(D){ot(n,n.return,D)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Sx(n,s,a){he=n,tg(n)}function tg(n,s,a){for(var d=(n.mode&1)!==0;he!==null;){var f=he,y=f.child;if(f.tag===22&&d){var x=f.memoizedState!==null||xc;if(!x){var k=f.alternate,D=k!==null&&k.memoizedState!==null||Ft;k=xc;var K=Ft;if(xc=x,(Ft=D)&&!K)for(he=f;he!==null;)x=he,D=x.child,x.tag===22&&x.memoizedState!==null?sg(f):D!==null?(D.return=x,he=D):sg(f);for(;y!==null;)he=y,tg(y),y=y.sibling;he=f,xc=k,Ft=K}ng(n)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,he=y):ng(n)}}function ng(n){for(;he!==null;){var s=he;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ft||wc(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Ft)if(a===null)d.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:On(s.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&rm(s,y,d);break;case 3:var x=s.updateQueue;if(x!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}rm(s,x,a)}break;case 5:var k=s.stateNode;if(a===null&&s.flags&4){a=k;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var K=s.alternate;if(K!==null){var te=K.memoizedState;if(te!==null){var se=te.dehydrated;se!==null&&Dn(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ft||s.flags&512&&th(s)}catch(ee){ot(s,s.return,ee)}}if(s===n){he=null;break}if(a=s.sibling,a!==null){a.return=s.return,he=a;break}he=s.return}}function rg(n){for(;he!==null;){var s=he;if(s===n){he=null;break}var a=s.sibling;if(a!==null){a.return=s.return,he=a;break}he=s.return}}function sg(n){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{wc(4,s)}catch(D){ot(s,a,D)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var f=s.return;try{d.componentDidMount()}catch(D){ot(s,f,D)}}var y=s.return;try{th(s)}catch(D){ot(s,y,D)}break;case 5:var x=s.return;try{th(s)}catch(D){ot(s,x,D)}}}catch(D){ot(s,s.return,D)}if(s===n){he=null;break}var k=s.sibling;if(k!==null){k.return=s.return,he=k;break}he=s.return}}var Cx=Math.ceil,bc=U.ReactCurrentDispatcher,sh=U.ReactCurrentOwner,En=U.ReactCurrentBatchConfig,Be=0,Et=null,dt=null,Pt=0,hn=0,uo=ts(0),_t=0,ja=null,ei=0,Ec=0,ih=0,Ra=null,tn=null,oh=0,ho=1/0,Cr=null,Tc=!1,ah=null,as=null,Ic=!1,ls=null,Nc=0,Da=0,lh=null,kc=-1,Sc=0;function Kt(){return(Be&6)!==0?Ye():kc!==-1?kc:kc=Ye()}function cs(n){return(n.mode&1)===0?1:(Be&2)!==0&&Pt!==0?Pt&-Pt:hx.transition!==null?(Sc===0&&(Sc=Bs()),Sc):(n=Ve,n!==0||(n=window.event,n=n===void 0?16:la(n.type)),n)}function zn(n,s,a,d){if(50<Da)throw Da=0,lh=null,Error(t(185));Kr(n,a,d),((Be&2)===0||n!==Et)&&(n===Et&&((Be&2)===0&&(Ec|=a),_t===4&&us(n,Pt)),nn(n,d),a===1&&Be===0&&(s.mode&1)===0&&(ho=Ye()+500,nc&&rs()))}function nn(n,s){var a=n.callbackNode;yr(n,s);var d=zs(n,n===Et?Pt:0);if(d===0)a!==null&&ra(a),n.callbackNode=null,n.callbackPriority=0;else if(s=d&-d,n.callbackPriority!==s){if(a!=null&&ra(a),s===1)n.tag===0?dx(og.bind(null,n)):Hp(og.bind(null,n)),ax(function(){(Be&6)===0&&rs()}),a=null;else{switch(Qr(d)){case 1:a=Fs;break;case 4:a=qr;break;case 16:a=gn;break;case 536870912:a=Sl;break;default:a=gn}a=pg(a,ig.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function ig(n,s){if(kc=-1,Sc=0,(Be&6)!==0)throw Error(t(327));var a=n.callbackNode;if(fo()&&n.callbackNode!==a)return null;var d=zs(n,n===Et?Pt:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||s)s=Cc(n,d);else{s=d;var f=Be;Be|=2;var y=lg();(Et!==n||Pt!==s)&&(Cr=null,ho=Ye()+500,ni(n,s));do try{jx();break}catch(k){ag(n,k)}while(!0);Nd(),bc.current=y,Be=f,dt!==null?s=0:(Et=null,Pt=0,s=_t)}if(s!==0){if(s===2&&(f=an(n),f!==0&&(d=f,s=ch(n,f))),s===1)throw a=ja,ni(n,0),us(n,d),nn(n,Ye()),a;if(s===6)us(n,d);else{if(f=n.current.alternate,(d&30)===0&&!Ax(f)&&(s=Cc(n,d),s===2&&(y=an(n),y!==0&&(d=y,s=ch(n,y))),s===1))throw a=ja,ni(n,0),us(n,d),nn(n,Ye()),a;switch(n.finishedWork=f,n.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:ri(n,tn,Cr);break;case 3:if(us(n,d),(d&130023424)===d&&(s=oh+500-Ye(),10<s)){if(zs(n,0)!==0)break;if(f=n.suspendedLanes,(f&d)!==d){Kt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=md(ri.bind(null,n,tn,Cr),s);break}ri(n,tn,Cr);break;case 4:if(us(n,d),(d&4194240)===d)break;for(s=n.eventTimes,f=-1;0<d;){var x=31-qt(d);y=1<<x,x=s[x],x>f&&(f=x),d&=~y}if(d=f,d=Ye()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Cx(d/1960))-d,10<d){n.timeoutHandle=md(ri.bind(null,n,tn,Cr),d);break}ri(n,tn,Cr);break;case 5:ri(n,tn,Cr);break;default:throw Error(t(329))}}}return nn(n,Ye()),n.callbackNode===a?ig.bind(null,n):null}function ch(n,s){var a=Ra;return n.current.memoizedState.isDehydrated&&(ni(n,s).flags|=256),n=Cc(n,s),n!==2&&(s=tn,tn=a,s!==null&&uh(s)),n}function uh(n){tn===null?tn=n:tn.push.apply(tn,n)}function Ax(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],y=f.getSnapshot;f=f.value;try{if(!Ln(y(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function us(n,s){for(s&=~ih,s&=~Ec,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-qt(s),d=1<<a;n[a]=-1,s&=~d}}function og(n){if((Be&6)!==0)throw Error(t(327));fo();var s=zs(n,0);if((s&1)===0)return nn(n,Ye()),null;var a=Cc(n,s);if(n.tag!==0&&a===2){var d=an(n);d!==0&&(s=d,a=ch(n,d))}if(a===1)throw a=ja,ni(n,0),us(n,s),nn(n,Ye()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ri(n,tn,Cr),nn(n,Ye()),null}function dh(n,s){var a=Be;Be|=1;try{return n(s)}finally{Be=a,Be===0&&(ho=Ye()+500,nc&&rs())}}function ti(n){ls!==null&&ls.tag===0&&(Be&6)===0&&fo();var s=Be;Be|=1;var a=En.transition,d=Ve;try{if(En.transition=null,Ve=1,n)return n()}finally{Ve=d,En.transition=a,Be=s,(Be&6)===0&&rs()}}function hh(){hn=uo.current,Ze(uo)}function ni(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,ox(a)),dt!==null)for(a=dt.return;a!==null;){var d=a;switch(wd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&ec();break;case 3:ao(),Ze(Jt),Ze(Lt),Dd();break;case 5:jd(d);break;case 4:ao();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:kd(d.type._context);break;case 22:case 23:hh()}a=a.return}if(Et=n,dt=n=ds(n.current,null),Pt=hn=s,_t=0,ja=null,ih=Ec=ei=0,tn=Ra=null,Xs!==null){for(s=0;s<Xs.length;s++)if(a=Xs[s],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,y=a.pending;if(y!==null){var x=y.next;y.next=f,d.next=x}a.pending=d}Xs=null}return n}function ag(n,s){do{var a=dt;try{if(Nd(),hc.current=gc,fc){for(var d=st.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}fc=!1}if(Zs=0,bt=yt=st=null,Na=!1,ka=0,sh.current=null,a===null||a.return===null){_t=1,ja=s,dt=null;break}e:{var y=n,x=a.return,k=a,D=s;if(s=Pt,k.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var K=D,te=k,se=te.tag;if((te.mode&1)===0&&(se===0||se===11||se===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var ue=jm(x);if(ue!==null){ue.flags&=-257,Rm(ue,x,k,y,s),ue.mode&1&&Pm(y,K,s),s=ue,D=K;var pe=s.updateQueue;if(pe===null){var ge=new Set;ge.add(D),s.updateQueue=ge}else pe.add(D);break e}else{if((s&1)===0){Pm(y,K,s),fh();break e}D=Error(t(426))}}else if(nt&&k.mode&1){var lt=jm(x);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),Rm(lt,x,k,y,s),Td(lo(D,k));break e}}y=D=lo(D,k),_t!==4&&(_t=2),Ra===null?Ra=[y]:Ra.push(y),y=x;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var $=Cm(y,D,s);nm(y,$);break e;case 1:k=D;var V=y.type,W=y.stateNode;if((y.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(as===null||!as.has(W)))){y.flags|=65536,s&=-s,y.lanes|=s;var oe=Am(y,k,s);nm(y,oe);break e}}y=y.return}while(y!==null)}ug(a)}catch(xe){s=xe,dt===a&&a!==null&&(dt=a=a.return);continue}break}while(!0)}function lg(){var n=bc.current;return bc.current=gc,n===null?gc:n}function fh(){(_t===0||_t===3||_t===2)&&(_t=4),Et===null||(ei&268435455)===0&&(Ec&268435455)===0||us(Et,Pt)}function Cc(n,s){var a=Be;Be|=2;var d=lg();(Et!==n||Pt!==s)&&(Cr=null,ni(n,s));do try{Px();break}catch(f){ag(n,f)}while(!0);if(Nd(),Be=a,bc.current=d,dt!==null)throw Error(t(261));return Et=null,Pt=0,_t}function Px(){for(;dt!==null;)cg(dt)}function jx(){for(;dt!==null&&!Nl();)cg(dt)}function cg(n){var s=fg(n.alternate,n,hn);n.memoizedProps=n.pendingProps,s===null?ug(n):dt=s,sh.current=null}function ug(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Tx(a,s,hn),a!==null){dt=a;return}}else{if(a=Ix(a,s),a!==null){a.flags&=32767,dt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_t=6,dt=null;return}}if(s=s.sibling,s!==null){dt=s;return}dt=s=n}while(s!==null);_t===0&&(_t=5)}function ri(n,s,a){var d=Ve,f=En.transition;try{En.transition=null,Ve=1,Rx(n,s,a,d)}finally{En.transition=f,Ve=d}return null}function Rx(n,s,a,d){do fo();while(ls!==null);if((Be&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var y=a.lanes|a.childLanes;if(Ge(n,y),n===Et&&(dt=Et=null,Pt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ic||(Ic=!0,pg(gn,function(){return fo(),null})),y=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||y){y=En.transition,En.transition=null;var x=Ve;Ve=1;var k=Be;Be|=4,sh.current=null,kx(n,a),eg(a,n),Zv(fd),Xr=!!hd,fd=hd=null,n.current=a,Sx(a),Yu(),Be=k,Ve=x,En.transition=y}else n.current=a;if(Ic&&(Ic=!1,ls=n,Nc=f),y=n.pendingLanes,y===0&&(as=null),Cl(a.stateNode),nn(n,Ye()),s!==null)for(d=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(Tc)throw Tc=!1,n=ah,ah=null,n;return(Nc&1)!==0&&n.tag!==0&&fo(),y=n.pendingLanes,(y&1)!==0?n===lh?Da++:(Da=0,lh=n):Da=0,rs(),null}function fo(){if(ls!==null){var n=Qr(Nc),s=En.transition,a=Ve;try{if(En.transition=null,Ve=16>n?16:n,ls===null)var d=!1;else{if(n=ls,ls=null,Nc=0,(Be&6)!==0)throw Error(t(331));var f=Be;for(Be|=4,he=n.current;he!==null;){var y=he,x=y.child;if((he.flags&16)!==0){var k=y.deletions;if(k!==null){for(var D=0;D<k.length;D++){var K=k[D];for(he=K;he!==null;){var te=he;switch(te.tag){case 0:case 11:case 15:Pa(8,te,y)}var se=te.child;if(se!==null)se.return=te,he=se;else for(;he!==null;){te=he;var ee=te.sibling,ue=te.return;if(Qm(te),te===K){he=null;break}if(ee!==null){ee.return=ue,he=ee;break}he=ue}}}var pe=y.alternate;if(pe!==null){var ge=pe.child;if(ge!==null){pe.child=null;do{var lt=ge.sibling;ge.sibling=null,ge=lt}while(ge!==null)}}he=y}}if((y.subtreeFlags&2064)!==0&&x!==null)x.return=y,he=x;else e:for(;he!==null;){if(y=he,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Pa(9,y,y.return)}var $=y.sibling;if($!==null){$.return=y.return,he=$;break e}he=y.return}}var V=n.current;for(he=V;he!==null;){x=he;var W=x.child;if((x.subtreeFlags&2064)!==0&&W!==null)W.return=x,he=W;else e:for(x=V;he!==null;){if(k=he,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:wc(9,k)}}catch(xe){ot(k,k.return,xe)}if(k===x){he=null;break e}var oe=k.sibling;if(oe!==null){oe.return=k.return,he=oe;break e}he=k.return}}if(Be=f,rs(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Us,n)}catch{}d=!0}return d}finally{Ve=a,En.transition=s}}return!1}function dg(n,s,a){s=lo(a,s),s=Cm(n,s,1),n=is(n,s,1),s=Kt(),n!==null&&(Kr(n,1,s),nn(n,s))}function ot(n,s,a){if(n.tag===3)dg(n,n,a);else for(;s!==null;){if(s.tag===3){dg(s,n,a);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(as===null||!as.has(d))){n=lo(a,n),n=Am(s,n,1),s=is(s,n,1),n=Kt(),s!==null&&(Kr(s,1,n),nn(s,n));break}}s=s.return}}function Dx(n,s,a){var d=n.pingCache;d!==null&&d.delete(s),s=Kt(),n.pingedLanes|=n.suspendedLanes&a,Et===n&&(Pt&a)===a&&(_t===4||_t===3&&(Pt&130023424)===Pt&&500>Ye()-oh?ni(n,0):ih|=a),nn(n,s)}function hg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Mi,Mi<<=1,(Mi&130023424)===0&&(Mi=4194304)));var a=Kt();n=Nr(n,s),n!==null&&(Kr(n,s,a),nn(n,a))}function Mx(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),hg(n,a)}function Lx(n,s){var a=0;switch(n.tag){case 13:var d=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),hg(n,a)}var fg;fg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Jt.current)en=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return en=!1,Ex(n,s,a);en=(n.flags&131072)!==0}else en=!1,nt&&(s.flags&1048576)!==0&&Wp(s,sc,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;vc(n,s),n=s.pendingProps;var f=eo(s,Lt.current);oo(s,a),f=Vd(null,s,d,n,f,a);var y=Od();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zt(d)?(y=!0,tc(s)):y=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Ad(s),f.updater=yc,s.stateNode=f,f._reactInternals=s,qd(s,d,n,a),s=Gd(null,s,d,!0,y,a)):(s.tag=0,nt&&y&&xd(s),Wt(null,s,f,a),s=s.child),s;case 16:d=s.elementType;e:{switch(vc(n,s),n=s.pendingProps,f=d._init,d=f(d._payload),s.type=d,f=s.tag=Ox(d),n=On(d,n),f){case 0:s=Kd(null,s,d,n,a);break e;case 1:s=Fm(null,s,d,n,a);break e;case 11:s=Dm(null,s,d,n,a);break e;case 14:s=Mm(null,s,d,On(d.type,n),a);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:On(d,f),Kd(n,s,d,f,a);case 1:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:On(d,f),Fm(n,s,d,f,a);case 3:e:{if(Um(s),n===null)throw Error(t(387));d=s.pendingProps,y=s.memoizedState,f=y.element,tm(n,s),uc(s,d,null,a);var x=s.memoizedState;if(d=x.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){f=lo(Error(t(423)),s),s=zm(n,s,d,a,f);break e}else if(d!==f){f=lo(Error(t(424)),s),s=zm(n,s,d,a,f);break e}else for(dn=es(s.stateNode.containerInfo.firstChild),un=s,nt=!0,Vn=null,a=Zp(s,null,d,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ro(),d===f){s=Sr(n,s,a);break e}Wt(n,s,d,a)}s=s.child}return s;case 5:return sm(s),n===null&&Ed(s),d=s.type,f=s.pendingProps,y=n!==null?n.memoizedProps:null,x=f.children,pd(d,f)?x=null:y!==null&&pd(d,y)&&(s.flags|=32),Om(n,s),Wt(n,s,x,a),s.child;case 6:return n===null&&Ed(s),null;case 13:return Bm(n,s,a);case 4:return Pd(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=so(s,null,d,a):Wt(n,s,d,a),s.child;case 11:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:On(d,f),Dm(n,s,d,f,a);case 7:return Wt(n,s,s.pendingProps,a),s.child;case 8:return Wt(n,s,s.pendingProps.children,a),s.child;case 12:return Wt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(d=s.type._context,f=s.pendingProps,y=s.memoizedProps,x=f.value,Xe(ac,d._currentValue),d._currentValue=x,y!==null)if(Ln(y.value,x)){if(y.children===f.children&&!Jt.current){s=Sr(n,s,a);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var k=y.dependencies;if(k!==null){x=y.child;for(var D=k.firstContext;D!==null;){if(D.context===d){if(y.tag===1){D=kr(-1,a&-a),D.tag=2;var K=y.updateQueue;if(K!==null){K=K.shared;var te=K.pending;te===null?D.next=D:(D.next=te.next,te.next=D),K.pending=D}}y.lanes|=a,D=y.alternate,D!==null&&(D.lanes|=a),Sd(y.return,a,s),k.lanes|=a;break}D=D.next}}else if(y.tag===10)x=y.type===s.type?null:y.child;else if(y.tag===18){if(x=y.return,x===null)throw Error(t(341));x.lanes|=a,k=x.alternate,k!==null&&(k.lanes|=a),Sd(x,a,s),x=y.sibling}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===s){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}Wt(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,d=s.pendingProps.children,oo(s,a),f=wn(f),d=d(f),s.flags|=1,Wt(n,s,d,a),s.child;case 14:return d=s.type,f=On(d,s.pendingProps),f=On(d.type,f),Mm(n,s,d,f,a);case 15:return Lm(n,s,s.type,s.pendingProps,a);case 17:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:On(d,f),vc(n,s),s.tag=1,Zt(d)?(n=!0,tc(s)):n=!1,oo(s,a),km(s,d,f),qd(s,d,f,a),Gd(null,s,d,!0,n,a);case 19:return qm(n,s,a);case 22:return Vm(n,s,a)}throw Error(t(156,s.tag))};function pg(n,s){return Ri(n,s)}function Vx(n,s,a,d){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(n,s,a,d){return new Vx(n,s,a,d)}function ph(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ox(n){if(typeof n=="function")return ph(n)?1:0;if(n!=null){if(n=n.$$typeof,n===P)return 11;if(n===Ee)return 14}return 2}function ds(n,s){var a=n.alternate;return a===null?(a=Tn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Ac(n,s,a,d,f,y){var x=2;if(d=n,typeof n=="function")ph(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case A:return si(a.children,f,y,s);case b:x=8,f|=8;break;case N:return n=Tn(12,a,s,f|2),n.elementType=N,n.lanes=y,n;case T:return n=Tn(13,a,s,f),n.elementType=T,n.lanes=y,n;case ce:return n=Tn(19,a,s,f),n.elementType=ce,n.lanes=y,n;case me:return Pc(a,f,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case S:x=10;break e;case j:x=9;break e;case P:x=11;break e;case Ee:x=14;break e;case Pe:x=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Tn(x,a,s,f),s.elementType=n,s.type=d,s.lanes=y,s}function si(n,s,a,d){return n=Tn(7,n,d,s),n.lanes=a,n}function Pc(n,s,a,d){return n=Tn(22,n,d,s),n.elementType=me,n.lanes=a,n.stateNode={isHidden:!1},n}function mh(n,s,a){return n=Tn(6,n,null,s),n.lanes=a,n}function gh(n,s,a){return s=Tn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Fx(n,s,a,d,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wr(0),this.expirationTimes=Wr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wr(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function yh(n,s,a,d,f,y,x,k,D){return n=new Fx(n,s,a,k,D),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Tn(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ad(y),n}function Ux(n,s,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:d==null?null:""+d,children:n,containerInfo:s,implementation:a}}function mg(n){if(!n)return ns;n=n._reactInternals;e:{if(Cn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Zt(a))return $p(n,a,s)}return s}function gg(n,s,a,d,f,y,x,k,D){return n=yh(a,d,!0,n,f,y,x,k,D),n.context=mg(null),a=n.current,d=Kt(),f=cs(a),y=kr(d,f),y.callback=s??null,is(a,y,f),n.current.lanes=f,Kr(n,f,d),nn(n,d),n}function jc(n,s,a,d){var f=s.current,y=Kt(),x=cs(f);return a=mg(a),s.context===null?s.context=a:s.pendingContext=a,s=kr(y,x),s.payload={element:n},d=d===void 0?null:d,d!==null&&(s.callback=d),n=is(f,s,x),n!==null&&(zn(n,f,x,y),cc(n,f,x)),x}function Rc(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function yg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function _h(n,s){yg(n,s),(n=n.alternate)&&yg(n,s)}function zx(){return null}var _g=typeof reportError=="function"?reportError:function(n){console.error(n)};function vh(n){this._internalRoot=n}Dc.prototype.render=vh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));jc(n,s,null,null)},Dc.prototype.unmount=vh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ti(function(){jc(null,n,null,null)}),s[br]=null}};function Dc(n){this._internalRoot=n}Dc.prototype.unstable_scheduleHydration=function(n){if(n){var s=Dl();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Yn.length&&s!==0&&s<Yn[a].priority;a++);Yn.splice(a,0,n),a===0&&Vl(n)}};function xh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Mc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function vg(){}function Bx(n,s,a,d,f){if(f){if(typeof d=="function"){var y=d;d=function(){var K=Rc(x);y.call(K)}}var x=gg(s,d,n,0,null,!1,!1,"",vg);return n._reactRootContainer=x,n[br]=x.current,_a(n.nodeType===8?n.parentNode:n),ti(),x}for(;f=n.lastChild;)n.removeChild(f);if(typeof d=="function"){var k=d;d=function(){var K=Rc(D);k.call(K)}}var D=yh(n,0,!1,null,null,!1,!1,"",vg);return n._reactRootContainer=D,n[br]=D.current,_a(n.nodeType===8?n.parentNode:n),ti(function(){jc(s,D,a,d)}),D}function Lc(n,s,a,d,f){var y=a._reactRootContainer;if(y){var x=y;if(typeof f=="function"){var k=f;f=function(){var D=Rc(x);k.call(D)}}jc(s,x,n,f)}else x=Bx(a,s,n,f,d);return Rc(x)}jl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Hr(s.pendingLanes);a!==0&&(Gr(s,a|1),nn(s,Ye()),(Be&6)===0&&(ho=Ye()+500,rs()))}break;case 13:ti(function(){var d=Nr(n,1);if(d!==null){var f=Kt();zn(d,n,1,f)}}),_h(n,1)}},Li=function(n){if(n.tag===13){var s=Nr(n,134217728);if(s!==null){var a=Kt();zn(s,n,134217728,a)}_h(n,134217728)}},Rl=function(n){if(n.tag===13){var s=cs(n),a=Nr(n,s);if(a!==null){var d=Kt();zn(a,n,s,d)}_h(n,s)}},Dl=function(){return Ve},Ml=function(n,s){var a=Ve;try{return Ve=n,s()}finally{Ve=a}},ki=function(n,s,a){switch(s){case"input":if($o(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var d=a[s];if(d!==n&&d.form===n.form){var f=Zl(d);if(!f)throw Error(t(90));wi(d),$o(d,f)}}}break;case"textarea":Ii(n,a);break;case"select":s=a.value,s!=null&&pr(n,!!a.multiple,s,!1)}},Ms=dh,Zo=ti;var $x={usingClientEntryPoint:!1,Events:[wa,Ji,Zl,Gn,Jo,dh]},Ma={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qx={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=na(n),n===null?null:n.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||zx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{Us=Vc.inject(qx),on=Vc}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$x,rn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xh(s))throw Error(t(200));return Ux(n,s,null,a)},rn.createRoot=function(n,s){if(!xh(n))throw Error(t(299));var a=!1,d="",f=_g;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=yh(n,1,!1,null,null,a,!1,d,f),n[br]=s.current,_a(n.nodeType===8?n.parentNode:n),new vh(s)},rn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=na(s),n=n===null?null:n.stateNode,n},rn.flushSync=function(n){return ti(n)},rn.hydrate=function(n,s,a){if(!Mc(s))throw Error(t(200));return Lc(null,n,s,!0,a)},rn.hydrateRoot=function(n,s,a){if(!xh(n))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,y="",x=_g;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),s=gg(s,null,n,1,a??null,f,!1,y,x),n[br]=s.current,_a(n),d)for(n=0;n<d.length;n++)a=d[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Dc(s)},rn.render=function(n,s,a){if(!Mc(s))throw Error(t(200));return Lc(null,n,s,!1,a)},rn.unmountComponentAtNode=function(n){if(!Mc(n))throw Error(t(40));return n._reactRootContainer?(ti(function(){Lc(null,null,n,!1,function(){n._reactRootContainer=null,n[br]=null})}),!0):!1},rn.unstable_batchedUpdates=dh,rn.unstable_renderSubtreeIntoContainer=function(n,s,a,d){if(!Mc(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Lc(n,s,a,!1,d)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var kg;function ly(){if(kg)return Eh.exports;kg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Eh.exports=Xx(),Eh.exports}var Sg;function Jx(){if(Sg)return Oc;Sg=1;var r=ly();return Oc.createRoot=r.createRoot,Oc.hydrateRoot=r.hydrateRoot,Oc}var Zx=Jx();const ew=ay(Zx);var Cg={};const cy=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},tw=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],p=r[t++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},uy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,p=h?r[o+1]:0,m=o+2<r.length,v=m?r[o+2]:0,w=l>>2,I=(l&3)<<4|p>>4;let C=(p&15)<<2|v>>6,O=v&63;m||(O=64,h||(C=64)),i.push(t[w],t[I],t[C],t[O])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(cy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):tw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||p==null||v==null||I==null)throw new nw;const C=l<<2|p>>4;if(i.push(C),v!==64){const O=p<<4&240|v>>2;if(i.push(O),I!==64){const q=v<<6&192|I;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class nw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rw=function(r){const e=cy(r);return uy.encodeByteArray(e,!0)},ou=function(r){return rw(r).replace(/\./g,"")},dy=function(r){try{return uy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const iw=()=>sw().__FIREBASE_DEFAULTS__,ow=()=>{if(typeof process>"u"||typeof Cg>"u")return;const r=Cg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},aw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&dy(r[1]);return e&&JSON.parse(e)},Nu=()=>{try{return iw()||ow()||aw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},hy=r=>{var e,t;return(t=(e=Nu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},lw=r=>{const e=hy(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},fy=()=>{var r;return(r=Nu())===null||r===void 0?void 0:r.config},py=r=>{var e;return(e=Nu())===null||e===void 0?void 0:e[`_${r}`]};class cw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function uw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[ou(JSON.stringify(t)),ou(JSON.stringify(h)),""].join(".")}function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function hw(){var r;const e=(r=Nu())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function mw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gw(){const r=$t();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function yw(){return!hw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _w(){try{return typeof indexedDB=="object"}catch{return!1}}function vw(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}const xw="FirebaseError";class Ur extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=xw,Object.setPrototypeOf(this,Ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?ww(l,i):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new Ur(o,p,i)}}function ww(r,e){return r.replace(bw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const bw=/\{\$([^}]+)}/g;function Ew(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function au(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Ag(l)&&Ag(h)){if(!au(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Ag(r){return r!==null&&typeof r=="object"}function ul(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Oa(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Fa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function Tw(r,e){const t=new Iw(r,e);return t.subscribe.bind(t)}class Iw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Nw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Nh),o.error===void 0&&(o.error=Nh),o.complete===void 0&&(o.complete=Nh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nw(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Nh(){}function kt(r){return r&&r._delegate?r._delegate:r}class fi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const oi="[DEFAULT]";class kw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new cw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cw(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Sw(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sw(r){return r===oi?void 0:r}function Cw(r){return r.instantiationMode==="EAGER"}class Aw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Oe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Oe||(Oe={}));const Pw={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},jw=Oe.INFO,Rw={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},Dw=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=Rw[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yf{constructor(e){this.name=e,this._logLevel=jw,this._logHandler=Dw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Pw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const Mw=(r,e)=>e.some(t=>r instanceof t);let Pg,jg;function Lw(){return Pg||(Pg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Vw(){return jg||(jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const my=new WeakMap,Fh=new WeakMap,gy=new WeakMap,kh=new WeakMap,_f=new WeakMap;function Ow(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(vs(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&my.set(t,r)}).catch(()=>{}),_f.set(e,r),e}function Fw(r){if(Fh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Fh.set(r,e)}let Uh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Fh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||gy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Uw(r){Uh=r(Uh)}function zw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Sh(this),e,...t);return gy.set(i,e.sort?e.sort():[e]),vs(i)}:Vw().includes(r)?function(...e){return r.apply(Sh(this),e),vs(my.get(this))}:function(...e){return vs(r.apply(Sh(this),e))}}function Bw(r){return typeof r=="function"?zw(r):(r instanceof IDBTransaction&&Fw(r),Mw(r,Lw())?new Proxy(r,Uh):r)}function vs(r){if(r instanceof IDBRequest)return Ow(r);if(kh.has(r))return kh.get(r);const e=Bw(r);return e!==r&&(kh.set(r,e),_f.set(e,r)),e}const Sh=r=>_f.get(r);function $w(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),p=vs(h);return i&&h.addEventListener("upgradeneeded",m=>{i(vs(h.result),m.oldVersion,m.newVersion,vs(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),p.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const qw=["get","getKey","getAll","getAllKeys","count"],Hw=["put","add","delete","clear"],Ch=new Map;function Rg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ch.get(e))return Ch.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Hw.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||qw.includes(t)))return;const l=async function(h,...p){const m=this.transaction(h,o?"readwrite":"readonly");let v=m.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&m.done]))[0]};return Ch.set(e,l),l}Uw(r=>({...r,get:(e,t,i)=>Rg(e,t)||r.get(e,t,i),has:(e,t)=>!!Rg(e,t)||r.has(e,t)}));class Ww{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Kw(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Kw(r){const e=r.getComponent();return e?.type==="VERSION"}const zh="@firebase/app",Dg="0.10.13";const Mr=new yf("@firebase/app"),Gw="@firebase/app-compat",Qw="@firebase/analytics-compat",Yw="@firebase/analytics",Xw="@firebase/app-check-compat",Jw="@firebase/app-check",Zw="@firebase/auth",e1="@firebase/auth-compat",t1="@firebase/database",n1="@firebase/data-connect",r1="@firebase/database-compat",s1="@firebase/functions",i1="@firebase/functions-compat",o1="@firebase/installations",a1="@firebase/installations-compat",l1="@firebase/messaging",c1="@firebase/messaging-compat",u1="@firebase/performance",d1="@firebase/performance-compat",h1="@firebase/remote-config",f1="@firebase/remote-config-compat",p1="@firebase/storage",m1="@firebase/storage-compat",g1="@firebase/firestore",y1="@firebase/vertexai-preview",_1="@firebase/firestore-compat",v1="firebase",x1="10.14.1";const Bh="[DEFAULT]",w1={[zh]:"fire-core",[Gw]:"fire-core-compat",[Yw]:"fire-analytics",[Qw]:"fire-analytics-compat",[Jw]:"fire-app-check",[Xw]:"fire-app-check-compat",[Zw]:"fire-auth",[e1]:"fire-auth-compat",[t1]:"fire-rtdb",[n1]:"fire-data-connect",[r1]:"fire-rtdb-compat",[s1]:"fire-fn",[i1]:"fire-fn-compat",[o1]:"fire-iid",[a1]:"fire-iid-compat",[l1]:"fire-fcm",[c1]:"fire-fcm-compat",[u1]:"fire-perf",[d1]:"fire-perf-compat",[h1]:"fire-rc",[f1]:"fire-rc-compat",[p1]:"fire-gcs",[m1]:"fire-gcs-compat",[g1]:"fire-fst",[_1]:"fire-fst-compat",[y1]:"fire-vertex","fire-js":"fire-js",[v1]:"fire-js-all"};const lu=new Map,b1=new Map,$h=new Map;function Mg(r,e){try{r.container.addComponent(e)}catch(t){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Eo(r){const e=r.name;if($h.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;$h.set(e,r);for(const t of lu.values())Mg(t,r);for(const t of b1.values())Mg(t,r);return!0}function vf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function In(r){return r.settings!==void 0}const E1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new cl("app","Firebase",E1);class T1{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}const jo=x1;function yy(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Bh,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw xs.create("bad-app-name",{appName:String(o)});if(t||(t=fy()),!t)throw xs.create("no-options");const l=lu.get(o);if(l){if(au(t,l.options)&&au(i,l.config))return l;throw xs.create("duplicate-app",{appName:o})}const h=new Aw(o);for(const m of $h.values())h.addComponent(m);const p=new T1(t,i,h);return lu.set(o,p),p}function _y(r=Bh){const e=lu.get(r);if(!e&&r===Bh&&fy())return yy();if(!e)throw xs.create("no-app",{appName:r});return e}function ws(r,e,t){var i;let o=(i=w1[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(p.join(" "));return}Eo(new fi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const I1="firebase-heartbeat-database",N1=1,Ya="firebase-heartbeat-store";let Ah=null;function vy(){return Ah||(Ah=$w(I1,N1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ya)}catch(t){console.warn(t)}}}}).catch(r=>{throw xs.create("idb-open",{originalErrorMessage:r.message})})),Ah}async function k1(r){try{const t=(await vy()).transaction(Ya),i=await t.objectStore(Ya).get(xy(r));return await t.done,i}catch(e){if(e instanceof Ur)Mr.warn(e.message);else{const t=xs.create("idb-get",{originalErrorMessage:e?.message});Mr.warn(t.message)}}}async function Lg(r,e){try{const i=(await vy()).transaction(Ya,"readwrite");await i.objectStore(Ya).put(e,xy(r)),await i.done}catch(t){if(t instanceof Ur)Mr.warn(t.message);else{const i=xs.create("idb-set",{originalErrorMessage:t?.message});Mr.warn(i.message)}}}function xy(r){return`${r.name}!${r.options.appId}`}const S1=1024,C1=720*60*60*1e3;class A1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new j1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Vg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const p=new Date(h.date).valueOf();return Date.now()-p<=C1}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Mr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Vg(),{heartbeatsToSend:i,unsentEntries:o}=P1(this._heartbeatsCache.heartbeats),l=ou(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Mr.warn(t),""}}}function Vg(){return new Date().toISOString().substring(0,10)}function P1(r,e=S1){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Og(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Og(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class j1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _w()?vw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await k1(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Lg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Lg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Og(r){return ou(JSON.stringify({version:2,heartbeats:r})).length}function R1(r){Eo(new fi("platform-logger",e=>new Ww(e),"PRIVATE")),Eo(new fi("heartbeat",e=>new A1(e),"PRIVATE")),ws(zh,Dg,r),ws(zh,Dg,"esm2017"),ws("fire-js","")}R1("");function xf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function wy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D1=wy,by=new cl("auth","Firebase",wy());const cu=new yf("@firebase/auth");function M1(r,...e){cu.logLevel<=Oe.WARN&&cu.warn(`Auth (${jo}): ${r}`,...e)}function Yc(r,...e){cu.logLevel<=Oe.ERROR&&cu.error(`Auth (${jo}): ${r}`,...e)}function Nn(r,...e){throw bf(r,...e)}function Bn(r,...e){return bf(r,...e)}function wf(r,e,t){const i=Object.assign(Object.assign({},D1()),{[e]:t});return new cl("auth","Firebase",i).create(e,{appName:r.name})}function or(r){return wf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function L1(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Nn(r,"argument-error"),wf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return by.create(r,...e)}function Ne(r,e,...t){if(!r)throw bf(e,...t)}function Pr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Yc(e),new Error(e)}function Lr(r,e){r||Pr(e)}function qh(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function V1(){return Fg()==="http:"||Fg()==="https:"}function Fg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}function O1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V1()||pw()||"connection"in navigator)?navigator.onLine:!0}function F1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class dl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Lr(t>e,"Short delay should be less than long delay!"),this.isMobile=dw()||mw()}get(){return O1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ef(r,e){Lr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Ey{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const U1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const z1=new dl(3e4,6e4);function ks(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ss(r,e,t,i,o={}){return Ty(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const p=ul(Object.assign({key:r.config.apiKey},h)).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:m},l);return fw()||(v.referrerPolicy="no-referrer"),Ey.fetch()(Iy(r,r.config.apiHost,t,p),v)})}async function Ty(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},U1),e);try{const o=new $1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Fc(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const p=l.ok?h.errorMessage:h.error.message,[m,v]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fc(r,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw Fc(r,"email-already-in-use",h);if(m==="USER_DISABLED")throw Fc(r,"user-disabled",h);const w=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw wf(r,w,v);Nn(r,w)}}catch(o){if(o instanceof Ur)throw o;Nn(r,"network-request-failed",{message:String(o)})}}async function hl(r,e,t,i,o={}){const l=await Ss(r,e,t,i,o);return"mfaPendingCredential"in l&&Nn(r,"multi-factor-auth-required",{_serverResponse:l}),l}function Iy(r,e,t,i){const o=`${e}${t}?${i}`;return r.config.emulator?Ef(r.config,o):`${r.config.apiScheme}://${o}`}function B1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Bn(this.auth,"network-request-failed")),z1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fc(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Bn(r,e,i);return o.customData._tokenResponse=t,o}function Ug(r){return r!==void 0&&r.enterprise!==void 0}class q1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return B1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function H1(r,e){return Ss(r,"GET","/v2/recaptchaConfig",ks(r,e))}async function W1(r,e){return Ss(r,"POST","/v1/accounts:delete",e)}async function Ny(r,e){return Ss(r,"POST","/v1/accounts:lookup",e)}function qa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K1(r,e=!1){const t=kt(r),i=await t.getIdToken(e),o=Tf(i);Ne(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:i,authTime:qa(Ph(o.auth_time)),issuedAtTime:qa(Ph(o.iat)),expirationTime:qa(Ph(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ph(r){return Number(r)*1e3}function Tf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Yc("JWT malformed, contained fewer than 3 sections"),null;try{const o=dy(t);return o?JSON.parse(o):(Yc("Failed to decode base64 JWT payload"),null)}catch(o){return Yc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function zg(r){const e=Tf(r);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Xa(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ur&&G1(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function G1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class Q1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Hh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qa(this.lastLoginAt),this.creationTime=qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function uu(r){var e;const t=r.auth,i=await r.getIdToken(),o=await Xa(r,Ny(t,{idToken:i}));Ne(o?.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?ky(l.providerUserInfo):[],p=X1(r.providerData,h),m=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!p?.length,w=m?v:!1,I={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new Hh(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,I)}async function Y1(r){const e=kt(r);await uu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function X1(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function ky(r){return r.map(e=>{var{providerId:t}=e,i=xf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function J1(r,e){const t=await Ty(r,{},async()=>{const i=ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=Iy(r,o,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();return p["Content-Type"]="application/x-www-form-urlencoded",Ey.fetch()(h,{method:"POST",headers:p,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Z1(r,e){return Ss(r,"POST","/v2/accounts:revokeToken",ks(r,e))}class yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=zg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await J1(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new yo;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ne(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ne(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yo,this.toJSON())}_performRefresh(){return Pr("not implemented")}}function fs(r,e){Ne(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class jr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=xf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Q1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Hh(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Xa(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return K1(this,e)}reload(){return Y1(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await uu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(or(this.auth));const e=await this.getIdToken();return await Xa(this,W1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,p,m,v,w;const I=(i=t.displayName)!==null&&i!==void 0?i:void 0,C=(o=t.email)!==null&&o!==void 0?o:void 0,O=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,q=(h=t.photoURL)!==null&&h!==void 0?h:void 0,H=(p=t.tenantId)!==null&&p!==void 0?p:void 0,L=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,X=(v=t.createdAt)!==null&&v!==void 0?v:void 0,F=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:M,emailVerified:U,isAnonymous:Z,providerData:ie,stsTokenManager:A}=t;Ne(M&&A,e,"internal-error");const b=yo.fromJSON(this.name,A);Ne(typeof M=="string",e,"internal-error"),fs(I,e.name),fs(C,e.name),Ne(typeof U=="boolean",e,"internal-error"),Ne(typeof Z=="boolean",e,"internal-error"),fs(O,e.name),fs(q,e.name),fs(H,e.name),fs(L,e.name),fs(X,e.name),fs(F,e.name);const N=new jr({uid:M,auth:e,email:C,emailVerified:U,displayName:I,isAnonymous:Z,photoURL:q,phoneNumber:O,tenantId:H,stsTokenManager:b,createdAt:X,lastLoginAt:F});return ie&&Array.isArray(ie)&&(N.providerData=ie.map(S=>Object.assign({},S))),L&&(N._redirectEventId=L),N}static async _fromIdTokenResponse(e,t,i=!1){const o=new yo;o.updateFromServerResponse(t);const l=new jr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await uu(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ne(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?ky(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,p=new yo;p.updateFromIdToken(i);const m=new jr({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Hh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(m,v),m}}const Bg=new Map;function Rr(r){Lr(r instanceof Function,"Expected a class definition");let e=Bg.get(r);return e?(Lr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Bg.set(r,e),e)}class Sy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Sy.type="NONE";const $g=Sy;function Xc(r,e,t){return`firebase:${r}:${e}:${t}`}class _o{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Xc(this.userKey,o.apiKey,l),this.fullPersistenceKey=Xc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new _o(Rr($g),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Rr($g);const h=Xc(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const w=await v._get(h);if(w){const I=jr._fromJSON(e,w);v!==l&&(p=I),l=v;break}}catch{}const m=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new _o(l,e,i):(l=m[0],p&&await l._set(h,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new _o(l,e,i))}}function qg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Dy(e))return"Blackberry";if(My(e))return"Webos";if(Ay(e))return"Safari";if((e.includes("chrome/")||Py(e))&&!e.includes("edge/"))return"Chrome";if(Ry(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function Cy(r=$t()){return/firefox\//i.test(r)}function Ay(r=$t()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Py(r=$t()){return/crios\//i.test(r)}function jy(r=$t()){return/iemobile/i.test(r)}function Ry(r=$t()){return/android/i.test(r)}function Dy(r=$t()){return/blackberry/i.test(r)}function My(r=$t()){return/webos/i.test(r)}function If(r=$t()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function eb(r=$t()){var e;return If(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tb(){return gw()&&document.documentMode===10}function Ly(r=$t()){return If(r)||Ry(r)||My(r)||Dy(r)||/windows phone/i.test(r)||jy(r)}function Vy(r,e=[]){let t;switch(r){case"Browser":t=qg($t());break;case"Worker":t=`${qg($t())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${jo}/${i}`}class nb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,p)=>{try{const m=e(l);h(m)}catch(m){p(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function rb(r,e={}){return Ss(r,"GET","/v2/passwordPolicy",ks(r,e))}const sb=6;class ib{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:sb,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class ob{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hg(this),this.idTokenSubscription=new Hg(this),this.beforeStateQueue=new nb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=by,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ny(this,{idToken:e}),i=await jr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(In(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o?._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===p)&&m?.user&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(or(this));const t=e?kt(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rb(this),t=new ib(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Z1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Rr(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[Rr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(p,this,"internal-error"),p.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&M1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function zr(r){return kt(r)}class Hg{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tw(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ku={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ab(r){ku=r}function Oy(r){return ku.loadJS(r)}function lb(){return ku.recaptchaEnterpriseScript}function cb(){return ku.gapiScript}function ub(r){return`__${r}${Math.floor(Math.random()*1e6)}`}const db="recaptcha-enterprise",hb="NO_RECAPTCHA";class fb{constructor(e){this.type=db,this.auth=zr(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,p)=>{H1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new q1(m);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,h(v.siteKey)}}).catch(m=>{p(m)})})}function o(l,h,p){const m=window.grecaptcha;Ug(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(v=>{h(v)}).catch(()=>{h(hb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,h)=>{i(this.auth).then(p=>{if(!t&&Ug(window.grecaptcha))o(p,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=lb();m.length!==0&&(m+=p),Oy(m).then(()=>{o(p,l,h)}).catch(v=>{h(v)})}}).catch(p=>{h(p)})})}}async function Wg(r,e,t,i=!1){const o=new fb(r);let l;try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const h=Object.assign({},e);return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Wh(r,e,t,i){var o;if(!((o=r._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Wg(r,e,t,t==="getOobCode");return i(r,l)}else return i(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Wg(r,e,t,t==="getOobCode");return i(r,h)}else return Promise.reject(l)})}function pb(r,e){const t=vf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(au(l,e??{}))return o;Nn(o,"already-initialized")}return t.initialize({options:e})}function mb(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Rr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function gb(r,e,t){const i=zr(r);Ne(i._canInitEmulator,i,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Fy(e),{host:h,port:p}=yb(e),m=p===null?"":`:${p}`;i.config.emulator={url:`${l}//${h}${m}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),_b()}function Fy(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function yb(r){const e=Fy(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Kg(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Kg(h)}}}function Kg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function _b(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Nf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pr("not implemented")}_getIdTokenResponse(e){return Pr("not implemented")}_linkToIdToken(e,t){return Pr("not implemented")}_getReauthenticationResolver(e){return Pr("not implemented")}}async function vb(r,e){return Ss(r,"POST","/v1/accounts:signUp",e)}async function xb(r,e){return hl(r,"POST","/v1/accounts:signInWithPassword",ks(r,e))}async function wb(r,e){return hl(r,"POST","/v1/accounts:signInWithEmailLink",ks(r,e))}async function bb(r,e){return hl(r,"POST","/v1/accounts:signInWithEmailLink",ks(r,e))}class Ja extends Nf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ja(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ja(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wh(e,t,"signInWithPassword",xb);case"emailLink":return wb(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wh(e,i,"signUpPassword",vb);case"emailLink":return bb(e,{idToken:t,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function vo(r,e){return hl(r,"POST","/v1/accounts:signInWithIdp",ks(r,e))}const Eb="http://localhost";class pi extends Nf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=xf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new pi(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return vo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,vo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vo(e,t)}buildRequest(){const e={requestUri:Eb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ul(t)}return e}}function Tb(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ib(r){const e=Oa(Fa(r)).link,t=e?Oa(Fa(e)).deep_link_id:null,i=Oa(Fa(r)).deep_link_id;return(i?Oa(Fa(i)).link:null)||i||t||e||r}class kf{constructor(e){var t,i,o,l,h,p;const m=Oa(Fa(e)),v=(t=m.apiKey)!==null&&t!==void 0?t:null,w=(i=m.oobCode)!==null&&i!==void 0?i:null,I=Tb((o=m.mode)!==null&&o!==void 0?o:null);Ne(v&&w&&I,"argument-error"),this.apiKey=v,this.operation=I,this.code=w,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=m.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(p=m.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=Ib(e);try{return new kf(t)}catch{return null}}}class Ro{constructor(){this.providerId=Ro.PROVIDER_ID}static credential(e,t){return Ja._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=kf.parseLink(t);return Ne(i,"argument-error"),Ja._fromEmailAndCode(e,i.code,i.tenantId)}}Ro.PROVIDER_ID="password";Ro.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ro.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Sf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fl extends Sf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ps extends fl{constructor(){super("facebook.com")}static credential(e){return pi._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";class Ar extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pi._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ar.credential(t,i)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";class ms extends fl{constructor(){super("github.com")}static credential(e){return pi._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.GITHUB_SIGN_IN_METHOD="github.com";ms.PROVIDER_ID="github.com";class gs extends fl{constructor(){super("twitter.com")}static credential(e,t){return pi._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return gs.credential(t,i)}catch{return null}}}gs.TWITTER_SIGN_IN_METHOD="twitter.com";gs.PROVIDER_ID="twitter.com";async function Uy(r,e){return hl(r,"POST","/v1/accounts:signUp",ks(r,e))}class Vr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await jr._fromIdTokenResponse(e,i,o),h=Gg(i);return new Vr({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Gg(i);return new Vr({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Gg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function Nb(r){var e;if(In(r.app))return Promise.reject(or(r));const t=zr(r);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Vr({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await Uy(t,{returnSecureToken:!0}),o=await Vr._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(o.user),o}class du extends Ur{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,du.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new du(e,t,i,o)}}function zy(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?du._fromErrorAndOperation(r,l,e,i):l})}async function kb(r,e,t=!1){const i=await Xa(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Vr._forOperation(r,"link",i)}async function Sb(r,e,t=!1){const{auth:i}=r;if(In(i.app))return Promise.reject(or(i));const o="reauthenticate";try{const l=await Xa(r,zy(i,o,e,r),t);Ne(l.idToken,i,"internal-error");const h=Tf(l.idToken);Ne(h,i,"internal-error");const{sub:p}=h;return Ne(r.uid===p,i,"user-mismatch"),Vr._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Nn(i,"user-mismatch"),l}}async function By(r,e,t=!1){if(In(r.app))return Promise.reject(or(r));const i="signIn",o=await zy(r,i,e),l=await Vr._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function Cb(r,e){return By(zr(r),e)}async function $y(r){const e=zr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ab(r,e,t){if(In(r.app))return Promise.reject(or(r));const i=zr(r),h=await Wh(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Uy).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&$y(r),m}),p=await Vr._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function Pb(r,e,t){return In(r.app)?Promise.reject(or(r)):Cb(kt(r),Ro.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&$y(r),i})}function jb(r,e,t,i){return kt(r).onIdTokenChanged(e,t,i)}function Rb(r,e,t){return kt(r).beforeAuthStateChanged(e,t)}function Db(r,e,t,i){return kt(r).onAuthStateChanged(e,t,i)}function Qg(r){return kt(r).signOut()}const hu="__sak";class qy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hu,"1"),this.storage.removeItem(hu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mb=1e3,Lb=10;class Hy extends qy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ly(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);tb()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Lb):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Mb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hy.type="LOCAL";const Vb=Hy;class Wy extends qy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Wy.type="SESSION";const Ky=Wy;function Ob(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Su{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Su(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(h).map(async v=>v(t.origin,l)),m=await Ob(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Su.receivers=[];function Cf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class Fb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((p,m)=>{const v=Cf("",20);o.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(I){const C=I;if(C.data.eventId===v)switch(C.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(C.data.response);break;default:clearTimeout(w),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function ar(){return window}function Ub(r){ar().location.href=r}function Gy(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function zb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Bb(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function $b(){return Gy()?self:null}const Qy="firebaseLocalStorageDb",qb=1,fu="firebaseLocalStorage",Yy="fbase_key";class pl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Cu(r,e){return r.transaction([fu],e?"readwrite":"readonly").objectStore(fu)}function Hb(){const r=indexedDB.deleteDatabase(Qy);return new pl(r).toPromise()}function Kh(){const r=indexedDB.open(Qy,qb);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(fu,{keyPath:Yy})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(fu)?e(i):(i.close(),await Hb(),e(await Kh()))})})}async function Yg(r,e,t){const i=Cu(r,!0).put({[Yy]:e,value:t});return new pl(i).toPromise()}async function Wb(r,e){const t=Cu(r,!1).get(e),i=await new pl(t).toPromise();return i===void 0?null:i.value}function Xg(r,e){const t=Cu(r,!0).delete(e);return new pl(t).toPromise()}const Kb=800,Gb=3;class Xy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Gb)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Su._getInstance($b()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await zb(),!this.activeServiceWorker)return;this.sender=new Fb(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Bb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kh();return await Yg(e,hu,"1"),await Xg(e,hu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Yg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Wb(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Xg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Cu(o,!1).getAll();return new pl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Kb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xy.type="LOCAL";const Qb=Xy;new dl(3e4,6e4);function Jy(r,e){return e?Rr(e):(Ne(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Af extends Nf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Yb(r){return By(r.auth,new Af(r),r.bypassAuthState)}function Xb(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),Sb(t,new Af(r),r.bypassAuthState)}async function Jb(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),kb(t,new Af(r),r.bypassAuthState)}class Zy{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:p}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yb;case"linkViaPopup":case"linkViaRedirect":return Jb;case"reauthViaPopup":case"reauthViaRedirect":return Xb;default:Nn(this.auth,"internal-error")}}resolve(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zb=new dl(2e3,1e4);async function e2(r,e,t){if(In(r.app))return Promise.reject(Bn(r,"operation-not-supported-in-this-environment"));const i=zr(r);L1(r,e,Sf);const o=Jy(i,t);return new ai(i,"signInViaPopup",e,o).executeNotNull()}class ai extends Zy{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ai.currentPopupAction&&ai.currentPopupAction.cancel(),ai.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Lr(this.filter.length===1,"Popup operations only handle one event");const e=Cf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ai.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Zb.get())};e()}}ai.currentPopupAction=null;const t2="pendingRedirect",Jc=new Map;class n2 extends Zy{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Jc.get(this.auth._key());if(!e){try{const i=await r2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Jc.set(this.auth._key(),e)}return this.bypassAuthState||Jc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r2(r,e){const t=o2(e),i=i2(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function s2(r,e){Jc.set(r._key(),e)}function i2(r){return Rr(r._redirectPersistence)}function o2(r){return Xc(t2,r.config.apiKey,r.name)}async function a2(r,e,t=!1){if(In(r.app))return Promise.reject(or(r));const i=zr(r),o=Jy(i,e),h=await new n2(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const l2=600*1e3;class c2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!u2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!e_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Bn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=l2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jg(e))}saveEventToCache(e){this.cachedEventUids.add(Jg(e)),this.lastProcessedEventTime=Date.now()}}function Jg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function e_({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function u2(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return e_(r);default:return!1}}async function d2(r,e={}){return Ss(r,"GET","/v1/projects",e)}const h2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f2=/^https?/;async function p2(r){if(r.config.emulator)return;const{authorizedDomains:e}=await d2(r);for(const t of e)try{if(m2(t))return}catch{}Nn(r,"unauthorized-domain")}function m2(r){const e=qh(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!f2.test(t))return!1;if(h2.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const g2=new dl(3e4,6e4);function Zg(){const r=ar().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function y2(r){return new Promise((e,t)=>{var i,o,l;function h(){Zg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zg(),t(Bn(r,"network-request-failed"))},timeout:g2.get()})}if(!((o=(i=ar().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ar().gapi)===null||l===void 0)&&l.load)h();else{const p=ub("iframefcb");return ar()[p]=()=>{gapi.load?h():t(Bn(r,"network-request-failed"))},Oy(`${cb()}?onload=${p}`).catch(m=>t(m))}}).catch(e=>{throw Zc=null,e})}let Zc=null;function _2(r){return Zc=Zc||y2(r),Zc}const v2=new dl(5e3,15e3),x2="__/auth/iframe",w2="emulator/auth/iframe",b2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},E2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function T2(r){const e=r.config;Ne(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Ef(e,w2):`https://${r.config.authDomain}/${x2}`,i={apiKey:e.apiKey,appName:r.name,v:jo},o=E2.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ul(i).slice(1)}`}async function I2(r){const e=await _2(r),t=ar().gapi;return Ne(t,r,"internal-error"),e.open({where:document.body,url:T2(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:b2,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Bn(r,"network-request-failed"),p=ar().setTimeout(()=>{l(h)},v2.get());function m(){ar().clearTimeout(p),o(i)}i.ping(m).then(m,()=>{l(h)})}))}const N2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},k2=500,S2=600,C2="_blank",A2="http://localhost";class e0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P2(r,e,t,i=k2,o=S2){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const m=Object.assign(Object.assign({},N2),{width:i.toString(),height:o.toString(),top:l,left:h}),v=$t().toLowerCase();t&&(p=Py(v)?C2:t),Cy(v)&&(e=e||A2,m.scrollbars="yes");const w=Object.entries(m).reduce((C,[O,q])=>`${C}${O}=${q},`,"");if(eb(v)&&p!=="_self")return j2(e||"",p),new e0(null);const I=window.open(e||"",p,w);Ne(I,r,"popup-blocked");try{I.focus()}catch{}return new e0(I)}function j2(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const R2="__/auth/handler",D2="emulator/auth/handler",M2=encodeURIComponent("fac");async function t0(r,e,t,i,o,l){Ne(r.config.authDomain,r,"auth-domain-config-required"),Ne(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:jo,eventId:o};if(e instanceof Sf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",Ew(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,I]of Object.entries({}))h[w]=I}if(e instanceof fl){const w=e.getScopes().filter(I=>I!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const m=await r._getAppCheckToken(),v=m?`#${M2}=${encodeURIComponent(m)}`:"";return`${L2(r)}?${ul(p).slice(1)}${v}`}function L2({config:r}){return r.emulator?Ef(r,D2):`https://${r.authDomain}/${R2}`}const jh="webStorageSupport";class V2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ky,this._completeRedirectFn=a2,this._overrideRedirectResult=s2}async _openPopup(e,t,i,o){var l;Lr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await t0(e,t,i,qh(),o);return P2(e,h,Cf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await t0(e,t,i,qh(),o);return Ub(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Lr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await I2(e),i=new c2(e);return t.register("authEvent",o=>(Ne(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jh,{type:jh},o=>{var l;const h=(l=o?.[0])===null||l===void 0?void 0:l[jh];h!==void 0&&t(!!h),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=p2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ly()||Ay()||If()}}const O2=V2;var n0="@firebase/auth",r0="1.7.9";class F2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function U2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function z2(r){Eo(new fi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Ne(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:h,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vy(r)},v=new ob(i,o,l,m);return mb(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Eo(new fi("auth-internal",e=>{const t=zr(e.getProvider("auth").getImmediate());return(i=>new F2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ws(n0,r0,U2(r)),ws(n0,r0,"esm2017")}const B2=300,$2=py("authIdTokenMaxAge")||B2;let s0=null;const q2=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>$2)return;const o=t?.token;s0!==o&&(s0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function H2(r=_y()){const e=vf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=pb(r,{popupRedirectResolver:O2,persistence:[Qb,Vb,Ky]}),i=py("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=q2(l.toString());Rb(t,h,()=>h(t.currentUser)),jb(t,p=>h(p))}}const o=hy("auth");return o&&gb(t,`http://${o}`),t}function W2(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}ab({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Bn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",W2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});z2("Browser");var K2="firebase",G2="10.14.1";ws(K2,G2,"app");var i0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ci,t_;(function(){var r;function e(A,b){function N(){}N.prototype=b.prototype,A.D=b.prototype,A.prototype=new N,A.prototype.constructor=A,A.C=function(S,j,P){for(var T=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)T[ce-2]=arguments[ce];return b.prototype[j].apply(S,T)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(A,b,N){N||(N=0);var S=Array(16);if(typeof b=="string")for(var j=0;16>j;++j)S[j]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(j=0;16>j;++j)S[j]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=A.g[0],N=A.g[1],j=A.g[2];var P=A.g[3],T=b+(P^N&(j^P))+S[0]+3614090360&4294967295;b=N+(T<<7&4294967295|T>>>25),T=P+(j^b&(N^j))+S[1]+3905402710&4294967295,P=b+(T<<12&4294967295|T>>>20),T=j+(N^P&(b^N))+S[2]+606105819&4294967295,j=P+(T<<17&4294967295|T>>>15),T=N+(b^j&(P^b))+S[3]+3250441966&4294967295,N=j+(T<<22&4294967295|T>>>10),T=b+(P^N&(j^P))+S[4]+4118548399&4294967295,b=N+(T<<7&4294967295|T>>>25),T=P+(j^b&(N^j))+S[5]+1200080426&4294967295,P=b+(T<<12&4294967295|T>>>20),T=j+(N^P&(b^N))+S[6]+2821735955&4294967295,j=P+(T<<17&4294967295|T>>>15),T=N+(b^j&(P^b))+S[7]+4249261313&4294967295,N=j+(T<<22&4294967295|T>>>10),T=b+(P^N&(j^P))+S[8]+1770035416&4294967295,b=N+(T<<7&4294967295|T>>>25),T=P+(j^b&(N^j))+S[9]+2336552879&4294967295,P=b+(T<<12&4294967295|T>>>20),T=j+(N^P&(b^N))+S[10]+4294925233&4294967295,j=P+(T<<17&4294967295|T>>>15),T=N+(b^j&(P^b))+S[11]+2304563134&4294967295,N=j+(T<<22&4294967295|T>>>10),T=b+(P^N&(j^P))+S[12]+1804603682&4294967295,b=N+(T<<7&4294967295|T>>>25),T=P+(j^b&(N^j))+S[13]+4254626195&4294967295,P=b+(T<<12&4294967295|T>>>20),T=j+(N^P&(b^N))+S[14]+2792965006&4294967295,j=P+(T<<17&4294967295|T>>>15),T=N+(b^j&(P^b))+S[15]+1236535329&4294967295,N=j+(T<<22&4294967295|T>>>10),T=b+(j^P&(N^j))+S[1]+4129170786&4294967295,b=N+(T<<5&4294967295|T>>>27),T=P+(N^j&(b^N))+S[6]+3225465664&4294967295,P=b+(T<<9&4294967295|T>>>23),T=j+(b^N&(P^b))+S[11]+643717713&4294967295,j=P+(T<<14&4294967295|T>>>18),T=N+(P^b&(j^P))+S[0]+3921069994&4294967295,N=j+(T<<20&4294967295|T>>>12),T=b+(j^P&(N^j))+S[5]+3593408605&4294967295,b=N+(T<<5&4294967295|T>>>27),T=P+(N^j&(b^N))+S[10]+38016083&4294967295,P=b+(T<<9&4294967295|T>>>23),T=j+(b^N&(P^b))+S[15]+3634488961&4294967295,j=P+(T<<14&4294967295|T>>>18),T=N+(P^b&(j^P))+S[4]+3889429448&4294967295,N=j+(T<<20&4294967295|T>>>12),T=b+(j^P&(N^j))+S[9]+568446438&4294967295,b=N+(T<<5&4294967295|T>>>27),T=P+(N^j&(b^N))+S[14]+3275163606&4294967295,P=b+(T<<9&4294967295|T>>>23),T=j+(b^N&(P^b))+S[3]+4107603335&4294967295,j=P+(T<<14&4294967295|T>>>18),T=N+(P^b&(j^P))+S[8]+1163531501&4294967295,N=j+(T<<20&4294967295|T>>>12),T=b+(j^P&(N^j))+S[13]+2850285829&4294967295,b=N+(T<<5&4294967295|T>>>27),T=P+(N^j&(b^N))+S[2]+4243563512&4294967295,P=b+(T<<9&4294967295|T>>>23),T=j+(b^N&(P^b))+S[7]+1735328473&4294967295,j=P+(T<<14&4294967295|T>>>18),T=N+(P^b&(j^P))+S[12]+2368359562&4294967295,N=j+(T<<20&4294967295|T>>>12),T=b+(N^j^P)+S[5]+4294588738&4294967295,b=N+(T<<4&4294967295|T>>>28),T=P+(b^N^j)+S[8]+2272392833&4294967295,P=b+(T<<11&4294967295|T>>>21),T=j+(P^b^N)+S[11]+1839030562&4294967295,j=P+(T<<16&4294967295|T>>>16),T=N+(j^P^b)+S[14]+4259657740&4294967295,N=j+(T<<23&4294967295|T>>>9),T=b+(N^j^P)+S[1]+2763975236&4294967295,b=N+(T<<4&4294967295|T>>>28),T=P+(b^N^j)+S[4]+1272893353&4294967295,P=b+(T<<11&4294967295|T>>>21),T=j+(P^b^N)+S[7]+4139469664&4294967295,j=P+(T<<16&4294967295|T>>>16),T=N+(j^P^b)+S[10]+3200236656&4294967295,N=j+(T<<23&4294967295|T>>>9),T=b+(N^j^P)+S[13]+681279174&4294967295,b=N+(T<<4&4294967295|T>>>28),T=P+(b^N^j)+S[0]+3936430074&4294967295,P=b+(T<<11&4294967295|T>>>21),T=j+(P^b^N)+S[3]+3572445317&4294967295,j=P+(T<<16&4294967295|T>>>16),T=N+(j^P^b)+S[6]+76029189&4294967295,N=j+(T<<23&4294967295|T>>>9),T=b+(N^j^P)+S[9]+3654602809&4294967295,b=N+(T<<4&4294967295|T>>>28),T=P+(b^N^j)+S[12]+3873151461&4294967295,P=b+(T<<11&4294967295|T>>>21),T=j+(P^b^N)+S[15]+530742520&4294967295,j=P+(T<<16&4294967295|T>>>16),T=N+(j^P^b)+S[2]+3299628645&4294967295,N=j+(T<<23&4294967295|T>>>9),T=b+(j^(N|~P))+S[0]+4096336452&4294967295,b=N+(T<<6&4294967295|T>>>26),T=P+(N^(b|~j))+S[7]+1126891415&4294967295,P=b+(T<<10&4294967295|T>>>22),T=j+(b^(P|~N))+S[14]+2878612391&4294967295,j=P+(T<<15&4294967295|T>>>17),T=N+(P^(j|~b))+S[5]+4237533241&4294967295,N=j+(T<<21&4294967295|T>>>11),T=b+(j^(N|~P))+S[12]+1700485571&4294967295,b=N+(T<<6&4294967295|T>>>26),T=P+(N^(b|~j))+S[3]+2399980690&4294967295,P=b+(T<<10&4294967295|T>>>22),T=j+(b^(P|~N))+S[10]+4293915773&4294967295,j=P+(T<<15&4294967295|T>>>17),T=N+(P^(j|~b))+S[1]+2240044497&4294967295,N=j+(T<<21&4294967295|T>>>11),T=b+(j^(N|~P))+S[8]+1873313359&4294967295,b=N+(T<<6&4294967295|T>>>26),T=P+(N^(b|~j))+S[15]+4264355552&4294967295,P=b+(T<<10&4294967295|T>>>22),T=j+(b^(P|~N))+S[6]+2734768916&4294967295,j=P+(T<<15&4294967295|T>>>17),T=N+(P^(j|~b))+S[13]+1309151649&4294967295,N=j+(T<<21&4294967295|T>>>11),T=b+(j^(N|~P))+S[4]+4149444226&4294967295,b=N+(T<<6&4294967295|T>>>26),T=P+(N^(b|~j))+S[11]+3174756917&4294967295,P=b+(T<<10&4294967295|T>>>22),T=j+(b^(P|~N))+S[2]+718787259&4294967295,j=P+(T<<15&4294967295|T>>>17),T=N+(P^(j|~b))+S[9]+3951481745&4294967295,A.g[0]=A.g[0]+b&4294967295,A.g[1]=A.g[1]+(j+(T<<21&4294967295|T>>>11))&4294967295,A.g[2]=A.g[2]+j&4294967295,A.g[3]=A.g[3]+P&4294967295}i.prototype.u=function(A,b){b===void 0&&(b=A.length);for(var N=b-this.blockSize,S=this.B,j=this.h,P=0;P<b;){if(j==0)for(;P<=N;)o(this,A,P),P+=this.blockSize;if(typeof A=="string"){for(;P<b;)if(S[j++]=A.charCodeAt(P++),j==this.blockSize){o(this,S),j=0;break}}else for(;P<b;)if(S[j++]=A[P++],j==this.blockSize){o(this,S),j=0;break}}this.h=j,this.o+=b},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var b=1;b<A.length-8;++b)A[b]=0;var N=8*this.o;for(b=A.length-8;b<A.length;++b)A[b]=N&255,N/=256;for(this.u(A),A=Array(16),b=N=0;4>b;++b)for(var S=0;32>S;S+=8)A[N++]=this.g[b]>>>S&255;return A};function l(A,b){var N=p;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=b(A)}function h(A,b){this.h=b;for(var N=[],S=!0,j=A.length-1;0<=j;j--){var P=A[j]|0;S&&P==b||(N[j]=P,S=!1)}this.g=N}var p={};function m(A){return-128<=A&&128>A?l(A,function(b){return new h([b|0],0>b?-1:0)}):new h([A|0],0>A?-1:0)}function v(A){if(isNaN(A)||!isFinite(A))return I;if(0>A)return L(v(-A));for(var b=[],N=1,S=0;A>=N;S++)b[S]=A/N|0,N*=4294967296;return new h(b,0)}function w(A,b){if(A.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(A.charAt(0)=="-")return L(w(A.substring(1),b));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=v(Math.pow(b,8)),S=I,j=0;j<A.length;j+=8){var P=Math.min(8,A.length-j),T=parseInt(A.substring(j,j+P),b);8>P?(P=v(Math.pow(b,P)),S=S.j(P).add(v(T))):(S=S.j(N),S=S.add(v(T)))}return S}var I=m(0),C=m(1),O=m(16777216);r=h.prototype,r.m=function(){if(H(this))return-L(this).m();for(var A=0,b=1,N=0;N<this.g.length;N++){var S=this.i(N);A+=(0<=S?S:4294967296+S)*b,b*=4294967296}return A},r.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(q(this))return"0";if(H(this))return"-"+L(this).toString(A);for(var b=v(Math.pow(A,6)),N=this,S="";;){var j=U(N,b).g;N=X(N,j.j(b));var P=((0<N.g.length?N.g[0]:N.h)>>>0).toString(A);if(N=j,q(N))return P+S;for(;6>P.length;)P="0"+P;S=P+S}},r.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function q(A){if(A.h!=0)return!1;for(var b=0;b<A.g.length;b++)if(A.g[b]!=0)return!1;return!0}function H(A){return A.h==-1}r.l=function(A){return A=X(this,A),H(A)?-1:q(A)?0:1};function L(A){for(var b=A.g.length,N=[],S=0;S<b;S++)N[S]=~A.g[S];return new h(N,~A.h).add(C)}r.abs=function(){return H(this)?L(this):this},r.add=function(A){for(var b=Math.max(this.g.length,A.g.length),N=[],S=0,j=0;j<=b;j++){var P=S+(this.i(j)&65535)+(A.i(j)&65535),T=(P>>>16)+(this.i(j)>>>16)+(A.i(j)>>>16);S=T>>>16,P&=65535,T&=65535,N[j]=T<<16|P}return new h(N,N[N.length-1]&-2147483648?-1:0)};function X(A,b){return A.add(L(b))}r.j=function(A){if(q(this)||q(A))return I;if(H(this))return H(A)?L(this).j(L(A)):L(L(this).j(A));if(H(A))return L(this.j(L(A)));if(0>this.l(O)&&0>A.l(O))return v(this.m()*A.m());for(var b=this.g.length+A.g.length,N=[],S=0;S<2*b;S++)N[S]=0;for(S=0;S<this.g.length;S++)for(var j=0;j<A.g.length;j++){var P=this.i(S)>>>16,T=this.i(S)&65535,ce=A.i(j)>>>16,Ee=A.i(j)&65535;N[2*S+2*j]+=T*Ee,F(N,2*S+2*j),N[2*S+2*j+1]+=P*Ee,F(N,2*S+2*j+1),N[2*S+2*j+1]+=T*ce,F(N,2*S+2*j+1),N[2*S+2*j+2]+=P*ce,F(N,2*S+2*j+2)}for(S=0;S<b;S++)N[S]=N[2*S+1]<<16|N[2*S];for(S=b;S<2*b;S++)N[S]=0;return new h(N,0)};function F(A,b){for(;(A[b]&65535)!=A[b];)A[b+1]+=A[b]>>>16,A[b]&=65535,b++}function M(A,b){this.g=A,this.h=b}function U(A,b){if(q(b))throw Error("division by zero");if(q(A))return new M(I,I);if(H(A))return b=U(L(A),b),new M(L(b.g),L(b.h));if(H(b))return b=U(A,L(b)),new M(L(b.g),b.h);if(30<A.g.length){if(H(A)||H(b))throw Error("slowDivide_ only works with positive integers.");for(var N=C,S=b;0>=S.l(A);)N=Z(N),S=Z(S);var j=ie(N,1),P=ie(S,1);for(S=ie(S,2),N=ie(N,2);!q(S);){var T=P.add(S);0>=T.l(A)&&(j=j.add(N),P=T),S=ie(S,1),N=ie(N,1)}return b=X(A,j.j(b)),new M(j,b)}for(j=I;0<=A.l(b);){for(N=Math.max(1,Math.floor(A.m()/b.m())),S=Math.ceil(Math.log(N)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),P=v(N),T=P.j(b);H(T)||0<T.l(A);)N-=S,P=v(N),T=P.j(b);q(P)&&(P=C),j=j.add(P),A=X(A,T)}return new M(j,A)}r.A=function(A){return U(this,A).h},r.and=function(A){for(var b=Math.max(this.g.length,A.g.length),N=[],S=0;S<b;S++)N[S]=this.i(S)&A.i(S);return new h(N,this.h&A.h)},r.or=function(A){for(var b=Math.max(this.g.length,A.g.length),N=[],S=0;S<b;S++)N[S]=this.i(S)|A.i(S);return new h(N,this.h|A.h)},r.xor=function(A){for(var b=Math.max(this.g.length,A.g.length),N=[],S=0;S<b;S++)N[S]=this.i(S)^A.i(S);return new h(N,this.h^A.h)};function Z(A){for(var b=A.g.length+1,N=[],S=0;S<b;S++)N[S]=A.i(S)<<1|A.i(S-1)>>>31;return new h(N,A.h)}function ie(A,b){var N=b>>5;b%=32;for(var S=A.g.length-N,j=[],P=0;P<S;P++)j[P]=0<b?A.i(P+N)>>>b|A.i(P+N+1)<<32-b:A.i(P+N);return new h(j,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,t_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,ci=h}).apply(typeof i0<"u"?i0:typeof self<"u"?self:typeof window<"u"?window:{});var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var n_,Ua,r_,eu,Gh,s_,i_,o_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uc=="object"&&Uc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(c,g){if(g)e:{var _=i;c=c.split(".");for(var E=0;E<c.length-1;E++){var B=c[E];if(!(B in _))break e;_=_[B]}c=c[c.length-1],E=_[c],g=g(E),g!=E&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function l(c,g){c instanceof String&&(c+="");var _=0,E=!1,B={next:function(){if(!E&&_<c.length){var G=_++;return{value:g(G,c[G]),done:!1}}return E=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return l(this,function(g,_){return _})}});var h=h||{},p=this||self;function m(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function v(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function w(c,g,_){return c.call.apply(c.bind,arguments)}function I(c,g,_){if(!c)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,E),c.apply(g,B)}}return function(){return c.apply(g,arguments)}}function C(c,g,_){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:I,C.apply(null,arguments)}function O(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var E=_.slice();return E.push.apply(E,arguments),c.apply(this,E)}}function q(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(E,B,G){for(var ae=Array(arguments.length-2),He=2;He<arguments.length;He++)ae[He-2]=arguments[He];return g.prototype[B].apply(E,ae)}}function H(c){const g=c.length;if(0<g){const _=Array(g);for(let E=0;E<g;E++)_[E]=c[E];return _}return[]}function L(c,g){for(let _=1;_<arguments.length;_++){const E=arguments[_];if(m(E)){const B=c.length||0,G=E.length||0;c.length=B+G;for(let ae=0;ae<G;ae++)c[B+ae]=E[ae]}else c.push(E)}}class X{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function F(c){return/^[\s\xa0]*$/.test(c)}function M(){var c=p.navigator;return c&&(c=c.userAgent)?c:""}function U(c){return U[" "](c),c}U[" "]=function(){};var Z=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function ie(c,g,_){for(const E in c)g.call(_,c[E],E,c)}function A(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function b(c){const g={};for(const _ in c)g[_]=c[_];return g}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(c,g){let _,E;for(let B=1;B<arguments.length;B++){E=arguments[B];for(_ in E)c[_]=E[_];for(let G=0;G<N.length;G++)_=N[G],Object.prototype.hasOwnProperty.call(E,_)&&(c[_]=E[_])}}function j(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function P(c){p.setTimeout(()=>{throw c},0)}function T(){var c=fe;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ce{constructor(){this.h=this.g=null}add(g,_){const E=Ee.get();E.set(g,_),this.h?this.h.next=E:this.g=E,this.h=E}}var Ee=new X(()=>new Pe,c=>c.reset());class Pe{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let me,re=!1,fe=new ce,z=()=>{const c=p.Promise.resolve(void 0);me=()=>{c.then(R)}};var R=()=>{for(var c;c=T();){try{c.h.call(c.g)}catch(_){P(_)}var g=Ee;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}re=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var we=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};p.addEventListener("test",_,g),p.removeEventListener("test",_,g)}catch{}return c})();function ve(c,g){if(le.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,E=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(Z){e:{try{U(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:je[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ve.aa.h.call(this)}}q(ve,le);var je={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Qe(c,g,_,E,B){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!E,this.ha=B,this.key=++ze,this.da=this.fa=!1}function xt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function hr(c){this.src=c,this.g={},this.h=0}hr.prototype.add=function(c,g,_,E,B){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var ae=Br(c,g,E,B);return-1<ae?(g=c[ae],_||(g.fa=!1)):(g=new Qe(g,this.src,G,!!E,B),g.fa=_,c.push(g)),g};function wi(c,g){var _=g.type;if(_ in c.g){var E=c.g[_],B=Array.prototype.indexOf.call(E,g,void 0),G;(G=0<=B)&&Array.prototype.splice.call(E,B,1),G&&(xt(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Br(c,g,_,E){for(var B=0;B<c.length;++B){var G=c[B];if(!G.da&&G.listener==g&&G.capture==!!_&&G.ha==E)return B}return-1}var Ps="closure_lm_"+(1e6*Math.random()|0),bi={};function Bo(c,g,_,E,B){if(Array.isArray(g)){for(var G=0;G<g.length;G++)Bo(c,g[G],_,E,B);return null}return _=Ho(_),c&&c[Me]?c.K(g,_,v(E)?!!E.capture:!1,B):$o(c,g,_,!1,E,B)}function $o(c,g,_,E,B,G){if(!g)throw Error("Invalid event type");var ae=v(B)?!!B.capture:!!B,He=Ti(c);if(He||(c[Ps]=He=new hr(c)),_=He.add(g,_,E,ae,G),_.proxy)return _;if(E=El(),_.proxy=E,E.src=c,E.listener=_,c.addEventListener)we||(B=ae),B===void 0&&(B=!1),c.addEventListener(g.toString(),E,B);else if(c.attachEvent)c.attachEvent(pr(g.toString()),E);else if(c.addListener&&c.removeListener)c.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return _}function El(){function c(_){return g.call(c.src,c.listener,_)}const g=qo;return c}function Ei(c,g,_,E,B){if(Array.isArray(g))for(var G=0;G<g.length;G++)Ei(c,g[G],_,E,B);else E=v(E)?!!E.capture:!!E,_=Ho(_),c&&c[Me]?(c=c.i,g=String(g).toString(),g in c.g&&(G=c.g[g],_=Br(G,_,E,B),-1<_&&(xt(G[_]),Array.prototype.splice.call(G,_,1),G.length==0&&(delete c.g[g],c.h--)))):c&&(c=Ti(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Br(g,_,E,B)),(_=-1<c?g[c]:null)&&fr(_))}function fr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Me])wi(g.i,c);else{var _=c.type,E=c.proxy;g.removeEventListener?g.removeEventListener(_,E,c.capture):g.detachEvent?g.detachEvent(pr(_),E):g.addListener&&g.removeListener&&g.removeListener(E),(_=Ti(g))?(wi(_,c),_.h==0&&(_.src=null,g[Ps]=null)):xt(c)}}}function pr(c){return c in bi?bi[c]:bi[c]="on"+c}function qo(c,g){if(c.da)c=!0;else{g=new ve(g,this);var _=c.listener,E=c.ha||c.src;c.fa&&fr(c),c=_.call(E,g)}return c}function Ti(c){return c=c[Ps],c instanceof hr?c:null}var Ii="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ho(c){return typeof c=="function"?c:(c[Ii]||(c[Ii]=function(g){return c.handleEvent(g)}),c[Ii])}function pt(){Q.call(this),this.i=new hr(this),this.M=this,this.F=null}q(pt,Q),pt.prototype[Me]=!0,pt.prototype.removeEventListener=function(c,g,_,E){Ei(this,c,g,_,E)};function mt(c,g){var _,E=c.F;if(E)for(_=[];E;E=E.F)_.push(E);if(c=c.M,E=g.type||g,typeof g=="string")g=new le(g,c);else if(g instanceof le)g.target=g.target||c;else{var B=g;g=new le(E,c),S(g,B)}if(B=!0,_)for(var G=_.length-1;0<=G;G--){var ae=g.g=_[G];B=mr(ae,E,!0,g)&&B}if(ae=g.g=c,B=mr(ae,E,!0,g)&&B,B=mr(ae,E,!1,g)&&B,_)for(G=0;G<_.length;G++)ae=g.g=_[G],B=mr(ae,E,!1,g)&&B}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],E=0;E<_.length;E++)xt(_[E]);delete c.g[g],c.h--}}this.F=null},pt.prototype.K=function(c,g,_,E){return this.i.add(String(c),g,!1,_,E)},pt.prototype.L=function(c,g,_,E){return this.i.add(String(c),g,!0,_,E)};function mr(c,g,_,E){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,G=0;G<g.length;++G){var ae=g[G];if(ae&&!ae.da&&ae.capture==_){var He=ae.listener,gt=ae.ha||ae.src;ae.fa&&wi(c.i,ae),B=He.call(gt,E)!==!1&&B}}return B&&!E.defaultPrevented}function Wo(c,g,_){if(typeof c=="function")_&&(c=C(c,_));else if(c&&typeof c.handleEvent=="function")c=C(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:p.setTimeout(c,g||0)}function $r(c){c.g=Wo(()=>{c.g=null,c.i&&(c.i=!1,$r(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class js extends Q{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:$r(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(c){Q.call(this),this.h=c,this.g={}}q(Rs,Q);var Ko=[];function Go(c){ie(c.g,function(g,_){this.g.hasOwnProperty(_)&&fr(g)},c),c.g={}}Rs.prototype.N=function(){Rs.aa.N.call(this),Go(this)},Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qo=p.JSON.stringify,Yo=p.JSON.parse,Xo=class{stringify(c){return p.JSON.stringify(c,void 0)}parse(c){return p.JSON.parse(c,void 0)}};function Ds(){}Ds.prototype.h=null;function Ni(c){return c.h||(c.h=c.i())}function ki(){}var mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kn(){le.call(this,"d")}q(Kn,le);function Si(){le.call(this,"c")}q(Si,le);var Gn={},Jo=null;function Ms(){return Jo=Jo||new pt}Gn.La="serverreachability";function Zo(c){le.call(this,Gn.La,c)}q(Zo,le);function gr(c){const g=Ms();mt(g,new Zo(g))}Gn.STAT_EVENT="statevent";function ea(c,g){le.call(this,Gn.STAT_EVENT,c),this.stat=g}q(ea,le);function at(c){const g=Ms();mt(g,new ea(g,c))}Gn.Ma="timingevent";function Ci(c,g){le.call(this,Gn.Ma,c),this.size=g}q(Ci,le);function kn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){c()},g)}function Ls(){this.g=!0}Ls.prototype.xa=function(){this.g=!1};function Vs(c,g,_,E,B,G){c.info(function(){if(c.g)if(G)for(var ae="",He=G.split("&"),gt=0;gt<He.length;gt++){var Fe=He[gt].split("=");if(1<Fe.length){var wt=Fe[0];Fe=Fe[1];var ut=wt.split("_");ae=2<=ut.length&&ut[1]=="type"?ae+(wt+"="+Fe+"&"):ae+(wt+"=redacted&")}}else ae=null;else ae=G;return"XMLHTTP REQ ("+E+") [attempt "+B+"]: "+g+`
`+_+`
`+ae})}function Ai(c,g,_,E,B,G,ae){c.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+B+"]: "+g+`
`+_+`
`+G+" "+ae})}function Sn(c,g,_,E){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Qu(c,_)+(E?" "+E:"")})}function ta(c,g){c.info(function(){return"TIMEOUT: "+g})}Ls.prototype.info=function(){};function Qu(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var E=_[c];if(!(2>E.length)){var B=E[1];if(Array.isArray(B)&&!(1>B.length)){var G=B[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ae=1;ae<B.length;ae++)B[ae]=""}}}}return Qo(_)}catch{return g}}var Pi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cn;function Os(){}q(Os,Ds),Os.prototype.g=function(){return new XMLHttpRequest},Os.prototype.i=function(){return{}},Cn=new Os;function An(c,g,_,E){this.j=c,this.i=g,this.l=_,this.R=E||1,this.U=new Rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Il}function Il(){this.i=null,this.g="",this.h=!1}var na={},ji={};function Ri(c,g,_){c.L=1,c.v=Gr(an(g)),c.m=_,c.P=!0,ra(c,null)}function ra(c,g){c.F=Date.now(),Ye(c),c.A=an(c.v);var _=c.A,E=c.R;Array.isArray(E)||(E=[String(E)]),Yr(_.i,"t",E),c.C=0,_=c.j.J,c.h=new Il,c.g=$l(c.j,_?g:null,!c.m),0<c.O&&(c.M=new js(C(c.Y,c,c.g),c.O)),g=c.U,_=c.g,E=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(Ko[0]=B.toString()),B=Ko);for(var G=0;G<B.length;G++){var ae=Bo(_,B[G],E||g.handleEvent,!1,g.h||g);if(!ae)break;g.g[ae.key]=ae}g=c.H?b(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),gr(),Vs(c.i,c.u,c.A,c.l,c.R,c.m)}An.prototype.ca=function(c){c=c.target;const g=this.M;g&&Xt(c)==3?g.j():this.Y(c)},An.prototype.Y=function(c){try{if(c==this.g)e:{const ut=Xt(this.g);var g=this.g.Ba();const _n=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||ca(this.g)))){this.J||ut!=4||g==7||(g==8||0>=_n?gr(3):gr(2)),Fs(this);var _=this.g.Z();this.X=_;t:if(Nl(this)){var E=ca(this.g);c="";var B=E.length,G=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),qr(this);var ae="";break t}this.h.i=new p.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,c+=this.h.i.decode(E[g],{stream:!(G&&g==B-1)});E.length=0,this.h.g+=c,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,Ai(this.i,this.u,this.A,this.l,this.R,ut,_),this.o){if(this.T&&!this.K){t:{if(this.g){var He,gt=this.g;if((He=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(He)){var Fe=He;break t}}Fe=null}if(_=Fe)Sn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sa(this,_);else{this.o=!1,this.s=3,at(12),gn(this),qr(this);break e}}if(this.P){_=!0;let cn;for(;!this.J&&this.C<ae.length;)if(cn=Yu(this,ae),cn==ji){ut==4&&(this.s=4,at(14),_=!1),Sn(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==na){this.s=4,at(15),Sn(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else Sn(this.i,this.l,cn,null),sa(this,cn);if(Nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||ae.length!=0||this.h.h||(this.s=1,at(16),_=!1),this.o=this.o&&_,!_)Sn(this.i,this.l,ae,"[Invalid Chunked Response]"),gn(this),qr(this);else if(0<ae.length&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.ba&&!wt.M&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),da(wt),wt.M=!0,at(11))}}else Sn(this.i,this.l,ae,null),sa(this,ae);ut==4&&gn(this),this.o&&!this.J&&(ut==4?qi(this.j,this):(this.o=!1,Ye(this)))}else Fi(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),gn(this),qr(this)}}}catch{}};function Nl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Yu(c,g){var _=c.C,E=g.indexOf(`
`,_);return E==-1?ji:(_=Number(g.substring(_,E)),isNaN(_)?na:(E+=1,E+_>g.length?ji:(g=g.slice(E,E+_),c.C=E+_,g)))}An.prototype.cancel=function(){this.J=!0,gn(this)};function Ye(c){c.S=Date.now()+c.I,kl(c,c.I)}function kl(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=kn(C(c.ba,c),g)}function Fs(c){c.B&&(p.clearTimeout(c.B),c.B=null)}An.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ta(this.i,this.A),this.L!=2&&(gr(),at(17)),gn(this),this.s=2,qr(this)):kl(this,this.S-c)};function qr(c){c.j.G==0||c.J||qi(c.j,c)}function gn(c){Fs(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Go(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function sa(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||qt(_.h,c))){if(!c.K&&qt(_.h,c)&&_.G==3){try{var E=_.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var B=E;if(B[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)$i(_),Mn(_);else break e;Bi(_),at(18)}}else _.za=B[1],0<_.za-_.T&&37500>B[2]&&_.F&&_.v==0&&!_.C&&(_.C=kn(C(_.Za,_),6e3));if(1>=Cl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else wr(_,11)}else if((c.K||_.g==c)&&$i(_),!F(g))for(B=_.Da.g.parse(g),g=0;g<B.length;g++){let Fe=B[g];if(_.T=Fe[0],Fe=Fe[1],_.G==2)if(Fe[0]=="c"){_.K=Fe[1],_.ia=Fe[2];const wt=Fe[3];wt!=null&&(_.la=wt,_.j.info("VER="+_.la));const ut=Fe[4];ut!=null&&(_.Aa=ut,_.j.info("SVER="+_.Aa));const _n=Fe[5];_n!=null&&typeof _n=="number"&&0<_n&&(E=1.5*_n,_.L=E,_.j.info("backChannelRequestTimeoutMs_="+E)),E=_;const cn=c.g;if(cn){const Ws=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ws){var G=E.h;G.g||Ws.indexOf("spdy")==-1&&Ws.indexOf("quic")==-1&&Ws.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(ia(G,G.h),G.h=null))}if(E.D){const Wi=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Wi&&(E.ya=Wi,Ge(E.I,E.D,Wi))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),E=_;var ae=c;if(E.qa=Bl(E,E.J?E.ia:null,E.W),ae.K){Al(E.h,ae);var He=ae,gt=E.L;gt&&(He.I=gt),He.B&&(Fs(He),Ye(He)),E.g=ae}else Hs(E);0<_.i.length&&Jn(_)}else Fe[0]!="stop"&&Fe[0]!="close"||wr(_,7);else _.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?wr(_,7):Ct(_):Fe[0]!="noop"&&_.l&&_.l.ta(Fe),_.v=0)}}gr(4)}catch{}}var Sl=class{constructor(c,g){this.g=c,this.map=g}};function Us(c){this.l=c||10,p.PerformanceNavigationTiming?(c=p.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function on(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Cl(c){return c.h?1:c.g?c.g.size:0}function qt(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function ia(c,g){c.g?c.g.add(g):c.h=g}function Al(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Us.prototype.cancel=function(){if(this.i=Pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Pl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return H(c.i)}function Di(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(m(c)){for(var g=[],_=c.length,E=0;E<_;E++)g.push(c[E]);return g}g=[],_=0;for(E in c)g[_++]=c[E];return g}function Mi(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(m(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const E in c)g[_++]=E;return g}}}function Hr(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(m(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=Mi(c),E=Di(c),B=E.length,G=0;G<B;G++)g.call(void 0,E[G],_&&_[G],c)}var zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xu(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var E=c[_].indexOf("="),B=null;if(0<=E){var G=c[_].substring(0,E);B=c[_].substring(E+1)}else G=c[_];g(G,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function yr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof yr){this.h=c.h,Bs(this,c.j),this.o=c.o,this.g=c.g,Wr(this,c.s),this.l=c.l;var g=c.i,_=new Qn;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Kr(this,_),this.m=c.m}else c&&(g=String(c).match(zs))?(this.h=!1,Bs(this,g[1]||"",!0),this.o=Ve(g[2]||""),this.g=Ve(g[3]||"",!0),Wr(this,g[4]),this.l=Ve(g[5]||"",!0),Kr(this,g[6]||"",!0),this.m=Ve(g[7]||"")):(this.h=!1,this.i=new Qn(null,this.h))}yr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Qr(g,Li,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Qr(g,Li,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Qr(_,_.charAt(0)=="/"?Dl:Rl,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Qr(_,oa)),c.join("")};function an(c){return new yr(c)}function Bs(c,g,_){c.j=_?Ve(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Wr(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Kr(c,g,_){g instanceof Qn?(c.i=g,Yn(c.i,c.h)):(_||(g=Qr(g,Ml)),c.i=new Qn(g,c.h))}function Ge(c,g,_){c.i.set(g,_)}function Gr(c){return Ge(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ve(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Qr(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,jl),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function jl(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Li=/[#\/\?@]/g,Rl=/[#\?:]/g,Dl=/[#\?]/g,Ml=/[#\?@]/g,oa=/#/g;function Qn(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function St(c){c.g||(c.g=new Map,c.h=0,c.i&&Xu(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=Qn.prototype,r.add=function(c,g){St(this),this.i=null,c=yn(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function Pn(c,g){St(c),g=yn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function jn(c,g){return St(c),g=yn(c,g),c.g.has(g)}r.forEach=function(c,g){St(this),this.g.forEach(function(_,E){_.forEach(function(B){c.call(g,B,E,this)},this)},this)},r.na=function(){St(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let E=0;E<g.length;E++){const B=c[E];for(let G=0;G<B.length;G++)_.push(g[E])}return _},r.V=function(c){St(this);let g=[];if(typeof c=="string")jn(this,c)&&(g=g.concat(this.g.get(yn(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},r.set=function(c,g){return St(this),this.i=null,c=yn(this,c),jn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Yr(c,g,_){Pn(c,g),0<_.length&&(c.i=null,c.g.set(yn(c,g),H(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var E=g[_];const G=encodeURIComponent(String(E)),ae=this.V(E);for(E=0;E<ae.length;E++){var B=G;ae[E]!==""&&(B+="="+encodeURIComponent(String(ae[E]))),c.push(B)}}return this.i=c.join("&")};function yn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Yn(c,g){g&&!c.j&&(St(c),c.i=null,c.g.forEach(function(_,E){var B=E.toLowerCase();E!=B&&(Pn(this,E),Yr(this,B,_))},c)),c.j=g}function Ju(c,g){const _=new Ls;if(p.Image){const E=new Image;E.onload=O(Yt,_,"TestLoadImage: loaded",!0,g,E),E.onerror=O(Yt,_,"TestLoadImage: error",!1,g,E),E.onabort=O(Yt,_,"TestLoadImage: abort",!1,g,E),E.ontimeout=O(Yt,_,"TestLoadImage: timeout",!1,g,E),p.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=c}else g(!1)}function Ll(c,g){const _=new Ls,E=new AbortController,B=setTimeout(()=>{E.abort(),Yt(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:E.signal}).then(G=>{clearTimeout(B),G.ok?Yt(_,"TestPingServer: ok",!0,g):Yt(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Yt(_,"TestPingServer: error",!1,g)})}function Yt(c,g,_,E,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),E(_)}catch{}}function Zu(){this.g=new Xo}function Vl(c,g,_){const E=_||"";try{Hr(c,function(B,G){let ae=B;v(B)&&(ae=Qo(B)),g.push(E+G+"="+encodeURIComponent(ae))})}catch(B){throw g.push(E+"type="+encodeURIComponent("_badmap")),B}}function _r(c){this.l=c.Ub||null,this.j=c.eb||!1}q(_r,Ds),_r.prototype.g=function(){return new $s(this.l,this.j)},_r.prototype.i=(function(c){return function(){return c}})({});function $s(c,g){pt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q($s,pt),r=$s.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Dn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||p).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rn(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Dn(this)),this.g&&(this.readyState=3,Dn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ol(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ol(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Rn(this):Dn(this),this.readyState==3&&Ol(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Rn(this))},r.Qa=function(c){this.g&&(this.response=c,Rn(this))},r.ga=function(){this.g&&Rn(this)};function Rn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Dn(c)}r.setRequestHeader=function(c,g){this.u.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Dn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty($s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function vr(c){let g="";return ie(c,function(_,E){g+=E,g+=":",g+=_,g+=`\r
`}),g}function Xr(c,g,_){e:{for(E in _){var E=!1;break e}E=!0}E||(_=vr(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ge(c,g,_))}function tt(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(tt,pt);var ed=/^https?$/i,aa=["POST","PUT"];r=tt.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,g,_,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cn.g(),this.v=this.o?Ni(this.o):Ni(Cn),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(G){qs(this,G);return}if(c=_||"",_=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var B in E)_.set(B,E[B]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const G of E.keys())_.set(G,E.get(G));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),B=p.FormData&&c instanceof p.FormData,!(0<=Array.prototype.indexOf.call(aa,g,void 0))||E||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ae]of _)this.g.setRequestHeader(G,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oi(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){qs(this,G)}};function qs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Vi(c),ln(c)}function Vi(c){c.A||(c.A=!0,mt(c,"complete"),mt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,mt(this,"complete"),mt(this,"abort"),ln(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ln(this,!0)),tt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?la(this):this.bb())},r.bb=function(){la(this)};function la(c){if(c.h&&typeof h<"u"&&(!c.v[1]||Xt(c)!=4||c.Z()!=2)){if(c.u&&Xt(c)==4)Wo(c.Ea,0,c);else if(mt(c,"readystatechange"),Xt(c)==4){c.h=!1;try{const ae=c.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var E;if(E=ae===0){var B=String(c.D).match(zs)[1]||null;!B&&p.self&&p.self.location&&(B=p.self.location.protocol.slice(0,-1)),E=!ed.test(B?B.toLowerCase():"")}_=E}if(_)mt(c,"complete"),mt(c,"success");else{c.m=6;try{var G=2<Xt(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",Vi(c)}}finally{ln(c)}}}}function ln(c,g){if(c.g){Oi(c);const _=c.g,E=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||mt(c,"ready");try{_.onreadystatechange=E}catch{}}}function Oi(c){c.I&&(p.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Xt(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Yo(g)}};function ca(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(c){const g={};c=(c.g&&2<=Xt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<c.length;E++){if(F(c[E]))continue;var _=j(c[E]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=g[B]||[];g[B]=G,G.push(_)}A(g,function(E){return E.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function ua(c){this.Aa=0,this.i=[],this.j=new Ls,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,c),this.cb=Xn("retryDelaySeedMs",1e4,c),this.Wa=Xn("forwardChannelMaxRetries",2,c),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Us(c&&c.concurrentRequestLimit),this.Da=new Zu,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ua.prototype,r.la=8,r.G=1,r.connect=function(c,g,_,E){at(0),this.W=c,this.H=g||{},_&&E!==void 0&&(this.H.OSID=_,this.H.OAID=E),this.F=this.X,this.I=Bl(this,null,this.W),Jn(this)};function Ct(c){if(Ui(c),c.G==3){var g=c.U++,_=an(c.I);if(Ge(_,"SID",c.K),Ge(_,"RID",g),Ge(_,"TYPE","terminate"),xr(c,_),g=new An(c,c.j,g),g.L=2,g.v=Gr(an(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=g.v,_=!0),_||(g.g=$l(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ye(g)}zl(c)}function Mn(c){c.g&&(da(c),c.g.cancel(),c.g=null)}function Ui(c){Mn(c),c.u&&(p.clearTimeout(c.u),c.u=null),$i(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&p.clearTimeout(c.s),c.s=null)}function Jn(c){if(!on(c.h)&&!c.s){c.s=!0;var g=c.Ga;me||z(),re||(me(),re=!0),fe.add(g,c),c.B=0}}function td(c,g){return Cl(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=kn(C(c.Ga,c,g),Ul(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new An(this,this.j,c);let G=this.o;if(this.S&&(G?(G=b(G),S(G,this.S)):G=this.S),this.m!==null||this.O||(B.H=G,G=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var E=this.i[_];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Jr(this,B,g),_=an(this.I),Ge(_,"RID",c),Ge(_,"CVER",22),this.D&&Ge(_,"X-HTTP-Session-Id",this.D),xr(this,_),G&&(this.O?g="headers="+encodeURIComponent(String(vr(G)))+"&"+g:this.m&&Xr(_,this.m,G)),ia(this.h,B),this.Ua&&Ge(_,"TYPE","init"),this.P?(Ge(_,"$req",g),Ge(_,"SID","null"),B.T=!0,Ri(B,_,null)):Ri(B,_,g),this.G=2}}else this.G==3&&(c?zi(this,c):this.i.length==0||on(this.h)||zi(this))};function zi(c,g){var _;g?_=g.l:_=c.U++;const E=an(c.I);Ge(E,"SID",c.K),Ge(E,"RID",_),Ge(E,"AID",c.T),xr(c,E),c.m&&c.o&&Xr(E,c.m,c.o),_=new An(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Jr(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ia(c.h,_),Ri(_,E,g)}function xr(c,g){c.H&&ie(c.H,function(_,E){Ge(g,E,_)}),c.l&&Hr({},function(_,E){Ge(g,E,_)})}function Jr(c,g,_){_=Math.min(c.i.length,_);var E=c.l?C(c.l.Na,c.l,c):null;e:{var B=c.i;let G=-1;for(;;){const ae=["count="+_];G==-1?0<_?(G=B[0].g,ae.push("ofs="+G)):G=0:ae.push("ofs="+G);let He=!0;for(let gt=0;gt<_;gt++){let Fe=B[gt].g;const wt=B[gt].map;if(Fe-=G,0>Fe)G=Math.max(0,B[gt].g-100),He=!1;else try{Vl(wt,ae,"req"+Fe+"_")}catch{E&&E(wt)}}if(He){E=ae.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,E}function Hs(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;me||z(),re||(me(),re=!0),fe.add(g,c),c.v=0}}function Bi(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=kn(C(c.Fa,c),Ul(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Fl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=kn(C(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Mn(this),Fl(this))};function da(c){c.A!=null&&(p.clearTimeout(c.A),c.A=null)}function Fl(c){c.g=new An(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=an(c.qa);Ge(g,"RID","rpc"),Ge(g,"SID",c.K),Ge(g,"AID",c.T),Ge(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ge(g,"TO",c.ja),Ge(g,"TYPE","xmlhttp"),xr(c,g),c.m&&c.o&&Xr(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Gr(an(g)),_.m=null,_.P=!0,ra(_,c)}r.Za=function(){this.C!=null&&(this.C=null,Mn(this),Bi(this),at(19))};function $i(c){c.C!=null&&(p.clearTimeout(c.C),c.C=null)}function qi(c,g){var _=null;if(c.g==g){$i(c),da(c),c.g=null;var E=2}else if(qt(c.h,g))_=g.D,Al(c.h,g),E=1;else return;if(c.G!=0){if(g.o)if(E==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var B=c.B;E=Ms(),mt(E,new Ci(E,_)),Jn(c)}else Hs(c);else if(B=g.s,B==3||B==0&&0<g.X||!(E==1&&td(c,g)||E==2&&Bi(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),B){case 1:wr(c,5);break;case 4:wr(c,10);break;case 3:wr(c,6);break;default:wr(c,2)}}}function Ul(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function wr(c,g){if(c.j.info("Error code "+g),g==2){var _=C(c.fb,c),E=c.Xa;const B=!E;E=new yr(E||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Bs(E,"https"),Gr(E),B?Ju(E.toString(),_):Ll(E.toString(),_)}else at(2);c.G=0,c.l&&c.l.sa(g),zl(c),Ui(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function zl(c){if(c.G=0,c.ka=[],c.l){const g=Pl(c.h);(g.length!=0||c.i.length!=0)&&(L(c.ka,g),L(c.ka,c.i),c.h.i.length=0,H(c.i),c.i.length=0),c.l.ra()}}function Bl(c,g,_){var E=_ instanceof yr?an(_):new yr(_);if(E.g!="")g&&(E.g=g+"."+E.g),Wr(E,E.s);else{var B=p.location;E=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var G=new yr(null);E&&Bs(G,E),g&&(G.g=g),B&&Wr(G,B),_&&(G.l=_),E=G}return _=c.D,g=c.ya,_&&g&&Ge(E,_,g),Ge(E,"VER",c.la),xr(c,E),E}function $l(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new tt(new _r({eb:_})):new tt(c.pa),g.Ha(c.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ha(){}r=ha.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Hi(){}Hi.prototype.g=function(c,g){return new Ht(c,g)};function Ht(c,g){pt.call(this),this.g=new ua(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!F(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!F(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Zn(this)}q(Ht,pt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Ct(this.g)},Ht.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Qo(c),c=_);g.i.push(new Sl(g.Ya++,c)),g.G==3&&Jn(g)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Ct(this.g),delete this.g,Ht.aa.N.call(this)};function ql(c){Kn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}q(ql,Kn);function Hl(){Si.call(this),this.status=1}q(Hl,Si);function Zn(c){this.g=c}q(Zn,ha),Zn.prototype.ua=function(){mt(this.g,"a")},Zn.prototype.ta=function(c){mt(this.g,new ql(c))},Zn.prototype.sa=function(c){mt(this.g,new Hl)},Zn.prototype.ra=function(){mt(this.g,"b")},Hi.prototype.createWebChannel=Hi.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,o_=function(){return new Hi},i_=function(){return Ms()},s_=Gn,Gh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,eu=Pi,Tl.COMPLETE="complete",r_=Tl,ki.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Ua=ki,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,n_=tt}).apply(typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{});const o0="@firebase/firestore";let zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");let Do="10.14.0";const mi=new yf("@firebase/firestore");function Va(){return mi.logLevel}function ye(r,...e){if(mi.logLevel<=Oe.DEBUG){const t=e.map(Pf);mi.debug(`Firestore (${Do}): ${r}`,...t)}}function Or(r,...e){if(mi.logLevel<=Oe.ERROR){const t=e.map(Pf);mi.error(`Firestore (${Do}): ${r}`,...t)}}function To(r,...e){if(mi.logLevel<=Oe.WARN){const t=e.map(Pf);mi.warn(`Firestore (${Do}): ${r}`,...t)}}function Pf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Se(r="Unexpected state"){const e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+r;throw Or(e),new Error(e)}function We(r,e){r||Se()}function Ae(r,e){return r}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Ur{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class a_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Q2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class Y2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class X2{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Dr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},p=m=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>p(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Dr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string"),new a_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new zt(e)}}class J2{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Z2{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new J2(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tE{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){We(this.o===void 0);const i=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string"),this.R=t.token,new eE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function nE(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}class l_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=nE(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function qe(r,e){return r<e?-1:r>e?1:0}function Io(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}class vt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new vt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new vt(0,0))}static max(){return new Ce(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Za{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(),i===void 0?i=e.length-t:i>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Za.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Za?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class et extends Za{construct(e,t,i){return new et(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const rE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Za{construct(e,t,i){return new Rt(e,t,i)}static isValidIdentifier(e){return rE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Rt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new de(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new de(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(i+=p,o++):(l(),o++)}if(l(),h)throw new de(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(t)}static emptyPath(){return new Rt([])}}class be{constructor(e){this.path=e}static fromPath(e){return new be(et.fromString(e))}static fromName(e){return new be(et.fromString(e).popFirst(5))}static empty(){return new be(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new et(e.slice()))}}function sE(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(i===1e9?new vt(t+1,0):new vt(t,i));return new Ts(o,be.empty(),e)}function iE(r){return new Ts(r.readTime,r.key,-1)}class Ts{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ts(Ce.min(),be.empty(),-1)}static max(){return new Ts(Ce.max(),be.empty(),-1)}}function oE(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(r.documentKey,e.documentKey),t!==0?t:qe(r.largestBatchId,e.largestBatchId))}const aE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ml(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==aE)throw r;ye("LocalStore","Unexpectedly lost primary lease")}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,i)=>{t(e)}))}static reject(e){return new ne(((t,i)=>{i(e)}))}static waitFor(e){return new ne(((t,i)=>{let o=0,l=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++l,h&&l===o&&t()}),(m=>i(m)))})),h=!0,l===o&&t()}))}static or(e){let t=ne.resolve(!1);for(const i of e)t=t.next((o=>o?ne.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new ne(((i,o)=>{const l=e.length,h=new Array(l);let p=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next((w=>{h[v]=w,++p,p===l&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new ne(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function cE(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function gl(r){return r.name==="IndexedDbTransactionError"}class jf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}jf.oe=-1;function Au(r){return r==null}function pu(r){return r===0&&1/r==-1/0}function uE(r){return typeof r=="number"&&Number.isInteger(r)&&!pu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function a0(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function _i(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function c_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class it{constructor(e,t){this.comparator=e,this.root=t||jt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zc(this.root,e,this.comparator,!0)}}class zc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??jt.RED,this.left=o??jt.EMPTY,this.right=l??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new jt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return jt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,i,o,l){return this}insert(e,t,i){return new jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new l0(this.data.getIterator())}getIteratorFrom(e){return new l0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class l0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fn{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new fn([])}unionWith(e){let t=new Dt(Rt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class u_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new u_("Invalid base64 string: "+l):l}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const dE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(r){if(We(!!r),typeof r=="string"){let e=0;const t=dE.exec(r);if(We(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(r.seconds),nanos:ct(r.nanos)}}function ct(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function gi(r){return typeof r=="string"?Mt.fromBase64String(r):Mt.fromUint8Array(r)}function Rf(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Df(r){const e=r.mapValue.fields.__previous_value__;return Rf(e)?Df(e):e}function el(r){const e=Is(r.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}class hE{constructor(e,t,i,o,l,h,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=v}}class tl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new tl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof tl&&e.projectId===this.projectId&&e.database===this.database}}const Bc={mapValue:{}};function yi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Rf(r)?4:pE(r)?9007199254740991:fE(r)?10:11:Se()}function ur(r,e){if(r===e)return!0;const t=yi(r);if(t!==yi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return el(r).isEqual(el(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Is(o.timestampValue),p=Is(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return gi(o.bytesValue).isEqual(gi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ct(o.geoPointValue.latitude)===ct(l.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ct(o.integerValue)===ct(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ct(o.doubleValue),p=ct(l.doubleValue);return h===p?pu(h)===pu(p):isNaN(h)&&isNaN(p)}return!1})(r,e);case 9:return Io(r.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},p=l.mapValue.fields||{};if(a0(h)!==a0(p))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(p[m]===void 0||!ur(h[m],p[m])))return!1;return!0})(r,e);default:return Se()}}function nl(r,e){return(r.values||[]).find((t=>ur(t,e)))!==void 0}function No(r,e){if(r===e)return 0;const t=yi(r),i=yi(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const p=ct(l.integerValue||l.doubleValue),m=ct(h.integerValue||h.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1})(r,e);case 3:return c0(r.timestampValue,e.timestampValue);case 4:return c0(el(r),el(e));case 5:return qe(r.stringValue,e.stringValue);case 6:return(function(l,h){const p=gi(l),m=gi(h);return p.compareTo(m)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const p=l.split("/"),m=h.split("/");for(let v=0;v<p.length&&v<m.length;v++){const w=qe(p[v],m[v]);if(w!==0)return w}return qe(p.length,m.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const p=qe(ct(l.latitude),ct(h.latitude));return p!==0?p:qe(ct(l.longitude),ct(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return u0(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var p,m,v,w;const I=l.fields||{},C=h.fields||{},O=(p=I.value)===null||p===void 0?void 0:p.arrayValue,q=(m=C.value)===null||m===void 0?void 0:m.arrayValue,H=qe(((v=O?.values)===null||v===void 0?void 0:v.length)||0,((w=q?.values)===null||w===void 0?void 0:w.length)||0);return H!==0?H:u0(O,q)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Bc.mapValue&&h===Bc.mapValue)return 0;if(l===Bc.mapValue)return 1;if(h===Bc.mapValue)return-1;const p=l.fields||{},m=Object.keys(p),v=h.fields||{},w=Object.keys(v);m.sort(),w.sort();for(let I=0;I<m.length&&I<w.length;++I){const C=qe(m[I],w[I]);if(C!==0)return C;const O=No(p[m[I]],v[w[I]]);if(O!==0)return O}return qe(m.length,w.length)})(r.mapValue,e.mapValue);default:throw Se()}}function c0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return qe(r,e);const t=Is(r),i=Is(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function u0(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=No(t[o],i[o]);if(l)return l}return qe(t.length,i.length)}function ko(r){return Qh(r)}function Qh(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Is(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return gi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return be.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Qh(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Qh(t.fields[h])}`;return o+"}"})(r.mapValue):Se()}function d0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Yh(r){return!!r&&"integerValue"in r}function Mf(r){return!!r&&"arrayValue"in r}function h0(r){return!!r&&"nullValue"in r}function f0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function tu(r){return!!r&&"mapValue"in r}function fE(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ha(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return _i(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ha(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ha(r.arrayValue.values[t]);return e}return Object.assign({},r)}function pE(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!tu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ha(t)}setAll(e){let t=Rt.emptyPath(),i={},o=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=p.popLast()}h?i[p.lastSegment()]=Ha(h):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());tu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];tu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){_i(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new sn(Ha(this.value))}}function d_(r){const e=[];return _i(r.fields,((t,i)=>{const o=new Rt([t]);if(tu(i)){const l=d_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new fn(e)}class Bt{constructor(e,t,i,o,l,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Bt(e,0,Ce.min(),Ce.min(),Ce.min(),sn.empty(),0)}static newFoundDocument(e,t,i,o){return new Bt(e,1,t,Ce.min(),i,o,0)}static newNoDocument(e,t){return new Bt(e,2,t,Ce.min(),Ce.min(),sn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,Ce.min(),Ce.min(),sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mu{constructor(e,t){this.position=e,this.inclusive=t}}function p0(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=be.comparator(be.fromName(h.referenceValue),t.key):i=No(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function m0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ur(r.position[t],e.position[t]))return!1;return!0}class rl{constructor(e,t="asc"){this.field=e,this.dir=t}}function mE(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}let h_=class{};class ft extends h_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new yE(e,t,i):t==="array-contains"?new xE(e,i):t==="in"?new wE(e,i):t==="not-in"?new bE(e,i):t==="array-contains-any"?new EE(e,i):new ft(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new _E(e,i):new vE(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(No(t,this.value)):t!==null&&yi(this.value)===yi(t)&&this.matchesComparison(No(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hn extends h_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Hn(e,t)}matches(e){return f_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function f_(r){return r.op==="and"}function p_(r){return gE(r)&&f_(r)}function gE(r){for(const e of r.filters)if(e instanceof Hn)return!1;return!0}function Xh(r){if(r instanceof ft)return r.field.canonicalString()+r.op.toString()+ko(r.value);if(p_(r))return r.filters.map((e=>Xh(e))).join(",");{const e=r.filters.map((t=>Xh(t))).join(",");return`${r.op}(${e})`}}function m_(r,e){return r instanceof ft?(function(i,o){return o instanceof ft&&i.op===o.op&&i.field.isEqual(o.field)&&ur(i.value,o.value)})(r,e):r instanceof Hn?(function(i,o){return o instanceof Hn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,p)=>l&&m_(h,o.filters[p])),!0):!1})(r,e):void Se()}function g_(r){return r instanceof ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${ko(t.value)}`})(r):r instanceof Hn?(function(t){return t.op.toString()+" {"+t.getFilters().map(g_).join(" ,")+"}"})(r):"Filter"}class yE extends ft{constructor(e,t,i){super(e,t,i),this.key=be.fromName(i.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class _E extends ft{constructor(e,t){super(e,"in",t),this.keys=y_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vE extends ft{constructor(e,t){super(e,"not-in",t),this.keys=y_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function y_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>be.fromName(i.referenceValue)))}class xE extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mf(t)&&nl(t.arrayValue,this.value)}}class wE extends ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nl(this.value.arrayValue,t)}}class bE extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!nl(this.value.arrayValue,t)}}class EE extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>nl(this.value.arrayValue,i)))}}class TE{constructor(e,t=null,i=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.ue=null}}function g0(r,e=null,t=[],i=[],o=null,l=null,h=null){return new TE(r,e,t,i,o,l,h)}function Lf(r){const e=Ae(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Xh(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Au(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>ko(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>ko(i))).join(",")),e.ue=t}return e.ue}function Vf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!mE(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!m_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!m0(r.startAt,e.startAt)&&m0(r.endAt,e.endAt)}function Jh(r){return be.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Mo{constructor(e,t=null,i=[],o=[],l=null,h="F",p=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function IE(r,e,t,i,o,l,h,p){return new Mo(r,e,t,i,o,l,h,p)}function Of(r){return new Mo(r)}function y0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function __(r){return r.collectionGroup!==null}function Wa(r){const e=Ae(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Dt(Rt.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new rl(l,i))})),t.has(Rt.keyField().canonicalString())||e.ce.push(new rl(Rt.keyField(),i))}return e.ce}function lr(r){const e=Ae(r);return e.le||(e.le=NE(e,Wa(r))),e.le}function NE(r,e){if(r.limitType==="F")return g0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new rl(o.field,l)}));const t=r.endAt?new mu(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new mu(r.startAt.position,r.startAt.inclusive):null;return g0(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Zh(r,e){const t=r.filters.concat([e]);return new Mo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function ef(r,e,t){return new Mo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Pu(r,e){return Vf(lr(r),lr(e))&&r.limitType===e.limitType}function v_(r){return`${Lf(lr(r))}|lt:${r.limitType}`}function po(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>g_(o))).join(", ")}]`),Au(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>ko(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>ko(o))).join(",")),`Target(${i})`})(lr(r))}; limitType=${r.limitType})`}function ju(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):be.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Wa(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,p,m){const v=p0(h,p,m);return h.inclusive?v<=0:v<0})(i.startAt,Wa(i),o)||i.endAt&&!(function(h,p,m){const v=p0(h,p,m);return h.inclusive?v>=0:v>0})(i.endAt,Wa(i),o))})(r,e)}function kE(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function x_(r){return(e,t)=>{let i=!1;for(const o of Wa(r)){const l=SE(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function SE(r,e,t){const i=r.field.isKeyField()?be.comparator(e.key,t.key):(function(l,h,p){const m=h.data.field(l),v=p.data.field(l);return m!==null&&v!==null?No(m,v):Se()})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Se()}}class Lo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return c_(this.inner)}size(){return this.innerSize}}const CE=new it(be.comparator);function Fr(){return CE}const w_=new it(be.comparator);function za(...r){let e=w_;for(const t of r)e=e.insert(t.key,t);return e}function b_(r){let e=w_;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function li(){return Ka()}function E_(){return Ka()}function Ka(){return new Lo((r=>r.toString()),((r,e)=>r.isEqual(e)))}const AE=new it(be.comparator),PE=new Dt(be.comparator);function Le(...r){let e=PE;for(const t of r)e=e.add(t);return e}const jE=new Dt(qe);function RE(){return jE}function Ff(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pu(e)?"-0":e}}function T_(r){return{integerValue:""+r}}function DE(r,e){return uE(e)?T_(e):Ff(r,e)}class Ru{constructor(){this._=void 0}}function ME(r,e,t){return r instanceof sl?(function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Rf(l)&&(l=Df(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}})(t,e):r instanceof il?N_(r,e):r instanceof ol?k_(r,e):(function(o,l){const h=I_(o,l),p=_0(h)+_0(o.Pe);return Yh(h)&&Yh(o.Pe)?T_(p):Ff(o.serializer,p)})(r,e)}function LE(r,e,t){return r instanceof il?N_(r,e):r instanceof ol?k_(r,e):t}function I_(r,e){return r instanceof gu?(function(i){return Yh(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class sl extends Ru{}class il extends Ru{constructor(e){super(),this.elements=e}}function N_(r,e){const t=S_(e);for(const i of r.elements)t.some((o=>ur(o,i)))||t.push(i);return{arrayValue:{values:t}}}class ol extends Ru{constructor(e){super(),this.elements=e}}function k_(r,e){let t=S_(e);for(const i of r.elements)t=t.filter((o=>!ur(o,i)));return{arrayValue:{values:t}}}class gu extends Ru{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function _0(r){return ct(r.integerValue||r.doubleValue)}function S_(r){return Mf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class VE{constructor(e,t){this.field=e,this.transform=t}}function OE(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof il&&o instanceof il||i instanceof ol&&o instanceof ol?Io(i.elements,o.elements,ur):i instanceof gu&&o instanceof gu?ur(i.Pe,o.Pe):i instanceof sl&&o instanceof sl})(r.transform,e.transform)}class FE{constructor(e,t){this.version=e,this.transformResults=t}}class $n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Du{}function C_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Uf(r.key,$n.none()):new yl(r.key,r.data,$n.none());{const t=r.data,i=sn.empty();let o=new Dt(Rt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Cs(r.key,i,new fn(o.toArray()),$n.none())}}function UE(r,e,t){r instanceof yl?(function(o,l,h){const p=o.value.clone(),m=x0(o.fieldTransforms,l,h.transformResults);p.setAll(m),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):r instanceof Cs?(function(o,l,h){if(!nu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const p=x0(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(A_(o)),m.setAll(p),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ga(r,e,t,i){return r instanceof yl?(function(l,h,p,m){if(!nu(l.precondition,h))return p;const v=l.value.clone(),w=w0(l.fieldTransforms,m,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof Cs?(function(l,h,p,m){if(!nu(l.precondition,h))return p;const v=w0(l.fieldTransforms,m,h),w=h.data;return w.setAll(A_(l)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(r,e,t,i):(function(l,h,p){return nu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(r,e,t)}function zE(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=I_(i.transform,o||null);l!=null&&(t===null&&(t=sn.empty()),t.set(i.field,l))}return t||null}function v0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Io(i,o,((l,h)=>OE(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yl extends Du{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Cs extends Du{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function A_(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function x0(r,e,t){const i=new Map;We(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,p=e.data.field(l.field);i.set(l.field,LE(h,p,t[o]))}return i}function w0(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,ME(l,h,e))}return i}class Uf extends Du{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BE extends Du{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $E{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&UE(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ga(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ga(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=E_();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=t.has(o.key)?null:p;const m=C_(h,p);m!==null&&i.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Ce.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,((t,i)=>v0(t,i)))&&Io(this.baseMutations,e.baseMutations,((t,i)=>v0(t,i)))}}class zf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){We(e.mutations.length===i.length);let o=(function(){return AE})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new zf(e,t,i,o)}}class qE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class HE{constructor(e,t){this.count=e,this.unchangedNames=t}}var ht,Ue;function WE(r){switch(r){default:return Se();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function P_(r){if(r===void 0)return Or("GRPC error has no .code"),J.UNKNOWN;switch(r){case ht.OK:return J.OK;case ht.CANCELLED:return J.CANCELLED;case ht.UNKNOWN:return J.UNKNOWN;case ht.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case ht.INTERNAL:return J.INTERNAL;case ht.UNAVAILABLE:return J.UNAVAILABLE;case ht.UNAUTHENTICATED:return J.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case ht.NOT_FOUND:return J.NOT_FOUND;case ht.ALREADY_EXISTS:return J.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return J.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case ht.ABORTED:return J.ABORTED;case ht.OUT_OF_RANGE:return J.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return J.UNIMPLEMENTED;case ht.DATA_LOSS:return J.DATA_LOSS;default:return Se()}}(Ue=ht||(ht={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";function KE(){return new TextEncoder}const GE=new ci([4294967295,4294967295],0);function b0(r){const e=KE().encode(r),t=new t_;return t.update(e),new Uint8Array(t.digest())}function E0(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ci([t,i],0),new ci([o,l],0)]}class Bf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ba(`Invalid padding: ${t}`);if(i<0)throw new Ba(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ba(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ba(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ci.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(ci.fromNumber(i)));return o.compare(GE)===1&&(o=new ci([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=b0(e),[i,o]=E0(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(i,o,l);if(!this.de(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Bf(l,o,t);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.Ie===0)return;const t=b0(e),[i,o]=E0(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(i,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Mu{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,_l.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Mu(Ce.min(),o,new it(qe),Fr(),Le())}}class _l{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new _l(i,t,Le(),Le(),Le())}}class ru{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class j_{constructor(e,t){this.targetId=e,this.me=t}}class R_{constructor(e,t,i=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class T0{constructor(){this.fe=0,this.ge=N0(),this.pe=Mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Le(),t=Le(),i=Le();return this.ge.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Se()}})),new _l(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=N0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class QE{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fr(),this.qe=I0(),this.Qe=new it(qe)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Se()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const l=o.target;if(Jh(l))if(i===0){const h=new be(l.path);this.Ue(t,h,Bt.newNoDocument(h,Ce.min()))}else We(i===1);else{const h=this.Ye(t);if(h!==i){const p=this.Ze(e),m=p?this.Xe(p,e,h):1;if(m!==0){this.je(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,v)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,p;try{h=gi(i).toUint8Array()}catch(m){if(m instanceof u_)return To("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new Bf(h,o,l)}catch(m){return To(m instanceof Ba?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.Ie===0?null:p}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Le.tt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Ue(t,l,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((l,h)=>{const p=this.Je(h);if(p){if(l.current&&Jh(p.target)){const m=new be(p.target.path);this.ke.get(m)!==null||this.it(h,m)||this.Ue(h,m,Bt.newNoDocument(m,e))}l.be&&(t.set(h,l.ve()),l.Ce())}}));let i=Le();this.qe.forEach(((l,h)=>{let p=!0;h.forEachWhile((m=>{const v=this.Je(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.ke.forEach(((l,h)=>h.setReadTime(e)));const o=new Mu(e,t,this.Qe,this.ke,i);return this.ke=Fr(),this.qe=I0(),this.Qe=new it(qe),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new T0,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Dt(qe),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new T0),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function I0(){return new it(be.comparator)}function N0(){return new it(be.comparator)}const YE={asc:"ASCENDING",desc:"DESCENDING"},XE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JE={and:"AND",or:"OR"};class ZE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tf(r,e){return r.useProto3Json||Au(e)?e:{value:e}}function yu(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function eT(r,e){return yu(r,e.toTimestamp())}function cr(r){return We(!!r),Ce.fromTimestamp((function(t){const i=Is(t);return new vt(i.seconds,i.nanos)})(r))}function $f(r,e){return nf(r,e).canonicalString()}function nf(r,e){const t=(function(o){return new et(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function M_(r){const e=et.fromString(r);return We(U_(e)),e}function rf(r,e){return $f(r.databaseId,e.path)}function Rh(r,e){const t=M_(e);if(t.get(1)!==r.databaseId.projectId)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new be(V_(t))}function L_(r,e){return $f(r.databaseId,e)}function tT(r){const e=M_(r);return e.length===4?et.emptyPath():V_(e)}function sf(r){return new et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function V_(r){return We(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function k0(r,e,t){return{name:rf(r,e),fields:t.value.mapValue.fields}}function nT(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Se()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,w){return v.useProto3Json?(We(w===void 0||typeof w=="string"),Mt.fromBase64String(w||"")):(We(w===void 0||w instanceof Buffer||w instanceof Uint8Array),Mt.fromUint8Array(w||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(v){const w=v.code===void 0?J.UNKNOWN:P_(v.code);return new de(w,v.message||"")})(h);t=new R_(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Rh(r,i.document.name),l=cr(i.document.updateTime),h=i.document.createTime?cr(i.document.createTime):Ce.min(),p=new sn({mapValue:{fields:i.document.fields}}),m=Bt.newFoundDocument(o,l,h,p),v=i.targetIds||[],w=i.removedTargetIds||[];t=new ru(v,w,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Rh(r,i.document),l=i.readTime?cr(i.readTime):Ce.min(),h=Bt.newNoDocument(o,l),p=i.removedTargetIds||[];t=new ru([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Rh(r,i.document),l=i.removedTargetIds||[];t=new ru([],l,o,null)}else{if(!("filter"in e))return Se();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new HE(o,l),p=i.targetId;t=new j_(p,h)}}return t}function rT(r,e){let t;if(e instanceof yl)t={update:k0(r,e.key,e.value)};else if(e instanceof Uf)t={delete:rf(r,e.key)};else if(e instanceof Cs)t={update:k0(r,e.key,e.data),updateMask:hT(e.fieldMask)};else{if(!(e instanceof BE))return Se();t={verify:rf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const p=h.transform;if(p instanceof sl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof il)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ol)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof gu)return{fieldPath:h.field.canonicalString(),increment:p.Pe};throw Se()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:eT(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se()})(r,e.precondition)),t}function sT(r,e){return r&&r.length>0?(We(e!==void 0),r.map((t=>(function(o,l){let h=o.updateTime?cr(o.updateTime):cr(l);return h.isEqual(Ce.min())&&(h=cr(l)),new FE(h,o.transformResults||[])})(t,e)))):[]}function iT(r,e){return{documents:[L_(r,e.path)]}}function oT(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=L_(r,o);const l=(function(v){if(v.length!==0)return F_(Hn.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((w=>(function(C){return{field:mo(C.field),direction:cT(C.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=tf(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{_t:t,parent:o}}function aT(r){let e=tT(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){We(i===1);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(I){const C=O_(I);return C instanceof Hn&&p_(C)?C.getFilters():[C]})(t.where));let h=[];t.orderBy&&(h=(function(I){return I.map((C=>(function(q){return new rl(go(q.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(C)))})(t.orderBy));let p=null;t.limit&&(p=(function(I){let C;return C=typeof I=="object"?I.value:I,Au(C)?null:C})(t.limit));let m=null;t.startAt&&(m=(function(I){const C=!!I.before,O=I.values||[];return new mu(O,C)})(t.startAt));let v=null;return t.endAt&&(v=(function(I){const C=!I.before,O=I.values||[];return new mu(O,C)})(t.endAt)),IE(e,o,h,l,p,"F",m,v)}function lT(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function O_(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=go(t.unaryFilter.field);return ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=go(t.unaryFilter.field);return ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=go(t.unaryFilter.field);return ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=go(t.unaryFilter.field);return ft.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Se()}})(r):r.fieldFilter!==void 0?(function(t){return ft.create(go(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Hn.create(t.compositeFilter.filters.map((i=>O_(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se()}})(t.compositeFilter.op))})(r):Se()}function cT(r){return YE[r]}function uT(r){return XE[r]}function dT(r){return JE[r]}function mo(r){return{fieldPath:r.canonicalString()}}function go(r){return Rt.fromServerFormat(r.fieldPath)}function F_(r){return r instanceof ft?(function(t){if(t.op==="=="){if(f0(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NAN"}};if(h0(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(f0(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NAN"}};if(h0(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(t.field),op:uT(t.op),value:t.value}}})(r):r instanceof Hn?(function(t){const i=t.getFilters().map((o=>F_(o)));return i.length===1?i[0]:{compositeFilter:{op:dT(t.op),filters:i}}})(r):Se()}function hT(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function U_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class ys{constructor(e,t,i,o,l=Ce.min(),h=Ce.min(),p=Mt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class fT{constructor(e){this.ct=e}}function pT(r){const e=aT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ef(e,e.limit,"L"):e}class mT{constructor(){this.un=new gT}addToCollectionParentIndex(e,t){return this.un.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Ts.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class gT{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Dt(et.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Dt(et.comparator)).toArray()}}class So{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new So(0)}static kn(){return new So(-1)}}class yT{constructor(){this.changes=new Lo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _T{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class vT{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ga(i.mutation,o,fn.empty(),vt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Le()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Le()){const o=li();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=za();return l.forEach(((p,m)=>{h=h.insert(p,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=li();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Le())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,i,o){let l=Fr();const h=Ka(),p=(function(){return Ka()})();return t.forEach(((m,v)=>{const w=i.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof Cs)?l=l.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),Ga(w.mutation,v,w.mutation.getFieldMask(),vt.now())):h.set(v.key,fn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((v,w)=>h.set(v,w))),t.forEach(((v,w)=>{var I;return p.set(v,new _T(w,(I=h.get(v))!==null&&I!==void 0?I:null))})),p)))}recalculateAndSaveOverlays(e,t){const i=Ka();let o=new it(((h,p)=>h-p)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((m=>{const v=t.get(m);if(v===null)return;let w=i.get(m)||fn.empty();w=p.applyToLocalView(v,w),i.set(m,w);const I=(o.get(p.batchId)||Le()).add(m);o=o.insert(p.batchId,I)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),v=m.key,w=m.value,I=E_();w.forEach((C=>{if(!l.has(C)){const O=C_(t.get(C),i.get(C));O!==null&&I.set(C,O),l=l.add(C)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,I))}return ne.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return be.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):__(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):ne.resolve(li());let p=-1,m=l;return h.next((v=>ne.forEach(v,((w,I)=>(p<I.largestBatchId&&(p=I.largestBatchId),l.get(w)?ne.resolve():this.remoteDocumentCache.getEntry(e,w).next((C=>{m=m.insert(w,C)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,m,v,Le()))).next((w=>({batchId:p,changes:b_(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((i=>{let o=za();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=za();return this.indexManager.getCollectionParents(e,l).next((p=>ne.forEach(p,(m=>{const v=(function(I,C){return new Mo(C,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((w=>{w.forEach(((I,C)=>{h=h.insert(I,C)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((m,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,Bt.newInvalidDocument(w)))}));let p=za();return h.forEach(((m,v)=>{const w=l.get(m);w!==void 0&&Ga(w.mutation,v,fn.empty(),vt.now()),ju(t,v)&&(p=p.insert(m,v))})),p}))}}class xT{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ne.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:cr(o.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:pT(o.bundledQuery),readTime:cr(o.readTime)}})(t)),ne.resolve()}}class wT{constructor(){this.overlays=new it(be.comparator),this.Ir=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=li();return ne.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.ht(e,t,l)})),ne.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){const o=li(),l=t.length+1,h=new be(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const m=p.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new it(((v,w)=>v-w));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let w=l.get(v.largestBatchId);w===null&&(w=li(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const p=li(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((v,w)=>p.set(v,w))),!(p.size()>=o)););return ne.resolve(p)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new qE(t,i));let l=this.Ir.get(t);l===void 0&&(l=Le(),this.Ir.set(t,l)),this.Ir.set(t,l.add(i.key))}}class bT{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}class qf{constructor(){this.Tr=new Dt(It.Er),this.dr=new Dt(It.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new It(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new It(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new be(new et([])),i=new It(t,e),o=new It(t,e+1),l=[];return this.dr.forEachInRange([i,o],(h=>{this.Vr(h),l.push(h.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new be(new et([])),i=new It(t,e),o=new It(t,e+1);let l=Le();return this.dr.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new It(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class It{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return be.comparator(e.key,t.key)||qe(e.wr,t.wr)}static Ar(e,t){return qe(e.wr,t.wr)||be.comparator(e.key,t.key)}}class ET{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Dt(It.Er)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new $E(l,t,i,o);this.mutationQueue.push(h);for(const p of o)this.br=this.br.add(new It(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ne.resolve(h)}lookupMutationBatch(e,t){return ne.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),l=o<0?0:o;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new It(t,0),o=new It(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,o],(h=>{const p=this.Dr(h.wr);l.push(p)})),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Dt(qe);return t.forEach((o=>{const l=new It(o,0),h=new It(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,h],(p=>{i=i.add(p.wr)}))})),ne.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;be.isDocumentKey(l)||(l=l.child(""));const h=new It(new be(l),0);let p=new Dt(qe);return this.br.forEachWhile((m=>{const v=m.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(m.wr)),!0)}),h),ne.resolve(this.Cr(p))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return ne.forEach(t.mutations,(o=>{const l=new It(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new It(t,0),o=this.br.firstAfterOrEqual(i);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class TT{constructor(e){this.Mr=e,this.docs=(function(){return new it(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let i=Fr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Bt.newInvalidDocument(o))})),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Fr();const h=t.path,p=new be(h.child("")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:v,value:{document:w}}=m.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||oE(iE(w),i)<=0||(o.has(w.key)||ju(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Se()}Or(e,t){return ne.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new IT(this)}getSize(e){return ne.resolve(this.size)}}class IT extends yT{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),ne.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class NT{constructor(e){this.persistence=e,this.Nr=new Lo((t=>Lf(t)),Vf),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qf,this.targetCount=0,this.kr=So.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),ne.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new So(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Kn(t),ne.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Nr.forEach(((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.Nr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ne.waitFor(l).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this.Br.containsKey(t))}}class kT{constructor(e,t){this.qr={},this.overlays={},this.Qr=new jf(0),this.Kr=!1,this.Kr=!0,this.$r=new bT,this.referenceDelegate=e(this),this.Ur=new NT(this),this.indexManager=new mT,this.remoteDocumentCache=(function(o){return new TT(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new fT(t),this.Gr=new xT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new ET(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const o=new ST(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((l=>this.referenceDelegate.jr(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Hr(e,t){return ne.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class ST extends lE{constructor(e){super(),this.currentSequenceNumber=e}}class Hf{constructor(e){this.persistence=e,this.Jr=new qf,this.Yr=null}static Zr(e){return new Hf(e)}get Xr(){if(this.Yr)return this.Yr;throw Se()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.Xr.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Xr,(i=>{const o=be.fromPath(i);return this.ei(e,o).next((l=>{l||t.removeEntry(o,Ce.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return ne.or([()=>ne.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Wf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Wf(e,t.fromCache,i,o)}}class CT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class AT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return yw()?8:cE($t())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Yi(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.Zi(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new CT;return this.Xi(e,t,h).next((p=>{if(l.result=p,this.zi)return this.es(e,t,h,p.size)}))})).next((()=>l.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(Va()<=Oe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ne.resolve()):(Va()<=Oe.DEBUG&&ye("QueryEngine","Query:",po(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Va()<=Oe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):ne.resolve())}Yi(e,t){if(y0(t))return ne.resolve(null);let i=lr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=ef(t,null,"F"),i=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Le(...l);return this.Ji.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((m=>{const v=this.ts(t,p);return this.ns(t,v,h,m.readTime)?this.Yi(e,ef(t,null,"F")):this.rs(e,v,t,m)}))))})))))}Zi(e,t,i,o){return y0(t)||o.isEqual(Ce.min())?ne.resolve(null):this.Ji.getDocuments(e,i).next((l=>{const h=this.ts(t,l);return this.ns(t,h,i,o)?ne.resolve(null):(Va()<=Oe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),po(t)),this.rs(e,h,t,sE(o,-1)).next((p=>p)))}))}ts(e,t){let i=new Dt(x_(e));return t.forEach(((o,l)=>{ju(e,l)&&(i=i.add(l))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,t,i){return Va()<=Oe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",po(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ts.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}class PT{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new it(qe),this._s=new Lo((l=>Lf(l)),Vf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function jT(r,e,t,i){return new PT(r,e,t,i)}async function z_(r,e){const t=Ae(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],p=[];let m=Le();for(const v of o){h.push(v.batchId);for(const w of v.mutations)m=m.add(w.key)}for(const v of l){p.push(v.batchId);for(const w of v.mutations)m=m.add(w.key)}return t.localDocuments.getDocuments(i,m).next((v=>({hs:v,removedBatchIds:h,addedBatchIds:p})))}))}))}function RT(r,e){const t=Ae(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return(function(p,m,v,w){const I=v.batch,C=I.keys();let O=ne.resolve();return C.forEach((q=>{O=O.next((()=>w.getEntry(m,q))).next((H=>{const L=v.docVersions.get(q);We(L!==null),H.version.compareTo(L)<0&&(I.applyToRemoteDocument(H,v),H.isValidDocument()&&(H.setReadTime(v.commitVersion),w.addEntry(H)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(m,I)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let m=Le();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(m=m.add(p.batch.mutations[v].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function B_(r){const e=Ae(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function DT(r,e){const t=Ae(r),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const p=[];e.targetChanges.forEach(((w,I)=>{const C=o.get(I);if(!C)return;p.push(t.Ur.removeMatchingKeys(l,w.removedDocuments,I).next((()=>t.Ur.addMatchingKeys(l,w.addedDocuments,I))));let O=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?O=O.withResumeToken(Mt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),o=o.insert(I,O),(function(H,L,X){return H.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(C,O,w)&&p.push(t.Ur.updateTargetData(l,O))}));let m=Fr(),v=Le();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),p.push(MT(l,h,e.documentUpdates).next((w=>{m=w.Ps,v=w.Is}))),!i.isEqual(Ce.min())){const w=t.Ur.getLastRemoteSnapshotVersion(l).next((I=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(w)}return ne.waitFor(p).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,v))).next((()=>m))})).then((l=>(t.os=o,l)))}function MT(r,e,t){let i=Le(),o=Le();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Fr();return t.forEach(((p,m)=>{const v=l.get(p);m.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(p,m.readTime),h=h.insert(p,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),h=h.insert(p,m)):ye("LocalStore","Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",m.version)})),{Ps:h,Is:o}}))}function LT(r,e){const t=Ae(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function VT(r,e){const t=Ae(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((l=>l?(o=l,ne.resolve(o)):t.Ur.allocateTargetId(i).next((h=>(o=new ys(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function of(r,e,t){const i=Ae(r),o=i.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!gl(h))throw h;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function S0(r,e,t){const i=Ae(r);let o=Ce.min(),l=Le();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,v,w){const I=Ae(m),C=I._s.get(w);return C!==void 0?ne.resolve(I.os.get(C)):I.Ur.getTargetData(v,w)})(i,h,lr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(h,p.targetId).next((m=>{l=m}))})).next((()=>i.ss.getDocumentsMatchingQuery(h,e,t?o:Ce.min(),t?l:Le()))).next((p=>(OT(i,kE(e),p),{documents:p,Ts:l})))))}function OT(r,e,t){let i=r.us.get(e)||Ce.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.us.set(e,i)}class C0{constructor(){this.activeTargetIds=RE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FT{constructor(){this.so=new C0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new C0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class UT{_o(e){}shutdown(){}}class A0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let $c=null;function Dh(){return $c===null?$c=(function(){return 268435456+Math.round(2147483648*Math.random())})():$c++,"0x"+$c.toString(16)}const zT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BT{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ut="WebChannelConnection";class $T extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(t,i,o,l,h){const p=Dh(),m=this.xo(t,i.toUriEncodedString());ye("RestConnection",`Sending RPC '${t}' ${p}:`,m,o);const v={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(v,l,h),this.No(t,m,v,o).then((w=>(ye("RestConnection",`Received RPC '${t}' ${p}: `,w),w)),(w=>{throw To("RestConnection",`RPC '${t}' ${p} failed with error: `,w,"url: ",m,"request:",o),w}))}Lo(t,i,o,l,h,p){return this.Mo(t,i,o,l,h)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Do})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,h)=>t[h]=l)),o&&o.headers.forEach(((l,h)=>t[h]=l))}xo(t,i){const o=zT[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const l=Dh();return new Promise(((h,p)=>{const m=new n_;m.setWithCredentials(!0),m.listenOnce(r_.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case eu.NO_ERROR:const w=m.getResponseJson();ye(Ut,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case eu.TIMEOUT:ye(Ut,`RPC '${e}' ${l} timed out`),p(new de(J.DEADLINE_EXCEEDED,"Request time out"));break;case eu.HTTP_ERROR:const I=m.getStatus();if(ye(Ut,`RPC '${e}' ${l} failed with status:`,I,"response text:",m.getResponseText()),I>0){let C=m.getResponseJson();Array.isArray(C)&&(C=C[0]);const O=C?.error;if(O&&O.status&&O.message){const q=(function(L){const X=L.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(X)>=0?X:J.UNKNOWN})(O.status);p(new de(q,O.message))}else p(new de(J.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new de(J.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{ye(Ut,`RPC '${e}' ${l} completed.`)}}));const v=JSON.stringify(o);ye(Ut,`RPC '${e}' ${l} sending request:`,o),m.send(t,"POST",v,i,15)}))}Bo(e,t,i){const o=Dh(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=o_(),p=i_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Oo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const w=l.join("");ye(Ut,`Creating RPC '${e}' stream ${o}: ${w}`,m);const I=h.createWebChannel(w,m);let C=!1,O=!1;const q=new BT({Io:L=>{O?ye(Ut,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(C||(ye(Ut,`Opening RPC '${e}' stream ${o} transport.`),I.open(),C=!0),ye(Ut,`RPC '${e}' stream ${o} sending:`,L),I.send(L))},To:()=>I.close()}),H=(L,X,F)=>{L.listen(X,(M=>{try{F(M)}catch(U){setTimeout((()=>{throw U}),0)}}))};return H(I,Ua.EventType.OPEN,(()=>{O||(ye(Ut,`RPC '${e}' stream ${o} transport opened.`),q.yo())})),H(I,Ua.EventType.CLOSE,(()=>{O||(O=!0,ye(Ut,`RPC '${e}' stream ${o} transport closed`),q.So())})),H(I,Ua.EventType.ERROR,(L=>{O||(O=!0,To(Ut,`RPC '${e}' stream ${o} transport errored:`,L),q.So(new de(J.UNAVAILABLE,"The operation could not be completed")))})),H(I,Ua.EventType.MESSAGE,(L=>{var X;if(!O){const F=L.data[0];We(!!F);const M=F,U=M.error||((X=M[0])===null||X===void 0?void 0:X.error);if(U){ye(Ut,`RPC '${e}' stream ${o} received error:`,U);const Z=U.status;let ie=(function(N){const S=ht[N];if(S!==void 0)return P_(S)})(Z),A=U.message;ie===void 0&&(ie=J.INTERNAL,A="Unknown error status: "+Z+" with message "+U.message),O=!0,q.So(new de(ie,A)),I.close()}else ye(Ut,`RPC '${e}' stream ${o} received:`,F),q.bo(F)}})),H(p,s_.STAT_EVENT,(L=>{L.stat===Gh.PROXY?ye(Ut,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===Gh.NOPROXY&&ye(Ut,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.wo()}),0),q}}function Mh(){return typeof document<"u"?document:null}function Lu(r){return new ZE(r,!0)}class $_{constructor(e,t,i=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class q_{constructor(e,t,i,o,l,h,p,m){this.ui=e,this.Ho=i,this.Jo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new de(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qT extends q_{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=nT(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ce.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?cr(h.readTime):Ce.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=sf(this.serializer),t.addTarget=(function(l,h){let p;const m=h.target;if(p=Jh(m)?{documents:iT(l,m)}:{query:oT(l,m)._t},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=D_(l,h.resumeToken);const v=tf(l,h.expectedCount);v!==null&&(p.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ce.min())>0){p.readTime=yu(l,h.snapshotVersion.toTimestamp());const v=tf(l,h.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=lT(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=sf(this.serializer),t.removeTarget=e,this.a_(t)}}class HT extends q_{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=sT(e.writeResults,e.commitTime),i=cr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=sf(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>rT(this.serializer,i)))};this.a_(t)}}class WT extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Mo(e,nf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(J.UNKNOWN,l.toString())}))}Lo(e,t,i,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Lo(e,nf(t,i),o,h,p,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new de(J.UNKNOWN,h.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class KT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Or(t),this.D_=!1):ye("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class GT{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((h=>{i.enqueueAndForget((async()=>{vi(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await(async function(m){const v=Ae(m);v.L_.add(4),await vl(v),v.q_.set("Unknown"),v.L_.delete(4),await Vu(v)})(this))}))})),this.q_=new KT(i,o)}}async function Vu(r){if(vi(r))for(const e of r.B_)await e(!0)}async function vl(r){for(const e of r.B_)await e(!1)}function H_(r,e){const t=Ae(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Yf(t)?Qf(t):Vo(t).r_()&&Gf(t,e))}function Kf(r,e){const t=Ae(r),i=Vo(t);t.N_.delete(e),i.r_()&&W_(t,e),t.N_.size===0&&(i.r_()?i.o_():vi(t)&&t.q_.set("Unknown"))}function Gf(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vo(r).A_(e)}function W_(r,e){r.Q_.xe(e),Vo(r).R_(e)}function Qf(r){r.Q_=new QE({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Vo(r).start(),r.q_.v_()}function Yf(r){return vi(r)&&!Vo(r).n_()&&r.N_.size>0}function vi(r){return Ae(r).L_.size===0}function K_(r){r.Q_=void 0}async function QT(r){r.q_.set("Online")}async function YT(r){r.N_.forEach(((e,t)=>{Gf(r,e)}))}async function XT(r,e){K_(r),Yf(r)?(r.q_.M_(e),Qf(r)):r.q_.set("Unknown")}async function JT(r,e,t){if(r.q_.set("Online"),e instanceof R_&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const p of l.targetIds)o.N_.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.N_.delete(p),o.Q_.removeTarget(p))})(r,e)}catch(i){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await _u(r,i)}else if(e instanceof ru?r.Q_.Ke(e):e instanceof j_?r.Q_.He(e):r.Q_.We(e),!t.isEqual(Ce.min()))try{const i=await B_(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const p=l.Q_.rt(h);return p.targetChanges.forEach(((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const w=l.N_.get(v);w&&l.N_.set(v,w.withResumeToken(m.resumeToken,h))}})),p.targetMismatches.forEach(((m,v)=>{const w=l.N_.get(m);if(!w)return;l.N_.set(m,w.withResumeToken(Mt.EMPTY_BYTE_STRING,w.snapshotVersion)),W_(l,m);const I=new ys(w.target,m,v,w.sequenceNumber);Gf(l,I)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(i){ye("RemoteStore","Failed to raise snapshot:",i),await _u(r,i)}}async function _u(r,e,t){if(!gl(e))throw e;r.L_.add(1),await vl(r),r.q_.set("Offline"),t||(t=()=>B_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ye("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await Vu(r)}))}function G_(r,e){return e().catch((t=>_u(r,t,e)))}async function Ou(r){const e=Ae(r),t=Ns(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ZT(e);)try{const o=await LT(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,eI(e,o)}catch(o){await _u(e,o)}Q_(e)&&Y_(e)}function ZT(r){return vi(r)&&r.O_.length<10}function eI(r,e){r.O_.push(e);const t=Ns(r);t.r_()&&t.V_&&t.m_(e.mutations)}function Q_(r){return vi(r)&&!Ns(r).n_()&&r.O_.length>0}function Y_(r){Ns(r).start()}async function tI(r){Ns(r).p_()}async function nI(r){const e=Ns(r);for(const t of r.O_)e.m_(t.mutations)}async function rI(r,e,t){const i=r.O_.shift(),o=zf.from(i,e,t);await G_(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Ou(r)}async function sI(r,e){e&&Ns(r).V_&&await(async function(i,o){if((function(h){return WE(h)&&h!==J.ABORTED})(o.code)){const l=i.O_.shift();Ns(i).s_(),await G_(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Ou(i)}})(r,e),Q_(r)&&Y_(r)}async function P0(r,e){const t=Ae(r);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const i=vi(t);t.L_.add(3),await vl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Vu(t)}async function iI(r,e){const t=Ae(r);e?(t.L_.delete(2),await Vu(t)):e||(t.L_.add(2),await vl(t),t.q_.set("Unknown"))}function Vo(r){return r.K_||(r.K_=(function(t,i,o){const l=Ae(t);return l.w_(),new qT(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Eo:QT.bind(null,r),Ro:YT.bind(null,r),mo:XT.bind(null,r),d_:JT.bind(null,r)}),r.B_.push((async e=>{e?(r.K_.s_(),Yf(r)?Qf(r):r.q_.set("Unknown")):(await r.K_.stop(),K_(r))}))),r.K_}function Ns(r){return r.U_||(r.U_=(function(t,i,o){const l=Ae(t);return l.w_(),new HT(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:tI.bind(null,r),mo:sI.bind(null,r),f_:nI.bind(null,r),g_:rI.bind(null,r)}),r.B_.push((async e=>{e?(r.U_.s_(),await Ou(r)):(await r.U_.stop(),r.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}class Xf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,p=new Xf(e,t,h,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jf(r,e){if(Or("AsyncQueue",`${e}: ${r}`),gl(r))return new de(J.UNAVAILABLE,`${e}: ${r}`);throw r}class xo{constructor(e){this.comparator=e?(t,i)=>e(t,i)||be.comparator(t.key,i.key):(t,i)=>be.comparator(t.key,i.key),this.keyedMap=za(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new xo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new xo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class j0{constructor(){this.W_=new it(be.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Se():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Co{constructor(e,t,i,o,l,h,p,m,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new Co(e,t,xo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class oI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class aI{constructor(){this.queries=R0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Ae(t),l=o.queries;o.queries=R0(),l.forEach(((h,p)=>{for(const m of p.j_)m.onError(i)}))})(this,new de(J.ABORTED,"Firestore shutting down"))}}function R0(){return new Lo((r=>v_(r)),Pu)}async function X_(r,e){const t=Ae(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.H_()&&e.J_()&&(i=2):(l=new oI,i=e.J_()?0:1);try{switch(i){case 0:l.z_=await t.onListen(o,!0);break;case 1:l.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=Jf(h,`Initialization of query '${po(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&Zf(t)}async function J_(r,e){const t=Ae(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.j_.indexOf(e);h>=0&&(l.j_.splice(h,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function lI(r,e){const t=Ae(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const p of h.j_)p.X_(o)&&(i=!0);h.z_=o}}i&&Zf(t)}function cI(r,e,t){const i=Ae(r),o=i.queries.get(e);if(o)for(const l of o.j_)l.onError(t);i.queries.delete(e)}function Zf(r){r.Y_.forEach((e=>{e.next()}))}var af,D0;(D0=af||(af={})).ea="default",D0.Cache="cache";class Z_{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Co(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==af.Cache}}class ev{constructor(e){this.key=e}}class tv{constructor(e){this.key=e}}class uI{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Le(),this.mutatedKeys=Le(),this.Aa=x_(e),this.Ra=new xo(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new j0,o=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,I)=>{const C=o.get(w),O=ju(this.query,I)?I:null,q=!!C&&this.mutatedKeys.has(C.key),H=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let L=!1;C&&O?C.data.isEqual(O.data)?q!==H&&(i.track({type:3,doc:O}),L=!0):this.ga(C,O)||(i.track({type:2,doc:O}),L=!0,(m&&this.Aa(O,m)>0||v&&this.Aa(O,v)<0)&&(p=!0)):!C&&O?(i.track({type:0,doc:O}),L=!0):C&&!O&&(i.track({type:1,doc:C}),L=!0,(m||v)&&(p=!0)),L&&(O?(h=h.add(O),l=H?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{Ra:h,fa:i,ns:p,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort(((w,I)=>(function(O,q){const H=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return H(O)-H(q)})(w.type,I.type)||this.Aa(w.doc,I.doc))),this.pa(i),o=o!=null&&o;const p=t&&!o?this.ya():[],m=this.da.size===0&&this.current&&!o?1:0,v=m!==this.Ea;return this.Ea=m,h.length!==0||v?{snapshot:new Co(this.query,e.Ra,l,h,e.mutatedKeys,m===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:p}:{wa:p}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new j0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Le(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new tv(i))})),this.da.forEach((i=>{e.has(i)||t.push(new ev(i))})),t}ba(e){this.Ta=e.Ts,this.da=Le();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Co.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class dI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class hI{constructor(e){this.key=e,this.va=!1}}class fI{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new Lo((p=>v_(p)),Pu),this.Ma=new Map,this.xa=new Set,this.Oa=new it(be.comparator),this.Na=new Map,this.La=new qf,this.Ba={},this.ka=new Map,this.qa=So.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pI(r,e,t=!0){const i=av(r);let o;const l=i.Fa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await nv(i,e,t,!0),o}async function mI(r,e){const t=av(r);await nv(t,e,!0,!1)}async function nv(r,e,t,i){const o=await VT(r.localStore,lr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await gI(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&H_(r.remoteStore,o),p}async function gI(r,e,t,i,o){r.Ka=(I,C,O)=>(async function(H,L,X,F){let M=L.view.ma(X);M.ns&&(M=await S0(H.localStore,L.query,!1).then((({documents:A})=>L.view.ma(A,M))));const U=F&&F.targetChanges.get(L.targetId),Z=F&&F.targetMismatches.get(L.targetId)!=null,ie=L.view.applyChanges(M,H.isPrimaryClient,U,Z);return L0(H,L.targetId,ie.wa),ie.snapshot})(r,I,C,O);const l=await S0(r.localStore,e,!0),h=new uI(e,l.Ts),p=h.ma(l.documents),m=_l.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(p,r.isPrimaryClient,m);L0(r,t,v.wa);const w=new dI(e,t,h);return r.Fa.set(e,w),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),v.snapshot}async function yI(r,e,t){const i=Ae(r),o=i.Fa.get(e),l=i.Ma.get(o.targetId);if(l.length>1)return i.Ma.set(o.targetId,l.filter((h=>!Pu(h,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await of(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Kf(i.remoteStore,o.targetId),lf(i,o.targetId)})).catch(ml)):(lf(i,o.targetId),await of(i.localStore,o.targetId,!0))}async function _I(r,e){const t=Ae(r),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Kf(t.remoteStore,i.targetId))}async function vI(r,e,t){const i=NI(r);try{const o=await(function(h,p){const m=Ae(h),v=vt.now(),w=p.reduce(((O,q)=>O.add(q.key)),Le());let I,C;return m.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let q=Fr(),H=Le();return m.cs.getEntries(O,w).next((L=>{q=L,q.forEach(((X,F)=>{F.isValidDocument()||(H=H.add(X))}))})).next((()=>m.localDocuments.getOverlayedDocuments(O,q))).next((L=>{I=L;const X=[];for(const F of p){const M=zE(F,I.get(F.key).overlayedDocument);M!=null&&X.push(new Cs(F.key,M,d_(M.value.mapValue),$n.exists(!0)))}return m.mutationQueue.addMutationBatch(O,v,X,p)})).next((L=>{C=L;const X=L.applyToLocalDocumentSet(I,H);return m.documentOverlayCache.saveOverlays(O,L.batchId,X)}))})).then((()=>({batchId:C.batchId,changes:b_(I)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,p,m){let v=h.Ba[h.currentUser.toKey()];v||(v=new it(qe)),v=v.insert(p,m),h.Ba[h.currentUser.toKey()]=v})(i,o.batchId,t),await xl(i,o.changes),await Ou(i.remoteStore)}catch(o){const l=Jf(o,"Failed to persist write");t.reject(l)}}async function rv(r,e){const t=Ae(r);try{const i=await DT(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Na.get(l);h&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?We(h.va):o.removedDocuments.size>0&&(We(h.va),h.va=!1))})),await xl(t,i,e)}catch(i){await ml(i)}}function M0(r,e,t){const i=Ae(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((l,h)=>{const p=h.view.Z_(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const m=Ae(h);m.onlineState=p;let v=!1;m.queries.forEach(((w,I)=>{for(const C of I.j_)C.Z_(p)&&(v=!0)})),v&&Zf(m)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function xI(r,e,t){const i=Ae(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),l=o&&o.key;if(l){let h=new it(be.comparator);h=h.insert(l,Bt.newNoDocument(l,Ce.min()));const p=Le().add(l),m=new Mu(Ce.min(),new Map,new it(qe),h,p);await rv(i,m),i.Oa=i.Oa.remove(l),i.Na.delete(e),ep(i)}else await of(i.localStore,e,!1).then((()=>lf(i,e,t))).catch(ml)}async function wI(r,e){const t=Ae(r),i=e.batch.batchId;try{const o=await RT(t.localStore,e);iv(t,i,null),sv(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await xl(t,o)}catch(o){await ml(o)}}async function bI(r,e,t){const i=Ae(r);try{const o=await(function(h,p){const m=Ae(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return m.mutationQueue.lookupMutationBatch(v,p).next((I=>(We(I!==null),w=I.keys(),m.mutationQueue.removeMutationBatch(v,I)))).next((()=>m.mutationQueue.performConsistencyCheck(v))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(v,w,p))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>m.localDocuments.getDocuments(v,w)))}))})(i.localStore,e);iv(i,e,t),sv(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await xl(i,o)}catch(o){await ml(o)}}function sv(r,e){(r.ka.get(e)||[]).forEach((t=>{t.resolve()})),r.ka.delete(e)}function iv(r,e,t){const i=Ae(r);let o=i.Ba[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function lf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Ma.get(e))r.Fa.delete(i),t&&r.Ca.$a(i,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach((i=>{r.La.containsKey(i)||ov(r,i)}))}function ov(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(Kf(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),ep(r))}function L0(r,e,t){for(const i of t)i instanceof ev?(r.La.addReference(i.key,e),EI(r,i)):i instanceof tv?(ye("SyncEngine","Document no longer in limbo: "+i.key),r.La.removeReference(i.key,e),r.La.containsKey(i.key)||ov(r,i.key)):Se()}function EI(r,e){const t=e.key,i=t.path.canonicalString();r.Oa.get(t)||r.xa.has(i)||(ye("SyncEngine","New document in limbo: "+t),r.xa.add(i),ep(r))}function ep(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new be(et.fromString(e)),i=r.qa.next();r.Na.set(i,new hI(t)),r.Oa=r.Oa.insert(t,i),H_(r.remoteStore,new ys(lr(Of(t.path)),i,"TargetPurposeLimboResolution",jf.oe))}}async function xl(r,e,t){const i=Ae(r),o=[],l=[],h=[];i.Fa.isEmpty()||(i.Fa.forEach(((p,m)=>{h.push(i.Ka(m,e,t).then((v=>{var w;if((v||t)&&i.isPrimaryClient){const I=v?!v.fromCache:(w=t?.targetChanges.get(m.targetId))===null||w===void 0?void 0:w.current;i.sharedClientState.updateQueryState(m.targetId,I?"current":"not-current")}if(v){o.push(v);const I=Wf.Wi(m.targetId,v);l.push(I)}})))})),await Promise.all(h),i.Ca.d_(o),await(async function(m,v){const w=Ae(m);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>ne.forEach(v,(C=>ne.forEach(C.$i,(O=>w.persistence.referenceDelegate.addReference(I,C.targetId,O))).next((()=>ne.forEach(C.Ui,(O=>w.persistence.referenceDelegate.removeReference(I,C.targetId,O)))))))))}catch(I){if(!gl(I))throw I;ye("LocalStore","Failed to update sequence numbers: "+I)}for(const I of v){const C=I.targetId;if(!I.fromCache){const O=w.os.get(C),q=O.snapshotVersion,H=O.withLastLimboFreeSnapshotVersion(q);w.os=w.os.insert(C,H)}}})(i.localStore,l))}async function TI(r,e){const t=Ae(r);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const i=await z_(t.localStore,e);t.currentUser=e,(function(l,h){l.ka.forEach((p=>{p.forEach((m=>{m.reject(new de(J.CANCELLED,h))}))})),l.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xl(t,i.hs)}}function II(r,e){const t=Ae(r),i=t.Na.get(e);if(i&&i.va)return Le().add(i.key);{let o=Le();const l=t.Ma.get(e);if(!l)return o;for(const h of l){const p=t.Fa.get(h);o=o.unionWith(p.view.Va)}return o}}function av(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=rv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=II.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xI.bind(null,e),e.Ca.d_=lI.bind(null,e.eventManager),e.Ca.$a=cI.bind(null,e.eventManager),e}function NI(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bI.bind(null,e),e}class vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return jT(this.persistence,new AT,e.initialUser,this.serializer)}Ga(e){return new kT(Hf.Zr,this.serializer)}Wa(e){return new FT}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vu.provider={build:()=>new vu};class cf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>M0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=TI.bind(null,this.syncEngine),await iI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aI})()}createDatastore(e){const t=Lu(e.databaseInfo.databaseId),i=(function(l){return new $T(l)})(e.databaseInfo);return(function(l,h,p,m){return new WT(l,h,p,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,p){return new GT(i,o,l,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>M0(this.syncEngine,t,0)),(function(){return A0.D()?new A0:new UT})())}createSyncEngine(e,t){return(function(o,l,h,p,m,v,w){const I=new fI(o,l,h,p,m,v);return w&&(I.Qa=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ae(o);ye("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await vl(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}cf.provider={build:()=>new cf};class lv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class kI{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=l_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ye("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ye("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Jf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Lh(r,e){r.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await z_(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function V0(r,e){r.asyncQueue.verifyOperationInProgress();const t=await SI(r);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>P0(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>P0(e.remoteStore,o))),r._onlineComponents=e}async function SI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;To("Error using user provided cache. Falling back to memory cache: "+t),await Lh(r,new vu)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await Lh(r,new vu);return r._offlineComponents}async function cv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await V0(r,r._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await V0(r,new cf))),r._onlineComponents}function CI(r){return cv(r).then((e=>e.syncEngine))}async function uv(r){const e=await cv(r),t=e.eventManager;return t.onListen=pI.bind(null,e.syncEngine),t.onUnlisten=yI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_I.bind(null,e.syncEngine),t}function AI(r,e,t={}){const i=new Dr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,m,v){const w=new lv({next:C=>{w.Za(),h.enqueueAndForget((()=>J_(l,I)));const O=C.docs.has(p);!O&&C.fromCache?v.reject(new de(J.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&C.fromCache&&m&&m.source==="server"?v.reject(new de(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(C)},error:C=>v.reject(C)}),I=new Z_(Of(p.path),w,{includeMetadataChanges:!0,_a:!0});return X_(l,I)})(await uv(r),r.asyncQueue,e,t,i))),i.promise}function PI(r,e,t={}){const i=new Dr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,m,v){const w=new lv({next:C=>{w.Za(),h.enqueueAndForget((()=>J_(l,I))),C.fromCache&&m.source==="server"?v.reject(new de(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(C)},error:C=>v.reject(C)}),I=new Z_(p,w,{includeMetadataChanges:!0,_a:!0});return X_(l,I)})(await uv(r),r.asyncQueue,e,t,i))),i.promise}function dv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const O0=new Map;function hv(r,e,t){if(!t)throw new de(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function jI(r,e,t,i){if(e===!0&&i===!0)throw new de(J.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function F0(r){if(!be.isDocumentKey(r))throw new de(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function U0(r){if(be.isDocumentKey(r))throw new de(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Fu(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se()}function dr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new de(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fu(r);throw new de(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}class z0{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new de(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dv((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uu{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z0(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Q2;switch(i.type){case"firstParty":return new Z2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=O0.get(t);i&&(ye("ComponentProvider","Removing Datastore"),O0.delete(t),i.terminate())})(this),Promise.resolve()}}function RI(r,e,t,i={}){var o;const l=(r=dr(r,Uu))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),i.mockUserToken){let p,m;if(typeof i.mockUserToken=="string")p=i.mockUserToken,m=zt.MOCK_USER;else{p=uw(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new de(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new zt(v)}r._authCredentials=new Y2(new a_(p,m))}}class xi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new xi(this.firestore,e,this._query)}}class Qt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class bs extends xi{constructor(e,t,i){super(e,t,Of(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new be(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function DI(r,e,...t){if(r=kt(r),hv("collection","path",e),r instanceof Uu){const i=et.fromString(e,...t);return U0(i),new bs(r,null,i)}{if(!(r instanceof Qt||r instanceof bs))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(et.fromString(e,...t));return U0(i),new bs(r.firestore,null,i)}}function wo(r,e,...t){if(r=kt(r),arguments.length===1&&(e=l_.newId()),hv("doc","path",e),r instanceof Uu){const i=et.fromString(e,...t);return F0(i),new Qt(r,null,new be(i))}{if(!(r instanceof Qt||r instanceof bs))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(et.fromString(e,...t));return F0(i),new Qt(r.firestore,r instanceof bs?r.converter:null,new be(i))}}class B0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $_(this,"async_queue_retry"),this.Vu=()=>{const i=Mh();i&&ye("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=Mh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Mh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Dr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!gl(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(h){let p=h.message||"";return h.stack&&(p=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),p})(i);throw Or("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Xf.createAndSchedule(this,e,t,i,(l=>this.yu(l)));return this.Tu.push(o),o}fu(){this.Eu&&Se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Oo extends Uu{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new B0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new B0(e),this._firestoreClient=void 0,await e}}}function MI(r,e){const t=typeof r=="object"?r:_y(),i=typeof r=="string"?r:"(default)",o=vf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=lw("firestore");l&&RI(o,...l)}return o}function tp(r){if(r._terminated)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||LI(r),r._firestoreClient}function LI(r){var e,t,i;const o=r._freezeSettings(),l=(function(p,m,v,w){return new hE(p,m,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,dv(w.experimentalLongPollingOptions),w.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new kI(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(p){const m=p?._online.build();return{_offline:p?._offline.build(m),_online:m}})(r._componentsProvider))}class Ao{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ao(Mt.fromBase64String(e))}catch(t){throw new de(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ao(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bu{constructor(e){this._methodName=e}}class np{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}class rp{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}}const VI=/^__.*__$/;class OI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new yl(e,this.data,t,this.fieldTransforms)}}class fv{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class sp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return xu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(pv(this.Cu)&&VI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class FI{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Lu(e)}Qu(e,t,i,o=!1){return new sp({Cu:e,methodName:t,qu:i,path:Rt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ip(r){const e=r._freezeSettings(),t=Lu(r._databaseId);return new FI(r._databaseId,!!e.ignoreUndefinedProperties,t)}function UI(r,e,t,i,o,l={}){const h=r.Qu(l.merge||l.mergeFields?2:0,e,t,o);ap("Data must be an object, but it was:",h,i);const p=mv(i,h);let m,v;if(l.merge)m=new fn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const I of l.mergeFields){const C=uf(e,I,t);if(!h.contains(C))throw new de(J.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);yv(w,C)||w.push(C)}m=new fn(w),v=h.fieldTransforms.filter((I=>m.covers(I.field)))}else m=null,v=h.fieldTransforms;return new OI(new sn(p),m,v)}class $u extends Bu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $u}}class op extends Bu{_toFieldTransform(e){return new VE(e.path,new sl)}isEqual(e){return e instanceof op}}function zI(r,e,t,i){const o=r.Qu(1,e,t);ap("Data must be an object, but it was:",o,i);const l=[],h=sn.empty();_i(i,((m,v)=>{const w=lp(e,m,t);v=kt(v);const I=o.Nu(w);if(v instanceof $u)l.push(w);else{const C=wl(v,I);C!=null&&(l.push(w),h.set(w,C))}}));const p=new fn(l);return new fv(h,p,o.fieldTransforms)}function BI(r,e,t,i,o,l){const h=r.Qu(1,e,t),p=[uf(e,i,t)],m=[o];if(l.length%2!=0)throw new de(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<l.length;C+=2)p.push(uf(e,l[C])),m.push(l[C+1]);const v=[],w=sn.empty();for(let C=p.length-1;C>=0;--C)if(!yv(v,p[C])){const O=p[C];let q=m[C];q=kt(q);const H=h.Nu(O);if(q instanceof $u)v.push(O);else{const L=wl(q,H);L!=null&&(v.push(O),w.set(O,L))}}const I=new fn(v);return new fv(w,I,h.fieldTransforms)}function $I(r,e,t,i=!1){return wl(t,r.Qu(i?4:3,e))}function wl(r,e){if(gv(r=kt(r)))return ap("Unsupported field value:",e,r),mv(r,e);if(r instanceof Bu)return(function(i,o){if(!pv(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const p of i){let m=wl(p,o.Lu(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return DE(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=vt.fromDate(i);return{timestampValue:yu(o.serializer,l)}}if(i instanceof vt){const l=new vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yu(o.serializer,l)}}if(i instanceof np)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ao)return{bytesValue:D_(o.serializer,i._byteString)};if(i instanceof Qt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:$f(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof rp)return(function(h,p){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map((m=>{if(typeof m!="number")throw p.Bu("VectorValues must only contain numeric values.");return Ff(p.serializer,m)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${Fu(i)}`)})(r,e)}function mv(r,e){const t={};return c_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(r,((i,o)=>{const l=wl(o,e.Mu(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function gv(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof vt||r instanceof np||r instanceof Ao||r instanceof Qt||r instanceof Bu||r instanceof rp)}function ap(r,e,t){if(!gv(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=Fu(t);throw i==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+i)}}function uf(r,e,t){if((e=kt(e))instanceof zu)return e._internalPath;if(typeof e=="string")return lp(r,e);throw xu("Field path arguments must be of type string or ",r,!1,void 0,t)}const qI=new RegExp("[~\\*/\\[\\]]");function lp(r,e,t){if(e.search(qI)>=0)throw xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new zu(...e.split("."))._internalPath}catch{throw xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function xu(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${i}`),h&&(m+=` in document ${o}`),m+=")"),new de(J.INVALID_ARGUMENT,p+r+m)}function yv(r,e){return r.some((t=>t.isEqual(e)))}class _v{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HI extends _v{data(){return super.data()}}function qu(r,e){return typeof e=="string"?lp(r,e):e instanceof zu?e._internalPath:e._delegate._internalPath}function WI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new de(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cp{}class vv extends cp{}function $0(r,e,...t){let i=[];e instanceof cp&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((m=>m instanceof up)).length,p=l.filter((m=>m instanceof Hu)).length;if(h>1||h>0&&p>0)throw new de(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Hu extends vv{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Hu(e,t,i)}_apply(e){const t=this._parse(e);return xv(e._query,t),new xi(e.firestore,e.converter,Zh(e._query,t))}_parse(e){const t=ip(e.firestore);return(function(l,h,p,m,v,w,I){let C;if(v.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new de(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){W0(I,w);const O=[];for(const q of I)O.push(H0(m,l,q));C={arrayValue:{values:O}}}else C=H0(m,l,I)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||W0(I,w),C=$I(p,h,I,w==="in"||w==="not-in");return ft.create(v,w,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function KI(r,e,t){const i=e,o=qu("where",r);return Hu._create(o,i,t)}class up extends cp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new up(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Hn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const p=l.getFlattenedFilters();for(const m of p)xv(h,m),h=Zh(h,m)})(e._query,t),new xi(e.firestore,e.converter,Zh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dp extends vv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dp(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rl(l,h)})(e._query,this._field,this._direction);return new xi(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new Mo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function q0(r,e="asc"){const t=e,i=qu("orderBy",r);return dp._create(i,t)}function H0(r,e,t){if(typeof(t=kt(t))=="string"){if(t==="")throw new de(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__(e)&&t.indexOf("/")!==-1)throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(et.fromString(t));if(!be.isDocumentKey(i))throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return d0(r,new be(i))}if(t instanceof Qt)return d0(r,t._key);throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fu(t)}.`)}function W0(r,e){if(!Array.isArray(r)||r.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xv(r,e){const t=(function(o,l){for(const h of o)for(const p of h.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class GI{convertValue(e,t="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return _i(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>ct(h.doubleValue)));return new rp(l)}convertGeoPoint(e){return new np(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Df(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(el(e));default:return null}}convertTimestamp(e){const t=Is(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=et.fromString(e);We(U_(i));const o=new tl(i.get(1),i.get(3)),l=new be(i.popFirst(5));return o.isEqual(t)||Or(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function QI(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class $a{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wv extends _v{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(qu("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class su extends wv{data(e={}){return super.data(e)}}class YI{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new $a(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new su(this._firestore,this._userDataWriter,i.key,i,new $a(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const m=new su(o._firestore,o._userDataWriter,p.doc.key,p.doc,new $a(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const m=new su(o._firestore,o._userDataWriter,p.doc.key,p.doc,new $a(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return p.type!==0&&(v=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:XI(p.type),doc:m,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function XI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}function JI(r){r=dr(r,Qt);const e=dr(r.firestore,Oo);return AI(tp(e),r._key).then((t=>tN(e,r,t)))}class bv extends GI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ao(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}}function ZI(r){r=dr(r,xi);const e=dr(r.firestore,Oo),t=tp(e),i=new bv(e);return WI(r._query),PI(t,r._query).then((o=>new YI(e,i,r,o)))}function Ev(r,e,t){r=dr(r,Qt);const i=dr(r.firestore,Oo),o=QI(r.converter,e,t);return hp(i,[UI(ip(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,$n.none())])}function eN(r,e,t,...i){r=dr(r,Qt);const o=dr(r.firestore,Oo),l=ip(o);let h;return h=typeof(e=kt(e))=="string"||e instanceof zu?BI(l,"updateDoc",r._key,e,t,i):zI(l,"updateDoc",r._key,e),hp(o,[h.toMutation(r._key,$n.exists(!0))])}function Tv(r){return hp(dr(r.firestore,Oo),[new Uf(r._key,$n.none())])}function hp(r,e){return(function(i,o){const l=new Dr;return i.asyncQueue.enqueueAndForget((async()=>vI(await CI(i),o,l))),l.promise})(tp(r),e)}function tN(r,e,t){const i=t.docs.get(e._key),o=new bv(r);return new wv(r,o,e._key,i,new $a(t.hasPendingWrites,t.fromCache),e.converter)}function wu(){return new op("serverTimestamp")}(function(e,t=!0){(function(o){Do=o})(jo),Eo(new fi("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),p=new Oo(new X2(i.getProvider("auth-internal")),new tE(i.getProvider("app-check-internal")),(function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new de(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tl(v.options.projectId,w)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),ws(o0,"4.7.3",e),ws(o0,"4.7.3","esm2017")})();const nN={apiKey:"AIzaSyB1UL7Ji4gqaJ2EX_r1UoZzmZYl-succf4",authDomain:"lastz-power.firebaseapp.com",projectId:"lastz-power",storageBucket:"lastz-power.firebasestorage.app",messagingSenderId:"158054571749",appId:"1:158054571749:web:e223407cf48ec8cb93be0c"},Iv=yy(nN),ui=H2(Iv),di=MI(Iv),rN=async(r,e)=>{try{let t=e.gameId.trim();if(t=t.replace(/\//g,"_"),!t)throw new Error("Game ID ");const i=wo(di,"users",t),o={gameId:e.gameId.trim(),alliance:e.alliance.trim(),team1Power:Number(e.team1Power),team2Power:Number(e.team2Power),team3Power:Number(e.team3Power),updatedAt:wu(),submittedAt:wu()};return await Ev(i,o,{merge:!0}),{success:!0}}catch(t){return console.error(":",t),{success:!1,error:t.message}}},sN=async r=>{try{const e=wo(di,"admins",r),t=await JI(e);return t.exists()&&t.data().isActive?{success:!0,isAdmin:!0,adminData:t.data()}:{success:!0,isAdmin:!1}}catch(e){return console.error(":",e),{success:!1,error:e.message}}},Nv=()=>{const[r,e]=Y.useState(null),[t,i]=Y.useState(!1),[o,l]=Y.useState(null),[h,p]=Y.useState(!0);return Y.useEffect(()=>{const m=Db(ui,async v=>{if(e(v),v){const w=await sN(v.uid);i(w.isAdmin||!1),l(w.isAdmin?w.adminData:null)}else i(!1),l(null);p(!1)});return()=>m()},[]),{user:r,isAdmin:t,adminData:o,loading:h}},iN={zh:{title:"",subtitle:" V2",guest_mode:"",admin_tag:"",logout:"",personal_entry:"",all_management:"",footer_text:" 2026 ",admin_login_gate:"",status_operational:"",duel_calculator:"",monday_calculator:"",mon_title:"",mon_desc:"",tuesday_calculator:"",tue_title:"",tue_desc:"",wed_title:"",wed_desc:"",thu_title:"",thu_desc:"",fri_title:"",fri_desc:"",sat_title:"",sat_desc:"",total_est_score:"",reset_data:"",score_base_settings:"",base_points_desc:"",save_and_apply:"",power_increase:"",power_start:"",power_end:"",power_diff:"",est_score:"",speedup_title:"",bounty_title:"",refine_title:"",pulse_title:"",sur_orange:"",sur_purple:"",sur_blue:"",diamond_gift:"1",speedup_res_title:"",tech_power_increase:"",badge_title:"",trade_title:"",unit_trade:"",unit_recruit:"",unit_alloy:"",unit_manual:"",hero_frag_orange:"",hero_frag_purple:"",hero_frag_blue:"",exclusive_frag:"",adv_recruit:"",energy_core:"",gear_upgrade:"",alloy_title:"",skill_manual:"",radar_title:"",soldier_title:"",soldiers:"",soldier_tier:"",unit_soldier:"",unit_radar:"",unit_drawing:"",unit_wrench:"",unit_case:"",unit_plugin:"",unit_target:"",unit_gathering:"",drawing_title:"",wrench_title:"",module_case:"",tactical_plugin:"",snow_leopard:"",polar_zombie:"",gathering_title:"",gathering_coin:"Z",gathering_res:"",unit_min:"",unit_hour:"",unit_day:"",unit_count:"",how_to_check:"",guide_step_1:"1. i",guide_step_2:"2. ",close_guide:"",welcome_title:"",welcome_desc:" 100%  {icon} ",dont_show_again:"",unit_item:"",unit_person:"",tips_title:"",tips_desc:"",dev_in_progress:"",calc_dev_desc:"...",monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:"",speedup_1min:"1",power_10:"10",build_power_10:"10",bounty_orange:"",refine_stone:"1",pulse_module:"",survivor_orange:"",survivor_purple:"",survivor_blue:"",diamond_1:"1",speedup_res_1min:"1",tech_power_10:"10",badge_1:"1",trade_orange:"",hero_frag_orange:"1",hero_frag_purple:"1",hero_frag_blue:"1",exclusive_frag:"1",adv_recruit:"1",energy_core:"1",gear_upgrade:"1",alloy_10:"10",skill_manual:"1",radar_1:"",soldier_t1:"11",soldier_t2:"12",soldier_t3:"13",soldier_t4:"14",soldier_t5:"15",soldier_t6:"16",soldier_t7:"17",soldier_t8:"18",soldier_t9:"19",soldier_t10:"110",drawing_1:"1",wrench_1:"1",plugin_green:"1",plugin_blue:"1",plugin_purple:"1",plugin_orange:"1",gather_coin:"Z",gather_res:"(,,)",gather_coin_1k:"1000 Z",gather_res_1k:"1000 ",speedup_accumulate:"",batch_input_mode:"",category_subtotal:"",module_L1:"1 1",module_L2:"1 2",module_L3:"1 3",module_L4:"1 4",module_L5:"1 5",module_L6:"1 6",module_L7:"1 7",sl_10:"  1-10",sl_20:"  11-20",sl_30:"  21-30",sl_40:"  31-40",sl_50:"  41-50",sl_60:"  51-60",pz_10:"  1-10",pz_20:"  11-20",pz_30:"  21-30",pz_40:"  31-40",pz_50:"  41-50",pz_60:"  51-60",level_label:"",color_green:"",color_blue:"",color_purple:"",color_orange:"",preparing_env:"...",back_to_guest:" ",login_success:"",register_success:"",op_failed:"",email_in_use:" Email ",invalid_email:"Email ",weak_password:"6",auth_failed:"Email ",google_failed:"Google ",system_name:"",login:"",register:"",password_label:"",processing:"...",or_text:"",google_login:" Google ",form_title:"",form_desc:"",save_success:" ",save_failed:"",error_occurred:"",game_id:" ID",alliance:"",game_id_placeholder:": KingArthas",alliance_placeholder:": LastHope",team1:" (M)",team2:" (M)",team3:" (M)",save_data:"",saving:"...",combat_details:"",current_total:"",data_preview:"",sync_notice:"",last_updated:"",id_required:" ID ",alliance_required:"",admin_title:"",admin_desc:"",refresh:"",export_csv:"",preparing_export:" CSV...",stats_overview:"",display_count:"",avg_s1:"S1 ",avg_s2:"S2 ",avg_s3:"S3 ",search_placeholder:"  ID  ...",filter_options:"",member_id:" ID",alliance_label:"",s1_power:"S1 (M)",s2_power:"S2 (M)",s3_power:"S3 (M)",total_eval:"",update_record:"",actions:"",delete_confirm:"  {id} ",delete_success:"",edit:"",edit_record:"",update_success:"",cancel:"",confirm_save:"",no_data:"",no_results:"",intel_v2:" V2.0 ",data_count:"",loading_data:"...",alliance_total_power:"",alliance_avg_power:"",view_members:"",view_alliances:"",view_planner:"SVS",total_member:"",tech_bonus_settings:"",global_bonus:" (%)",recruit_bonus:" (%)",energy_core_bonus:" (%)",advanced_manual_override:"",unlock_manual_override:"",lock_to_auto:"",tech_bonus_guide_title:"",tech_bonus_guide_desc:"i"},en:{title:"Combat Tracker",subtitle:"Alliance Intel V2",guest_mode:"Guest Mode",admin_tag:"ADMIN",logout:"Logout",personal_entry:"Entry Form",all_management:"Dashboard",footer_text:" 2026 Combat Tracker",admin_login_gate:"Admin Server Entrance",status_operational:"Operational",duel_calculator:"Duel Calculator",monday_calculator:"Monday: Mod Vehicle Boost",mon_title:"Mod Vehicle Boost",mon_desc:"Upgrade car parts and eliminate wild targets to earn points",tuesday_calculator:"Tuesday: Base Building",tue_title:"Base Building",tue_desc:"Earn points through building power, speedups, and recruiting survivors",wed_title:"Age of Science",wed_desc:"Advance research and intercity trade to earn points",thu_title:"Hero Initiate",thu_desc:"Earn points through recruitment, fragments, and upgrades",fri_title:"Holistic Growth",fri_desc:"Complete various tasks to maximize your score",sat_title:"Enemy Buster",sat_desc:"Demonstrate dominance through tasks and speedups",total_est_score:"Total Estimated Score",reset_data:"Reset Data",score_base_settings:"Score Base Settings",base_points_desc:"Adjust the points earned for each item to match your in-game values",save_and_apply:"Save & Apply",power_increase:"Structure Power Increase",power_start:"Initial Power",power_end:"Target Power",power_diff:"Diff",est_score:"Est. Score",speedup_title:"Construction Speedup",bounty_title:"Orange Bounty",refine_title:"Forging Stone",pulse_title:"Pulse Modules",sur_orange:"Orange Refugee",sur_purple:"Purple Refugee",sur_blue:"Blue Refugee",diamond_gift:"1-Diamond Pack",speedup_res_title:"Research Speedup",tech_power_increase:"Tech Power Increase",badge_title:"Badges Consumed",trade_title:"Orange Trade",unit_trade:"times",unit_recruit:"times",unit_alloy:"pcs",unit_manual:"books",hero_frag_orange:"Orange Hero Fragment",hero_frag_purple:"Purple Hero Fragment",hero_frag_blue:"Blue Hero Fragment",exclusive_frag:"Excl. Equipment Fragment",adv_recruit:"Prime Recruitment",energy_core:"Power Core",gear_upgrade:"Orange Equipment as Promotion material",alloy_title:"Enhancement Alloy",skill_manual:"Orange Skill Book",radar_title:"Radar Events",soldier_title:"Train Soldiers",soldiers:"Soldiers",soldier_tier:"Tier",unit_soldier:"soldiers",unit_radar:"times",unit_drawing:"pcs",unit_wrench:"pcs",unit_case:"cases",unit_plugin:"pcs",unit_target:"targets",unit_gathering:"unit",drawing_title:"Modification Blueprint",wrench_title:"Golden Wrench",module_case:"Mod Vehicle Exterior",tactical_plugin:"Tactical Plugin Chest",snow_leopard:"Snow Leopard",polar_zombie:"Frostbane",gathering_title:"Resource Gathering",gathering_coin:"Z-Coin",gathering_res:"Other Resources(wood, electricity, food)",unit_min:"min",unit_hour:"hr",unit_day:"day",unit_count:"times",how_to_check:"How to check power?",guide_step_1:'1. Click the "i" icon at the top left of the building (e.g., HQ)',guide_step_2:'2. View the "Power" for each level in the list',close_guide:"Got it",welcome_title:"Welcome to Duel Calculator!",welcome_desc:'For 100% accurate scoring, tap the settings button {icon} to enter your "Tech Bonuses". The system now calculates points automaticallyno more manual math!',dont_show_again:"Don't show this again",unit_item:"pcs",unit_person:"px",tips_title:"Pro Tips",tips_desc:"Just set your tech bonus percentage for automatic estimation. For specific needs, you can still manually adjust final scores in settings.",dev_in_progress:"Dev in progress",calc_dev_desc:"Building calculation logic for other days...",monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",speedup_1min:"1-min Speedup (Any type)",power_10:"10 Structure Power Increase",build_power_10:"10 Structure Power Increase",bounty_orange:"Orange Bounty Task",refine_stone:"Forging Stone",pulse_module:"Pulse Module",survivor_orange:"Orange Refugee",survivor_purple:"Purple Refugee",survivor_blue:"Blue Refugee",diamond_1:"1-Diamond Pack",speedup_res_1min:"1-min Research Speedup",tech_power_10:"10 Tech Power Increase",badge_1:"1 Badge Consumed",trade_orange:"1 Orange Trade Task",hero_frag_orange:"1 Orange Hero Fragment",hero_frag_purple:"1 Purple Hero Fragment",hero_frag_blue:"1 Blue Hero Fragment",exclusive_frag:"1 Excl. Equipment Fragment",adv_recruit:"1 Prime Recruitment",energy_core:"1 Power Core",gear_upgrade:"1 Orange Equipment as Promotion material",alloy_10:"10 Enhancement Alloy",soldier_t10:"1 Tier 10 Soldier",drawing_1:"1 Modification Blueprint",wrench_1:"1 Golden Wrench",plugin_green:"1 Green Tactical Plugin Chest",plugin_blue:"1 Blue Tactical Plugin Chest",plugin_purple:"1 Purple Tactical Plugin Chest",plugin_orange:"1 Orange Tactical Plugin Chest",gather_coin:"Z-Coin",gather_res:"Other Resources(wood, electricity, food)",gather_coin_1k:"Gather 1000 Z-Coins",gather_res_1k:"Gather 1000 Other Res",speedup_accumulate:"Accumulate Speedup",batch_input_mode:"Batch Input Mode",category_subtotal:"Subtotal",module_L1:"1 Lv.1 Mod Vehicle Exterior",module_L2:"1 Lv.2 Mod Vehicle Exterior",module_L3:"1 Lv.3 Mod Vehicle Exterior",module_L4:"1 Lv.4 Mod Vehicle Exterior",module_L5:"1 Lv.5 Mod Vehicle Exterior",module_L6:"1 Lv.6 Mod Vehicle Exterior",module_L7:"1 Lv.7 Mod Vehicle Exterior",sl_10:"Kill Snow Leopard Lv.1-10",sl_20:"Kill Snow Leopard Lv.11-20",sl_30:"Kill Snow Leopard Lv.21-30",sl_40:"Kill Snow Leopard Lv.31-40",sl_50:"Kill Snow Leopard Lv.41-50",sl_60:"Kill Snow Leopard Lv.51-60",pz_10:"Kill Frostbane Lv.1-10",pz_20:"Kill Frostbane Lv.11-20",pz_30:"Kill Frostbane Lv.21-30",pz_40:"Kill Frostbane Lv.31-40",pz_50:"Kill Frostbane Lv.41-50",pz_60:"Kill Frostbane Lv.51-60",level_label:"Lv",color_green:"Green",color_blue:"Blue",color_purple:"Purple",color_orange:"Orange",radar_1:"1 Radar Event Completed",soldier_t1:"1 Tier 1 Soldier",soldier_t2:"1 Tier 2 Soldier",soldier_t3:"1 Tier 3 Soldier",soldier_t4:"1 Tier 4 Soldier",soldier_t5:"1 Tier 5 Soldier",soldier_t6:"1 Tier 6 Soldier",soldier_t7:"1 Tier 7 Soldier",soldier_t8:"1 Tier 8 Soldier",soldier_t9:"1 Tier 9 Soldier",soldier_t10:"1 Tier 10 Soldier",loading_system:"Initializing Combat System...",preparing_env:"Preparing Combat Environment...",back_to_guest:" Back to Guest Mode",login_success:"Login successful!",register_success:"Registration successful!",op_failed:"Operation failed, please try again later",email_in_use:"This Email is already in use",invalid_email:"Invalid Email format",weak_password:"Password too weak (at least 6 characters)",auth_failed:"Invalid Email or password",google_failed:"Google login failed, please try again",system_name:"Game Power Tracker",login:"Login",register:"Register",password_label:"Password",processing:"Processing...",or_text:"Or",google_login:"Sign in with Google",form_title:"Power Data Entry",form_desc:"Enter your latest hero power info to keep allies updated",save_success:" Data saved successfully!",save_failed:"Save failed: ",error_occurred:"Error occurred: ",game_id:"Game ID",alliance:"Alliance",game_id_placeholder:"e.g., KingArthas",alliance_placeholder:"e.g., LastHope",team1:"Team 1 Power (M)",team2:"Team 2 Power (M)",team3:"Team 3 Power (M)",save_data:"Save Data",saving:"Saving...",combat_details:"Team Power Details",current_total:"Total Combat Power",data_preview:"Data Preview",sync_notice:"Data will be synced to Alliance database",last_updated:"Last updated",id_required:"Game ID is required",alliance_required:"Alliance name is required",admin_title:"Alliance Intel Center",admin_desc:"Monitor and analyze member power distribution",refresh:"Refresh",export_csv:"Export CSV",preparing_export:"Preparing CSV download...",stats_overview:"Statistics",display_count:"Members",avg_s1:"S1 Avg",avg_s2:"S2 Avg",avg_s3:"S3 Avg",search_placeholder:"Search Game ID or Alliance...",filter_options:"Filters",member_id:"Member ID",alliance_label:"Alliance",s1_power:"S1 Power(M)",s2_power:"S2 Power(M)",s3_power:"S3 Power(M)",total_eval:"Total Eval",update_record:"Update Record",actions:"Action",delete_confirm:" Are you sure you want to delete {id}? This cannot be undone.",delete_success:"Deleted successfully",edit:"Edit",edit_record:"Edit Member Record",update_success:"Update successful",cancel:"Cancel",confirm_save:"Save Changes",no_data:"No data submitted yet",no_results:"No matching records found",intel_v2:"Alliance Intel V2.0 Stable",data_count:"Total Records",loading_data:"Loading Big Data...",alliance_total_power:"Total Alliance Power",alliance_avg_power:"Avg Member Power",view_members:"Members",view_alliances:"Alliances",view_planner:"SVS Strategy",total_member:"Total Members",tech_bonus_settings:"Tech Bonus Settings",global_bonus:"All Points (%)",recruit_bonus:"Hero Recruiting-driven Points (%)",energy_core_bonus:"Power Core Usage Points (%)",advanced_manual_override:"Advanced: Manual Override Final Score",unlock_manual_override:"Unlock to manually override",lock_to_auto:"Lock to use auto-calculation",tech_bonus_guide_title:"How to find tech bonuses?",tech_bonus_guide_desc:"Click the 'i' icon at the top right of the Alliance Duel interface to view detailed bonuses."}},kv=Y.createContext(),oN=({children:r})=>{const[e,t]=Y.useState(localStorage.getItem("preferred_lang")||"zh"),i=l=>iN[e][l]||l,o=()=>{const l=e==="zh"?"en":"zh";t(l),localStorage.setItem("preferred_lang",l)};return u.jsx(kv.Provider,{value:{lang:e,t:i,toggleLang:o},children:r})},Wn=()=>Y.useContext(kv);function Sv(r){var e,t,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var o=r.length;for(e=0;e<o;e++)r[e]&&(t=Sv(r[e]))&&(i&&(i+=" "),i+=t)}else for(t in r)r[t]&&(i&&(i+=" "),i+=t);return i}function _s(){for(var r,e,t=0,i="",o=arguments.length;t<o;t++)(r=arguments[t])&&(e=Sv(r))&&(i&&(i+=" "),i+=e);return i}const al=r=>typeof r=="number"&&!isNaN(r),hi=r=>typeof r=="string",pn=r=>typeof r=="function",iu=r=>hi(r)||pn(r)?r:null,df=r=>Y.isValidElement(r)||hi(r)||pn(r)||al(r);function aN(r,e,t){t===void 0&&(t=300);const{scrollHeight:i,style:o}=r;requestAnimationFrame(()=>{o.minHeight="initial",o.height=i+"px",o.transition=`all ${t}ms`,requestAnimationFrame(()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(e,t)})})}function Wu(r){let{enter:e,exit:t,appendPosition:i=!1,collapse:o=!0,collapseDuration:l=300}=r;return function(h){let{children:p,position:m,preventExitTransition:v,done:w,nodeRef:I,isIn:C,playToast:O}=h;const q=i?`${e}--${m}`:e,H=i?`${t}--${m}`:t,L=Y.useRef(0);return Y.useLayoutEffect(()=>{const X=I.current,F=q.split(" "),M=U=>{U.target===I.current&&(O(),X.removeEventListener("animationend",M),X.removeEventListener("animationcancel",M),L.current===0&&U.type!=="animationcancel"&&X.classList.remove(...F))};X.classList.add(...F),X.addEventListener("animationend",M),X.addEventListener("animationcancel",M)},[]),Y.useEffect(()=>{const X=I.current,F=()=>{X.removeEventListener("animationend",F),o?aN(X,w,l):w()};C||(v?F():(L.current=1,X.className+=` ${H}`,X.addEventListener("animationend",F)))},[C]),Ke.createElement(Ke.Fragment,null,p)}}function K0(r,e){return r!=null?{content:r.content,containerId:r.props.containerId,id:r.props.toastId,theme:r.props.theme,type:r.props.type,data:r.props.data||{},isLoading:r.props.isLoading,icon:r.props.icon,status:e}:{}}const Gt=new Map;let ll=[];const hf=new Set,lN=r=>hf.forEach(e=>e(r)),Cv=()=>Gt.size>0;function Av(r,e){var t;if(e)return!((t=Gt.get(e))==null||!t.isToastActive(r));let i=!1;return Gt.forEach(o=>{o.isToastActive(r)&&(i=!0)}),i}function Pv(r,e){df(r)&&(Cv()||ll.push({content:r,options:e}),Gt.forEach(t=>{t.buildToast(r,e)}))}function G0(r,e){Gt.forEach(t=>{e!=null&&e!=null&&e.containerId?e?.containerId===t.id&&t.toggle(r,e?.id):t.toggle(r,e?.id)})}function cN(r){const{subscribe:e,getSnapshot:t,setProps:i}=Y.useRef((function(l){const h=l.containerId||1;return{subscribe(p){const m=(function(w,I,C){let O=1,q=0,H=[],L=[],X=[],F=I;const M=new Map,U=new Set,Z=()=>{X=Array.from(M.values()),U.forEach(b=>b())},ie=b=>{L=b==null?[]:L.filter(N=>N!==b),Z()},A=b=>{const{toastId:N,onOpen:S,updateId:j,children:P}=b.props,T=j==null;b.staleId&&M.delete(b.staleId),M.set(N,b),L=[...L,b.props.toastId].filter(ce=>ce!==b.staleId),Z(),C(K0(b,T?"added":"updated")),T&&pn(S)&&S(Y.isValidElement(P)&&P.props)};return{id:w,props:F,observe:b=>(U.add(b),()=>U.delete(b)),toggle:(b,N)=>{M.forEach(S=>{N!=null&&N!==S.props.toastId||pn(S.toggle)&&S.toggle(b)})},removeToast:ie,toasts:M,clearQueue:()=>{q-=H.length,H=[]},buildToast:(b,N)=>{if((Q=>{let{containerId:le,toastId:we,updateId:ve}=Q;const je=le?le!==w:w!==1,Me=M.has(we)&&ve==null;return je||Me})(N))return;const{toastId:S,updateId:j,data:P,staleId:T,delay:ce}=N,Ee=()=>{ie(S)},Pe=j==null;Pe&&q++;const me={...F,style:F.toastStyle,key:O++,...Object.fromEntries(Object.entries(N).filter(Q=>{let[le,we]=Q;return we!=null})),toastId:S,updateId:j,data:P,closeToast:Ee,isIn:!1,className:iu(N.className||F.toastClassName),bodyClassName:iu(N.bodyClassName||F.bodyClassName),progressClassName:iu(N.progressClassName||F.progressClassName),autoClose:!N.isLoading&&(re=N.autoClose,fe=F.autoClose,re===!1||al(re)&&re>0?re:fe),deleteToast(){const Q=M.get(S),{onClose:le,children:we}=Q.props;pn(le)&&le(Y.isValidElement(we)&&we.props),C(K0(Q,"removed")),M.delete(S),q--,q<0&&(q=0),H.length>0?A(H.shift()):Z()}};var re,fe;me.closeButton=F.closeButton,N.closeButton===!1||df(N.closeButton)?me.closeButton=N.closeButton:N.closeButton===!0&&(me.closeButton=!df(F.closeButton)||F.closeButton);let z=b;Y.isValidElement(b)&&!hi(b.type)?z=Y.cloneElement(b,{closeToast:Ee,toastProps:me,data:P}):pn(b)&&(z=b({closeToast:Ee,toastProps:me,data:P}));const R={content:z,props:me,staleId:T};F.limit&&F.limit>0&&q>F.limit&&Pe?H.push(R):al(ce)?setTimeout(()=>{A(R)},ce):A(R)},setProps(b){F=b},setToggle:(b,N)=>{M.get(b).toggle=N},isToastActive:b=>L.some(N=>N===b),getSnapshot:()=>X}})(h,l,lN);Gt.set(h,m);const v=m.observe(p);return ll.forEach(w=>Pv(w.content,w.options)),ll=[],()=>{v(),Gt.delete(h)}},setProps(p){var m;(m=Gt.get(h))==null||m.setProps(p)},getSnapshot(){var p;return(p=Gt.get(h))==null?void 0:p.getSnapshot()}}})(r)).current;i(r);const o=Y.useSyncExternalStore(e,t,t);return{getToastToRender:function(l){if(!o)return[];const h=new Map;return r.newestOnTop&&o.reverse(),o.forEach(p=>{const{position:m}=p.props;h.has(m)||h.set(m,[]),h.get(m).push(p)}),Array.from(h,p=>l(p[0],p[1]))},isToastActive:Av,count:o?.length}}function uN(r){const[e,t]=Y.useState(!1),[i,o]=Y.useState(!1),l=Y.useRef(null),h=Y.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:p,pauseOnHover:m,closeToast:v,onClick:w,closeOnClick:I}=r;var C,O;function q(){t(!0)}function H(){t(!1)}function L(M){const U=l.current;h.canDrag&&U&&(h.didMove=!0,e&&H(),h.delta=r.draggableDirection==="x"?M.clientX-h.start:M.clientY-h.start,h.start!==M.clientX&&(h.canCloseOnClick=!1),U.style.transform=`translate3d(${r.draggableDirection==="x"?`${h.delta}px, var(--y)`:`0, calc(${h.delta}px + var(--y))`},0)`,U.style.opacity=""+(1-Math.abs(h.delta/h.removalDistance)))}function X(){document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",X);const M=l.current;if(h.canDrag&&h.didMove&&M){if(h.canDrag=!1,Math.abs(h.delta)>h.removalDistance)return o(!0),r.closeToast(),void r.collapseAll();M.style.transition="transform 0.2s, opacity 0.2s",M.style.removeProperty("transform"),M.style.removeProperty("opacity")}}(O=Gt.get((C={id:r.toastId,containerId:r.containerId,fn:t}).containerId||1))==null||O.setToggle(C.id,C.fn),Y.useEffect(()=>{if(r.pauseOnFocusLoss)return document.hasFocus()||H(),window.addEventListener("focus",q),window.addEventListener("blur",H),()=>{window.removeEventListener("focus",q),window.removeEventListener("blur",H)}},[r.pauseOnFocusLoss]);const F={onPointerDown:function(M){if(r.draggable===!0||r.draggable===M.pointerType){h.didMove=!1,document.addEventListener("pointermove",L),document.addEventListener("pointerup",X);const U=l.current;h.canCloseOnClick=!0,h.canDrag=!0,U.style.transition="none",r.draggableDirection==="x"?(h.start=M.clientX,h.removalDistance=U.offsetWidth*(r.draggablePercent/100)):(h.start=M.clientY,h.removalDistance=U.offsetHeight*(r.draggablePercent===80?1.5*r.draggablePercent:r.draggablePercent)/100)}},onPointerUp:function(M){const{top:U,bottom:Z,left:ie,right:A}=l.current.getBoundingClientRect();M.nativeEvent.type!=="touchend"&&r.pauseOnHover&&M.clientX>=ie&&M.clientX<=A&&M.clientY>=U&&M.clientY<=Z?H():q()}};return p&&m&&(F.onMouseEnter=H,r.stacked||(F.onMouseLeave=q)),I&&(F.onClick=M=>{w&&w(M),h.canCloseOnClick&&v()}),{playToast:q,pauseToast:H,isRunning:e,preventExitTransition:i,toastRef:l,eventHandlers:F}}function dN(r){let{delay:e,isRunning:t,closeToast:i,type:o="default",hide:l,className:h,style:p,controlledProgress:m,progress:v,rtl:w,isIn:I,theme:C}=r;const O=l||m&&v===0,q={...p,animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};m&&(q.transform=`scaleX(${v})`);const H=_s("Toastify__progress-bar",m?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${C}`,`Toastify__progress-bar--${o}`,{"Toastify__progress-bar--rtl":w}),L=pn(h)?h({rtl:w,type:o,defaultClassName:H}):_s(H,h),X={[m&&v>=1?"onTransitionEnd":"onAnimationEnd"]:m&&v<1?null:()=>{I&&i()}};return Ke.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":O},Ke.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${C} Toastify__progress-bar--${o}`}),Ke.createElement("div",{role:"progressbar","aria-hidden":O?"true":"false","aria-label":"notification timer",className:L,style:q,...X}))}let hN=1;const jv=()=>""+hN++;function fN(r){return r&&(hi(r.toastId)||al(r.toastId))?r.toastId:jv()}function Qa(r,e){return Pv(r,e),e.toastId}function bu(r,e){return{...e,type:e&&e.type||r,toastId:fN(e)}}function qc(r){return(e,t)=>Qa(e,bu(r,t))}function Re(r,e){return Qa(r,bu("default",e))}Re.loading=(r,e)=>Qa(r,bu("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Re.promise=function(r,e,t){let i,{pending:o,error:l,success:h}=e;o&&(i=hi(o)?Re.loading(o,t):Re.loading(o.render,{...t,...o}));const p={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},m=(w,I,C)=>{if(I==null)return void Re.dismiss(i);const O={type:w,...p,...t,data:C},q=hi(I)?{render:I}:I;return i?Re.update(i,{...O,...q}):Re(q.render,{...O,...q}),C},v=pn(r)?r():r;return v.then(w=>m("success",h,w)).catch(w=>m("error",l,w)),v},Re.success=qc("success"),Re.info=qc("info"),Re.error=qc("error"),Re.warning=qc("warning"),Re.warn=Re.warning,Re.dark=(r,e)=>Qa(r,bu("default",{theme:"dark",...e})),Re.dismiss=function(r){(function(e){var t;if(Cv()){if(e==null||hi(t=e)||al(t))Gt.forEach(i=>{i.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const i=Gt.get(e.containerId);i?i.removeToast(e.id):Gt.forEach(o=>{o.removeToast(e.id)})}}else ll=ll.filter(i=>e!=null&&i.options.toastId!==e)})(r)},Re.clearWaitingQueue=function(r){r===void 0&&(r={}),Gt.forEach(e=>{!e.props.limit||r.containerId&&e.id!==r.containerId||e.clearQueue()})},Re.isActive=Av,Re.update=function(r,e){e===void 0&&(e={});const t=((i,o)=>{var l;let{containerId:h}=o;return(l=Gt.get(h||1))==null?void 0:l.toasts.get(i)})(r,e);if(t){const{props:i,content:o}=t,l={delay:100,...i,...e,toastId:e.toastId||r,updateId:jv()};l.toastId!==r&&(l.staleId=r);const h=l.render||o;delete l.render,Qa(h,l)}},Re.done=r=>{Re.update(r,{progress:1})},Re.onChange=function(r){return hf.add(r),()=>{hf.delete(r)}},Re.play=r=>G0(!0,r),Re.pause=r=>G0(!1,r);const pN=typeof window<"u"?Y.useLayoutEffect:Y.useEffect,Hc=r=>{let{theme:e,type:t,isLoading:i,...o}=r;return Ke.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...o})},Vh={info:function(r){return Ke.createElement(Hc,{...r},Ke.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(r){return Ke.createElement(Hc,{...r},Ke.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(r){return Ke.createElement(Hc,{...r},Ke.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(r){return Ke.createElement(Hc,{...r},Ke.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Ke.createElement("div",{className:"Toastify__spinner"})}},mN=r=>{const{isRunning:e,preventExitTransition:t,toastRef:i,eventHandlers:o,playToast:l}=uN(r),{closeButton:h,children:p,autoClose:m,onClick:v,type:w,hideProgressBar:I,closeToast:C,transition:O,position:q,className:H,style:L,bodyClassName:X,bodyStyle:F,progressClassName:M,progressStyle:U,updateId:Z,role:ie,progress:A,rtl:b,toastId:N,deleteToast:S,isIn:j,isLoading:P,closeOnClick:T,theme:ce}=r,Ee=_s("Toastify__toast",`Toastify__toast-theme--${ce}`,`Toastify__toast--${w}`,{"Toastify__toast--rtl":b},{"Toastify__toast--close-on-click":T}),Pe=pn(H)?H({rtl:b,position:q,type:w,defaultClassName:Ee}):_s(Ee,H),me=(function(R){let{theme:Q,type:le,isLoading:we,icon:ve}=R,je=null;const Me={theme:Q,type:le};return ve===!1||(pn(ve)?je=ve({...Me,isLoading:we}):Y.isValidElement(ve)?je=Y.cloneElement(ve,Me):we?je=Vh.spinner():(ze=>ze in Vh)(le)&&(je=Vh[le](Me))),je})(r),re=!!A||!m,fe={closeToast:C,type:w,theme:ce};let z=null;return h===!1||(z=pn(h)?h(fe):Y.isValidElement(h)?Y.cloneElement(h,fe):(function(R){let{closeToast:Q,theme:le,ariaLabel:we="close"}=R;return Ke.createElement("button",{className:`Toastify__close-button Toastify__close-button--${le}`,type:"button",onClick:ve=>{ve.stopPropagation(),Q(ve)},"aria-label":we},Ke.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ke.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))})(fe)),Ke.createElement(O,{isIn:j,done:S,position:q,preventExitTransition:t,nodeRef:i,playToast:l},Ke.createElement("div",{id:N,onClick:v,"data-in":j,className:Pe,...o,style:L,ref:i},Ke.createElement("div",{...j&&{role:ie},className:pn(X)?X({type:w}):_s("Toastify__toast-body",X),style:F},me!=null&&Ke.createElement("div",{className:_s("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!P})},me),Ke.createElement("div",null,p)),z,Ke.createElement(dN,{...Z&&!re?{key:`pb-${Z}`}:{},rtl:b,theme:ce,delay:m,isRunning:e,isIn:j,closeToast:C,hide:I,type:w,style:U,className:M,controlledProgress:re,progress:A||0})))},Ku=function(r,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${r}-enter`,exit:`Toastify--animate Toastify__${r}-exit`,appendPosition:e}},gN=Wu(Ku("bounce",!0));Wu(Ku("slide",!0));Wu(Ku("zoom"));Wu(Ku("flip"));const yN={position:"top-right",transition:gN,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function _N(r){let e={...yN,...r};const t=r.stacked,[i,o]=Y.useState(!0),l=Y.useRef(null),{getToastToRender:h,isToastActive:p,count:m}=cN(e),{className:v,style:w,rtl:I,containerId:C}=e;function O(H){const L=_s("Toastify__toast-container",`Toastify__toast-container--${H}`,{"Toastify__toast-container--rtl":I});return pn(v)?v({position:H,rtl:I,defaultClassName:L}):_s(L,iu(v))}function q(){t&&(o(!0),Re.play())}return pN(()=>{if(t){var H;const L=l.current.querySelectorAll('[data-in="true"]'),X=12,F=(H=e.position)==null?void 0:H.includes("top");let M=0,U=0;Array.from(L).reverse().forEach((Z,ie)=>{const A=Z;A.classList.add("Toastify__toast--stacked"),ie>0&&(A.dataset.collapsed=`${i}`),A.dataset.pos||(A.dataset.pos=F?"top":"bot");const b=M*(i?.2:1)+(i?0:X*ie);A.style.setProperty("--y",`${F?b:-1*b}px`),A.style.setProperty("--g",`${X}`),A.style.setProperty("--s",""+(1-(i?U:0))),M+=A.offsetHeight,U+=.025})}},[i,m,t]),Ke.createElement("div",{ref:l,className:"Toastify",id:C,onMouseEnter:()=>{t&&(o(!1),Re.pause())},onMouseLeave:q},h((H,L)=>{const X=L.length?{...w}:{...w,pointerEvents:"none"};return Ke.createElement("div",{className:O(H),style:X,key:`container-${H}`},L.map(F=>{let{content:M,props:U}=F;return Ke.createElement(mN,{...U,stacked:t,collapseAll:q,isIn:p(U.toastId,U.containerId),style:U.style,key:`toast-${U.key}`},M)}))}))}function vN(){const{t:r}=Wn(),[e,t]=Y.useState(!0),[i,o]=Y.useState(""),[l,h]=Y.useState(""),[p,m]=Y.useState(!1),v=async I=>{I.preventDefault(),m(!0);try{e?(await Pb(ui,i,l),Re.success(r("login_success"))):(await Ab(ui,i,l),Re.success(r("register_success")))}catch(C){console.error("Authentication error:",C);let O=r("op_failed");C.code==="auth/email-already-in-use"?O=r("email_in_use"):C.code==="auth/invalid-email"?O=r("invalid_email"):C.code==="auth/weak-password"?O=r("weak_password"):(C.code==="auth/user-not-found"||C.code==="auth/wrong-password"||C.code==="auth/invalid-credential")&&(O=r("auth_failed")),Re.error(O)}finally{m(!1)}},w=async()=>{m(!0);const I=new Ar;try{await e2(ui,I),Re.success(r("login_success"))}catch(C){console.error("Google sign in error:",C),Re.error(r("google_failed"))}finally{m(!1)}};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-transparent px-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md border border-gray-100 animate-in fade-in zoom-in duration-500",children:[u.jsx("h1",{className:"text-3xl font-black text-center text-gray-900 mb-8 tracking-tighter uppercase",children:r("system_name")}),u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"flex p-1 bg-gray-50 rounded-xl border border-gray-100",children:[u.jsx("button",{className:`flex-1 py-2.5 text-center text-sm font-black rounded-lg transition-all duration-300 ${e?"bg-white text-indigo-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,onClick:()=>t(!0),children:r("login")}),u.jsx("button",{className:`flex-1 py-2.5 text-center text-sm font-black rounded-lg transition-all duration-300 ${e?"text-gray-400 hover:text-gray-600":"bg-white text-indigo-600 shadow-sm"}`,onClick:()=>t(!1),children:r("register")})]})}),u.jsxs("form",{onSubmit:v,className:"space-y-5",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Email"}),u.jsx("input",{type:"email",value:i,onChange:I=>o(I.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold",placeholder:"commander@alliance.com"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:r("password_label")}),u.jsx("input",{type:"password",value:l,onChange:I=>h(I.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 border border-gray-200 rounded-xl outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold",placeholder:""})]}),u.jsx("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-indigo-600 to-blue-600 text-white py-4 rounded-xl font-black uppercase tracking-widest text-xs hover:from-indigo-700 hover:to-blue-700 transition-all shadow-lg shadow-indigo-100 disabled:from-gray-300 disabled:to-gray-400 disabled:shadow-none transform active:scale-[0.98]",children:r(p?"processing":e?"login":"register")})]}),u.jsxs("div",{className:"relative my-8",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-100"})}),u.jsx("div",{className:"relative flex justify-center text-[10px] font-black uppercase tracking-[0.3em]",children:u.jsx("span",{className:"px-3 bg-white text-gray-300",children:r("or_text")})})]}),u.jsxs("button",{onClick:w,disabled:p,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-200 text-gray-600 py-3.5 rounded-xl text-xs font-black uppercase tracking-widest hover:bg-gray-50 hover:border-gray-300 transition-all shadow-sm disabled:opacity-50",children:[u.jsxs("svg",{className:"w-5 h-5 translate-y-[-1px]",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"}),u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"})]}),r("google_login")]})]})})}var xN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const wN=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),_e=(r,e)=>{const t=Y.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:h,className:p="",children:m,...v},w)=>Y.createElement("svg",{ref:w,...xN,width:o,height:o,stroke:i,strokeWidth:h?Number(l)*24/Number(o):l,className:["lucide",`lucide-${wN(r)}`,p].join(" "),...v},[...e.map(([I,C])=>Y.createElement(I,C)),...Array.isArray(m)?m:[m]]));return t.displayName=`${r}`,t};const Q0=_e("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Fo=_e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const bN=_e("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);const EN=_e("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Rv=_e("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const TN=_e("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const Eu=_e("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const Uo=_e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Tu=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Dv=_e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const IN=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Gu=_e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const NN=_e("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);const kN=_e("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const Mv=_e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const SN=_e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Lv=_e("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const bl=_e("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);const CN=_e("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]);const AN=_e("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Vv=_e("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const Es=_e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const PN=_e("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);const jN=_e("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Y0=_e("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const RN=_e("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const DN=_e("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);const MN=_e("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const X0=_e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const LN=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const VN=_e("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);const ON=_e("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);const FN=_e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);const J0=_e("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const UN=_e("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);const zN=_e("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);const Ov=_e("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);const Wc=_e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const zo=_e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const As=_e("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const BN=_e("Scroll",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}]]);const Z0=_e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Nt=_e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const $N=_e("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Po=_e("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const qN=_e("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);const bo=_e("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);const Fv=_e("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);const Uv=_e("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const ff=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const HN=_e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const pf=_e("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);const zv=_e("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);const WN=_e("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);const KN=_e("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Bv=_e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const qn=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const GN=_e("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const fp=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const QN=_e("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);const YN=_e("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);const XN=_e("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Kc=r=>r==null||r===""?"0":Number(r).toLocaleString("en-US",{maximumFractionDigits:2}),JN=r=>r?new Date(r).toLocaleString("zh-TW"):"",ZN=({user:r})=>{const{t:e}=Wn(),[t,i]=Y.useState({gameId:"",alliance:"",team1Power:"",team2Power:"",team3Power:""}),[o,l]=Y.useState({}),[h,p]=Y.useState(!1),[m,v]=Y.useState(null);Y.useEffect(()=>{const q=localStorage.getItem("game_power_last_entry"),H=localStorage.getItem("game_power_last_time");q&&i(JSON.parse(q)),H&&v(H)},[]);const w=q=>{const{name:H,value:L}=q.target;i(X=>({...X,[H]:L})),o[H]&&l(X=>({...X,[H]:""}))},I=q=>{const H={};return q.gameId?.trim()||(H.gameId=e("id_required")),q.alliance?.trim()||(H.alliance=e("alliance_required")),{valid:Object.keys(H).length===0,errors:H}},C=async q=>{q.preventDefault();const H=I(t);if(!H.valid){l(H.errors);return}p(!0);try{const L={gameId:t.gameId,alliance:t.alliance,team1Power:Number(t.team1Power||0),team2Power:Number(t.team2Power||0),team3Power:Number(t.team3Power||0)},X=await rN(r.uid,L);if(X.success){const F=new Date().toISOString();Re.success(e("save_success")),v(F),localStorage.setItem("game_power_last_entry",JSON.stringify(t)),localStorage.setItem("game_power_last_time",F)}else Re.error(e("save_failed")+X.error),l({submit:e("save_failed")+X.error})}catch(L){Re.error(e("error_occurred")+L.message),l({submit:e("error_occurred")+L.message})}finally{p(!1)}},O=Number(t.team1Power||0)+Number(t.team2Power||0)+Number(t.team3Power||0);return u.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsxs("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight flex items-center justify-center gap-2",children:[u.jsx(pf,{className:"text-yellow-500"})," ",e("form_title")]}),u.jsx("p",{className:"text-gray-500",children:e("form_desc")})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[u.jsx("form",{onSubmit:C,className:"lg:col-span-3 space-y-6",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-gray-200/50 border border-gray-100 p-8 space-y-6",children:[o.submit&&u.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 text-red-700 text-sm rounded-r-lg animate-pulse",children:o.submit}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[u.jsx(Bv,{size:16,className:"text-blue-500"})," ",e("game_id")," *"]}),u.jsx("input",{type:"text",name:"gameId",value:t.gameId,onChange:w,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 outline-none focus:ring-2 ${o.gameId?"border-red-300 ring-red-100 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-100 hover:border-gray-300"}`,placeholder:e("game_id_placeholder")}),o.gameId&&u.jsx("p",{className:"text-xs text-red-500 mt-1",children:o.gameId})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[u.jsx(qn,{size:16,className:"text-green-500"})," ",e("alliance")," *"]}),u.jsx("input",{type:"text",name:"alliance",value:t.alliance,onChange:w,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 outline-none focus:ring-2 ${o.alliance?"border-red-300 ring-red-100 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-100 hover:border-gray-300"}`,placeholder:e("alliance_placeholder")}),o.alliance&&u.jsx("p",{className:"text-xs text-red-500 mt-1",children:o.alliance})]})]}),u.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"}),u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-bold mb-2 text-sm uppercase tracking-wide",children:[u.jsx(Fv,{className:"text-red-500",size:18})," ",e("combat_details")]}),u.jsx("div",{className:"grid grid-cols-1 gap-4",children:[{name:"team1Power",label:e("team1"),color:"blue"},{name:"team2Power",label:e("team2"),color:"indigo"},{name:"team3Power",label:e("team3"),color:"purple"}].map(q=>u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"flex justify-between items-center mb-1",children:u.jsxs("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-1",children:[u.jsx(Po,{size:12})," ",q.label]})}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"number",step:"any",name:q.name,value:t[q.name],onChange:w,className:"w-full px-4 py-3 pl-10 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all hover:border-gray-300 font-mono text-lg",placeholder:"0"}),u.jsxs("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-bold italic group-hover:text-indigo-400 transition-colors",children:["S",q.name.charAt(4)]})]})]},q.name))})]}),u.jsx("button",{type:"submit",disabled:h,className:"w-full py-4 mt-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 transition-all duration-300 disabled:from-gray-300 disabled:to-gray-400 disabled:shadow-none transform active:scale-[0.98] flex items-center justify-center gap-2",children:h?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e("saving")]}):u.jsxs(u.Fragment,{children:[u.jsx(As,{size:18})," ",e("save_data")]})})]})}),u.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-blue-700 rounded-2xl p-6 text-white shadow-xl shadow-indigo-100 flex flex-col justify-between h-[180px] relative overflow-hidden",children:[u.jsxs("div",{className:"relative z-10",children:[u.jsx("p",{className:"text-indigo-100 text-[10px] font-black uppercase tracking-widest opacity-80",children:e("current_total")}),u.jsx("h3",{className:"text-4xl font-black mt-2 tracking-tighter tabular-nums leading-none",children:Kc(O)})]}),u.jsxs("div",{className:"relative z-10 flex justify-between items-end",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-[10px] text-indigo-100/60 uppercase font-bold tracking-wider",children:e("game_id")}),u.jsx("p",{className:"font-bold truncate max-w-[120px] text-sm tabular-nums",children:t.gameId||"---"})]}),u.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-lg p-2.5 flex items-center gap-2 border border-white/20",children:[u.jsx(Y0,{size:14}),u.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest leading-none",children:"STATUS OK"})]})]}),u.jsx("div",{className:"absolute -right-4 -top-4 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),u.jsx("div",{className:"absolute -left-4 -bottom-4 w-24 h-24 bg-indigo-400/20 rounded-full blur-xl"})]}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-gray-200/50 border border-gray-100 p-6 space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 pb-3",children:[u.jsxs("h4",{className:"font-black text-gray-800 flex items-center gap-2 text-[10px] uppercase tracking-widest",children:[u.jsx(Y0,{size:14,className:"text-gray-400"})," ",e("data_preview")]}),m&&u.jsxs("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-tighter",children:[e("last_updated")," ",JN(m).split(" ")[1]]})]}),u.jsx("div",{className:"space-y-4",children:[{label:e("game_id"),value:t.gameId},{label:e("alliance"),value:t.alliance},{label:e("team1"),value:Kc(t.team1Power),emphasize:!0},{label:e("team2"),value:Kc(t.team2Power),emphasize:!0},{label:e("team3"),value:Kc(t.team3Power),emphasize:!0}].map((q,H)=>u.jsxs("div",{className:"flex justify-between items-center text-xs group",children:[u.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-wider group-hover:text-gray-600 transition-colors",children:q.label}),u.jsx("span",{className:`font-black ${q.emphasize?"text-gray-700 font-mono text-sm":"text-gray-800"}`,children:q.value||(H<2?"---":"0")})]},H))}),u.jsx("div",{className:"pt-4 mt-2 border-t border-dashed border-gray-200",children:u.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold text-[10px] p-3 bg-blue-50/50 rounded-xl border border-blue-100/50 uppercase tracking-tight",children:[u.jsx(Po,{size:14}),u.jsx("span",{children:e("sync_notice")})]})})]})]})]})]})},ek=async(r=[])=>{try{const e=DI(di,"users");let t;!r||r.length===0||r.includes("*")?t=$0(e,q0("updatedAt","desc")):t=$0(e,KI("alliance","in",r),q0("updatedAt","desc"));const i=await ZI(t),o=[];return i.forEach(l=>{o.push({id:l.id,...l.data()})}),o}catch(e){throw console.error(":",e),new Error(e.message||"")}},tk=async r=>{try{return await Tv(wo(di,"users",r)),{success:!0}}catch(e){throw console.error(":",e),new Error("")}},nk=async(r,e)=>{try{const{id:t,...i}=e;let o=e.gameId.trim().replace(/\//g,"_");if(o!==r){const l=wo(di,"users",o),h=wo(di,"users",r);await Ev(l,{...i,updatedAt:wu()}),await Tv(h)}else{const l=wo(di,"users",r);await eN(l,{...i,updatedAt:wu()})}return{success:!0}}catch(t){throw console.error(":",t),new Error(t.message||"")}},rk=r=>{if(!r||r.length===0)return{totalUsers:0,averageTeam1Power:0,averageTeam2Power:0,averageTeam3Power:0,averageTotalPower:0,maxTotalPower:0,minTotalPower:0};const e=r.map(p=>{const m=Number(p.team1Power)||0,v=Number(p.team2Power)||0,w=Number(p.team3Power)||0;return{team1:m,team2:v,team3:w,total:m+v+w}}),t=e.reduce((p,m)=>p+m.team1,0),i=e.reduce((p,m)=>p+m.team2,0),o=e.reduce((p,m)=>p+m.team3,0),l=e.reduce((p,m)=>p+m.total,0),h=e.map(p=>p.total);return{totalUsers:r.length,averageTeam1Power:Math.round(t/r.length),averageTeam2Power:Math.round(i/r.length),averageTeam3Power:Math.round(o/r.length),averageTotalPower:Math.round(l/r.length),maxTotalPower:Math.max(...h),minTotalPower:Math.min(...h)}},sk=r=>{if(!r||r.length===0)return[];const e={};return r.forEach(t=>{const i=t.alliance||"";e[i]||(e[i]={name:i,memberCount:0,totalPower:0,avgPower:0,team1Power:0,team2Power:0,team3Power:0,lastUpdated:null});const o=Number(t.team1Power)||0,l=Number(t.team2Power)||0,h=Number(t.team3Power)||0,p=o+l+h,m=t.submittedAt?.toDate?.()||new Date(t.submittedAt);e[i].memberCount++,e[i].totalPower+=p,e[i].team1Power+=o,e[i].team2Power+=l,e[i].team3Power+=h,(!e[i].lastUpdated||m>e[i].lastUpdated)&&(e[i].lastUpdated=m)}),Object.values(e).map(t=>({...t,avgPower:Math.round(t.totalPower/t.memberCount),avgTeam1Power:Math.round(t.team1Power/t.memberCount),avgTeam2Power:Math.round(t.team2Power/t.memberCount),avgTeam3Power:Math.round(t.team3Power/t.memberCount)})).sort((t,i)=>i.totalPower-t.totalPower)},ik=r=>r==null||r===""?"0":Number(r).toLocaleString("en-US",{maximumFractionDigits:2}),ey=r=>{if(!r)return"";const e=r.toDate?r.toDate():new Date(r),t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),h=String(e.getMinutes()).padStart(2,"0");return`${t}-${i}-${o} ${l}:${h}`},sr=r=>ik(r),Iu=25,mf=17,ty=35,ok=55,ak=[{q:0,r:0},{q:1,r:-1},{q:1,r:0},{q:0,r:1},{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],lk=[{q:0,r:0},{q:0,r:-1},{q:0,r:1}],ck=()=>{const r=[];for(let e=-3;e<=3;e++)for(let t=-3;t<=3;t++){const i=-e-t;Math.abs(e)<=3&&Math.abs(t)<=3&&Math.abs(i)<=3&&r.push({q:e,r:t})}return r},uk=ck(),dk=()=>{const[r,e]=Y.useState({}),[t,i]=Y.useState("brush"),[o,l]=Y.useState("#3b82f6"),[h,p]=Y.useState(.8),[m,v]=Y.useState({x:300,y:300}),[w,I]=Y.useState(!0),[C,O]=Y.useState({w:800,h:600}),q=Y.useRef(null),H=Y.useRef(!1),L=Y.useRef({x:0,y:0}),X=()=>{const b={};[{id:"1",name:"1",center:{q:-16,r:16},label:"1"},{id:"2",name:"2",center:{q:0,r:-16},label:"2"},{id:"3",name:"3",center:{q:16,r:0},label:"3"}].forEach(S=>{const j=`battery_${S.id}`;uk.forEach(P=>{const T=S.center.q+P.q,ce=S.center.r+P.r;b[`${T},${ce}`]={type:"battery",color:"rgba(153, 27, 27, 0.7)",parent:j,isCenter:P.q===0&&P.r===0,label:P.q===0&&P.r===0?S.label:null}})}),e(b)};Y.useEffect(()=>{Object.keys(r).length===0&&X()},[]);const F=()=>{window.confirm("")&&X()};Y.useEffect(()=>{const b=q.current;if(!b)return;const N=S=>{S.preventDefault();const j=S.deltaY>0?-.05:.05;p(P=>Math.min(3,Math.max(.2,P+j)))};return b.addEventListener("wheel",N,{passive:!1}),()=>b.removeEventListener("wheel",N)},[]);const M=(b,N)=>{const S=Iu*(Math.sqrt(3)*b+Math.sqrt(3)/2*N),j=Iu*(3/2)*N;return{x:S,y:j}};Y.useEffect(()=>{const b=()=>{q.current&&O({w:q.current.clientWidth,h:q.current.clientHeight})};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const U=b=>{(b.button===1||b.button===0&&b.altKey)&&(H.current=!0,L.current={x:b.clientX,y:b.clientY},b.preventDefault())},Z=b=>{if(H.current){const N=b.clientX-L.current.x,S=b.clientY-L.current.y;v(j=>({x:j.x+N,y:j.y+S})),L.current={x:b.clientX,y:b.clientY}}},ie=(b,N)=>{e(S=>{const j=`${b},${N}`;let P={...S};if(t==="brush")P[j]={type:"color",color:o};else if(t==="eraser"){const T=P[j];if(T?.parent){const ce=T.parent;Object.keys(P).forEach(Ee=>{P[Ee].parent===ce&&delete P[Ee]})}else delete P[j]}else if(t==="hq"||t==="cannon"){const T=t==="hq"?ak:lk;if(T.some(Pe=>{const me=b+Pe.q,re=N+Pe.r,fe=`${me},${re}`,z=P[fe];return!!(z&&z.type!=="color"||Math.max(Math.abs(me),Math.abs(re),Math.abs(-me-re))<=mf)}))return S;const Ee=j;T.forEach(Pe=>{const me=b+Pe.q,re=N+Pe.r;P[`${me},${re}`]={type:t,color:o,parent:Ee,isCenter:Pe.q===0&&Pe.r===0}})}return P})},A=Y.useMemo(()=>{const b=[],N=ok;for(let S=-N;S<=N;S++)for(let j=-N;j<=N;j++){const P=-S-j;Math.abs(P)<=N&&b.push(u.jsx(hk,{q:S,r:j,cell:r[`${S},${j}`],showCoords:w,applyAction:ie,hexToPixel:M},`${S},${j}`))}return b},[r,w]);return u.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] bg-slate-900 rounded-2xl overflow-hidden border border-slate-700 shadow-2xl relative",children:[u.jsxs("div",{className:"p-4 bg-slate-900/80 backdrop-blur-md border-b border-slate-800 flex items-center justify-between z-10",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex bg-slate-800 rounded-lg p-1",children:[u.jsx(Gc,{active:t==="brush",onClick:()=>i("brush"),icon:u.jsx(ON,{size:18}),label:""}),u.jsx(Gc,{active:t==="hq",onClick:()=>i("hq"),icon:u.jsx(Vv,{size:18}),label:""}),u.jsx(Gc,{active:t==="cannon",onClick:()=>i("cannon"),icon:u.jsx(bo,{size:18}),label:"/"}),u.jsx(Gc,{active:t==="eraser",onClick:()=>i("eraser"),icon:u.jsx(ff,{size:18}),label:""})]}),u.jsx("div",{className:"h-6 w-[1px] bg-slate-700"}),u.jsx("div",{className:"flex gap-2",children:["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6"].map(b=>u.jsx("button",{className:`w-8 h-8 rounded-full border-2 transition-transform ${o===b?"border-white scale-110":"border-transparent opacity-60 hover:opacity-100"}`,style:{backgroundColor:b},onClick:()=>l(b)},b))})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{onClick:()=>I(!w),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${w?"bg-blue-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[u.jsx(FN,{size:14})," "]}),u.jsx("div",{className:"h-6 w-[1px] bg-slate-700"}),u.jsxs("div",{className:"flex items-center gap-3 bg-slate-800/50 px-3 py-1.5 rounded-xl border border-slate-700/50",children:[u.jsx("button",{onClick:()=>p(b=>Math.max(.1,b-.1)),className:"text-slate-400 hover:text-white transition-colors",children:u.jsx(XN,{size:16})}),u.jsx("input",{type:"range",min:"0.1",max:"2.5",step:"0.05",value:h,onChange:b=>p(parseFloat(b.target.value)),className:"w-24 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),u.jsx("button",{onClick:()=>p(b=>Math.min(2.5,b+.1)),className:"text-slate-400 hover:text-white transition-colors",children:u.jsx(YN,{size:16})}),u.jsxs("span",{className:"text-[10px] font-mono text-blue-400 w-10 text-center",children:[Math.round(h*100),"%"]})]}),u.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 text-slate-400 rounded-lg text-xs font-medium hover:bg-red-900/40 hover:text-red-400 transition-all border border-slate-700",children:[u.jsx(ff,{size:14})," "]}),u.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-blue-900/20 hover:from-blue-500 transition-all",children:[u.jsx(Mv,{size:16})," "]})]})]}),u.jsxs("div",{ref:q,className:"flex-1 overflow-hidden cursor-move relative",onMouseDown:U,onMouseMove:Z,onMouseUp:()=>H.current=!1,onMouseLeave:()=>H.current=!1,children:[u.jsx("svg",{width:"100%",height:"100%",className:"absolute inset-0",children:u.jsx("g",{transform:`translate(${m.x}, ${m.y}) scale(${h})`,children:A})}),u.jsxs("div",{className:"absolute bottom-6 right-6 bg-slate-900/60 backdrop-blur border border-slate-700 p-4 rounded-xl pointer-events-none",children:[u.jsx("h4",{className:"text-blue-400 font-bold text-xs mb-2 uppercase tracking-widest",children:""}),u.jsxs("ul",{className:"text-[10px] text-slate-400 space-y-1",children:[u.jsxs("li",{children:[" ",u.jsx("b",{children:""}),": "]}),u.jsxs("li",{children:[" ",u.jsx("b",{children:""}),": "]}),u.jsxs("li",{children:[" ",u.jsx("b",{children:"Alt + "}),": "]}),u.jsxs("li",{children:[" ",u.jsx("b",{children:""}),": "]})]})]})]})]})},hk=Y.memo(({q:r,r:e,cell:t,showCoords:i,applyAction:o,hexToPixel:l})=>{const{x:h,y:p}=l(r,e),m=Math.max(Math.abs(r),Math.abs(e),Math.abs(-r-e)),v=m<=mf,w=m===mf,I=m<=ty,C=m===ty,O=Y.useMemo(()=>{const L=[];for(let X=0;X<6;X++){const F=Math.PI/180*(60*X+30);L.push(`${h+Iu*Math.cos(F)},${p+Iu*Math.sin(F)}`)}return L.join(" ")},[h,p]);let q="rgba(248, 250, 252, 0.3)",H="rgba(186, 230, 253, 0.2)";return v?(q="rgba(30, 58, 138, 0.6)",H="rgba(59, 130, 246, 0.3)"):I&&(q="rgba(120, 113, 108, 0.4)",H="rgba(168, 162, 158, 0.2)"),u.jsxs("g",{className:"group/hex transition-all duration-200",children:[u.jsx("polygon",{points:O,onClick:()=>o(r,e),fill:t?.color||q,fillOpacity:t?.type==="color"?.4:1,stroke:w?"#06b6d4":C?"#d97706":t?"rgba(255,255,255,0.8)":H,strokeWidth:w||C?3:t?.isCenter?2.5:.8,className:"cursor-pointer transition-all duration-300 hover:fill-slate-400/30"}),i&&r%4===0&&e%4===0&&!t?.label&&u.jsxs("text",{x:h,y:p,fontSize:"5",textAnchor:"middle",fill:v?"rgba(147, 197, 253, 0.3)":I?"rgba(68, 64, 60, 0.4)":"rgba(14, 165, 233, 0.3)",className:"pointer-events-none select-none font-mono",children:[r,",",e]}),t?.label&&u.jsx("text",{x:h,y:p+5,fontSize:"14",fontWeight:"bold",textAnchor:"middle",fill:"white",className:"pointer-events-none select-none drop-shadow-md",children:t.label}),t?.isCenter&&u.jsx("g",{transform:`translate(${h-8}, ${p-8})`,className:"pointer-events-none",children:t.type==="hq"?u.jsx(Vv,{size:16,className:"text-white drop-shadow-[0_0_10px_rgba(255,255,255,0.8)]"}):u.jsx(bo,{size:16,className:"text-white animate-pulse"})})]})}),Gc=({active:r,onClick:e,icon:t,label:i})=>u.jsx("button",{onClick:e,title:i,className:`p-2.5 rounded-md flex flex-col items-center gap-1 transition-all ${r?"bg-blue-600 text-white shadow-inner":"text-slate-400 hover:bg-slate-700 hover:text-slate-200"}`,children:t}),ny=({forcePlanner:r=!1})=>{const{t:e}=Wn(),{adminData:t}=Nv(),[i,o]=Y.useState([]),[l,h]=Y.useState(!0),[p,m]=Y.useState(""),[v,w]=Y.useState(null),[I,C]=Y.useState([]),[O,q]=Y.useState(r?"planner":"members"),[H,L]=Y.useState(""),[X,F]=Y.useState({key:"submittedAt",direction:"desc"}),[M,U]=Y.useState(null),[Z,ie]=Y.useState(!1),[A,b]=Y.useState({gameId:"",alliance:"",team1Power:"",team2Power:"",team3Power:""}),[N,S]=Y.useState(!1);Y.useEffect(()=>{t&&j()},[t]);const j=async()=>{h(!0),m("");try{const z=await ek(t?.allowedAlliances||[]);Array.isArray(z)&&(o(z),w(rk(z)),C(sk(z)))}catch(z){m(e("error_occurred")+z.message),Re.error(e("error_occurred"))}finally{h(!1)}},P=z=>{let R="desc";X.key===z&&X.direction==="desc"&&(R="asc"),F({key:z,direction:R})},T=async(z,R)=>{if(window.confirm(e("delete_confirm").replace("{id}",R)))try{const Q=await tk(z);Q.success?(Re.success(e("delete_success")),j()):Re.error(e("error_occurred")+Q.error)}catch(Q){Re.error(e("error_occurred")+Q.message)}},ce=z=>{U(z),b({gameId:z.gameId||"",alliance:z.alliance||"",team1Power:z.team1Power||0,team2Power:z.team2Power||0,team3Power:z.team3Power||0}),ie(!0)},Ee=z=>{const{name:R,value:Q}=z.target;b(le=>({...le,[R]:Q}))},Pe=async z=>{if(z.preventDefault(),!!M){S(!0);try{const R={...M,gameId:A.gameId,alliance:A.alliance,team1Power:Number(A.team1Power||0),team2Power:Number(A.team2Power||0),team3Power:Number(A.team3Power||0)};(await nk(M.id,R)).success&&(Re.success(e("update_success")),ie(!1),U(null),j())}catch(R){Re.error(e("error_occurred")+R.message)}finally{S(!1)}}},me=i.filter(z=>z.gameId?.toLowerCase().includes(H.toLowerCase())||z.alliance?.toLowerCase().includes(H.toLowerCase())).sort((z,R)=>{let Q,le;return X.key==="totalPower"?(Q=(z.team1Power||0)+(z.team2Power||0)+(z.team3Power||0),le=(R.team1Power||0)+(R.team2Power||0)+(R.team3Power||0)):(Q=z[X.key],le=R[X.key]),Q<le?X.direction==="asc"?-1:1:Q>le?X.direction==="asc"?1:-1:0});me.length,me.length>0&&Math.round(me.reduce((z,R)=>z+(R.team1Power||0),0)/me.length),me.length>0&&Math.round(me.reduce((z,R)=>z+(R.team2Power||0),0)/me.length),me.length>0&&Math.round(me.reduce((z,R)=>z+(R.team3Power||0),0)/me.length);const re=()=>{const z=[e("member_id"),e("alliance_label"),e("team1"),e("team2"),e("team3"),e("total_eval"),e("update_record")],R=me.map(ve=>[ve.gameId,ve.alliance,ve.team1Power,ve.team2Power,ve.team3Power,(ve.team1Power||0)+(ve.team2Power||0)+(ve.team3Power||0),ey(ve.submittedAt)]),Q=[z.join(","),...R.map(ve=>ve.join(","))].join(`
`),le=new Blob(["\uFEFF"+Q],{type:"text/csv;charset=utf-8;"}),we=document.createElement("a");we.href=URL.createObjectURL(le),we.download=`_${new Date().toISOString().split("T")[0]}.csv`,we.click(),Re.info(e("preparing_export"))},fe=z=>X.key!==z?u.jsx(Wc,{size:12,className:"opacity-20 translate-y-[2px]"}):X.direction==="asc"?u.jsx(IN,{size:14,className:"text-blue-500"}):u.jsx(Tu,{size:14,className:"text-blue-500"});return l?u.jsxs("div",{className:"flex flex-col items-center justify-center p-20 space-y-4 text-center animate-in fade-in transition-all duration-700",children:[u.jsx(Wc,{className:"w-10 h-10 text-blue-500 animate-spin"}),u.jsx("p",{className:"text-gray-400 font-black tracking-widest uppercase text-[10px]",children:e("loading_data")})]}):u.jsxs("div",{className:"space-y-8 animate-in fade-in duration-700 relative",children:[Z&&u.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[u.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>ie(!1)}),u.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg relative z-10 overflow-hidden animate-in zoom-in duration-300 border border-gray-100",children:[u.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 p-6 text-white flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-md border border-white/20",children:u.jsx(J0,{size:20})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-black text-lg tracking-tight",children:e("edit_record")}),u.jsx("p",{className:"text-xs text-indigo-100 font-bold opacity-80 uppercase tracking-widest",children:M?.gameId})]})]}),u.jsx("button",{onClick:()=>ie(!1),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:u.jsx(fp,{size:20})})]}),u.jsxs("form",{onSubmit:Pe,className:"p-8 space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1 flex items-center gap-1.5",children:[u.jsx(Bv,{size:12,className:"text-blue-500"})," ",e("game_id")]}),u.jsx("input",{type:"text",name:"gameId",value:A.gameId,onChange:Ee,className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1 flex items-center gap-1.5",children:[u.jsx(Po,{size:12,className:"text-green-500"})," ",e("alliance_label")]}),u.jsx("input",{type:"text",name:"alliance",value:A.alliance,onChange:Ee,className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold"})]})]}),u.jsx("div",{className:"h-px bg-gray-100 italic flex items-center justify-center",children:u.jsx("span",{className:"bg-white px-3 text-[9px] font-black text-gray-300 uppercase tracking-[0.3em]",children:e("combat_details")})}),u.jsx("div",{className:"space-y-4",children:[{name:"team1Power",label:e("s1_power")},{name:"team2Power",label:e("s2_power")},{name:"team3Power",label:e("s3_power")}].map(z=>u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("label",{className:"w-24 text-[10px] font-black text-gray-400 uppercase tracking-widest group-hover:text-indigo-500 transition-colors",children:z.label}),u.jsxs("div",{className:"flex-grow relative",children:[u.jsx("input",{type:"number",name:z.name,value:A[z.name],onChange:Ee,className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 transition-all text-sm font-mono font-bold"}),u.jsx(Fv,{size:14,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300 group-focus-within:text-indigo-400 transition-colors"})]})]},z.name))}),u.jsxs("div",{className:"pt-6 flex gap-4",children:[u.jsx("button",{type:"button",onClick:()=>ie(!1),className:"flex-1 py-3 px-6 rounded-xl border border-gray-200 text-gray-400 text-xs font-black uppercase tracking-widest hover:bg-gray-50 transition-all",children:e("cancel")}),u.jsxs("button",{type:"submit",disabled:N,className:"flex-[2] py-3 px-6 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100 flex items-center justify-center gap-2 cursor-pointer disabled:opacity-50",children:[N?u.jsx(Wc,{size:14,className:"animate-spin"}):u.jsx(As,{size:14}),u.jsx("span",{children:e("confirm_save")})]})]})]})]})]}),!r&&u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("h2",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-2 uppercase",children:[u.jsx(Q0,{className:"text-indigo-600"})," ",e("admin_title")]}),u.jsx("p",{className:"text-sm text-gray-500",children:e("admin_desc")})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"bg-white border border-gray-100 p-1 rounded-xl flex shadow-sm mr-2",children:[u.jsxs("button",{onClick:()=>q("members"),className:`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-tight flex items-center gap-1.5 transition-all ${O==="members"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:bg-gray-50"}`,children:[u.jsx(qn,{size:14})," ",e("view_members")]}),u.jsxs("button",{onClick:()=>q("alliances"),className:`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-tight flex items-center gap-1.5 transition-all ${O==="alliances"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:bg-gray-50"}`,children:[u.jsx(RN,{size:14})," ",e("view_alliances")]})]}),u.jsxs("button",{onClick:j,className:"p-2.5 bg-white border border-gray-200 text-gray-600 rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-all shadow-sm flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[u.jsx(Wc,{size:14})," ",u.jsx("span",{className:"hidden sm:inline",children:e("refresh")})]}),u.jsxs("button",{onClick:re,className:"p-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all shadow-md shadow-indigo-100 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[u.jsx(Mv,{size:14})," ",e("export_csv")]})]})]}),v&&!r&&u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:e("total_member"),value:i.length,icon:u.jsx(qn,{}),color:"blue"},{label:e("alliance_total_power"),value:sr(i.reduce((z,R)=>z+(R.team1Power||0)+(R.team2Power||0)+(R.team3Power||0),0)),icon:u.jsx(zN,{}),color:"green"},{label:e("alliance_avg_power"),value:sr(i.length>0?Math.round(i.reduce((z,R)=>z+(R.team1Power||0)+(R.team2Power||0)+(R.team3Power||0),0)/i.length):0),icon:u.jsx(HN,{}),color:"indigo"},{label:e("data_count"),value:i.length,icon:u.jsx(Q0,{}),color:"purple"}].map((z,R)=>u.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm flex items-center gap-4 group hover:shadow-md transition-shadow",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-50 flex items-center justify-center group-hover:bg-indigo-50 transition-colors",children:u.jsx("div",{className:"text-indigo-600 group-hover:scale-110 transition-transform",children:z.icon})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:z.label}),u.jsx("p",{className:"text-xl font-black text-gray-800 tracking-tighter tabular-nums leading-none mt-1",children:z.value})]})]},R))}),u.jsxs("div",{className:r?"":"bg-white rounded-2xl border border-gray-100 shadow-xl shadow-gray-200/40 relative overflow-hidden",children:[O!=="planner"&&!r&&u.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50/30 flex flex-col sm:flex-row gap-4",children:[u.jsxs("div",{className:"relative flex-grow",children:[u.jsx(Z0,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),u.jsx("input",{type:"text",placeholder:e("search_placeholder"),value:H,onChange:z=>L(z.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 outline-none transition-all text-xs font-bold"})]}),u.jsxs("button",{className:"px-4 py-2.5 bg-white border border-gray-200 text-gray-400 rounded-xl hover:bg-gray-50 transition-all text-[10px] font-black uppercase tracking-widest flex items-center gap-2",children:[u.jsx(SN,{size:14})," ",e("filter_options")]})]}),u.jsx("div",{className:r?"":"overflow-x-auto",children:O==="planner"?u.jsx("div",{className:r?"":"p-4 bg-slate-950",children:u.jsx(dk,{})}):O==="alliances"?u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-gray-50/50",children:[u.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("alliance_label")}),u.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("total_member")}),u.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-indigo-600 bg-indigo-50/10 uppercase tracking-widest",children:e("avg_s1")}),u.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-indigo-600 bg-indigo-50/10 uppercase tracking-widest",children:e("avg_s2")}),u.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-indigo-600 bg-indigo-50/10 uppercase tracking-widest",children:e("avg_s3")}),u.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("alliance_avg_power")}),u.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("last_updated")})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:I.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"7",className:"px-6 py-20 text-center text-gray-400 font-bold uppercase text-xs tracking-widest opacity-20",children:e("no_data")})}):I.filter(z=>z.name.toLowerCase().includes(H.toLowerCase())).map(z=>u.jsxs("tr",{className:"group hover:bg-indigo-50/20 transition-colors",children:[u.jsx("td",{className:"px-6 py-5",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-[10px] font-black text-indigo-500 border border-indigo-200",children:u.jsx(Po,{size:14})}),u.jsx("span",{className:"font-bold text-gray-800 tracking-tight",children:z.name})]})}),u.jsx("td",{className:"px-6 py-5",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(qn,{size:14,className:"text-gray-300"}),u.jsx("span",{className:"font-bold text-gray-600 tabular-nums",children:z.memberCount})]})}),u.jsx("td",{className:"px-6 py-5",children:u.jsx("span",{className:"font-black text-indigo-600 font-mono text-sm tabular-nums tracking-tighter",children:sr(z.avgTeam1Power)})}),u.jsx("td",{className:"px-6 py-5",children:u.jsx("span",{className:"font-black text-indigo-600 font-mono text-sm tabular-nums tracking-tighter",children:sr(z.avgTeam2Power)})}),u.jsx("td",{className:"px-6 py-5",children:u.jsx("span",{className:"font-black text-indigo-600 font-mono text-sm tabular-nums tracking-tighter",children:sr(z.avgTeam3Power)})}),u.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:sr(z.avgPower)}),u.jsx("td",{className:"px-6 py-5",children:u.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400 text-[10px] font-bold uppercase tabular-nums",children:[u.jsx(Eu,{size:12}),z.lastUpdated?z.lastUpdated.toLocaleString("zh-TW").split(" ")[0]:"---"]})})]},z.name))})]}):u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-gray-50/50",children:[[{key:"gameId",label:e("member_id")},{key:"alliance",label:e("alliance_label")},{key:"team1Power",label:e("s1_power")},{key:"team2Power",label:e("s2_power")},{key:"team3Power",label:e("s3_power")},{key:"totalPower",label:e("total_eval"),focus:!0},{key:"submittedAt",label:e("update_record")}].map(z=>u.jsx("th",{onClick:()=>P(z.key),className:`px-6 py-4 text-[10px] font-black uppercase tracking-widest cursor-pointer hover:bg-gray-100/50 transition-colors select-none ${z.focus?"text-indigo-600 bg-indigo-50/10":"text-gray-400"}`,children:u.jsxs("div",{className:"flex items-center justify-between gap-1",children:[z.label,fe(z.key)]})},z.key)),u.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:e("actions")})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:me.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"8",className:"px-6 py-20 text-center",children:u.jsxs("div",{className:"flex flex-col items-center space-y-4 opacity-20",children:[u.jsx(Z0,{size:48}),u.jsx("p",{className:"font-bold uppercase text-xs tracking-widest",children:e(H?"no_results":"no_data")})]})})}):me.map(z=>{const R=(z.team1Power||0)+(z.team2Power||0)+(z.team3Power||0);return u.jsxs("tr",{className:"group hover:bg-indigo-50/20 transition-colors",children:[u.jsx("td",{className:"px-6 py-5",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-[10px] font-black text-gray-500 border border-gray-200",children:z.gameId?.substring(0,2).toUpperCase()}),u.jsx("span",{className:"font-bold text-gray-800 tracking-tight",children:z.gameId})]})}),u.jsx("td",{className:"px-6 py-5 text-xs font-bold text-gray-500 tracking-tighter",children:z.alliance}),u.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:sr(z.team1Power)}),u.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:sr(z.team2Power)}),u.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:sr(z.team3Power)}),u.jsx("td",{className:"px-6 py-5",children:u.jsx("span",{className:"font-black text-indigo-600 font-mono text-base tabular-nums tracking-tighter",children:sr(R)})}),u.jsx("td",{className:"px-6 py-5",children:u.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400 text-[10px] font-bold uppercase tabular-nums",children:[u.jsx(Eu,{size:12}),ey(z.submittedAt).split(" ")[0]]})}),u.jsx("td",{className:"px-6 py-5 text-center",children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("button",{onClick:()=>ce(z),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",title:e("edit"),children:u.jsx(J0,{size:16})}),u.jsx("button",{onClick:()=>T(z.id,z.gameId),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",title:e("delete"),children:u.jsx(ff,{size:16})})]})})]},z.id)})})]})}),u.jsxs("div",{className:"p-4 bg-gray-50/50 border-t border-gray-100 text-[9px] font-black text-gray-300 uppercase tracking-[0.2em] flex justify-between items-center",children:[u.jsx("span",{children:e("intel_v2")}),u.jsxs("span",{className:"bg-white px-2 py-0.5 rounded border border-gray-200 text-gray-400",children:[e(O==="alliances"?"alliance_label":"data_count"),": ",O==="alliances"?I.length:me.length]})]})]})]})},ry=({icon:r,title:e,items:t,colorClass:i,t:o,subtotal:l})=>u.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100 hover:shadow-md transition-all md:col-span-2 lg:col-span-3",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:`p-3 rounded-2xl ${i} bg-opacity-10 shadow-sm`,children:u.jsx(r,{size:24,className:i.replace("bg-","text-")})}),u.jsx("h3",{className:"font-black text-gray-900 leading-tight",children:e})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:t.map(h=>u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between items-center px-1",children:[u.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-tighter",children:h.label}),u.jsxs("span",{className:"text-[9px] font-bold text-gray-400 whitespace-nowrap",children:[h.pts," pts"]})]}),u.jsx("div",{className:"relative",children:u.jsx("input",{type:"text",name:h.key,value:h.value,onChange:h.onChange,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold focus:ring-2 focus:ring-blue-500/20 transition-all text-sm font-mono text-center"})})]},h.key))}),u.jsx("div",{className:"mt-6 flex justify-end",children:u.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[o("est_score"),": ",u.jsx("span",{className:`${i.replace("bg-","text-")} font-black`,children:l})]})})]}),Qc=({icon:r,title:e,name:t,inputsKey:i,unit:o,inputUnit:l,pts:h,colorClass:p,value:m,onChange:v,score:w,t:I})=>u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`p-2 rounded-lg ${p} bg-opacity-10`,children:u.jsx(r,{size:18,className:p.replace("bg-","text-")})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:e})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[h," pts / ",o]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",name:i,value:m,onChange:v,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-base"}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md",children:l||o})]}),u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[I("est_score"),": ",u.jsx("span",{className:"text-blue-600 font-black",children:w})]})})]}),fk=()=>{const{t:r}=Wn(),[e,t]=Y.useState({drawing_1:102,wrench_1:25500,radar_1:20500,module_L1:2e3,module_L2:6100,module_L3:18500,module_L4:55500,module_L5:166600,module_L6:499800,module_L7:14e5,plugin_green:12300,plugin_blue:51400,plugin_purple:205600,plugin_orange:1e6,sl_10:2500,sl_20:3e3,sl_30:3500,sl_40:4e3,sl_50:5100,sl_60:6100,pz_10:5100,pz_20:6100,pz_30:7100,pz_40:8100,pz_50:10200,pz_60:12200,gather_coin_1k:15,gather_res_1k:5,diamond_1:30}),[i,o]=Y.useState({drawing_count:"",wrench_count:"",radar_count:"",module_L1:"",module_L2:"",module_L3:"",module_L4:"",module_L5:"",module_L6:"",module_L7:"",plugin_green:"",plugin_blue:"",plugin_purple:"",plugin_orange:"",sl_count:"",sl_level:"10",pz_count:"",pz_level:"10",gather_coin:"",gather_res:"",diamond_count:""}),[l,h]=Y.useState(!1),[p,m]=Y.useState(!1),[v,w]=Y.useState(!1);Y.useEffect(()=>{const M=localStorage.getItem("duel_mon_base_values"),U=localStorage.getItem("duel_welcome_dismissed_mon");if(M)try{t(JSON.parse(M))}catch(Z){console.error("Failed to load base values",Z)}U||m(!0)},[]);const I=M=>{const{name:U,value:Z}=M.target;(Z===""||/^\d+$/.test(Z))&&o(ie=>({...ie,[U]:Z}))},C=(M,U)=>{(U===""||/^\d+(\.\d+)?$/.test(U))&&t(Z=>({...Z,[M]:Number(U)||0}))},O=()=>{localStorage.setItem("duel_mon_base_values",JSON.stringify(e)),h(!1)},q=()=>{v&&localStorage.setItem("duel_welcome_dismissed_mon","true"),m(!1)},H=()=>{o({drawing_count:"",wrench_count:"",radar_count:"",module_L1:"",module_L2:"",module_L3:"",module_L4:"",module_L5:"",module_L6:"",module_L7:"",plugin_green:"",plugin_blue:"",plugin_purple:"",plugin_orange:"",sl_count:"",sl_level:"10",pz_count:"",pz_level:"10",gather_coin:"",gather_res:"",diamond_count:""})},L=Y.useMemo(()=>{let M=0;for(let Z=1;Z<=7;Z++)M+=(Number(i[`module_L${Z}`])||0)*(e[`module_L${Z}`]||0);let U=0;return["green","blue","purple","orange"].forEach(Z=>{U+=(Number(i[`plugin_${Z}`])||0)*(e[`plugin_${Z}`]||0)}),{drawing:(Number(i.drawing_count)||0)*e.drawing_1,wrench:(Number(i.wrench_count)||0)*e.wrench_1,radar:(Number(i.radar_count)||0)*e.radar_1,module:M,plugin:U,sl:(Number(i.sl_count)||0)*(e[`sl_${i.sl_level}`]||0),pz:(Number(i.pz_count)||0)*(e[`pz_${i.pz_level}`]||0),gather_coin:Math.floor((Number(i.gather_coin)||0)/1e3)*e.gather_coin_1k,gather_res:Math.floor((Number(i.gather_res)||0)/1e3)*e.gather_res_1k,diamond:(Number(i.diamond_count)||0)*e.diamond_1}},[i,e]),X=Y.useMemo(()=>Object.values(L).reduce((M,U)=>M+U,0),[L]),F=M=>!M||isNaN(M)||M===0?"0":new Intl.NumberFormat("en-US").format(Math.floor(M));return u.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[p&&u.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:u.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-slate-100",children:u.jsxs("div",{className:"p-10 text-center space-y-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-20 h-20 bg-slate-800 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-slate-200 animate-bounce cursor-default relative z-10",children:u.jsx(Fo,{className:"text-white",size:40})}),u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 bg-slate-400 rounded-3xl blur-2xl opacity-20 animate-pulse"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight",children:r("welcome_title")}),u.jsxs("p",{className:"text-sm font-medium text-gray-500 leading-relaxed px-2 text-center",children:[r("welcome_desc").split("{icon}")[0],u.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-gray-100 rounded-md text-gray-900 border border-gray-200 align-middle mx-1 -mt-0.5",children:u.jsx(Nt,{size:12})}),r("welcome_desc").split("{icon}")[1]]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("label",{className:"flex items-center justify-center gap-3 cursor-pointer group select-none",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:v,onChange:()=>w(!v)}),u.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center ${v?"bg-slate-800 border-slate-800":"border-gray-200 group-hover:border-slate-400"}`,children:v&&u.jsx(Uo,{size:12,className:"text-white stroke-[4]"})})]}),u.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:r("dont_show_again")})]}),u.jsx("button",{onClick:q,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black transition-all shadow-xl shadow-gray-200",children:r("close_guide")})]})]})})}),u.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-cyan-900 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:u.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"px-3 py-1 bg-cyan-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-cyan-400/30",children:"Alliance Duel"}),u.jsx("div",{className:"px-3 py-1 bg-cyan-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-cyan-400/30",children:r("monday")})]}),u.jsx("h2",{className:"text-3xl font-black tracking-tight",children:r("mon_title")}),u.jsx("p",{className:"text-slate-200/60 text-sm font-medium",children:r("mon_desc")})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[u.jsx("div",{className:"text-slate-200 text-[10px] font-black uppercase tracking-widest mb-1",children:r("total_est_score")}),u.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-slate-100 to-cyan-100",children:F(X)}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsxs("button",{onClick:H,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[u.jsx(zo,{size:14})," ",r("reset_data")]}),u.jsx("button",{onClick:()=>h(!l),className:`p-2 rounded-xl transition-all border ${l?"bg-white text-slate-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:u.jsx(Nt,{size:18})})]})]})]})}),l&&u.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl border border-slate-100 animate-in slide-in-from-top-4 duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"w-10 h-10 bg-slate-800 rounded-xl flex items-center justify-center shadow-lg shadow-slate-200",children:u.jsx(Nt,{className:"text-white",size:20})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-black text-gray-900",children:r("score_base_settings")}),u.jsx("p",{className:"text-xs text-gray-500",children:r("base_points_desc")})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 mb-6",children:Object.keys(e).map(M=>u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest px-1",children:r(M)}),u.jsx("input",{type:"text",value:e[M],onChange:U=>C(M,U.target.value),className:"w-full bg-gray-50 border border-gray-100 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-slate-500/20 outline-none transition-all"})]},M))}),u.jsxs("button",{onClick:O,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[u.jsx(As,{size:18})," ",r("save_and_apply")]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsx(Qc,{icon:BN,title:r("drawing_title"),name:"drawing",inputsKey:"drawing_count",unit:r("unit_drawing"),pts:F(e.drawing_1),colorClass:"bg-amber-600",value:i.drawing_count,onChange:I,score:F(L.drawing),t:r}),u.jsx(Qc,{icon:GN,title:r("wrench_title"),name:"wrench",inputsKey:"wrench_count",unit:r("unit_wrench"),pts:F(e.wrench_1),colorClass:"bg-amber-500",value:i.wrench_count,onChange:I,score:F(L.wrench),t:r}),u.jsx(Qc,{icon:Ov,title:r("radar_title"),name:"radar",inputsKey:"radar_count",unit:r("unit_radar"),pts:F(e.radar_1),colorClass:"bg-blue-600",value:i.radar_count,onChange:I,score:F(L.radar),t:r}),u.jsx(ry,{icon:EN,title:r("module_case"),colorClass:"bg-cyan-600",t:r,subtotal:F(L.module),items:[1,2,3,4,5,6,7].map(M=>({key:`module_L${M}`,label:`${r("level_label")} ${M}`,pts:F(e[`module_L${M}`]),value:i[`module_L${M}`],onChange:I}))}),u.jsx(ry,{icon:kN,title:r("tactical_plugin"),colorClass:"bg-indigo-600",t:r,subtotal:F(L.plugin),items:["green","blue","purple","orange"].map(M=>({key:`plugin_${M}`,label:r(`color_${M}`),pts:F(e[`plugin_${M}`]),value:i[`plugin_${M}`],onChange:I}))}),u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100 hover:shadow-md transition-all",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-2 rounded-lg bg-slate-800 bg-opacity-10",children:u.jsx(Uv,{size:18,className:"text-slate-800"})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:r("snow_leopard")})]}),u.jsxs("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-wider",children:[F(e[`sl_${i.sl_level}`])," pts / ",r("unit_target")]})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx("select",{value:i.sl_level,onChange:M=>o(U=>({...U,sl_level:M.target.value})),className:"w-full appearance-none bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold focus:ring-2 focus:ring-slate-500/20 transition-all text-xs cursor-pointer",children:["10","20","30","40","50","60"].map(M=>u.jsxs("option",{value:M,children:[r("level_label")," ",Number(M)-9,"-",M]},M))}),u.jsx(Tu,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:14})]}),u.jsx("input",{type:"text",name:"sl_count",value:i.sl_count,onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold focus:ring-2 focus:ring-slate-500/20 transition-all text-base font-mono"})]}),u.jsxs("div",{className:"mt-4 flex justify-end text-xs font-bold text-gray-400",children:[r("est_score"),": ",u.jsx("span",{className:"text-slate-800 font-black",children:F(L.sl)})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-blue-100 hover:shadow-md transition-all",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-2 rounded-lg bg-blue-800 bg-opacity-10",children:u.jsx(qN,{size:18,className:"text-blue-800"})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:r("polar_zombie")})]}),u.jsxs("span",{className:"text-[10px] font-black text-blue-500 uppercase tracking-wider",children:[F(e[`pz_${i.pz_level}`])," pts / ",r("unit_target")]})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx("select",{value:i.pz_level,onChange:M=>o(U=>({...U,pz_level:M.target.value})),className:"w-full appearance-none bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold focus:ring-2 focus:ring-blue-500/20 transition-all text-xs cursor-pointer",children:["10","20","30","40","50","60"].map(M=>u.jsxs("option",{value:M,children:[r("level_label")," ",Number(M)-9,"-",M]},M))}),u.jsx(Tu,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:14})]}),u.jsx("input",{type:"text",name:"pz_count",value:i.pz_count,onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold focus:ring-2 focus:ring-blue-500/20 transition-all text-base font-mono"})]}),u.jsxs("div",{className:"mt-4 flex justify-end text-xs font-bold text-gray-400",children:[r("est_score"),": ",u.jsx("span",{className:"text-blue-800 font-black",children:F(L.pz)})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-green-100 md:col-span-2 lg:col-span-1 border-t-4 border-t-green-500",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-green-500 bg-opacity-10",children:u.jsx(NN,{size:18,className:"text-green-500"})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:r("gathering_title")})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("span",{className:"text-[9px] font-black text-green-700 uppercase ml-1 flex justify-between",children:[r("gathering_coin")," ",u.jsxs("span",{className:"text-gray-400",children:[e.gather_coin_1k," pts/1k"]})]}),u.jsx("input",{type:"text",name:"gather_coin",value:i.gather_coin,onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold focus:ring-2 focus:ring-green-500/20 transition-all text-sm font-mono"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("span",{className:"text-[9px] font-black text-green-700 uppercase ml-1 flex justify-between",children:[r("gathering_res")," ",u.jsxs("span",{className:"text-gray-400",children:[e.gather_res_1k," pts/1k"]})]}),u.jsx("input",{type:"text",name:"gather_res",value:i.gather_res,onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold focus:ring-2 focus:ring-green-500/20 transition-all text-sm font-mono"})]})]}),u.jsx("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:u.jsxs("span",{className:"text-gray-400",children:[r("est_score"),": ",u.jsx("span",{className:"text-green-600 font-black",children:F(L.gather_coin+L.gather_res)})]})})]}),u.jsx(Qc,{icon:bl,title:r("diamond_gift"),name:"diamond",inputsKey:"diamond_count",unit:r("unit_item"),pts:e.diamond_1,colorClass:"bg-cyan-500",value:i.diamond_count,onChange:I,score:F(L.diamond),t:r})]}),u.jsxs("div",{className:"bg-slate-50/50 rounded-2xl p-6 border border-slate-100 flex gap-4",children:[u.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Es,{size:16,className:"text-slate-600"})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs font-bold text-slate-900 underline decoration-slate-200 decoration-2 underline-offset-2",children:r("tips_title")}),u.jsx("p",{className:"text-xs text-slate-700 leading-relaxed font-medium",children:r("tips_desc")})]})]})]})},ii=({icon:r,title:e,name:t,inputsKey:i,unit:o,pts:l,colorClass:h,value:p,onChange:m,score:v,t:w})=>u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`p-2 rounded-lg ${h} bg-opacity-10`,children:u.jsx(r,{size:18,className:h.replace("bg-","text-")})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:e})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[l," pts / ",o]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",name:i,value:p,onChange:m,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-base"}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md",children:o})]}),u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[w("est_score"),": ",u.jsx("span",{className:"text-blue-600 font-black",children:v})]})})]}),pk=()=>{const{t:r}=Wn(),[e,t]=Y.useState({speedup_1min:164,power_10:5,bounty_orange:246800,refine_stone:16400,pulse_module:411300,survivor_orange:164500,survivor_purple:41100,survivor_blue:8200,diamond_1:30}),[i,o]=Y.useState({speedup_d:"",speedup_h:"",speedup_m:"",power_start:"",power_end:"",bounty_count:"",refine_count:"",pulse_count:"",sur_orange_count:"",sur_purple_count:"",sur_blue_count:"",diamond_count:""}),[l,h]=Y.useState(!1),[p,m]=Y.useState(!1),[v,w]=Y.useState(!1),[I,C]=Y.useState(!1);Y.useEffect(()=>{const U=localStorage.getItem("duel_tue_base_values"),Z=localStorage.getItem("duel_welcome_dismissed");if(U)try{t(JSON.parse(U))}catch(ie){console.error("Failed to load base values",ie)}Z||w(!0)},[]);const O=U=>{const{name:Z,value:ie}=U.target;(ie===""||/^\d+$/.test(ie))&&o(A=>({...A,[Z]:ie}))},q=(U,Z)=>{(Z===""||/^\d+(\.\d+)?$/.test(Z))&&t(ie=>({...ie,[U]:Number(Z)||0}))},H=()=>{localStorage.setItem("duel_tue_base_values",JSON.stringify(e)),h(!1)},L=()=>{I&&localStorage.setItem("duel_welcome_dismissed","true"),w(!1)},X=()=>{o({speedup_d:"",speedup_h:"",speedup_m:"",power_start:"",power_end:"",bounty_count:"",refine_count:"",pulse_count:"",sur_orange_count:"",sur_purple_count:"",sur_blue_count:"",diamond_count:""})},F=Y.useMemo(()=>{const U=(Number(i.speedup_d)||0)*1440+(Number(i.speedup_h)||0)*60+(Number(i.speedup_m)||0),Z={speedup:U*e.speedup_1min,power:Math.max(0,(Number(i.power_end)||0)-(Number(i.power_start)||0))/10*e.power_10,bounty:(Number(i.bounty_count)||0)*e.bounty_orange,refine:(Number(i.refine_count)||0)*e.refine_stone,pulse:(Number(i.pulse_count)||0)*e.pulse_module,sur_orange:(Number(i.sur_orange_count)||0)*e.survivor_orange,sur_purple:(Number(i.sur_purple_count)||0)*e.survivor_purple,sur_blue:(Number(i.sur_blue_count)||0)*e.survivor_blue,diamond:(Number(i.diamond_count)||0)*e.diamond_1,totalMinutes:U};return Z.total=Z.speedup+Z.power+Z.bounty+Z.refine+Z.pulse+Z.sur_orange+Z.sur_purple+Z.sur_blue+Z.diamond,Z},[i,e]),M=U=>!U||isNaN(U)?"0":new Intl.NumberFormat("en-US").format(Math.floor(U));return u.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[v&&u.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:u.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-blue-100",children:u.jsxs("div",{className:"p-10 text-center space-y-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-blue-200 animate-bounce cursor-default relative z-10",children:u.jsx(Fo,{className:"text-white",size:40})}),u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 bg-blue-400 rounded-3xl blur-2xl opacity-20 animate-pulse"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight",children:r("welcome_title")}),u.jsxs("p",{className:"text-sm font-medium text-gray-500 leading-relaxed px-2 text-center",children:[r("welcome_desc").split("{icon}")[0],u.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-gray-100 rounded-md text-gray-900 border border-gray-200 align-middle mx-1 -mt-0.5",children:u.jsx(Nt,{size:12})}),r("welcome_desc").split("{icon}")[1]]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("label",{className:"flex items-center justify-center gap-3 cursor-pointer group select-none",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:I,onChange:()=>C(!I)}),u.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center ${I?"bg-blue-600 border-blue-600":"border-gray-200 group-hover:border-blue-400"}`,children:I&&u.jsx(Uo,{size:12,className:"text-white stroke-[4]"})})]}),u.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:r("dont_show_again")})]}),u.jsx("button",{onClick:L,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black hover:scale-[1.02] active:scale-95 transition-all shadow-xl shadow-gray-200",children:r("close_guide")})]})]})})}),p&&u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:u.jsxs("div",{className:"bg-white rounded-[2rem] w-full max-w-md overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300",children:[u.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[u.jsx("h3",{className:"font-black text-gray-900",children:r("how_to_check")}),u.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(fp,{size:20})})]}),u.jsxs("div",{className:"p-6 space-y-8 overflow-y-auto max-h-[70vh]",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("p",{className:"text-sm font-bold text-gray-600 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 bg-orange-500 text-white rounded-full flex items-center justify-center text-[10px]",children:"1"}),r("guide_step_1")]}),u.jsx("div",{className:"rounded-2xl overflow-hidden border border-gray-100 shadow-lg bg-gray-50",children:u.jsx("img",{src:"/lastZ-power/guide/step1.png",alt:"Step 1",className:"w-full h-auto"})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("p",{className:"text-sm font-bold text-gray-600 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 bg-orange-500 text-white rounded-full flex items-center justify-center text-[10px]",children:"2"}),r("guide_step_2")]}),u.jsx("div",{className:"rounded-2xl overflow-hidden border border-gray-100 shadow-lg bg-gray-50",children:u.jsx("img",{src:"/lastZ-power/guide/step2.png",alt:"Step 2",className:"w-full h-auto"})})]})]}),u.jsx("div",{className:"p-6 bg-gray-50",children:u.jsx("button",{onClick:()=>m(!1),className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black transition-all shadow-xl shadow-gray-200",children:r("close_guide")})})]})}),u.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-blue-900 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:u.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"px-3 py-1 bg-blue-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-blue-400/30",children:"Alliance Duel"}),u.jsx("div",{className:"px-3 py-1 bg-blue-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-blue-400/30",children:r("tuesday")})]}),u.jsx("h2",{className:"text-3xl font-black tracking-tight",children:r("tue_title")}),u.jsx("p",{className:"text-blue-200/60 text-sm font-medium",children:r("tue_desc")})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[u.jsx("div",{className:"text-blue-200 text-[10px] font-black uppercase tracking-widest mb-1",children:r("total_est_score")}),u.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-blue-100 to-indigo-100",children:M(F.total)}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsxs("button",{onClick:X,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[u.jsx(zo,{size:14})," ",r("reset_data")]}),u.jsx("button",{onClick:()=>h(!l),className:`p-2 rounded-xl transition-all border ${l?"bg-white text-blue-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:u.jsx(Nt,{size:18})})]})]})]})}),l&&u.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl border border-blue-100 animate-in slide-in-from-top-4 duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-200",children:u.jsx(Nt,{className:"text-white",size:20})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-black text-gray-900",children:r("score_base_settings")}),u.jsx("p",{className:"text-xs text-gray-500",children:r("base_points_desc")})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:Object.keys(e).map(U=>u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest px-1",children:r(U)}),u.jsx("input",{type:"text",value:e[U],onChange:Z=>q(U,Z.target.value),className:"w-full bg-gray-50 border border-gray-100 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"})]},U))}),u.jsxs("button",{onClick:H,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[u.jsx(As,{size:18})," ",r("save_and_apply")]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-blue-100 border-l-4 border-l-blue-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-2 rounded-lg bg-blue-500 bg-opacity-10",children:u.jsx(Gu,{size:18,className:"text-blue-500"})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:r("speedup_title")})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.speedup_1min," pts / ",r("unit_min")]})]}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:["d","h","m"].map(U=>u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r(`unit_${U==="d"?"day":U==="h"?"hour":"min"}`)}),u.jsx("input",{type:"text",name:`speedup_${U}`,value:i[`speedup_${U}`],onChange:O,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all text-base font-mono"})]},U))}),u.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[u.jsxs("span",{className:"text-gray-400 px-1",children:[r("current_total"),": ",u.jsxs("span",{className:"text-blue-600",children:[M(F.totalMinutes)," ",r("unit_min")]})]}),u.jsxs("span",{className:"text-gray-400",children:[r("est_score"),": ",u.jsx("span",{className:"text-blue-600 font-black",children:M(F.speedup)})]})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-orange-100 border-l-4 border-l-orange-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-2 rounded-lg bg-orange-500 bg-opacity-10",children:u.jsx(Rv,{size:18,className:"text-orange-500"})}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:r("power_increase")}),u.jsx("button",{onClick:()=>m(!0),className:"p-1 hover:bg-orange-100 rounded-full transition-colors group/help",title:r("how_to_check"),children:u.jsx(AN,{size:14,className:"text-orange-400 group-hover/help:text-orange-600"})})]})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.power_10," pts / 10 Power"]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("power_start")}),u.jsx("input",{type:"text",name:"power_start",value:i.power_start,onChange:O,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-orange-500/20 transition-all text-base font-mono"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("power_end")}),u.jsx("input",{type:"text",name:"power_end",value:i.power_end,onChange:O,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-orange-500/20 transition-all text-base font-mono"})]})]}),u.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[u.jsxs("span",{className:"text-gray-400 px-1",children:[r("power_diff"),": ",u.jsx("span",{className:"text-orange-600",children:M(Math.max(0,(Number(i.power_end)||0)-(Number(i.power_start)||0)))})]}),u.jsxs("span",{className:"text-gray-400",children:[r("est_score"),": ",u.jsx("span",{className:"text-orange-600 font-black",children:M(F.power)})]})]})]}),u.jsx(ii,{icon:pf,title:r("bounty_title"),name:"bounty",inputsKey:"bounty_count",unit:r("unit_count"),pts:M(e.bounty_orange),colorClass:"bg-yellow-500",value:i.bounty_count,onChange:O,score:M(F.bounty),t:r}),u.jsx(ii,{icon:CN,title:r("refine_title"),name:"refine",inputsKey:"refine_count",unit:r("unit_item"),pts:M(e.refine_stone),colorClass:"bg-red-500",value:i.refine_count,onChange:O,score:M(F.refine),t:r}),u.jsx(ii,{icon:pf,title:r("pulse_title"),name:"pulse",inputsKey:"pulse_count",unit:r("unit_item"),pts:M(e.pulse_module),colorClass:"bg-purple-500",value:i.pulse_count,onChange:O,score:M(F.pulse),t:r}),u.jsx(ii,{icon:qn,title:r("sur_orange"),name:"sur_orange",inputsKey:"sur_orange_count",unit:r("unit_person"),pts:M(e.survivor_orange),colorClass:"bg-orange-600",value:i.sur_orange_count,onChange:O,score:M(F.sur_orange),t:r}),u.jsx(ii,{icon:qn,title:r("sur_purple"),name:"sur_purple",inputsKey:"sur_purple_count",unit:r("unit_person"),pts:M(e.survivor_purple),colorClass:"bg-purple-400",value:i.sur_purple_count,onChange:O,score:M(F.sur_purple),t:r}),u.jsx(ii,{icon:qn,title:r("sur_blue"),name:"sur_blue",inputsKey:"sur_blue_count",unit:r("unit_person"),pts:M(e.survivor_blue),colorClass:"bg-blue-400",value:i.sur_blue_count,onChange:O,score:M(F.sur_blue),t:r}),u.jsx(ii,{icon:bl,title:r("diamond_gift"),name:"diamond",inputsKey:"diamond_count",unit:r("unit_item"),pts:e.diamond_1,colorClass:"bg-cyan-500",value:i.diamond_count,onChange:O,score:M(F.diamond),t:r})]}),u.jsxs("div",{className:"bg-blue-50/50 rounded-2xl p-6 border border-blue-100 flex gap-4",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Es,{size:16,className:"text-blue-600"})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs font-bold text-blue-900 underline decoration-blue-200 decoration-2 underline-offset-2",children:r("tips_title")}),u.jsx("p",{className:"text-xs text-blue-700 leading-relaxed font-medium",children:r("tips_desc")})]})]})]})},Oh=({icon:r,title:e,name:t,inputsKey:i,unit:o,pts:l,colorClass:h,value:p,onChange:m,score:v,t:w})=>u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`p-2 rounded-lg ${h} bg-opacity-10`,children:u.jsx(r,{size:18,className:h.replace("bg-","text-")})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:e})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[l," pts / ",o]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",name:i,value:p,onChange:m,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-base"}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md",children:o})]}),u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[w("est_score"),": ",u.jsx("span",{className:"text-blue-600 font-black",children:v})]})})]}),mk=()=>{const{t:r}=Wn(),[e,t]=Y.useState({speedup_res_1min:123,tech_power_10:5,badge_1:164,trade_orange:308500,diamond_1:30}),[i,o]=Y.useState({speedup_d:"",speedup_h:"",speedup_m:"",power_start:"",power_end:"",badge_count:"",trade_count:"",diamond_count:""}),[l,h]=Y.useState(!1),[p,m]=Y.useState(!1),[v,w]=Y.useState(!1);Y.useEffect(()=>{const F=localStorage.getItem("duel_wed_base_values"),M=localStorage.getItem("duel_welcome_dismissed_wed");if(F)try{t(JSON.parse(F))}catch(U){console.error("Failed to load base values",U)}M||m(!0)},[]);const I=F=>{const{name:M,value:U}=F.target;(U===""||/^\d+$/.test(U))&&o(Z=>({...Z,[M]:U}))},C=(F,M)=>{(M===""||/^\d+(\.\d+)?$/.test(M))&&t(U=>({...U,[F]:Number(M)||0}))},O=()=>{localStorage.setItem("duel_wed_base_values",JSON.stringify(e)),h(!1)},q=()=>{v&&localStorage.setItem("duel_welcome_dismissed_wed","true"),m(!1)},H=()=>{o({speedup_d:"",speedup_h:"",speedup_m:"",power_start:"",power_end:"",badge_count:"",trade_count:"",diamond_count:""})},L=Y.useMemo(()=>{const F=(Number(i.speedup_d)||0)*1440+(Number(i.speedup_h)||0)*60+(Number(i.speedup_m)||0),M={speedup:F*e.speedup_res_1min,power:Math.max(0,(Number(i.power_end)||0)-(Number(i.power_start)||0))/10*e.tech_power_10,badge:(Number(i.badge_count)||0)*e.badge_1,trade:(Number(i.trade_count)||0)*e.trade_orange,diamond:(Number(i.diamond_count)||0)*e.diamond_1,totalMinutes:F};return M.total=M.speedup+M.power+M.badge+M.trade+M.diamond,M},[i,e]),X=F=>!F||isNaN(F)||F===0?"0":new Intl.NumberFormat("en-US").format(Math.floor(F));return u.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[p&&u.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:u.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-blue-100",children:u.jsxs("div",{className:"p-10 text-center space-y-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-blue-200 animate-bounce cursor-default relative z-10",children:u.jsx(Fo,{className:"text-white",size:40})}),u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 bg-blue-400 rounded-3xl blur-2xl opacity-20 animate-pulse"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight",children:r("welcome_title")}),u.jsxs("p",{className:"text-sm font-medium text-gray-500 leading-relaxed px-2 text-center",children:[r("welcome_desc").split("{icon}")[0],u.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-gray-100 rounded-md text-gray-900 border border-gray-200 align-middle mx-1 -mt-0.5",children:u.jsx(Nt,{size:12})}),r("welcome_desc").split("{icon}")[1]]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("label",{className:"flex items-center justify-center gap-3 cursor-pointer group select-none",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:v,onChange:()=>w(!v)}),u.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center ${v?"bg-blue-600 border-blue-600":"border-gray-200 group-hover:border-blue-400"}`,children:v&&u.jsx(Uo,{size:12,className:"text-white stroke-[4]"})})]}),u.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:r("dont_show_again")})]}),u.jsx("button",{onClick:q,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black hover:scale-[1.02] active:scale-95 transition-all shadow-xl shadow-gray-200",children:r("close_guide")})]})]})})}),u.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-indigo-900 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:u.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"px-3 py-1 bg-indigo-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-indigo-400/30",children:"Alliance Duel"}),u.jsx("div",{className:"px-3 py-1 bg-purple-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-purple-400/30",children:r("wednesday")})]}),u.jsx("h2",{className:"text-3xl font-black tracking-tight",children:r("wed_title")}),u.jsx("p",{className:"text-indigo-200/60 text-sm font-medium",children:r("wed_desc")})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[u.jsx("div",{className:"text-indigo-200 text-[10px] font-black uppercase tracking-widest mb-1",children:r("total_est_score")}),u.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-indigo-100 to-purple-100",children:X(L.total)}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsxs("button",{onClick:H,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[u.jsx(zo,{size:14})," ",r("reset_data")]}),u.jsx("button",{onClick:()=>h(!l),className:`p-2 rounded-xl transition-all border ${l?"bg-white text-indigo-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:u.jsx(Nt,{size:18})})]})]})]})}),l&&u.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl border border-indigo-100 animate-in slide-in-from-top-4 duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-200",children:u.jsx(Nt,{className:"text-white",size:20})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-black text-gray-900",children:r("score_base_settings")}),u.jsx("p",{className:"text-xs text-gray-500",children:r("base_points_desc")})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:Object.keys(e).map(F=>u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest px-1",children:r(F)}),u.jsx("input",{type:"text",value:e[F],onChange:M=>C(F,M.target.value),className:"w-full bg-gray-50 border border-gray-100 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all"})]},F))}),u.jsxs("button",{onClick:O,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[u.jsx(As,{size:18})," ",r("save_and_apply")]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-indigo-100 border-l-4 border-l-indigo-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-2 rounded-lg bg-indigo-500 bg-opacity-10",children:u.jsx(Gu,{size:18,className:"text-indigo-500"})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:r("speedup_res_title")})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.speedup_res_1min," pts / ",r("unit_min")]})]}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:["d","h","m"].map(F=>u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r(`unit_${F==="d"?"day":F==="h"?"hour":"min"}`)}),u.jsx("input",{type:"text",name:`speedup_${F}`,value:i[`speedup_${F}`],onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-indigo-500/20 transition-all text-base font-mono"})]},F))}),u.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[u.jsxs("span",{className:"text-gray-400 px-1",children:[r("current_total"),": ",u.jsxs("span",{className:"text-indigo-600",children:[X(L.totalMinutes)," ",r("unit_min")]})]}),u.jsxs("span",{className:"text-gray-400",children:[r("est_score"),": ",u.jsx("span",{className:"text-indigo-600 font-black",children:X(L.speedup)})]})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-purple-100 border-l-4 border-l-purple-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-2 rounded-lg bg-purple-500 bg-opacity-10",children:u.jsx(Lv,{size:18,className:"text-purple-500"})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:r("tech_power_increase")})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.tech_power_10," pts / 10 Power"]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("power_start")}),u.jsx("input",{type:"text",name:"power_start",value:i.power_start,onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-purple-500/20 transition-all text-base font-mono"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("power_end")}),u.jsx("input",{type:"text",name:"power_end",value:i.power_end,onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-purple-500/20 transition-all text-base font-mono"})]})]}),u.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[u.jsxs("span",{className:"text-gray-400 px-1",children:[r("power_diff"),": ",u.jsx("span",{className:"text-purple-600",children:X(Math.max(0,(Number(i.power_end)||0)-(Number(i.power_start)||0)))})]}),u.jsxs("span",{className:"text-gray-400",children:[r("est_score"),": ",u.jsx("span",{className:"text-purple-600 font-black",children:X(L.power)})]})]})]}),u.jsx(Oh,{icon:Po,title:r("badge_title"),name:"badge",inputsKey:"badge_count",unit:r("unit_item"),pts:X(e.badge_1),colorClass:"bg-blue-500",value:i.badge_count,onChange:I,score:X(L.badge),t:r}),u.jsx(Oh,{icon:zv,title:r("trade_title"),name:"trade",inputsKey:"trade_count",unit:r("unit_trade"),pts:X(e.trade_orange),colorClass:"bg-sky-500",value:i.trade_count,onChange:I,score:X(L.trade),t:r}),u.jsx(Oh,{icon:bl,title:r("diamond_gift"),name:"diamond",inputsKey:"diamond_count",unit:r("unit_item"),pts:e.diamond_1,colorClass:"bg-cyan-500",value:i.diamond_count,onChange:I,score:X(L.diamond),t:r})]}),u.jsxs("div",{className:"bg-indigo-50/50 rounded-2xl p-6 border border-indigo-100 flex gap-4",children:[u.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Es,{size:16,className:"text-indigo-600"})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs font-bold text-indigo-900 underline decoration-indigo-200 decoration-2 underline-offset-2",children:r("tips_title")}),u.jsx("p",{className:"text-xs text-indigo-700 leading-relaxed font-medium",children:r("tips_desc")})]})]})]})};var sy=ly();const ir=({icon:r,title:e,name:t,inputsKey:i,unit:o,inputUnit:l,finalScore:h,colorClass:p,value:m,onChange:v,score:w,t:I})=>u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`p-2 rounded-lg ${p} bg-opacity-10`,children:u.jsx(r,{size:18,className:p.replace("bg-","text-")})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:e})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[h," pts / ",o]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",name:i,value:m,onChange:v,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-base"}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md",children:l||o})]}),u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[I("est_score"),": ",u.jsx("span",{className:"text-blue-600 font-black",children:w})]})})]}),gk=()=>{const{t:r,lang:e}=Wn(),t={hero_frag_orange:5e3,hero_frag_purple:1700,hero_frag_blue:500,exclusive_frag:5e3,adv_recruit:500,energy_core:400,gear_upgrade:3e5,alloy_10:3,skill_manual:10,diamond_1:30},[i,o]=Y.useState({global:"313",recruit:"100",energy_core:"100"}),[l,h]=Y.useState({}),[p,m]=Y.useState({frag_orange_count:"",frag_purple_count:"",frag_blue_count:"",excl_frag_count:"",recruit_count:"",core_count:"",gear_count:"",alloy_count:"",manual_count:"",diamond_count:""}),[v,w]=Y.useState(!1),[I,C]=Y.useState(!1),[O,q]=Y.useState(!1),[H,L]=Y.useState(!1),X=T=>{const ce=parseFloat(T);return isNaN(ce)?0:ce};Y.useEffect(()=>{const T=localStorage.getItem("duel_thu_bonus_settings"),ce=localStorage.getItem("duel_thu_manual_overrides"),Ee=localStorage.getItem("duel_welcome_dismissed_thu");if(T)try{const Pe=JSON.parse(T),me={};for(const re in Pe)me[re]=String(Pe[re]);o(me)}catch(Pe){console.error("Failed to load bonus settings",Pe)}if(ce)try{h(JSON.parse(ce))}catch(Pe){console.error("Failed to load manual overrides",Pe)}Ee||C(!0)},[]);const F=T=>{const{name:ce,value:Ee}=T.target;(Ee===""||/^\d+$/.test(Ee))&&m(Pe=>({...Pe,[ce]:Ee}))},M=(T,ce)=>{(ce===""||/^\d*\.?\d*$/.test(ce))&&o(Ee=>({...Ee,[T]:ce}))},U=(T,ce)=>{(ce===""||/^\d*\.?\d*$/.test(ce))&&h(Ee=>({...Ee,[T]:Number(ce)||0}))},Z=T=>{h(ce=>{const Ee={...ce};return Ee[T]!==void 0?delete Ee[T]:Ee[T]=ie(T),Ee})},ie=T=>{const ce=t[T];if(T==="diamond_1")return ce;let Ee=X(i.global);return T==="adv_recruit"&&(Ee+=X(i.recruit)),T==="energy_core"&&(Ee+=X(i.energy_core)),Math.floor(ce*(1+Ee/100))},A=()=>{localStorage.setItem("duel_thu_bonus_settings",JSON.stringify(i)),localStorage.setItem("duel_thu_manual_overrides",JSON.stringify(l)),w(!1)},b=()=>{O&&localStorage.setItem("duel_welcome_dismissed_thu","true"),C(!1)},N=()=>{m({frag_orange_count:"",frag_purple_count:"",frag_blue_count:"",excl_frag_count:"",recruit_count:"",core_count:"",gear_count:"",alloy_count:"",manual_count:"",diamond_count:""})},S=Y.useMemo(()=>{const T=ce=>l[ce]!==void 0?l[ce]:ie(ce);return{frag_orange:(Number(p.frag_orange_count)||0)*T("hero_frag_orange"),frag_purple:(Number(p.frag_purple_count)||0)*T("hero_frag_purple"),frag_blue:(Number(p.frag_blue_count)||0)*T("hero_frag_blue"),excl_frag:(Number(p.excl_frag_count)||0)*T("exclusive_frag"),recruit:(Number(p.recruit_count)||0)*T("adv_recruit"),core:(Number(p.core_count)||0)*T("energy_core"),gear:(Number(p.gear_count)||0)*T("gear_upgrade"),alloy:Math.floor((Number(p.alloy_count)||0)/10)*T("alloy_10"),manual:(Number(p.manual_count)||0)*T("skill_manual"),diamond:(Number(p.diamond_count)||0)*T("diamond_1")}},[p,i,l]),j=Y.useMemo(()=>Object.values(S).reduce((T,ce)=>T+ce,0),[S]),P=T=>!T||isNaN(T)||T===0?"0":new Intl.NumberFormat("en-US").format(Math.floor(T));return u.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[I&&sy.createPortal(u.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:u.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-blue-100",children:u.jsxs("div",{className:"p-10 text-center space-y-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-20 h-20 bg-orange-600 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-orange-200 animate-bounce cursor-default relative z-10",children:u.jsx(Fo,{className:"text-white",size:40})}),u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 bg-orange-400 rounded-3xl blur-2xl opacity-20 animate-pulse"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight",children:r("welcome_title")}),u.jsxs("p",{className:"text-sm font-medium text-gray-500 leading-relaxed px-2 text-center",children:[r("welcome_desc").split("{icon}")[0],u.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-gray-100 rounded-md text-gray-900 border border-gray-200 align-middle mx-1 -mt-0.5",children:u.jsx(Nt,{size:12})}),r("welcome_desc").split("{icon}")[1]]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("label",{className:"flex items-center justify-center gap-3 cursor-pointer group select-none",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:O,onChange:()=>q(!O)}),u.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center ${O?"bg-orange-600 border-orange-600":"border-gray-200 group-hover:border-orange-400"}`,children:O&&u.jsx(Uo,{size:12,className:"text-white stroke-[4]"})})]}),u.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:r("dont_show_again")})]}),u.jsx("button",{onClick:b,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black hover:scale-[1.02] active:scale-95 transition-all shadow-xl shadow-gray-200",children:r("close_guide")})]})]})})}),document.body),u.jsx("div",{className:"bg-gradient-to-br from-gray-900 via-orange-950 to-red-900 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:u.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"px-3 py-1 bg-orange-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-orange-400/30",children:"Alliance Duel"}),u.jsx("div",{className:"px-3 py-1 bg-orange-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-orange-400/30",children:r("thursday")})]}),u.jsx("h2",{className:"text-3xl font-black tracking-tight",children:r("thu_title")}),u.jsx("p",{className:"text-orange-200/60 text-sm font-medium",children:r("thu_desc")})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[u.jsx("div",{className:"text-orange-200 text-[10px] font-black uppercase tracking-widest mb-1",children:r("total_est_score")}),u.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-orange-100 to-red-100",children:P(j)}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsxs("button",{onClick:N,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[u.jsx(zo,{size:14})," ",r("reset_data")]}),u.jsx("button",{onClick:()=>w(!v),className:`p-2 rounded-xl transition-all border ${v?"bg-white text-orange-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:u.jsx(Nt,{size:18})})]})]})]})}),v&&u.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl border border-orange-100 animate-in slide-in-from-top-4 duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"w-10 h-10 bg-orange-600 rounded-xl flex items-center justify-center shadow-lg shadow-orange-200",children:u.jsx(Nt,{className:"text-white",size:20})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-black text-gray-900",children:r("score_base_settings")}),u.jsx("p",{className:"text-xs text-gray-500",children:r("base_points_desc")})]})]}),u.jsxs("div",{className:"mb-6 p-4 bg-orange-50 rounded-xl border border-orange-100",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(UN,{className:"text-orange-600",size:18}),u.jsx("h4",{className:"font-black text-orange-900",children:r("tech_bonus_settings")})]}),u.jsxs("button",{onClick:()=>L(!H),className:"flex items-center gap-1.5 px-3 py-1 bg-white text-[10px] font-black text-orange-600 rounded-lg border border-orange-200 hover:bg-orange-100 transition-all",children:[u.jsx(Es,{size:12}),r("tech_bonus_guide_title")]})]}),H&&sy.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:[u.jsx("div",{className:"absolute inset-0",onClick:()=>L(!1)}),u.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-3xl shadow-2xl animate-in zoom-in-95 duration-300 border border-orange-100 flex flex-col",style:{maxHeight:"calc(100vh - 3rem)"},children:[u.jsxs("div",{className:"px-5 py-3 border-b border-gray-100 flex items-center justify-between bg-gradient-to-r from-orange-50/50 to-orange-50/30 flex-shrink-0 rounded-t-3xl",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-1.5 bg-orange-600 rounded-lg text-white shadow-sm",children:u.jsx(Es,{size:16})}),u.jsx("h3",{className:"font-black text-gray-900 text-sm",children:r("tech_bonus_guide_title")})]}),u.jsx("button",{onClick:()=>L(!1),className:"p-1.5 hover:bg-white rounded-full transition-all text-gray-400 hover:text-gray-600",children:u.jsx(fp,{size:18})})]}),u.jsxs("div",{className:"p-5 overflow-y-auto custom-scrollbar space-y-4 flex-1",children:[u.jsx("div",{className:"bg-orange-50 border border-orange-100 rounded-xl p-3",children:u.jsxs("p",{className:"text-xs text-orange-900 font-medium leading-relaxed flex items-start gap-2",children:[u.jsx(Dv,{size:16,className:"text-orange-500 mt-0.5 flex-shrink-0"}),u.jsx("span",{children:r("tech_bonus_guide_desc")})]})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest px-1",children:" / Screenshot"}),u.jsx("div",{className:"rounded-xl overflow-hidden border-2 border-gray-200 bg-white shadow-sm",children:u.jsx("img",{src:`./guide/tech_${e}.webp`,alt:"Tech Bonus Guide",className:"w-full h-auto object-contain"})})]})]}),u.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-100 flex-shrink-0 rounded-b-3xl",children:u.jsx("button",{onClick:()=>L(!1),className:"w-full py-2.5 bg-gray-900 text-white rounded-xl font-black text-sm hover:bg-black transition-all shadow-lg",children:r("close_guide")})})]})]}),document.body),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] font-black text-orange-600 uppercase tracking-widest px-1",children:r("global_bonus")}),u.jsx("input",{type:"text",value:i.global,onChange:T=>M("global",T.target.value),className:"w-full bg-white border border-orange-200 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-orange-500/20 outline-none transition-all"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] font-black text-orange-600 uppercase tracking-widest px-1",children:r("recruit_bonus")}),u.jsx("input",{type:"text",value:i.recruit,onChange:T=>M("recruit",T.target.value),className:"w-full bg-white border border-orange-200 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-orange-500/20 outline-none transition-all"})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] font-black text-orange-600 uppercase tracking-widest px-1",children:r("energy_core_bonus")}),u.jsx("input",{type:"text",value:i.energy_core,onChange:T=>M("energy_core",T.target.value),className:"w-full bg-white border border-orange-200 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-orange-500/20 outline-none transition-all"})]})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(X0,{className:"text-gray-600",size:18}),u.jsx("h4",{className:"font-black text-gray-900",children:r("advanced_manual_override")})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4",children:Object.keys(t).map(T=>{const ce=l[T]!==void 0,Ee=ce?l[T]:ie(T);return u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("div",{className:"flex items-center justify-between px-1",children:[u.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:r(T)}),u.jsx("button",{onClick:()=>Z(T),className:`p-1 rounded-md transition-all ${ce?"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:ce?"":"",children:ce?u.jsx(WN,{size:12}):u.jsx(X0,{size:12})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"text-xs text-gray-500 whitespace-nowrap",children:[t[T]," "]}),u.jsx("input",{type:"text",value:ce?l[T]:Ee,onChange:Pe=>U(T,Pe.target.value),disabled:!ce,className:`flex-1 border rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-orange-500/20 outline-none transition-all ${ce?"bg-white border-orange-200":"bg-gray-50 border-gray-100 text-gray-400 cursor-not-allowed"}`})]})]},T)})})]}),u.jsxs("button",{onClick:A,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[u.jsx(As,{size:18})," ",r("save_and_apply")]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsx(ir,{icon:qn,title:r("hero_frag_orange"),name:"frag_orange",inputsKey:"frag_orange_count",unit:r("unit_item"),finalScore:P(l.hero_frag_orange!==void 0?l.hero_frag_orange:ie("hero_frag_orange")),colorClass:"bg-orange-500",value:p.frag_orange_count,onChange:F,score:P(S.frag_orange),t:r}),u.jsx(ir,{icon:qn,title:r("hero_frag_purple"),name:"frag_purple",inputsKey:"frag_purple_count",unit:r("unit_item"),finalScore:P(l.hero_frag_purple!==void 0?l.hero_frag_purple:ie("hero_frag_purple")),colorClass:"bg-purple-500",value:p.frag_purple_count,onChange:F,score:P(S.frag_purple),t:r}),u.jsx(ir,{icon:qn,title:r("hero_frag_blue"),name:"frag_blue",inputsKey:"frag_blue_count",unit:r("unit_item"),finalScore:P(l.hero_frag_blue!==void 0?l.hero_frag_blue:ie("hero_frag_blue")),colorClass:"bg-blue-500",value:p.frag_blue_count,onChange:F,score:P(S.frag_blue),t:r}),u.jsx(ir,{icon:Po,title:r("exclusive_frag"),name:"excl_frag",inputsKey:"excl_frag_count",unit:r("unit_item"),finalScore:P(l.exclusive_frag!==void 0?l.exclusive_frag:ie("exclusive_frag")),colorClass:"bg-red-500",value:p.excl_frag_count,onChange:F,score:P(S.excl_frag),t:r}),u.jsx(ir,{icon:KN,title:r("adv_recruit"),name:"recruit",inputsKey:"recruit_count",unit:r("unit_recruit"),finalScore:P(l.adv_recruit!==void 0?l.adv_recruit:ie("adv_recruit")),colorClass:"bg-yellow-500",value:p.recruit_count,onChange:F,score:P(S.recruit),t:r}),u.jsx(ir,{icon:QN,title:r("energy_core"),name:"core",inputsKey:"core_count",unit:r("unit_item"),finalScore:P(l.energy_core!==void 0?l.energy_core:ie("energy_core")),colorClass:"bg-cyan-500",value:p.core_count,onChange:F,score:P(S.core),t:r}),u.jsx(ir,{icon:bo,title:r("gear_upgrade"),name:"gear",inputsKey:"gear_count",unit:r("unit_item"),finalScore:P(l.gear_upgrade!==void 0?l.gear_upgrade:ie("gear_upgrade")),colorClass:"bg-orange-600",value:p.gear_count,onChange:F,score:P(S.gear),t:r}),u.jsx(ir,{icon:jN,title:r("alloy_title"),name:"alloy",inputsKey:"alloy_count",unit:`10 ${r("unit_alloy")}`,inputUnit:r("unit_alloy"),finalScore:P(l.alloy_10!==void 0?l.alloy_10:ie("alloy_10")),colorClass:"bg-gray-500",value:p.alloy_count,onChange:F,score:P(S.alloy),t:r}),u.jsx(ir,{icon:bN,title:r("skill_manual"),name:"manual",inputsKey:"manual_count",unit:r("unit_manual"),finalScore:P(l.skill_manual!==void 0?l.skill_manual:ie("skill_manual")),colorClass:"bg-green-500",value:p.manual_count,onChange:F,score:P(S.manual),t:r}),u.jsx(ir,{icon:bl,title:r("diamond_gift"),name:"diamond",inputsKey:"diamond_count",unit:r("unit_item"),finalScore:t.diamond_1,colorClass:"bg-cyan-500",value:p.diamond_count,onChange:F,score:P(S.diamond),t:r})]}),u.jsxs("div",{className:"bg-orange-50/50 rounded-2xl p-6 border border-orange-100 flex gap-4",children:[u.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Es,{size:16,className:"text-orange-600"})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs font-bold text-orange-900 underline decoration-orange-200 decoration-2 underline-offset-2",children:r("tips_title")}),u.jsx("p",{className:"text-xs text-orange-700 leading-relaxed font-medium",children:r("tips_desc")})]})]})]})},iy=({icon:r,title:e,name:t,inputsKey:i,unit:o,inputUnit:l,pts:h,colorClass:p,value:m,onChange:v,score:w,t:I})=>u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`p-2 rounded-lg ${p} bg-opacity-10`,children:u.jsx(r,{size:18,className:p.replace("bg-","text-")})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:e})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[h," pts / ",o]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",name:i,value:m,onChange:v,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-base"}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md",children:l||o})]}),u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[I("est_score"),": ",u.jsx("span",{className:"text-blue-600 font-black",children:w})]})})]}),yk=()=>{const{t:r}=Wn(),[e,t]=Y.useState({speedup_1min:164,build_power_10:5,tech_power_10:5,radar_1:20500,soldier_t1:235,soldier_t2:357,soldier_t3:470,soldier_t4:593,soldier_t5:715,soldier_t6:818,soldier_t7:940,soldier_t8:1e3,soldier_t9:1100,soldier_t10:1300,diamond_1:30}),[i,o]=Y.useState({speedup_d:"",speedup_h:"",speedup_m:"",build_power_start:"",build_power_end:"",tech_power_start:"",tech_power_end:"",radar_count:"",soldier_count:"",selected_tier:"8",diamond_count:""}),[l,h]=Y.useState(!1),[p,m]=Y.useState(!1),[v,w]=Y.useState(!1);Y.useEffect(()=>{const U=localStorage.getItem("duel_fri_base_values"),Z=localStorage.getItem("duel_welcome_dismissed_fri");if(U)try{t(JSON.parse(U))}catch(ie){console.error("Failed to load base values",ie)}Z||m(!0)},[]);const I=U=>{const{name:Z,value:ie}=U.target;(ie===""||/^\d+$/.test(ie))&&o(A=>({...A,[Z]:ie}))},C=(U,Z)=>{(Z===""||/^\d+(\.\d+)?$/.test(Z))&&t(ie=>({...ie,[U]:Number(Z)||0}))},O=()=>{localStorage.setItem("duel_fri_base_values",JSON.stringify(e)),h(!1)},q=()=>{v&&localStorage.setItem("duel_welcome_dismissed_fri","true"),m(!1)},H=()=>{o({speedup_d:"",speedup_h:"",speedup_m:"",build_power_start:"",build_power_end:"",tech_power_start:"",tech_power_end:"",radar_count:"",soldier_count:"",selected_tier:"8",diamond_count:""})},L=Y.useMemo(()=>{const U=(Number(i.speedup_d)||0)*1440+(Number(i.speedup_h)||0)*60+(Number(i.speedup_m)||0),Z=Math.max(0,(Number(i.build_power_end)||0)-(Number(i.build_power_start)||0)),ie=Math.max(0,(Number(i.tech_power_end)||0)-(Number(i.tech_power_start)||0)),A=(Number(i.soldier_count)||0)*(e[`soldier_t${i.selected_tier}`]||0);return{speedup:U*e.speedup_1min,build_power:Z/10*e.build_power_10,tech_power:ie/10*e.tech_power_10,radar:(Number(i.radar_count)||0)*e.radar_1,soldier:A,diamond:(Number(i.diamond_count)||0)*e.diamond_1,totalSpeedupMinutes:U,buildPowerDiff:Z,techPowerDiff:ie}},[i,e]),X=Y.useMemo(()=>L.speedup+L.build_power+L.tech_power+L.radar+L.soldier+L.diamond,[L]),F=U=>!U||isNaN(U)||U===0?"0":new Intl.NumberFormat("en-US").format(Math.floor(U)),M=Array.from({length:10},(U,Z)=>(Z+1).toString());return u.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[p&&u.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:u.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-green-100",children:u.jsxs("div",{className:"p-10 text-center space-y-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-20 h-20 bg-green-600 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-green-200 animate-bounce cursor-default relative z-10",children:u.jsx(Fo,{className:"text-white",size:40})}),u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 bg-green-400 rounded-3xl blur-2xl opacity-20 animate-pulse"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight",children:r("welcome_title")}),u.jsxs("p",{className:"text-sm font-medium text-gray-500 leading-relaxed px-2 text-center",children:[r("welcome_desc").split("{icon}")[0],u.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-gray-100 rounded-md text-gray-900 border border-gray-200 align-middle mx-1 -mt-0.5",children:u.jsx(Nt,{size:12})}),r("welcome_desc").split("{icon}")[1]]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("label",{className:"flex items-center justify-center gap-3 cursor-pointer group select-none",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:v,onChange:()=>w(!v)}),u.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center ${v?"bg-green-600 border-green-600":"border-gray-200 group-hover:border-green-400"}`,children:v&&u.jsx(Uo,{size:12,className:"text-white stroke-[4]"})})]}),u.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:r("dont_show_again")})]}),u.jsx("button",{onClick:q,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black transition-all shadow-xl shadow-gray-200",children:r("close_guide")})]})]})})}),u.jsx("div",{className:"bg-gradient-to-br from-gray-900 via-green-950 to-emerald-900 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:u.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"px-3 py-1 bg-green-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-green-400/30",children:"Alliance Duel"}),u.jsx("div",{className:"px-3 py-1 bg-emerald-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-emerald-400/30",children:r("friday")})]}),u.jsx("h2",{className:"text-3xl font-black tracking-tight",children:r("fri_title")}),u.jsx("p",{className:"text-green-200/60 text-sm font-medium",children:r("fri_desc")})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[u.jsx("div",{className:"text-green-200 text-[10px] font-black uppercase tracking-widest mb-1",children:r("total_est_score")}),u.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-green-100 to-emerald-100",children:F(X)}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsxs("button",{onClick:H,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[u.jsx(zo,{size:14})," ",r("reset_data")]}),u.jsx("button",{onClick:()=>h(!l),className:`p-2 rounded-xl transition-all border ${l?"bg-white text-green-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:u.jsx(Nt,{size:18})})]})]})]})}),l&&u.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl border border-green-100 animate-in slide-in-from-top-4 duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-xl flex items-center justify-center shadow-lg shadow-green-200",children:u.jsx(Nt,{className:"text-white",size:20})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-black text-gray-900",children:r("score_base_settings")}),u.jsx("p",{className:"text-xs text-gray-500",children:r("base_points_desc")})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 mb-6",children:Object.keys(e).map(U=>u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest px-1",children:r(U)}),u.jsx("input",{type:"text",value:e[U],onChange:Z=>C(U,Z.target.value),className:"w-full bg-gray-50 border border-gray-100 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-green-500/20 outline-none transition-all"})]},U))}),u.jsxs("button",{onClick:O,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[u.jsx(As,{size:18})," ",r("save_and_apply")]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-emerald-100 border-l-4 border-l-emerald-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-2 rounded-lg bg-emerald-500 bg-opacity-10",children:u.jsx(Gu,{size:18,className:"text-emerald-500"})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm font-black text-emerald-700",children:r("speedup_accumulate")})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.speedup_1min," pts / ",r("unit_min")]})]}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:["d","h","m"].map(U=>u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r(`unit_${U==="d"?"day":U==="h"?"hour":"min"}`)}),u.jsx("input",{type:"text",name:`speedup_${U}`,value:i[`speedup_${U}`],onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-emerald-500/20 transition-all text-base font-mono"})]},U))}),u.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[u.jsxs("span",{className:"text-gray-400 px-1",children:[r("current_total"),": ",u.jsxs("span",{className:"text-emerald-600",children:[F(L.totalSpeedupMinutes)," ",r("unit_min")]})]}),u.jsxs("span",{className:"text-gray-400",children:[r("est_score"),": ",u.jsx("span",{className:"text-emerald-600 font-black",children:F(L.speedup)})]})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-orange-100 border-l-4 border-l-orange-500 hover:shadow-md transition-all",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-2 rounded-lg bg-orange-500 bg-opacity-10",children:u.jsx(Rv,{size:18,className:"text-orange-500"})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:r("power_increase")})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.build_power_10," pts / 10 Power"]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("power_start")}),u.jsx("input",{type:"text",name:"build_power_start",value:i.build_power_start,onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-orange-500/20 transition-all text-base font-mono"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("power_end")}),u.jsx("input",{type:"text",name:"build_power_end",value:i.build_power_end,onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-orange-500/20 transition-all text-base font-mono"})]})]}),u.jsx("div",{className:"mt-4 flex justify-end text-xs font-bold",children:u.jsxs("span",{className:"text-gray-400",children:[r("est_score"),": ",u.jsx("span",{className:"text-orange-600 font-black",children:F(L.build_power)})]})})]}),u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-purple-100 border-l-4 border-l-purple-500 hover:shadow-md transition-all",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-2 rounded-lg bg-purple-500 bg-opacity-10",children:u.jsx(Lv,{size:18,className:"text-purple-500"})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:r("tech_power_increase")})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.tech_power_10," pts / 10 Power"]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("power_start")}),u.jsx("input",{type:"text",name:"tech_power_start",value:i.tech_power_start,onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-purple-500/20 transition-all text-base font-mono"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("power_end")}),u.jsx("input",{type:"text",name:"tech_power_end",value:i.tech_power_end,onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-purple-500/20 transition-all text-base font-mono"})]})]}),u.jsx("div",{className:"mt-4 flex justify-end text-xs font-bold",children:u.jsxs("span",{className:"text-gray-400",children:[r("est_score"),": ",u.jsx("span",{className:"text-purple-600 font-black",children:F(L.tech_power)})]})})]}),u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-orange-100 border-l-4 border-l-orange-500 hover:shadow-md transition-all",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-2 rounded-lg bg-orange-500 bg-opacity-10",children:u.jsx(qn,{size:18,className:"text-orange-500"})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:r("soldier_title")})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[F(e[`soldier_t${i.selected_tier}`])," pts / ",r("unit_soldier")]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"relative",children:[u.jsx("select",{value:i.selected_tier,onChange:U=>o(Z=>({...Z,selected_tier:U.target.value})),className:"w-full appearance-none bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold focus:ring-2 focus:ring-orange-500/20 transition-all text-sm cursor-pointer",children:M.map(U=>u.jsxs("option",{value:U,children:["T",U," ",r("soldiers")]},U))}),u.jsx(Tu,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",name:"soldier_count",value:i.soldier_count,onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-orange-500/20 transition-all font-mono text-base"}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-orange-600 bg-orange-50 px-2 py-0.5 rounded-md",children:r("unit_soldier")})]})]}),u.jsx("div",{className:"mt-4 flex justify-end text-xs font-bold",children:u.jsxs("span",{className:"text-gray-400",children:[r("est_score"),": ",u.jsx("span",{className:"text-orange-600 font-black",children:F(L.soldier)})]})})]}),u.jsx(iy,{icon:Ov,title:r("radar_title"),name:"radar",inputsKey:"radar_count",unit:r("unit_radar"),pts:F(e.radar_1),colorClass:"bg-blue-600",value:i.radar_count,onChange:I,score:F(L.radar),t:r}),u.jsx(iy,{icon:bl,title:r("diamond_gift"),name:"diamond",inputsKey:"diamond_count",unit:r("unit_item"),pts:e.diamond_1,colorClass:"bg-cyan-500",value:i.diamond_count,onChange:I,score:F(L.diamond),t:r})]}),u.jsxs("div",{className:"bg-green-50/50 rounded-2xl p-6 border border-green-100 flex gap-4",children:[u.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Es,{size:16,className:"text-green-600"})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs font-bold text-green-900 underline decoration-green-200 decoration-2 underline-offset-2",children:r("tips_title")}),u.jsx("p",{className:"text-xs text-green-700 leading-relaxed font-medium",children:r("tips_desc")})]})]})]})},oy=({icon:r,title:e,name:t,inputsKey:i,unit:o,inputUnit:l,pts:h,colorClass:p,value:m,onChange:v,score:w,t:I})=>u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`p-2 rounded-lg ${p} bg-opacity-10`,children:u.jsx(r,{size:18,className:p.replace("bg-","text-")})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm",children:e})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[h," pts / ",o]})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",name:i,value:m,onChange:v,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-red-500/20 transition-all font-mono text-base"}),u.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-red-600 bg-red-50 px-2 py-0.5 rounded-md",children:l||o})]}),u.jsx("div",{className:"mt-2 flex justify-end",children:u.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[I("est_score"),": ",u.jsx("span",{className:"text-red-600 font-black",children:w})]})})]}),_k=()=>{const{t:r}=Wn(),[e,t]=Y.useState({speedup_1min:41,bounty_orange:49300,trade_orange:61700}),[i,o]=Y.useState({speedup_d:"",speedup_h:"",speedup_m:"",bounty_count:"",trade_count:""}),[l,h]=Y.useState(!1),[p,m]=Y.useState(!1),[v,w]=Y.useState(!1);Y.useEffect(()=>{const M=localStorage.getItem("duel_sat_base_values"),U=localStorage.getItem("duel_welcome_dismissed_sat");if(M)try{t(JSON.parse(M))}catch(Z){console.error("Failed to load base values",Z)}U||m(!0)},[]);const I=M=>{const{name:U,value:Z}=M.target;(Z===""||/^\d+$/.test(Z))&&o(ie=>({...ie,[U]:Z}))},C=(M,U)=>{(U===""||/^\d+(\.\d+)?$/.test(U))&&t(Z=>({...Z,[M]:Number(U)||0}))},O=()=>{localStorage.setItem("duel_sat_base_values",JSON.stringify(e)),h(!1)},q=()=>{v&&localStorage.setItem("duel_welcome_dismissed_sat","true"),m(!1)},H=()=>{o({speedup_d:"",speedup_h:"",speedup_m:"",bounty_count:"",trade_count:""})},L=Y.useMemo(()=>{const M=(Number(i.speedup_d)||0)*1440+(Number(i.speedup_h)||0)*60+(Number(i.speedup_m)||0);return{speedup:M*e.speedup_1min,bounty:(Number(i.bounty_count)||0)*e.bounty_orange,trade:(Number(i.trade_count)||0)*e.trade_orange,totalSpeedupMinutes:M}},[i,e]),X=Y.useMemo(()=>L.speedup+L.bounty+L.trade,[L]),F=M=>!M||isNaN(M)||M===0?"0":new Intl.NumberFormat("en-US").format(Math.floor(M));return u.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[p&&u.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:u.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-red-100",children:u.jsxs("div",{className:"p-10 text-center space-y-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-red-200 animate-bounce cursor-default relative z-10",children:u.jsx(Fo,{className:"text-white",size:40})}),u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 bg-red-400 rounded-3xl blur-2xl opacity-20 animate-pulse"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight",children:r("welcome_title")}),u.jsxs("p",{className:"text-sm font-medium text-gray-500 leading-relaxed px-2 text-center",children:[r("welcome_desc").split("{icon}")[0],u.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-gray-100 rounded-md text-gray-900 border border-gray-200 align-middle mx-1 -mt-0.5",children:u.jsx(Nt,{size:12})}),r("welcome_desc").split("{icon}")[1]]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("label",{className:"flex items-center justify-center gap-3 cursor-pointer group select-none",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only",checked:v,onChange:()=>w(!v)}),u.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center ${v?"bg-red-600 border-red-600":"border-gray-200 group-hover:border-red-400"}`,children:v&&u.jsx(Uo,{size:12,className:"text-white stroke-[4]"})})]}),u.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:r("dont_show_again")})]}),u.jsx("button",{onClick:q,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black transition-all shadow-xl shadow-gray-200",children:r("close_guide")})]})]})})}),u.jsx("div",{className:"bg-gradient-to-br from-gray-950 via-red-950 to-rose-950 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:u.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"px-3 py-1 bg-red-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-red-400/30",children:"Alliance Duel"}),u.jsx("div",{className:"px-3 py-1 bg-rose-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-rose-400/30",children:r("saturday")})]}),u.jsx("h2",{className:"text-3xl font-black tracking-tight",children:r("sat_title")}),u.jsx("p",{className:"text-rose-200/60 text-sm font-medium",children:r("sat_desc")})]}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[u.jsx("div",{className:"text-rose-200 text-[10px] font-black uppercase tracking-widest mb-1",children:r("total_est_score")}),u.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-red-100 to-rose-100",children:F(X)}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsxs("button",{onClick:H,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[u.jsx(zo,{size:14})," ",r("reset_data")]}),u.jsx("button",{onClick:()=>h(!l),className:`p-2 rounded-xl transition-all border ${l?"bg-white text-red-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:u.jsx(Nt,{size:18})})]})]})]})}),l&&u.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl border border-red-100 animate-in slide-in-from-top-4 duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"w-10 h-10 bg-red-600 rounded-xl flex items-center justify-center shadow-lg shadow-red-200",children:u.jsx(Nt,{className:"text-white",size:20})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-black text-gray-900",children:r("score_base_settings")}),u.jsx("p",{className:"text-xs text-gray-500",children:r("base_points_desc")})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 mb-6",children:Object.keys(e).map(M=>u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest px-1",children:r(M)}),u.jsx("input",{type:"text",value:e[M],onChange:U=>C(M,U.target.value),className:"w-full bg-gray-50 border border-gray-100 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-red-500/20 outline-none transition-all"})]},M))}),u.jsxs("button",{onClick:O,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[u.jsx(As,{size:18})," ",r("save_and_apply")]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-red-100 border-l-4 border-l-red-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-2 rounded-lg bg-red-500 bg-opacity-10",children:u.jsx(Gu,{size:18,className:"text-red-500"})}),u.jsx("span",{className:"font-bold text-gray-700 text-sm font-black text-red-700",children:r("speedup_accumulate")})]}),u.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.speedup_1min," pts / ",r("unit_min")]})]}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:["d","h","m"].map(M=>u.jsxs("div",{className:"space-y-1",children:[u.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r(`unit_${M==="d"?"day":M==="h"?"hour":"min"}`)}),u.jsx("input",{type:"text",name:`speedup_${M}`,value:i[`speedup_${M}`],onChange:I,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-red-500/20 transition-all text-base font-mono"})]},M))}),u.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[u.jsxs("span",{className:"text-gray-400 px-1",children:[r("current_total"),": ",u.jsxs("span",{className:"text-red-600",children:[F(L.totalSpeedupMinutes)," ",r("unit_min")]})]}),u.jsxs("span",{className:"text-gray-400",children:[r("est_score"),": ",u.jsx("span",{className:"text-red-600 font-black",children:F(L.speedup)})]})]})]}),u.jsx(oy,{icon:Uv,title:r("bounty_title"),name:"bounty",inputsKey:"bounty_count",unit:r("unit_count"),pts:F(e.bounty_orange),colorClass:"bg-orange-600",value:i.bounty_count,onChange:I,score:F(L.bounty),t:r}),u.jsx(oy,{icon:zv,title:r("trade_title"),name:"trade",inputsKey:"trade_count",unit:r("unit_trade"),pts:F(e.trade_orange),colorClass:"bg-sky-600",value:i.trade_count,onChange:I,score:F(L.trade),t:r})]}),u.jsxs("div",{className:"bg-red-50/50 rounded-2xl p-6 border border-red-100 flex gap-4",children:[u.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Es,{size:16,className:"text-red-600"})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"text-xs font-bold text-red-900 underline decoration-red-200 decoration-2 underline-offset-2",children:r("tips_title")}),u.jsx("p",{className:"text-xs text-red-700 leading-relaxed font-medium",children:r("tips_desc")})]})]})]})},vk=()=>{const{t:r}=Wn(),[e,t]=Y.useState(()=>{const m=new Date,v=m.getUTCHours();let w=m.getUTCDay();return v<2&&(w=w-1,w<0&&(w=6)),w===0?1:w}),i=["monday","tuesday","wednesday","thursday","friday","saturday"],o=m=>{switch(m){case 1:return r("mon_title");case 2:return r("tue_title");case 3:return r("wed_title");case 4:return r("thu_title");case 5:return r("fri_title");case 6:return r("sat_title");default:return r("duel_calculator")}},l=m=>{switch(m){case 1:return r("mon_desc");case 2:return r("tue_desc");case 3:return r("wed_desc");case 4:return r("thu_desc");case 5:return r("fri_desc");case 6:return r("sat_desc");default:return r("calc_dev_desc")}},h=m=>[1,2,3,4,5,6].includes(m),p=m=>{switch(m){case 1:return"text-cyan-600";case 2:return"text-blue-600";case 3:return"text-indigo-600";case 4:return"text-orange-600";case 5:return"text-emerald-600";case 6:return"text-red-600";default:return"text-gray-900"}};return u.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[u.jsxs("div",{children:[u.jsx("h2",{className:`text-2xl font-black tracking-tight ${p(e)}`,children:o(e)}),u.jsx("p",{className:"text-gray-500 text-sm font-medium",children:l(e)})]}),u.jsx("div",{className:"flex bg-white p-1.5 rounded-2xl shadow-sm border border-gray-100 overflow-x-auto max-w-full",children:[1,2,3,4,5,6].map(m=>{const v=h(m),w=I=>{switch(I){case 1:return"bg-cyan-600 shadow-cyan-200";case 2:return"bg-blue-600 shadow-blue-200";case 3:return"bg-indigo-600 shadow-indigo-200";case 4:return"bg-orange-600 shadow-orange-200";case 5:return"bg-emerald-600 shadow-emerald-200";case 6:return"bg-red-600 shadow-red-200";default:return"bg-gray-900 shadow-gray-200"}};return u.jsxs("button",{onClick:()=>t(m),disabled:!v,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all whitespace-nowrap ${e===m?`${w(m)} text-white shadow-lg`:v?"text-gray-400 hover:text-gray-600 hover:bg-gray-50":"text-gray-200 cursor-not-allowed"}`,children:[u.jsx(Eu,{size:14}),r(i[m-1]),!v&&u.jsxs("span",{className:"text-[8px] opacity-40 ml-1",children:["(",r("dev_in_progress"),")"]})]},m)})})]}),u.jsxs("div",{className:"transition-all duration-300",children:[e===1&&u.jsx(fk,{}),e===2&&u.jsx(pk,{}),e===3&&u.jsx(mk,{}),e===4&&u.jsx(gk,{}),e===5&&u.jsx(yk,{}),e===6&&u.jsx(_k,{}),!h(e)&&u.jsxs("div",{className:"bg-white rounded-[2rem] p-12 text-center border-2 border-dashed border-gray-100",children:[u.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-2xl flex items-center justify-center mx-auto mb-4",children:u.jsx(Eu,{className:"text-gray-200",size:32})}),u.jsxs("h3",{className:"text-lg font-black text-gray-900 mb-2",children:[r(i[e-1])," ",r("duel_calculator")," ",r("dev_in_progress")]}),u.jsx("p",{className:"text-gray-400 text-sm font-medium",children:r("calc_dev_desc")})]})]})]})};function xk(){const[r,e]=Y.useState("form"),[t,i]=Y.useState(!1),{user:o,isAdmin:l,loading:h}=Nv(),{lang:p,t:m,toggleLang:v}=Wn();Y.useEffect(()=>{const O=localStorage.getItem("isLoginMode")==="true";!h&&!o&&!t&&!O&&Nb(ui).catch(q=>{console.error(":",q)}),!o&&O&&i(!0)},[o,h,t]),Y.useEffect(()=>{o&&(localStorage.removeItem("isLoginMode"),i(!1))},[o]);const w=async()=>{try{localStorage.removeItem("isLoginMode"),i(!1),await Qg(ui)}catch(O){console.error(":",O)}},I=async()=>{localStorage.setItem("isLoginMode","true"),i(!0),await Qg(ui)},C=()=>{localStorage.removeItem("isLoginMode"),i(!1)};return h?u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 space-y-4",children:[u.jsx(MN,{className:"w-10 h-10 text-blue-600 animate-spin"}),u.jsx("p",{className:"text-gray-500 font-medium animate-pulse",children:m("loading_system")})]}):t&&!o?u.jsx("div",{className:"min-h-screen bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-blue-100 via-white to-indigo-100 flex flex-col items-center justify-center p-4",children:u.jsxs("div",{className:"w-full max-w-md animate-in fade-in zoom-in duration-500",children:[u.jsx(vN,{}),u.jsx("button",{onClick:C,className:"w-full mt-6 py-3 text-gray-400 hover:text-gray-600 text-sm font-bold flex items-center justify-center gap-2 transition-colors border border-transparent hover:border-gray-200 rounded-xl",children:m("back_to_guest")})]})}):o?u.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] flex flex-col font-sans selection:bg-indigo-100 selection:text-indigo-900",children:[u.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-gray-100 shadow-sm",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-18 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3 group cursor-default",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-200 group-hover:rotate-12 transition-transform duration-300",children:u.jsx(bo,{className:"text-white w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-lg font-black text-gray-900 tracking-tight leading-none",children:m("title")}),u.jsx("p",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-[0.2em] mt-1 opacity-80",children:m("subtitle")})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-3 py-1.5 rounded-full border border-gray-100 bg-gray-50 text-xs font-bold text-gray-600 hover:bg-gray-100 transition-all",children:[u.jsx(PN,{size:14,className:"text-blue-500"}),p==="zh"?"English":""]}),u.jsxs("div",{className:"hidden md:flex items-center gap-4 py-1.5 px-3 bg-gray-50 rounded-full border border-gray-100",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${o.isAnonymous?"bg-orange-400 animate-pulse":"bg-green-500"}`}),u.jsx("span",{className:"text-xs font-bold text-gray-600 tracking-wide",children:o.isAnonymous?m("guest_mode"):o.email?.split("@")[0]})]}),l&&u.jsx("span",{className:"bg-indigo-600 text-[10px] text-white px-2 py-0.5 rounded-full font-black uppercase tracking-wider shadow-sm",children:m("admin_tag")})]}),!o.isAnonymous&&u.jsx("button",{onClick:w,className:"group flex items-center gap-2 text-gray-400 hover:text-red-500 transition-colors p-2 rounded-lg hover:bg-red-50",title:m("logout"),children:u.jsx(LN,{size:20,className:"group-hover:-translate-x-0.5 transition-transform"})})]})]})}),u.jsx("main",{className:"flex-grow",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12",children:[u.jsxs("div",{className:"inline-flex p-1 bg-white border border-gray-200 rounded-2xl mb-10 shadow-sm overflow-x-auto max-w-full",children:[u.jsxs("button",{onClick:()=>e("form"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 whitespace-nowrap ${r==="form"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[u.jsx(DN,{size:18})," ",m("personal_entry")]}),u.jsxs("button",{onClick:()=>e("calculator"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 whitespace-nowrap ${r==="calculator"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[u.jsx(TN,{size:18})," ",m("duel_calculator")]}),l&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>e("admin"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 whitespace-nowrap ${r==="admin"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[u.jsx($N,{size:18})," ",m("all_management")]}),u.jsxs("button",{onClick:()=>e("planner"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 whitespace-nowrap ${r==="planner"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[u.jsx(VN,{size:18})," ",m("view_planner")]})]})]}),u.jsxs("div",{className:"relative",children:[r==="admin"&&l&&u.jsx(ny,{}),r==="planner"&&l&&u.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:u.jsx(ny,{forcePlanner:!0})}),r==="form"&&u.jsx(ZN,{user:o}),r==="calculator"&&u.jsx(vk,{})]})]})}),u.jsx("footer",{className:"bg-white border-t border-gray-100 py-12 px-4",children:u.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-8",children:[u.jsxs("div",{className:"flex flex-col items-center md:items-start gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 opacity-30 grayscale",children:[u.jsx(bo,{size:20}),u.jsx("span",{className:"font-black text-lg tracking-tighter uppercase whitespace-nowrap",children:m("title")})]}),u.jsx("p",{className:"text-gray-400 text-xs font-medium",children:m("footer_text")})]}),u.jsxs("div",{className:"flex items-center gap-8",children:[u.jsxs("div",{className:"text-[10px] font-black text-gray-300 uppercase tracking-[0.3em] hidden sm:block",children:["Intel Status: ",u.jsx("span",{className:"text-green-500",children:m("status_operational")})]}),o.isAnonymous&&u.jsxs("button",{onClick:I,className:"group flex items-center gap-2 py-2 px-4 rounded-full border border-gray-200 text-[11px] font-black text-gray-500 hover:bg-gray-900 hover:text-white hover:border-gray-900 transition-all shadow-sm",children:[m("admin_login_gate")," ",u.jsx(Dv,{size:14,className:"group-hover:translate-x-0.5 transition-transform"})]})]})]})}),u.jsx(_N,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!1,theme:"light"})]}):u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 space-y-4",children:[u.jsx(bo,{className:"w-12 h-12 text-blue-600 animate-bounce"}),u.jsx("div",{className:"text-gray-600 font-black tracking-widest uppercase text-xs",children:m("preparing_env")})]})}ew.createRoot(document.getElementById("root")).render(u.jsx(Ke.StrictMode,{children:u.jsx(oN,{children:u.jsx(xk,{})})}));
