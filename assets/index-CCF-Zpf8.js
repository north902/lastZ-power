(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function zy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var lh={exports:{}},xa={},uh={exports:{}},Re={};var ig;function ww(){if(ig)return Re;ig=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function b(N){return N===null||typeof N!="object"?null:(N=A&&N[A]||N["@@iterator"],typeof N=="function"?N:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,B={};function q(N,W,ie){this.props=N,this.context=W,this.refs=B,this.updater=ie||F}q.prototype.isReactComponent={},q.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},q.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function J(){}J.prototype=q.prototype;function ne(N,W,ie){this.props=N,this.context=W,this.refs=B,this.updater=ie||F}var ee=ne.prototype=new J;ee.constructor=ne,z(ee,q.prototype),ee.isPureReactComponent=!0;var oe=Array.isArray,Ce=Object.prototype.hasOwnProperty,ye={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(N,W,ie){var _e,pe={},Ae=null,be=null;if(W!=null)for(_e in W.ref!==void 0&&(be=W.ref),W.key!==void 0&&(Ae=""+W.key),W)Ce.call(W,_e)&&!C.hasOwnProperty(_e)&&(pe[_e]=W[_e]);var Fe=arguments.length-2;if(Fe===1)pe.children=ie;else if(1<Fe){for(var Qe=Array(Fe),wt=0;wt<Fe;wt++)Qe[wt]=arguments[wt+2];pe.children=Qe}if(N&&N.defaultProps)for(_e in Fe=N.defaultProps,Fe)pe[_e]===void 0&&(pe[_e]=Fe[_e]);return{$$typeof:r,type:N,key:Ae,ref:be,props:pe,_owner:ye.current}}function x(N,W){return{$$typeof:r,type:N.type,key:W,ref:N.ref,props:N.props,_owner:N._owner}}function P(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function R(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ie){return W[ie]})}var V=/\/+/g;function k(N,W){return typeof N=="object"&&N!==null&&N.key!=null?R(""+N.key):W.toString(36)}function Ne(N,W,ie,_e,pe){var Ae=typeof N;(Ae==="undefined"||Ae==="boolean")&&(N=null);var be=!1;if(N===null)be=!0;else switch(Ae){case"string":case"number":be=!0;break;case"object":switch(N.$$typeof){case r:case e:be=!0}}if(be)return be=N,pe=pe(be),N=_e===""?"."+k(be,0):_e,oe(pe)?(ie="",N!=null&&(ie=N.replace(V,"$&/")+"/"),Ne(pe,W,ie,"",function(wt){return wt})):pe!=null&&(P(pe)&&(pe=x(pe,ie+(!pe.key||be&&be.key===pe.key?"":(""+pe.key).replace(V,"$&/")+"/")+N)),W.push(pe)),1;if(be=0,_e=_e===""?".":_e+":",oe(N))for(var Fe=0;Fe<N.length;Fe++){Ae=N[Fe];var Qe=_e+k(Ae,Fe);be+=Ne(Ae,W,ie,Qe,pe)}else if(Qe=b(N),typeof Qe=="function")for(N=Qe.call(N),Fe=0;!(Ae=N.next()).done;)Ae=Ae.value,Qe=_e+k(Ae,Fe++),be+=Ne(Ae,W,ie,Qe,pe);else if(Ae==="object")throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return be}function ze(N,W,ie){if(N==null)return N;var _e=[],pe=0;return Ne(N,_e,"","",function(Ae){return W.call(ie,Ae,pe++)}),_e}function qe(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(ie){(N._status===0||N._status===-1)&&(N._status=1,N._result=ie)},function(ie){(N._status===0||N._status===-1)&&(N._status=2,N._result=ie)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var ge={current:null},Z={transition:null},ce={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:Z,ReactCurrentOwner:ye};function L(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:ze,forEach:function(N,W,ie){ze(N,function(){W.apply(this,arguments)},ie)},count:function(N){var W=0;return ze(N,function(){W++}),W},toArray:function(N){return ze(N,function(W){return W})||[]},only:function(N){if(!P(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Re.Component=q,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=ne,Re.StrictMode=s,Re.Suspense=g,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Re.act=L,Re.cloneElement=function(N,W,ie){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var _e=z({},N.props),pe=N.key,Ae=N.ref,be=N._owner;if(W!=null){if(W.ref!==void 0&&(Ae=W.ref,be=ye.current),W.key!==void 0&&(pe=""+W.key),N.type&&N.type.defaultProps)var Fe=N.type.defaultProps;for(Qe in W)Ce.call(W,Qe)&&!C.hasOwnProperty(Qe)&&(_e[Qe]=W[Qe]===void 0&&Fe!==void 0?Fe[Qe]:W[Qe])}var Qe=arguments.length-2;if(Qe===1)_e.children=ie;else if(1<Qe){Fe=Array(Qe);for(var wt=0;wt<Qe;wt++)Fe[wt]=arguments[wt+2];_e.children=Fe}return{$$typeof:r,type:N.type,key:pe,ref:Ae,props:_e,_owner:be}},Re.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:l,_context:N},N.Consumer=N},Re.createElement=T,Re.createFactory=function(N){var W=T.bind(null,N);return W.type=N,W},Re.createRef=function(){return{current:null}},Re.forwardRef=function(N){return{$$typeof:f,render:N}},Re.isValidElement=P,Re.lazy=function(N){return{$$typeof:E,_payload:{_status:-1,_result:N},_init:qe}},Re.memo=function(N,W){return{$$typeof:_,type:N,compare:W===void 0?null:W}},Re.startTransition=function(N){var W=Z.transition;Z.transition={};try{N()}finally{Z.transition=W}},Re.unstable_act=L,Re.useCallback=function(N,W){return ge.current.useCallback(N,W)},Re.useContext=function(N){return ge.current.useContext(N)},Re.useDebugValue=function(){},Re.useDeferredValue=function(N){return ge.current.useDeferredValue(N)},Re.useEffect=function(N,W){return ge.current.useEffect(N,W)},Re.useId=function(){return ge.current.useId()},Re.useImperativeHandle=function(N,W,ie){return ge.current.useImperativeHandle(N,W,ie)},Re.useInsertionEffect=function(N,W){return ge.current.useInsertionEffect(N,W)},Re.useLayoutEffect=function(N,W){return ge.current.useLayoutEffect(N,W)},Re.useMemo=function(N,W){return ge.current.useMemo(N,W)},Re.useReducer=function(N,W,ie){return ge.current.useReducer(N,W,ie)},Re.useRef=function(N){return ge.current.useRef(N)},Re.useState=function(N){return ge.current.useState(N)},Re.useSyncExternalStore=function(N,W,ie){return ge.current.useSyncExternalStore(N,W,ie)},Re.useTransition=function(){return ge.current.useTransition()},Re.version="18.3.1",Re}var sg;function ef(){return sg||(sg=1,uh.exports=ww()),uh.exports}var og;function Ew(){if(og)return xa;og=1;var r=ef(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(f,g,_){var E,A={},b=null,F=null;_!==void 0&&(b=""+_),g.key!==void 0&&(b=""+g.key),g.ref!==void 0&&(F=g.ref);for(E in g)s.call(g,E)&&!l.hasOwnProperty(E)&&(A[E]=g[E]);if(f&&f.defaultProps)for(E in g=f.defaultProps,g)A[E]===void 0&&(A[E]=g[E]);return{$$typeof:e,type:f,key:b,ref:F,props:A,_owner:o.current}}return xa.Fragment=t,xa.jsx=d,xa.jsxs=d,xa}var ag;function Tw(){return ag||(ag=1,lh.exports=Ew()),lh.exports}var w=Tw(),se=ef();const Ke=zy(se);var ku={},ch={exports:{}},nn={},dh={exports:{}},hh={};var lg;function Iw(){return lg||(lg=1,(function(r){function e(Z,ce){var L=Z.length;Z.push(ce);e:for(;0<L;){var N=L-1>>>1,W=Z[N];if(0<o(W,ce))Z[N]=ce,Z[L]=W,L=N;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var ce=Z[0],L=Z.pop();if(L!==ce){Z[0]=L;e:for(var N=0,W=Z.length,ie=W>>>1;N<ie;){var _e=2*(N+1)-1,pe=Z[_e],Ae=_e+1,be=Z[Ae];if(0>o(pe,L))Ae<W&&0>o(be,pe)?(Z[N]=be,Z[Ae]=L,N=Ae):(Z[N]=pe,Z[_e]=L,N=_e);else if(Ae<W&&0>o(be,L))Z[N]=be,Z[Ae]=L,N=Ae;else break e}}return ce}function o(Z,ce){var L=Z.sortIndex-ce.sortIndex;return L!==0?L:Z.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var g=[],_=[],E=1,A=null,b=3,F=!1,z=!1,B=!1,q=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(Z){for(var ce=t(_);ce!==null;){if(ce.callback===null)s(_);else if(ce.startTime<=Z)s(_),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=t(_)}}function oe(Z){if(B=!1,ee(Z),!z)if(t(g)!==null)z=!0,qe(Ce);else{var ce=t(_);ce!==null&&ge(oe,ce.startTime-Z)}}function Ce(Z,ce){z=!1,B&&(B=!1,J(T),T=-1),F=!0;var L=b;try{for(ee(ce),A=t(g);A!==null&&(!(A.expirationTime>ce)||Z&&!R());){var N=A.callback;if(typeof N=="function"){A.callback=null,b=A.priorityLevel;var W=N(A.expirationTime<=ce);ce=r.unstable_now(),typeof W=="function"?A.callback=W:A===t(g)&&s(g),ee(ce)}else s(g);A=t(g)}if(A!==null)var ie=!0;else{var _e=t(_);_e!==null&&ge(oe,_e.startTime-ce),ie=!1}return ie}finally{A=null,b=L,F=!1}}var ye=!1,C=null,T=-1,x=5,P=-1;function R(){return!(r.unstable_now()-P<x)}function V(){if(C!==null){var Z=r.unstable_now();P=Z;var ce=!0;try{ce=C(!0,Z)}finally{ce?k():(ye=!1,C=null)}}else ye=!1}var k;if(typeof ne=="function")k=function(){ne(V)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,ze=Ne.port2;Ne.port1.onmessage=V,k=function(){ze.postMessage(null)}}else k=function(){q(V,0)};function qe(Z){C=Z,ye||(ye=!0,k())}function ge(Z,ce){T=q(function(){Z(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_continueExecution=function(){z||F||(z=!0,qe(Ce))},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(Z){switch(b){case 1:case 2:case 3:var ce=3;break;default:ce=b}var L=b;b=ce;try{return Z()}finally{b=L}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var L=b;b=Z;try{return ce()}finally{b=L}},r.unstable_scheduleCallback=function(Z,ce,L){var N=r.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?N+L:N):L=N,Z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=L+W,Z={id:E++,callback:ce,priorityLevel:Z,startTime:L,expirationTime:W,sortIndex:-1},L>N?(Z.sortIndex=L,e(_,Z),t(g)===null&&Z===t(_)&&(B?(J(T),T=-1):B=!0,ge(oe,L-N))):(Z.sortIndex=W,e(g,Z),z||F||(z=!0,qe(Ce))),Z},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(Z){var ce=b;return function(){var L=b;b=ce;try{return Z.apply(this,arguments)}finally{b=L}}}})(hh)),hh}var ug;function xw(){return ug||(ug=1,dh.exports=Iw()),dh.exports}var cg;function Sw(){if(cg)return nn;cg=1;var r=ef(),e=xw();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){d(n,i),d(n+"Capture",i)}function d(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},A={};function b(n){return g.call(A,n)?!0:g.call(E,n)?!1:_.test(n)?A[n]=!0:(E[n]=!0,!1)}function F(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function z(n,i,a,c){if(i===null||typeof i>"u"||F(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function B(n,i,a,c,h,m,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=m,this.removeEmptyString=v}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){q[n]=new B(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];q[i]=new B(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){q[n]=new B(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){q[n]=new B(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){q[n]=new B(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){q[n]=new B(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){q[n]=new B(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){q[n]=new B(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){q[n]=new B(n,5,!1,n.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function ne(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(J,ne);q[i]=new B(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(J,ne);q[i]=new B(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(J,ne);q[i]=new B(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){q[n]=new B(n,1,!1,n.toLowerCase(),null,!1,!1)}),q.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){q[n]=new B(n,1,!1,n.toLowerCase(),null,!0,!0)});function ee(n,i,a,c){var h=q.hasOwnProperty(i)?q[i]:null;(h!==null?h.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(z(i,a,h,c)&&(a=null),c||h===null?b(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):h.mustUseProperty?n[h.propertyName]=a===null?h.type===3?!1:"":a:(i=h.attributeName,c=h.attributeNamespace,a===null?n.removeAttribute(i):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var oe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ce=Symbol.for("react.element"),ye=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),R=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),ze=Symbol.for("react.memo"),qe=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ce(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var L=Object.assign,N;function W(n){if(N===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);N=i&&i[1]||""}return`
`+N+n}var ie=!1;function _e(n,i){if(!n||ie)return"";ie=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch($){var c=$}Reflect.construct(n,[],i)}else{try{i.call()}catch($){c=$}n.call(i.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var h=$.stack.split(`
`),m=c.stack.split(`
`),v=h.length-1,S=m.length-1;1<=v&&0<=S&&h[v]!==m[S];)S--;for(;1<=v&&0<=S;v--,S--)if(h[v]!==m[S]){if(v!==1||S!==1)do if(v--,S--,0>S||h[v]!==m[S]){var D=`
`+h[v].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=v&&0<=S);break}}}finally{ie=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?W(n):""}function pe(n){switch(n.tag){case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return n=_e(n.type,!1),n;case 11:return n=_e(n.type.render,!1),n;case 1:return n=_e(n.type,!0),n;default:return""}}function Ae(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case ye:return"Portal";case x:return"Profiler";case T:return"StrictMode";case k:return"Suspense";case Ne:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case R:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case V:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ze:return i=n.displayName||null,i!==null?i:Ae(n.type)||"Memo";case qe:i=n._payload,n=n._init;try{return Ae(n(i))}catch{}}return null}function be(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(i);case 8:return i===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Qe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wt(n){var i=Qe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,m=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){c=""+v,m.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function lr(n){n._valueTracker||(n._valueTracker=wt(n))}function ps(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=Qe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function jr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Si(n,i){var a=i.checked;return L({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ms(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Fe(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ro(n,i){i=i.checked,i!=null&&ee(n,"checked",i,!1)}function No(n,i){Ro(n,i);var a=Fe(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?gs(n,i.type,a):i.hasOwnProperty("defaultValue")&&gs(n,i.type,Fe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function dl(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function gs(n,i,a){(i!=="number"||jr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ur=Array.isArray;function cr(n,i,a,c){if(n=n.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=i.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),i=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}i!==null||n[h].disabled||(i=n[h])}i!==null&&(i.selected=!0)}}function bo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return L({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ys(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ur(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Fe(a)}}function _s(n,i){var a=Fe(i.value),c=Fe(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Do(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function pt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?pt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var dr,Vo=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,h){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,h)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=dr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Fr(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ai=["Webkit","ms","Moz","O"];Object.keys(ki).forEach(function(n){Ai.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),ki[i]=ki[n]})});function Oo(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||ki.hasOwnProperty(n)&&ki[n]?(""+i).trim():i+"px"}function Lo(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=Oo(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,h):n[a]=h}}var Mo=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jo(n,i){if(i){if(Mo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Fo(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pi=null;function vs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ws=null,pn=null,qn=null;function Es(n){if(n=ua(n)){if(typeof ws!="function")throw Error(t(280));var i=n.stateNode;i&&(i=zl(i),ws(n.stateNode,n.type,i))}}function Hn(n){pn?qn?qn.push(n):qn=[n]:pn=n}function Uo(){if(pn){var n=pn,i=qn;if(qn=pn=null,Es(n),i)for(n=0;n<i.length;n++)Es(i[n])}}function Ci(n,i){return n(i)}function zo(){}var hr=!1;function Bo(n,i,a){if(hr)return n(i,a);hr=!0;try{return Ci(n,i,a)}finally{hr=!1,(pn!==null||qn!==null)&&(zo(),Uo())}}function at(n,i){var a=n.stateNode;if(a===null)return null;var c=zl(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Ts=!1;if(f)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{Ts=!1}function Ri(n,i,a,c,h,m,v,S,D){var $=Array.prototype.slice.call(arguments,3);try{i.apply(a,$)}catch(Q){this.onError(Q)}}var Ni=!1,Is=null,An=!1,$o=null,Lc={onError:function(n){Ni=!0,Is=n}};function xs(n,i,a,c,h,m,v,S,D){Ni=!1,Is=null,Ri.apply(Lc,arguments)}function hl(n,i,a,c,h,m,v,S,D){if(xs.apply(this,arguments),Ni){if(Ni){var $=Is;Ni=!1,Is=null}else throw Error(t(198));An||(An=!0,$o=$)}}function Pn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function bi(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Cn(n){if(Pn(n)!==n)throw Error(t(188))}function fl(n){var i=n.alternate;if(!i){if(i=Pn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return Cn(h),n;if(m===c)return Cn(h),i;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=h,c=m;else{for(var v=!1,S=h.child;S;){if(S===a){v=!0,a=h,c=m;break}if(S===c){v=!0,c=h,a=m;break}S=S.sibling}if(!v){for(S=m.child;S;){if(S===a){v=!0,a=m,c=h;break}if(S===c){v=!0,c=m,a=h;break}S=S.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function qo(n){return n=fl(n),n!==null?Ss(n):null}function Ss(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Ss(n);if(i!==null)return i;n=n.sibling}return null}var ks=e.unstable_scheduleCallback,Ho=e.unstable_cancelCallback,pl=e.unstable_shouldYield,Mc=e.unstable_requestPaint,Ye=e.unstable_now,ml=e.unstable_getCurrentPriorityLevel,Di=e.unstable_ImmediatePriority,Ur=e.unstable_UserBlockingPriority,mn=e.unstable_NormalPriority,Wo=e.unstable_LowPriority,gl=e.unstable_IdlePriority,Vi=null,sn=null;function yl(n){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Vi,n,void 0,(n.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:vl,Ko=Math.log,_l=Math.LN2;function vl(n){return n>>>=0,n===0?32:31-(Ko(n)/_l|0)|0}var As=64,Ps=4194304;function zr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Oi(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,h=n.suspendedLanes,m=n.pingedLanes,v=a&268435455;if(v!==0){var S=v&~h;S!==0?c=zr(S):(m&=v,m!==0&&(c=zr(m)))}else v=a&~h,v!==0?c=zr(v):m!==0&&(c=zr(m));if(c===0)return 0;if(i!==0&&i!==c&&(i&h)===0&&(h=c&-c,m=i&-i,h>=m||h===16&&(m&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-$t(i),h=1<<a,c|=n[a],i&=~h;return c}function jc(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fr(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,m=n.pendingLanes;0<m;){var v=31-$t(m),S=1<<v,D=h[v];D===-1?((S&a)===0||(S&c)!==0)&&(h[v]=jc(S,i)):D<=i&&(n.expiredLanes|=S),m&=~S}}function on(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Li(){var n=As;return As<<=1,(As&4194240)===0&&(As=64),n}function Br(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function $r(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-$t(i),n[i]=a}function Ge(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var h=31-$t(a),m=1<<h;i[h]=0,c[h]=-1,n[h]=-1,a&=~m}}function qr(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-$t(a),h=1<<c;h&i|n[c]&i&&(n[c]|=i),a&=~h}}var Ve=0;function Hr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var wl,Cs,El,Tl,Il,Go=!1,Wn=[],At=null,Rn=null,Nn=null,Wr=new Map,gn=new Map,Kn=[],Fc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xl(n,i){switch(n){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":Wr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":gn.delete(i.pointerId)}}function Qt(n,i,a,c,h,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[h]},i!==null&&(i=ua(i),i!==null&&Cs(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),n)}function Uc(n,i,a,c,h){switch(i){case"focusin":return At=Qt(At,n,i,a,c,h),!0;case"dragenter":return Rn=Qt(Rn,n,i,a,c,h),!0;case"mouseover":return Nn=Qt(Nn,n,i,a,c,h),!0;case"pointerover":var m=h.pointerId;return Wr.set(m,Qt(Wr.get(m)||null,n,i,a,c,h)),!0;case"gotpointercapture":return m=h.pointerId,gn.set(m,Qt(gn.get(m)||null,n,i,a,c,h)),!0}return!1}function Sl(n){var i=zi(n.target);if(i!==null){var a=Pn(i);if(a!==null){if(i=a.tag,i===13){if(i=bi(a),i!==null){n.blockedOn=i,Il(n.priority,function(){El(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function pr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Rs(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Pi=c,a.target.dispatchEvent(c),Pi=null}else return i=ua(a),i!==null&&Cs(i),n.blockedOn=a,!1;i.shift()}return!0}function Mi(n,i,a){pr(n)&&a.delete(i)}function kl(){Go=!1,At!==null&&pr(At)&&(At=null),Rn!==null&&pr(Rn)&&(Rn=null),Nn!==null&&pr(Nn)&&(Nn=null),Wr.forEach(Mi),gn.forEach(Mi)}function bn(n,i){n.blockedOn===i&&(n.blockedOn=null,Go||(Go=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,kl)))}function Dn(n){function i(h){return bn(h,n)}if(0<Wn.length){bn(Wn[0],n);for(var a=1;a<Wn.length;a++){var c=Wn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(At!==null&&bn(At,n),Rn!==null&&bn(Rn,n),Nn!==null&&bn(Nn,n),Wr.forEach(i),gn.forEach(i),a=0;a<Kn.length;a++)c=Kn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Kn.length&&(a=Kn[0],a.blockedOn===null);)Sl(a),a.blockedOn===null&&Kn.shift()}var mr=oe.ReactCurrentBatchConfig,Kr=!0;function tt(n,i,a,c){var h=Ve,m=mr.transition;mr.transition=null;try{Ve=1,Qo(n,i,a,c)}finally{Ve=h,mr.transition=m}}function zc(n,i,a,c){var h=Ve,m=mr.transition;mr.transition=null;try{Ve=4,Qo(n,i,a,c)}finally{Ve=h,mr.transition=m}}function Qo(n,i,a,c){if(Kr){var h=Rs(n,i,a,c);if(h===null)Jc(n,i,c,ji,a),xl(n,c);else if(Uc(h,n,i,a,c))c.stopPropagation();else if(xl(n,c),i&4&&-1<Fc.indexOf(n)){for(;h!==null;){var m=ua(h);if(m!==null&&wl(m),m=Rs(n,i,a,c),m===null&&Jc(n,i,c,ji,a),m===h)break;h=m}h!==null&&c.stopPropagation()}else Jc(n,i,c,null,a)}}var ji=null;function Rs(n,i,a,c){if(ji=null,n=vs(c),n=zi(n),n!==null)if(i=Pn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=bi(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return ji=n,null}function Yo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ml()){case Di:return 1;case Ur:return 4;case mn:case Wo:return 16;case gl:return 536870912;default:return 16}default:return 16}}var an=null,Ns=null,Yt=null;function Xo(){if(Yt)return Yt;var n,i=Ns,a=i.length,c,h="value"in an?an.value:an.textContent,m=h.length;for(n=0;n<a&&i[n]===h[n];n++);var v=a-n;for(c=1;c<=v&&i[a-c]===h[m-c];c++);return Yt=h.slice(n,1<c?1-c:void 0)}function bs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Gn(){return!0}function Jo(){return!1}function Pt(n){function i(a,c,h,m,v){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Gn:Jo,this.isPropagationStopped=Jo,this}return L(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),i}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=Pt(Vn),Qn=L({},Vn,{view:0,detail:0}),Bc=Pt(Qn),Vs,gr,Gr,Fi=L({},Qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Gr&&(Gr&&n.type==="mousemove"?(Vs=n.screenX-Gr.screenX,gr=n.screenY-Gr.screenY):gr=Vs=0,Gr=n),Vs)},movementY:function(n){return"movementY"in n?n.movementY:gr}}),Os=Pt(Fi),Zo=L({},Fi,{dataTransfer:0}),Al=Pt(Zo),Ls=L({},Qn,{relatedTarget:0}),Ms=Pt(Ls),Pl=L({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),yr=Pt(Pl),Cl=L({},Vn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Rl=Pt(Cl),Nl=L({},Vn,{data:0}),ea=Pt(Nl),js={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=bl[n])?!!i[n]:!1}function Yn(){return Dl}var u=L({},Qn,{key:function(n){if(n.key){var i=js[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=bs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?qt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yn,charCode:function(n){return n.type==="keypress"?bs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?bs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Pt(u),y=L({},Fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Pt(y),M=L({},Qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yn}),H=Pt(M),re=L({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Pt(re),gt=L({},Fi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Pt(gt),Et=[9,13,27,32],ct=f&&"CompositionEvent"in window,yn=null;f&&"documentMode"in document&&(yn=document.documentMode);var ln=f&&"TextEvent"in window&&!yn,Ui=f&&(!ct||yn&&8<yn&&11>=yn),Fs=" ",Jf=!1;function Zf(n,i){switch(n){case"keyup":return Et.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ep(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Us=!1;function y0(n,i){switch(n){case"compositionend":return ep(i);case"keypress":return i.which!==32?null:(Jf=!0,Fs);case"textInput":return n=i.data,n===Fs&&Jf?null:n;default:return null}}function _0(n,i){if(Us)return n==="compositionend"||!ct&&Zf(n,i)?(n=Xo(),Yt=Ns=an=null,Us=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ui&&i.locale!=="ko"?null:i.data;default:return null}}var v0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!v0[n.type]:i==="textarea"}function np(n,i,a,c){Hn(c),i=jl(i,"onChange"),0<i.length&&(a=new Ds("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ta=null,na=null;function w0(n){wp(n,0)}function Vl(n){var i=Hs(n);if(ps(i))return n}function E0(n,i){if(n==="change")return i}var rp=!1;if(f){var $c;if(f){var qc="oninput"in document;if(!qc){var ip=document.createElement("div");ip.setAttribute("oninput","return;"),qc=typeof ip.oninput=="function"}$c=qc}else $c=!1;rp=$c&&(!document.documentMode||9<document.documentMode)}function sp(){ta&&(ta.detachEvent("onpropertychange",op),na=ta=null)}function op(n){if(n.propertyName==="value"&&Vl(na)){var i=[];np(i,na,n,vs(n)),Bo(w0,i)}}function T0(n,i,a){n==="focusin"?(sp(),ta=i,na=a,ta.attachEvent("onpropertychange",op)):n==="focusout"&&sp()}function I0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Vl(na)}function x0(n,i){if(n==="click")return Vl(i)}function S0(n,i){if(n==="input"||n==="change")return Vl(i)}function k0(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var On=typeof Object.is=="function"?Object.is:k0;function ra(n,i){if(On(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!g.call(i,h)||!On(n[h],i[h]))return!1}return!0}function ap(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function lp(n,i){var a=ap(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ap(a)}}function up(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?up(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function cp(){for(var n=window,i=jr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=jr(n.document)}return i}function Hc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function A0(n){var i=cp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&up(a.ownerDocument.documentElement,a)){if(c!==null&&Hc(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var h=a.textContent.length,m=Math.min(c.start,h);c=c.end===void 0?m:Math.min(c.end,h),!n.extend&&m>c&&(h=c,c=m,m=h),h=lp(a,m);var v=lp(a,c);h&&v&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(h.node,h.offset),n.removeAllRanges(),m>c?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var P0=f&&"documentMode"in document&&11>=document.documentMode,zs=null,Wc=null,ia=null,Kc=!1;function dp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Kc||zs==null||zs!==jr(c)||(c=zs,"selectionStart"in c&&Hc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ia&&ra(ia,c)||(ia=c,c=jl(Wc,"onSelect"),0<c.length&&(i=new Ds("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=zs)))}function Ol(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Bs={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},Gc={},hp={};f&&(hp=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Ll(n){if(Gc[n])return Gc[n];if(!Bs[n])return n;var i=Bs[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in hp)return Gc[n]=i[a];return n}var fp=Ll("animationend"),pp=Ll("animationiteration"),mp=Ll("animationstart"),gp=Ll("transitionend"),yp=new Map,_p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(n,i){yp.set(n,i),l(i,[n])}for(var Qc=0;Qc<_p.length;Qc++){var Yc=_p[Qc],C0=Yc.toLowerCase(),R0=Yc[0].toUpperCase()+Yc.slice(1);Qr(C0,"on"+R0)}Qr(fp,"onAnimationEnd"),Qr(pp,"onAnimationIteration"),Qr(mp,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(gp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N0=new Set("cancel close invalid load scroll toggle".split(" ").concat(sa));function vp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,hl(c,i,void 0,n),n.currentTarget=null}function wp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],h=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var v=c.length-1;0<=v;v--){var S=c[v],D=S.instance,$=S.currentTarget;if(S=S.listener,D!==m&&h.isPropagationStopped())break e;vp(h,S,$),m=D}else for(v=0;v<c.length;v++){if(S=c[v],D=S.instance,$=S.currentTarget,S=S.listener,D!==m&&h.isPropagationStopped())break e;vp(h,S,$),m=D}}}if(An)throw n=$o,An=!1,$o=null,n}function Je(n,i){var a=i[id];a===void 0&&(a=i[id]=new Set);var c=n+"__bubble";a.has(c)||(Ep(i,n,2,!1),a.add(c))}function Xc(n,i,a){var c=0;i&&(c|=4),Ep(a,n,c,i)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function oa(n){if(!n[Ml]){n[Ml]=!0,s.forEach(function(a){a!=="selectionchange"&&(N0.has(a)||Xc(a,!1,n),Xc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ml]||(i[Ml]=!0,Xc("selectionchange",!1,i))}}function Ep(n,i,a,c){switch(Yo(i)){case 1:var h=tt;break;case 4:h=zc;break;default:h=Qo}a=h.bind(null,i,a,n),h=void 0,!Ts||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(i,a,{capture:!0,passive:h}):n.addEventListener(i,a,!0):h!==void 0?n.addEventListener(i,a,{passive:h}):n.addEventListener(i,a,!1)}function Jc(n,i,a,c,h){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var S=c.stateNode.containerInfo;if(S===h||S.nodeType===8&&S.parentNode===h)break;if(v===4)for(v=c.return;v!==null;){var D=v.tag;if((D===3||D===4)&&(D=v.stateNode.containerInfo,D===h||D.nodeType===8&&D.parentNode===h))return;v=v.return}for(;S!==null;){if(v=zi(S),v===null)return;if(D=v.tag,D===5||D===6){c=m=v;continue e}S=S.parentNode}}c=c.return}Bo(function(){var $=m,Q=vs(a),X=[];e:{var G=yp.get(n);if(G!==void 0){var ae=Ds,de=n;switch(n){case"keypress":if(bs(a)===0)break e;case"keydown":case"keyup":ae=p;break;case"focusin":de="focus",ae=Ms;break;case"focusout":de="blur",ae=Ms;break;case"beforeblur":case"afterblur":ae=Ms;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Os;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Al;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=H;break;case fp:case pp:case mp:ae=yr;break;case gp:ae=He;break;case"scroll":ae=Bc;break;case"wheel":ae=Le;break;case"copy":case"cut":case"paste":ae=Rl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=I}var he=(i&4)!==0,lt=!he&&n==="scroll",j=he?G!==null?G+"Capture":null:G;he=[];for(var O=$,U;O!==null;){U=O;var te=U.stateNode;if(U.tag===5&&te!==null&&(U=te,j!==null&&(te=at(O,j),te!=null&&he.push(aa(O,te,U)))),lt)break;O=O.return}0<he.length&&(G=new ae(G,de,null,a,Q),X.push({event:G,listeners:he}))}}if((i&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",G&&a!==Pi&&(de=a.relatedTarget||a.fromElement)&&(zi(de)||de[_r]))break e;if((ae||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,ae?(de=a.relatedTarget||a.toElement,ae=$,de=de?zi(de):null,de!==null&&(lt=Pn(de),de!==lt||de.tag!==5&&de.tag!==6)&&(de=null)):(ae=null,de=$),ae!==de)){if(he=Os,te="onMouseLeave",j="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(he=I,te="onPointerLeave",j="onPointerEnter",O="pointer"),lt=ae==null?G:Hs(ae),U=de==null?G:Hs(de),G=new he(te,O+"leave",ae,a,Q),G.target=lt,G.relatedTarget=U,te=null,zi(Q)===$&&(he=new he(j,O+"enter",de,a,Q),he.target=U,he.relatedTarget=lt,te=he),lt=te,ae&&de)t:{for(he=ae,j=de,O=0,U=he;U;U=$s(U))O++;for(U=0,te=j;te;te=$s(te))U++;for(;0<O-U;)he=$s(he),O--;for(;0<U-O;)j=$s(j),U--;for(;O--;){if(he===j||j!==null&&he===j.alternate)break t;he=$s(he),j=$s(j)}he=null}else he=null;ae!==null&&Tp(X,G,ae,he,!1),de!==null&&lt!==null&&Tp(X,lt,de,he,!0)}}e:{if(G=$?Hs($):window,ae=G.nodeName&&G.nodeName.toLowerCase(),ae==="select"||ae==="input"&&G.type==="file")var me=E0;else if(tp(G))if(rp)me=S0;else{me=I0;var we=T0}else(ae=G.nodeName)&&ae.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(me=x0);if(me&&(me=me(n,$))){np(X,me,a,Q);break e}we&&we(n,G,$),n==="focusout"&&(we=G._wrapperState)&&we.controlled&&G.type==="number"&&gs(G,"number",G.value)}switch(we=$?Hs($):window,n){case"focusin":(tp(we)||we.contentEditable==="true")&&(zs=we,Wc=$,ia=null);break;case"focusout":ia=Wc=zs=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,dp(X,a,Q);break;case"selectionchange":if(P0)break;case"keydown":case"keyup":dp(X,a,Q)}var Ee;if(ct)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Us?Zf(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(Ui&&a.locale!=="ko"&&(Us||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Us&&(Ee=Xo()):(an=Q,Ns="value"in an?an.value:an.textContent,Us=!0)),we=jl($,Ie),0<we.length&&(Ie=new ea(Ie,n,null,a,Q),X.push({event:Ie,listeners:we}),Ee?Ie.data=Ee:(Ee=ep(a),Ee!==null&&(Ie.data=Ee)))),(Ee=ln?y0(n,a):_0(n,a))&&($=jl($,"onBeforeInput"),0<$.length&&(Q=new ea("onBeforeInput","beforeinput",null,a,Q),X.push({event:Q,listeners:$}),Q.data=Ee))}wp(X,i)})}function aa(n,i,a){return{instance:n,listener:i,currentTarget:a}}function jl(n,i){for(var a=i+"Capture",c=[];n!==null;){var h=n,m=h.stateNode;h.tag===5&&m!==null&&(h=m,m=at(n,a),m!=null&&c.unshift(aa(n,m,h)),m=at(n,i),m!=null&&c.push(aa(n,m,h))),n=n.return}return c}function $s(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Tp(n,i,a,c,h){for(var m=i._reactName,v=[];a!==null&&a!==c;){var S=a,D=S.alternate,$=S.stateNode;if(D!==null&&D===c)break;S.tag===5&&$!==null&&(S=$,h?(D=at(a,m),D!=null&&v.unshift(aa(a,D,S))):h||(D=at(a,m),D!=null&&v.push(aa(a,D,S)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var b0=/\r\n?/g,D0=/\u0000|\uFFFD/g;function Ip(n){return(typeof n=="string"?n:""+n).replace(b0,`
`).replace(D0,"")}function Fl(n,i,a){if(i=Ip(i),Ip(n)!==i&&a)throw Error(t(425))}function Ul(){}var Zc=null,ed=null;function td(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var nd=typeof setTimeout=="function"?setTimeout:void 0,V0=typeof clearTimeout=="function"?clearTimeout:void 0,xp=typeof Promise=="function"?Promise:void 0,O0=typeof queueMicrotask=="function"?queueMicrotask:typeof xp<"u"?function(n){return xp.resolve(null).then(n).catch(L0)}:nd;function L0(n){setTimeout(function(){throw n})}function rd(n,i){var a=i,c=0;do{var h=a.nextSibling;if(n.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){n.removeChild(h),Dn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);Dn(i)}function Yr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Sp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var qs=Math.random().toString(36).slice(2),Xn="__reactFiber$"+qs,la="__reactProps$"+qs,_r="__reactContainer$"+qs,id="__reactEvents$"+qs,M0="__reactListeners$"+qs,j0="__reactHandles$"+qs;function zi(n){var i=n[Xn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[_r]||a[Xn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Sp(n);n!==null;){if(a=n[Xn])return a;n=Sp(n)}return i}n=a,a=n.parentNode}return null}function ua(n){return n=n[Xn]||n[_r],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Hs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function zl(n){return n[la]||null}var sd=[],Ws=-1;function Xr(n){return{current:n}}function Ze(n){0>Ws||(n.current=sd[Ws],sd[Ws]=null,Ws--)}function Xe(n,i){Ws++,sd[Ws]=n.current,n.current=i}var Jr={},Ot=Xr(Jr),Xt=Xr(!1),Bi=Jr;function Ks(n,i){var a=n.type.contextTypes;if(!a)return Jr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var h={},m;for(m in a)h[m]=i[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=h),h}function Jt(n){return n=n.childContextTypes,n!=null}function Bl(){Ze(Xt),Ze(Ot)}function kp(n,i,a){if(Ot.current!==Jr)throw Error(t(168));Xe(Ot,i),Xe(Xt,a)}function Ap(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in i))throw Error(t(108,be(n)||"Unknown",h));return L({},a,c)}function $l(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Jr,Bi=Ot.current,Xe(Ot,n),Xe(Xt,Xt.current),!0}function Pp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Ap(n,i,Bi),c.__reactInternalMemoizedMergedChildContext=n,Ze(Xt),Ze(Ot),Xe(Ot,n)):Ze(Xt),Xe(Xt,a)}var vr=null,ql=!1,od=!1;function Cp(n){vr===null?vr=[n]:vr.push(n)}function F0(n){ql=!0,Cp(n)}function Zr(){if(!od&&vr!==null){od=!0;var n=0,i=Ve;try{var a=vr;for(Ve=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}vr=null,ql=!1}catch(h){throw vr!==null&&(vr=vr.slice(n+1)),ks(Di,Zr),h}finally{Ve=i,od=!1}}return null}var Gs=[],Qs=0,Hl=null,Wl=0,_n=[],vn=0,$i=null,wr=1,Er="";function qi(n,i){Gs[Qs++]=Wl,Gs[Qs++]=Hl,Hl=n,Wl=i}function Rp(n,i,a){_n[vn++]=wr,_n[vn++]=Er,_n[vn++]=$i,$i=n;var c=wr;n=Er;var h=32-$t(c)-1;c&=~(1<<h),a+=1;var m=32-$t(i)+h;if(30<m){var v=h-h%5;m=(c&(1<<v)-1).toString(32),c>>=v,h-=v,wr=1<<32-$t(i)+h|a<<h|c,Er=m+n}else wr=1<<m|a<<h|c,Er=n}function ad(n){n.return!==null&&(qi(n,1),Rp(n,1,0))}function ld(n){for(;n===Hl;)Hl=Gs[--Qs],Gs[Qs]=null,Wl=Gs[--Qs],Gs[Qs]=null;for(;n===$i;)$i=_n[--vn],_n[vn]=null,Er=_n[--vn],_n[vn]=null,wr=_n[--vn],_n[vn]=null}var un=null,cn=null,nt=!1,Ln=null;function Np(n,i){var a=In(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function bp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,un=n,cn=Yr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,un=n,cn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=$i!==null?{id:wr,overflow:Er}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=In(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,un=n,cn=null,!0):!1;default:return!1}}function ud(n){return(n.mode&1)!==0&&(n.flags&128)===0}function cd(n){if(nt){var i=cn;if(i){var a=i;if(!bp(n,i)){if(ud(n))throw Error(t(418));i=Yr(a.nextSibling);var c=un;i&&bp(n,i)?Np(c,a):(n.flags=n.flags&-4097|2,nt=!1,un=n)}}else{if(ud(n))throw Error(t(418));n.flags=n.flags&-4097|2,nt=!1,un=n}}}function Dp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;un=n}function Kl(n){if(n!==un)return!1;if(!nt)return Dp(n),nt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!td(n.type,n.memoizedProps)),i&&(i=cn)){if(ud(n))throw Vp(),Error(t(418));for(;i;)Np(n,i),i=Yr(i.nextSibling)}if(Dp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){cn=Yr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}cn=null}}else cn=un?Yr(n.stateNode.nextSibling):null;return!0}function Vp(){for(var n=cn;n;)n=Yr(n.nextSibling)}function Ys(){cn=un=null,nt=!1}function dd(n){Ln===null?Ln=[n]:Ln.push(n)}var U0=oe.ReactCurrentBatchConfig;function ca(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var h=c,m=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(v){var S=h.refs;v===null?delete S[m]:S[m]=v},i._stringRef=m,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Gl(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Op(n){var i=n._init;return i(n._payload)}function Lp(n){function i(j,O){if(n){var U=j.deletions;U===null?(j.deletions=[O],j.flags|=16):U.push(O)}}function a(j,O){if(!n)return null;for(;O!==null;)i(j,O),O=O.sibling;return null}function c(j,O){for(j=new Map;O!==null;)O.key!==null?j.set(O.key,O):j.set(O.index,O),O=O.sibling;return j}function h(j,O){return j=ai(j,O),j.index=0,j.sibling=null,j}function m(j,O,U){return j.index=U,n?(U=j.alternate,U!==null?(U=U.index,U<O?(j.flags|=2,O):U):(j.flags|=2,O)):(j.flags|=1048576,O)}function v(j){return n&&j.alternate===null&&(j.flags|=2),j}function S(j,O,U,te){return O===null||O.tag!==6?(O=nh(U,j.mode,te),O.return=j,O):(O=h(O,U),O.return=j,O)}function D(j,O,U,te){var me=U.type;return me===C?Q(j,O,U.props.children,te,U.key):O!==null&&(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===qe&&Op(me)===O.type)?(te=h(O,U.props),te.ref=ca(j,O,U),te.return=j,te):(te=_u(U.type,U.key,U.props,null,j.mode,te),te.ref=ca(j,O,U),te.return=j,te)}function $(j,O,U,te){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=rh(U,j.mode,te),O.return=j,O):(O=h(O,U.children||[]),O.return=j,O)}function Q(j,O,U,te,me){return O===null||O.tag!==7?(O=Ji(U,j.mode,te,me),O.return=j,O):(O=h(O,U),O.return=j,O)}function X(j,O,U){if(typeof O=="string"&&O!==""||typeof O=="number")return O=nh(""+O,j.mode,U),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ce:return U=_u(O.type,O.key,O.props,null,j.mode,U),U.ref=ca(j,null,O),U.return=j,U;case ye:return O=rh(O,j.mode,U),O.return=j,O;case qe:var te=O._init;return X(j,te(O._payload),U)}if(ur(O)||ce(O))return O=Ji(O,j.mode,U,null),O.return=j,O;Gl(j,O)}return null}function G(j,O,U,te){var me=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return me!==null?null:S(j,O,""+U,te);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Ce:return U.key===me?D(j,O,U,te):null;case ye:return U.key===me?$(j,O,U,te):null;case qe:return me=U._init,G(j,O,me(U._payload),te)}if(ur(U)||ce(U))return me!==null?null:Q(j,O,U,te,null);Gl(j,U)}return null}function ae(j,O,U,te,me){if(typeof te=="string"&&te!==""||typeof te=="number")return j=j.get(U)||null,S(O,j,""+te,me);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Ce:return j=j.get(te.key===null?U:te.key)||null,D(O,j,te,me);case ye:return j=j.get(te.key===null?U:te.key)||null,$(O,j,te,me);case qe:var we=te._init;return ae(j,O,U,we(te._payload),me)}if(ur(te)||ce(te))return j=j.get(U)||null,Q(O,j,te,me,null);Gl(O,te)}return null}function de(j,O,U,te){for(var me=null,we=null,Ee=O,Ie=O=0,xt=null;Ee!==null&&Ie<U.length;Ie++){Ee.index>Ie?(xt=Ee,Ee=null):xt=Ee.sibling;var Be=G(j,Ee,U[Ie],te);if(Be===null){Ee===null&&(Ee=xt);break}n&&Ee&&Be.alternate===null&&i(j,Ee),O=m(Be,O,Ie),we===null?me=Be:we.sibling=Be,we=Be,Ee=xt}if(Ie===U.length)return a(j,Ee),nt&&qi(j,Ie),me;if(Ee===null){for(;Ie<U.length;Ie++)Ee=X(j,U[Ie],te),Ee!==null&&(O=m(Ee,O,Ie),we===null?me=Ee:we.sibling=Ee,we=Ee);return nt&&qi(j,Ie),me}for(Ee=c(j,Ee);Ie<U.length;Ie++)xt=ae(Ee,j,Ie,U[Ie],te),xt!==null&&(n&&xt.alternate!==null&&Ee.delete(xt.key===null?Ie:xt.key),O=m(xt,O,Ie),we===null?me=xt:we.sibling=xt,we=xt);return n&&Ee.forEach(function(li){return i(j,li)}),nt&&qi(j,Ie),me}function he(j,O,U,te){var me=ce(U);if(typeof me!="function")throw Error(t(150));if(U=me.call(U),U==null)throw Error(t(151));for(var we=me=null,Ee=O,Ie=O=0,xt=null,Be=U.next();Ee!==null&&!Be.done;Ie++,Be=U.next()){Ee.index>Ie?(xt=Ee,Ee=null):xt=Ee.sibling;var li=G(j,Ee,Be.value,te);if(li===null){Ee===null&&(Ee=xt);break}n&&Ee&&li.alternate===null&&i(j,Ee),O=m(li,O,Ie),we===null?me=li:we.sibling=li,we=li,Ee=xt}if(Be.done)return a(j,Ee),nt&&qi(j,Ie),me;if(Ee===null){for(;!Be.done;Ie++,Be=U.next())Be=X(j,Be.value,te),Be!==null&&(O=m(Be,O,Ie),we===null?me=Be:we.sibling=Be,we=Be);return nt&&qi(j,Ie),me}for(Ee=c(j,Ee);!Be.done;Ie++,Be=U.next())Be=ae(Ee,j,Ie,Be.value,te),Be!==null&&(n&&Be.alternate!==null&&Ee.delete(Be.key===null?Ie:Be.key),O=m(Be,O,Ie),we===null?me=Be:we.sibling=Be,we=Be);return n&&Ee.forEach(function(vw){return i(j,vw)}),nt&&qi(j,Ie),me}function lt(j,O,U,te){if(typeof U=="object"&&U!==null&&U.type===C&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Ce:e:{for(var me=U.key,we=O;we!==null;){if(we.key===me){if(me=U.type,me===C){if(we.tag===7){a(j,we.sibling),O=h(we,U.props.children),O.return=j,j=O;break e}}else if(we.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===qe&&Op(me)===we.type){a(j,we.sibling),O=h(we,U.props),O.ref=ca(j,we,U),O.return=j,j=O;break e}a(j,we);break}else i(j,we);we=we.sibling}U.type===C?(O=Ji(U.props.children,j.mode,te,U.key),O.return=j,j=O):(te=_u(U.type,U.key,U.props,null,j.mode,te),te.ref=ca(j,O,U),te.return=j,j=te)}return v(j);case ye:e:{for(we=U.key;O!==null;){if(O.key===we)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(j,O.sibling),O=h(O,U.children||[]),O.return=j,j=O;break e}else{a(j,O);break}else i(j,O);O=O.sibling}O=rh(U,j.mode,te),O.return=j,j=O}return v(j);case qe:return we=U._init,lt(j,O,we(U._payload),te)}if(ur(U))return de(j,O,U,te);if(ce(U))return he(j,O,U,te);Gl(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,O!==null&&O.tag===6?(a(j,O.sibling),O=h(O,U),O.return=j,j=O):(a(j,O),O=nh(U,j.mode,te),O.return=j,j=O),v(j)):a(j,O)}return lt}var Xs=Lp(!0),Mp=Lp(!1),Ql=Xr(null),Yl=null,Js=null,hd=null;function fd(){hd=Js=Yl=null}function pd(n){var i=Ql.current;Ze(Ql),n._currentValue=i}function md(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function Zs(n,i){Yl=n,hd=Js=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Zt=!0),n.firstContext=null)}function wn(n){var i=n._currentValue;if(hd!==n)if(n={context:n,memoizedValue:i,next:null},Js===null){if(Yl===null)throw Error(t(308));Js=n,Yl.dependencies={lanes:0,firstContext:n}}else Js=Js.next=n;return i}var Hi=null;function gd(n){Hi===null?Hi=[n]:Hi.push(n)}function jp(n,i,a,c){var h=i.interleaved;return h===null?(a.next=a,gd(i)):(a.next=h.next,h.next=a),i.interleaved=a,Tr(n,c)}function Tr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ei=!1;function yd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ir(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function ti(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ue&2)!==0){var h=c.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),c.pending=i,Tr(n,a)}return h=c.interleaved,h===null?(i.next=i,gd(c)):(i.next=h.next,h.next=i),c.interleaved=i,Tr(n,a)}function Xl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,qr(n,a)}}function Up(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?h=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?h=m=i:m=m.next=i}else h=m=i;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Jl(n,i,a,c){var h=n.updateQueue;ei=!1;var m=h.firstBaseUpdate,v=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var D=S,$=D.next;D.next=null,v===null?m=$:v.next=$,v=D;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,S=Q.lastBaseUpdate,S!==v&&(S===null?Q.firstBaseUpdate=$:S.next=$,Q.lastBaseUpdate=D))}if(m!==null){var X=h.baseState;v=0,Q=$=D=null,S=m;do{var G=S.lane,ae=S.eventTime;if((c&G)===G){Q!==null&&(Q=Q.next={eventTime:ae,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var de=n,he=S;switch(G=i,ae=a,he.tag){case 1:if(de=he.payload,typeof de=="function"){X=de.call(ae,X,G);break e}X=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=he.payload,G=typeof de=="function"?de.call(ae,X,G):de,G==null)break e;X=L({},X,G);break e;case 2:ei=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,G=h.effects,G===null?h.effects=[S]:G.push(S))}else ae={eventTime:ae,lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Q===null?($=Q=ae,D=X):Q=Q.next=ae,v|=G;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;G=S,S=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);if(Q===null&&(D=X),h.baseState=D,h.firstBaseUpdate=$,h.lastBaseUpdate=Q,i=h.shared.interleaved,i!==null){h=i;do v|=h.lane,h=h.next;while(h!==i)}else m===null&&(h.shared.lanes=0);Gi|=v,n.lanes=v,n.memoizedState=X}}function zp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(t(191,h));h.call(c)}}}var da={},Jn=Xr(da),ha=Xr(da),fa=Xr(da);function Wi(n){if(n===da)throw Error(t(174));return n}function _d(n,i){switch(Xe(fa,i),Xe(ha,n),Xe(Jn,da),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:mt(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=mt(i,n)}Ze(Jn),Xe(Jn,i)}function eo(){Ze(Jn),Ze(ha),Ze(fa)}function Bp(n){Wi(fa.current);var i=Wi(Jn.current),a=mt(i,n.type);i!==a&&(Xe(ha,n),Xe(Jn,a))}function vd(n){ha.current===n&&(Ze(Jn),Ze(ha))}var rt=Xr(0);function Zl(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var wd=[];function Ed(){for(var n=0;n<wd.length;n++)wd[n]._workInProgressVersionPrimary=null;wd.length=0}var eu=oe.ReactCurrentDispatcher,Td=oe.ReactCurrentBatchConfig,Ki=0,it=null,yt=null,Tt=null,tu=!1,pa=!1,ma=0,z0=0;function Lt(){throw Error(t(321))}function Id(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!On(n[a],i[a]))return!1;return!0}function xd(n,i,a,c,h,m){if(Ki=m,it=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,eu.current=n===null||n.memoizedState===null?H0:W0,n=a(c,h),pa){m=0;do{if(pa=!1,ma=0,25<=m)throw Error(t(301));m+=1,Tt=yt=null,i.updateQueue=null,eu.current=K0,n=a(c,h)}while(pa)}if(eu.current=iu,i=yt!==null&&yt.next!==null,Ki=0,Tt=yt=it=null,tu=!1,i)throw Error(t(300));return n}function Sd(){var n=ma!==0;return ma=0,n}function Zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?it.memoizedState=Tt=n:Tt=Tt.next=n,Tt}function En(){if(yt===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=yt.next;var i=Tt===null?it.memoizedState:Tt.next;if(i!==null)Tt=i,yt=n;else{if(n===null)throw Error(t(310));yt=n,n={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Tt===null?it.memoizedState=Tt=n:Tt=Tt.next=n}return Tt}function ga(n,i){return typeof i=="function"?i(n):i}function kd(n){var i=En(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=yt,h=c.baseQueue,m=a.pending;if(m!==null){if(h!==null){var v=h.next;h.next=m.next,m.next=v}c.baseQueue=h=m,a.pending=null}if(h!==null){m=h.next,c=c.baseState;var S=v=null,D=null,$=m;do{var Q=$.lane;if((Ki&Q)===Q)D!==null&&(D=D.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var X={lane:Q,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};D===null?(S=D=X,v=c):D=D.next=X,it.lanes|=Q,Gi|=Q}$=$.next}while($!==null&&$!==m);D===null?v=c:D.next=S,On(c,i.memoizedState)||(Zt=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=D,a.lastRenderedState=c}if(n=a.interleaved,n!==null){h=n;do m=h.lane,it.lanes|=m,Gi|=m,h=h.next;while(h!==n)}else h===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Ad(n){var i=En(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,h=a.pending,m=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do m=n(m,v.action),v=v.next;while(v!==h);On(m,i.memoizedState)||(Zt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,c]}function $p(){}function qp(n,i){var a=it,c=En(),h=i(),m=!On(c.memoizedState,h);if(m&&(c.memoizedState=h,Zt=!0),c=c.queue,Pd(Kp.bind(null,a,c,n),[n]),c.getSnapshot!==i||m||Tt!==null&&Tt.memoizedState.tag&1){if(a.flags|=2048,ya(9,Wp.bind(null,a,c,h,i),void 0,null),It===null)throw Error(t(349));(Ki&30)!==0||Hp(a,i,h)}return h}function Hp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Wp(n,i,a,c){i.value=a,i.getSnapshot=c,Gp(i)&&Qp(n)}function Kp(n,i,a){return a(function(){Gp(i)&&Qp(n)})}function Gp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!On(n,a)}catch{return!0}}function Qp(n){var i=Tr(n,1);i!==null&&Un(i,n,1,-1)}function Yp(n){var i=Zn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:n},i.queue=n,n=n.dispatch=q0.bind(null,it,n),[i.memoizedState,n]}function ya(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Xp(){return En().memoizedState}function nu(n,i,a,c){var h=Zn();it.flags|=n,h.memoizedState=ya(1|i,a,void 0,c===void 0?null:c)}function ru(n,i,a,c){var h=En();c=c===void 0?null:c;var m=void 0;if(yt!==null){var v=yt.memoizedState;if(m=v.destroy,c!==null&&Id(c,v.deps)){h.memoizedState=ya(i,a,m,c);return}}it.flags|=n,h.memoizedState=ya(1|i,a,m,c)}function Jp(n,i){return nu(8390656,8,n,i)}function Pd(n,i){return ru(2048,8,n,i)}function Zp(n,i){return ru(4,2,n,i)}function em(n,i){return ru(4,4,n,i)}function tm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function nm(n,i,a){return a=a!=null?a.concat([n]):null,ru(4,4,tm.bind(null,i,n),a)}function Cd(){}function rm(n,i){var a=En();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Id(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function im(n,i){var a=En();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Id(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function sm(n,i,a){return(Ki&21)===0?(n.baseState&&(n.baseState=!1,Zt=!0),n.memoizedState=a):(On(a,i)||(a=Li(),it.lanes|=a,Gi|=a,n.baseState=!0),i)}function B0(n,i){var a=Ve;Ve=a!==0&&4>a?a:4,n(!0);var c=Td.transition;Td.transition={};try{n(!1),i()}finally{Ve=a,Td.transition=c}}function om(){return En().memoizedState}function $0(n,i,a){var c=si(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},am(n))lm(i,a);else if(a=jp(n,i,a,c),a!==null){var h=Wt();Un(a,n,c,h),um(a,i,c)}}function q0(n,i,a){var c=si(n),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(am(n))lm(i,h);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,S=m(v,a);if(h.hasEagerState=!0,h.eagerState=S,On(S,v)){var D=i.interleaved;D===null?(h.next=h,gd(i)):(h.next=D.next,D.next=h),i.interleaved=h;return}}catch{}a=jp(n,i,h,c),a!==null&&(h=Wt(),Un(a,n,c,h),um(a,i,c))}}function am(n){var i=n.alternate;return n===it||i!==null&&i===it}function lm(n,i){pa=tu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function um(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,qr(n,a)}}var iu={readContext:wn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},H0={readContext:wn,useCallback:function(n,i){return Zn().memoizedState=[n,i===void 0?null:i],n},useContext:wn,useEffect:Jp,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,nu(4194308,4,tm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return nu(4194308,4,n,i)},useInsertionEffect:function(n,i){return nu(4,2,n,i)},useMemo:function(n,i){var a=Zn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Zn();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=$0.bind(null,it,n),[c.memoizedState,n]},useRef:function(n){var i=Zn();return n={current:n},i.memoizedState=n},useState:Yp,useDebugValue:Cd,useDeferredValue:function(n){return Zn().memoizedState=n},useTransition:function(){var n=Yp(!1),i=n[0];return n=B0.bind(null,n[1]),Zn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=it,h=Zn();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),It===null)throw Error(t(349));(Ki&30)!==0||Hp(c,i,a)}h.memoizedState=a;var m={value:a,getSnapshot:i};return h.queue=m,Jp(Kp.bind(null,c,m,n),[n]),c.flags|=2048,ya(9,Wp.bind(null,c,m,a,i),void 0,null),a},useId:function(){var n=Zn(),i=It.identifierPrefix;if(nt){var a=Er,c=wr;a=(c&~(1<<32-$t(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=ma++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=z0++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},W0={readContext:wn,useCallback:rm,useContext:wn,useEffect:Pd,useImperativeHandle:nm,useInsertionEffect:Zp,useLayoutEffect:em,useMemo:im,useReducer:kd,useRef:Xp,useState:function(){return kd(ga)},useDebugValue:Cd,useDeferredValue:function(n){var i=En();return sm(i,yt.memoizedState,n)},useTransition:function(){var n=kd(ga)[0],i=En().memoizedState;return[n,i]},useMutableSource:$p,useSyncExternalStore:qp,useId:om,unstable_isNewReconciler:!1},K0={readContext:wn,useCallback:rm,useContext:wn,useEffect:Pd,useImperativeHandle:nm,useInsertionEffect:Zp,useLayoutEffect:em,useMemo:im,useReducer:Ad,useRef:Xp,useState:function(){return Ad(ga)},useDebugValue:Cd,useDeferredValue:function(n){var i=En();return yt===null?i.memoizedState=n:sm(i,yt.memoizedState,n)},useTransition:function(){var n=Ad(ga)[0],i=En().memoizedState;return[n,i]},useMutableSource:$p,useSyncExternalStore:qp,useId:om,unstable_isNewReconciler:!1};function Mn(n,i){if(n&&n.defaultProps){i=L({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Rd(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:L({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var su={isMounted:function(n){return(n=n._reactInternals)?Pn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Wt(),h=si(n),m=Ir(c,h);m.payload=i,a!=null&&(m.callback=a),i=ti(n,m,h),i!==null&&(Un(i,n,h,c),Xl(i,n,h))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Wt(),h=si(n),m=Ir(c,h);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=ti(n,m,h),i!==null&&(Un(i,n,h,c),Xl(i,n,h))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Wt(),c=si(n),h=Ir(a,c);h.tag=2,i!=null&&(h.callback=i),i=ti(n,h,c),i!==null&&(Un(i,n,c,a),Xl(i,n,c))}};function cm(n,i,a,c,h,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,v):i.prototype&&i.prototype.isPureReactComponent?!ra(a,c)||!ra(h,m):!0}function dm(n,i,a){var c=!1,h=Jr,m=i.contextType;return typeof m=="object"&&m!==null?m=wn(m):(h=Jt(i)?Bi:Ot.current,c=i.contextTypes,m=(c=c!=null)?Ks(n,h):Jr),i=new i(a,m),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=su,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=m),i}function hm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&su.enqueueReplaceState(i,i.state,null)}function Nd(n,i,a,c){var h=n.stateNode;h.props=a,h.state=n.memoizedState,h.refs={},yd(n);var m=i.contextType;typeof m=="object"&&m!==null?h.context=wn(m):(m=Jt(i)?Bi:Ot.current,h.context=Ks(n,m)),h.state=n.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(Rd(n,i,m,a),h.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(i=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),i!==h.state&&su.enqueueReplaceState(h,h.state,null),Jl(n,a,h,c),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function to(n,i){try{var a="",c=i;do a+=pe(c),c=c.return;while(c);var h=a}catch(m){h=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:i,stack:h,digest:null}}function bd(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Dd(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var G0=typeof WeakMap=="function"?WeakMap:Map;function fm(n,i,a){a=Ir(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){hu||(hu=!0,Gd=c),Dd(n,i)},a}function pm(n,i,a){a=Ir(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var h=i.value;a.payload=function(){return c(h)},a.callback=function(){Dd(n,i)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Dd(n,i),typeof c!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function mm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new G0;var h=new Set;c.set(i,h)}else h=c.get(i),h===void 0&&(h=new Set,c.set(i,h));h.has(a)||(h.add(a),n=lw.bind(null,n,i,a),i.then(n,n))}function gm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function ym(n,i,a,c,h){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Ir(-1,1),i.tag=2,ti(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var Q0=oe.ReactCurrentOwner,Zt=!1;function Ht(n,i,a,c){i.child=n===null?Mp(i,null,a,c):Xs(i,n.child,a,c)}function _m(n,i,a,c,h){a=a.render;var m=i.ref;return Zs(i,h),c=xd(n,i,a,c,m,h),a=Sd(),n!==null&&!Zt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~h,xr(n,i,h)):(nt&&a&&ad(i),i.flags|=1,Ht(n,i,c,h),i.child)}function vm(n,i,a,c,h){if(n===null){var m=a.type;return typeof m=="function"&&!th(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,wm(n,i,m,c,h)):(n=_u(a.type,null,c,i,i.mode,h),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,(n.lanes&h)===0){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:ra,a(v,c)&&n.ref===i.ref)return xr(n,i,h)}return i.flags|=1,n=ai(m,c),n.ref=i.ref,n.return=i,i.child=n}function wm(n,i,a,c,h){if(n!==null){var m=n.memoizedProps;if(ra(m,c)&&n.ref===i.ref)if(Zt=!1,i.pendingProps=c=m,(n.lanes&h)!==0)(n.flags&131072)!==0&&(Zt=!0);else return i.lanes=n.lanes,xr(n,i,h)}return Vd(n,i,a,c,h)}function Em(n,i,a){var c=i.pendingProps,h=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(ro,dn),dn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Xe(ro,dn),dn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Xe(ro,dn),dn|=c}else m!==null?(c=m.baseLanes|a,i.memoizedState=null):c=a,Xe(ro,dn),dn|=c;return Ht(n,i,h,a),i.child}function Tm(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Vd(n,i,a,c,h){var m=Jt(a)?Bi:Ot.current;return m=Ks(i,m),Zs(i,h),a=xd(n,i,a,c,m,h),c=Sd(),n!==null&&!Zt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~h,xr(n,i,h)):(nt&&c&&ad(i),i.flags|=1,Ht(n,i,a,h),i.child)}function Im(n,i,a,c,h){if(Jt(a)){var m=!0;$l(i)}else m=!1;if(Zs(i,h),i.stateNode===null)au(n,i),dm(i,a,c),Nd(i,a,c,h),c=!0;else if(n===null){var v=i.stateNode,S=i.memoizedProps;v.props=S;var D=v.context,$=a.contextType;typeof $=="object"&&$!==null?$=wn($):($=Jt(a)?Bi:Ot.current,$=Ks(i,$));var Q=a.getDerivedStateFromProps,X=typeof Q=="function"||typeof v.getSnapshotBeforeUpdate=="function";X||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==c||D!==$)&&hm(i,v,c,$),ei=!1;var G=i.memoizedState;v.state=G,Jl(i,c,v,h),D=i.memoizedState,S!==c||G!==D||Xt.current||ei?(typeof Q=="function"&&(Rd(i,a,Q,c),D=i.memoizedState),(S=ei||cm(i,a,S,c,G,D,$))?(X||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=D),v.props=c,v.state=D,v.context=$,c=S):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,Fp(n,i),S=i.memoizedProps,$=i.type===i.elementType?S:Mn(i.type,S),v.props=$,X=i.pendingProps,G=v.context,D=a.contextType,typeof D=="object"&&D!==null?D=wn(D):(D=Jt(a)?Bi:Ot.current,D=Ks(i,D));var ae=a.getDerivedStateFromProps;(Q=typeof ae=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==X||G!==D)&&hm(i,v,c,D),ei=!1,G=i.memoizedState,v.state=G,Jl(i,c,v,h);var de=i.memoizedState;S!==X||G!==de||Xt.current||ei?(typeof ae=="function"&&(Rd(i,a,ae,c),de=i.memoizedState),($=ei||cm(i,a,$,c,G,de,D)||!1)?(Q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,de,D),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,de,D)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=de),v.props=c,v.state=de,v.context=D,c=$):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),c=!1)}return Od(n,i,a,c,m,h)}function Od(n,i,a,c,h,m){Tm(n,i);var v=(i.flags&128)!==0;if(!c&&!v)return h&&Pp(i,a,!1),xr(n,i,m);c=i.stateNode,Q0.current=i;var S=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&v?(i.child=Xs(i,n.child,null,m),i.child=Xs(i,null,S,m)):Ht(n,i,S,m),i.memoizedState=c.state,h&&Pp(i,a,!0),i.child}function xm(n){var i=n.stateNode;i.pendingContext?kp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&kp(n,i.context,!1),_d(n,i.containerInfo)}function Sm(n,i,a,c,h){return Ys(),dd(h),i.flags|=256,Ht(n,i,a,c),i.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function Md(n){return{baseLanes:n,cachePool:null,transitions:null}}function km(n,i,a){var c=i.pendingProps,h=rt.current,m=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(h&2)!==0),S?(m=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),Xe(rt,h&1),n===null)return cd(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=c.children,n=c.fallback,m?(c=i.mode,m=i.child,v={mode:"hidden",children:v},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=v):m=vu(v,c,0,null),n=Ji(n,c,a,null),m.return=i,n.return=i,m.sibling=n,i.child=m,i.child.memoizedState=Md(a),i.memoizedState=Ld,n):jd(i,v));if(h=n.memoizedState,h!==null&&(S=h.dehydrated,S!==null))return Y0(n,i,v,c,S,h,a);if(m){m=c.fallback,v=i.mode,h=n.child,S=h.sibling;var D={mode:"hidden",children:c.children};return(v&1)===0&&i.child!==h?(c=i.child,c.childLanes=0,c.pendingProps=D,i.deletions=null):(c=ai(h,D),c.subtreeFlags=h.subtreeFlags&14680064),S!==null?m=ai(S,m):(m=Ji(m,v,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,v=n.child.memoizedState,v=v===null?Md(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},m.memoizedState=v,m.childLanes=n.childLanes&~a,i.memoizedState=Ld,c}return m=n.child,n=m.sibling,c=ai(m,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function jd(n,i){return i=vu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function ou(n,i,a,c){return c!==null&&dd(c),Xs(i,n.child,null,a),n=jd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Y0(n,i,a,c,h,m,v){if(a)return i.flags&256?(i.flags&=-257,c=bd(Error(t(422))),ou(n,i,v,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(m=c.fallback,h=i.mode,c=vu({mode:"visible",children:c.children},h,0,null),m=Ji(m,h,v,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,(i.mode&1)!==0&&Xs(i,n.child,null,v),i.child.memoizedState=Md(v),i.memoizedState=Ld,m);if((i.mode&1)===0)return ou(n,i,v,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var S=c.dgst;return c=S,m=Error(t(419)),c=bd(m,c,void 0),ou(n,i,v,c)}if(S=(v&n.childLanes)!==0,Zt||S){if(c=It,c!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|v))!==0?0:h,h!==0&&h!==m.retryLane&&(m.retryLane=h,Tr(n,h),Un(c,n,h,-1))}return eh(),c=bd(Error(t(421))),ou(n,i,v,c)}return h.data==="$?"?(i.flags|=128,i.child=n.child,i=uw.bind(null,n),h._reactRetry=i,null):(n=m.treeContext,cn=Yr(h.nextSibling),un=i,nt=!0,Ln=null,n!==null&&(_n[vn++]=wr,_n[vn++]=Er,_n[vn++]=$i,wr=n.id,Er=n.overflow,$i=i),i=jd(i,c.children),i.flags|=4096,i)}function Am(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),md(n.return,i,a)}function Fd(n,i,a,c,h){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=h)}function Pm(n,i,a){var c=i.pendingProps,h=c.revealOrder,m=c.tail;if(Ht(n,i,c.children,a),c=rt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Am(n,a,i);else if(n.tag===19)Am(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Xe(rt,c),(i.mode&1)===0)i.memoizedState=null;else switch(h){case"forwards":for(a=i.child,h=null;a!==null;)n=a.alternate,n!==null&&Zl(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Fd(i,!1,h,a,m);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(n=h.alternate,n!==null&&Zl(n)===null){i.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}Fd(i,!0,a,null,m);break;case"together":Fd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function au(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function xr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Gi|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=ai(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ai(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function X0(n,i,a){switch(i.tag){case 3:xm(i),Ys();break;case 5:Bp(i);break;case 1:Jt(i.type)&&$l(i);break;case 4:_d(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,h=i.memoizedProps.value;Xe(Ql,c._currentValue),c._currentValue=h;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Xe(rt,rt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?km(n,i,a):(Xe(rt,rt.current&1),n=xr(n,i,a),n!==null?n.sibling:null);Xe(rt,rt.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Pm(n,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Xe(rt,rt.current),c)break;return null;case 22:case 23:return i.lanes=0,Em(n,i,a)}return xr(n,i,a)}var Cm,Ud,Rm,Nm;Cm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Ud=function(){},Rm=function(n,i,a,c){var h=n.memoizedProps;if(h!==c){n=i.stateNode,Wi(Jn.current);var m=null;switch(a){case"input":h=Si(n,h),c=Si(n,c),m=[];break;case"select":h=L({},h,{value:void 0}),c=L({},c,{value:void 0}),m=[];break;case"textarea":h=bo(n,h),c=bo(n,c),m=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Ul)}jo(a,c);var v;a=null;for($ in h)if(!c.hasOwnProperty($)&&h.hasOwnProperty($)&&h[$]!=null)if($==="style"){var S=h[$];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?m||(m=[]):(m=m||[]).push($,null));for($ in c){var D=c[$];if(S=h?.[$],c.hasOwnProperty($)&&D!==S&&(D!=null||S!=null))if($==="style")if(S){for(v in S)!S.hasOwnProperty(v)||D&&D.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in D)D.hasOwnProperty(v)&&S[v]!==D[v]&&(a||(a={}),a[v]=D[v])}else a||(m||(m=[]),m.push($,a)),a=D;else $==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,S=S?S.__html:void 0,D!=null&&S!==D&&(m=m||[]).push($,D)):$==="children"?typeof D!="string"&&typeof D!="number"||(m=m||[]).push($,""+D):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(D!=null&&$==="onScroll"&&Je("scroll",n),m||S===D||(m=[])):(m=m||[]).push($,D))}a&&(m=m||[]).push("style",a);var $=m;(i.updateQueue=$)&&(i.flags|=4)}},Nm=function(n,i,a,c){a!==c&&(i.flags|=4)};function _a(n,i){if(!nt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Mt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function J0(n,i,a){var c=i.pendingProps;switch(ld(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(i),null;case 1:return Jt(i.type)&&Bl(),Mt(i),null;case 3:return c=i.stateNode,eo(),Ze(Xt),Ze(Ot),Ed(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Kl(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ln!==null&&(Xd(Ln),Ln=null))),Ud(n,i),Mt(i),null;case 5:vd(i);var h=Wi(fa.current);if(a=i.type,n!==null&&i.stateNode!=null)Rm(n,i,a,c,h),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Mt(i),null}if(n=Wi(Jn.current),Kl(i)){c=i.stateNode,a=i.type;var m=i.memoizedProps;switch(c[Xn]=i,c[la]=m,n=(i.mode&1)!==0,a){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(h=0;h<sa.length;h++)Je(sa[h],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":ms(c,m),Je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Je("invalid",c);break;case"textarea":ys(c,m),Je("invalid",c)}jo(a,m),h=null;for(var v in m)if(m.hasOwnProperty(v)){var S=m[v];v==="children"?typeof S=="string"?c.textContent!==S&&(m.suppressHydrationWarning!==!0&&Fl(c.textContent,S,n),h=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(m.suppressHydrationWarning!==!0&&Fl(c.textContent,S,n),h=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Je("scroll",c)}switch(a){case"input":lr(c),dl(c,m,!0);break;case"textarea":lr(c),Do(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=Ul)}c=h,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=pt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[Xn]=i,n[la]=c,Cm(n,i,!1,!1),i.stateNode=n;e:{switch(v=Fo(a,c),a){case"dialog":Je("cancel",n),Je("close",n),h=c;break;case"iframe":case"object":case"embed":Je("load",n),h=c;break;case"video":case"audio":for(h=0;h<sa.length;h++)Je(sa[h],n);h=c;break;case"source":Je("error",n),h=c;break;case"img":case"image":case"link":Je("error",n),Je("load",n),h=c;break;case"details":Je("toggle",n),h=c;break;case"input":ms(n,c),h=Si(n,c),Je("invalid",n);break;case"option":h=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},h=L({},c,{value:void 0}),Je("invalid",n);break;case"textarea":ys(n,c),h=bo(n,c),Je("invalid",n);break;default:h=c}jo(a,h),S=h;for(m in S)if(S.hasOwnProperty(m)){var D=S[m];m==="style"?Lo(n,D):m==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Vo(n,D)):m==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&Fr(n,D):typeof D=="number"&&Fr(n,""+D):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?D!=null&&m==="onScroll"&&Je("scroll",n):D!=null&&ee(n,m,D,v))}switch(a){case"input":lr(n),dl(n,c,!1);break;case"textarea":lr(n),Do(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?cr(n,!!c.multiple,m,!1):c.defaultValue!=null&&cr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=Ul)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Mt(i),null;case 6:if(n&&i.stateNode!=null)Nm(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Wi(fa.current),Wi(Jn.current),Kl(i)){if(c=i.stateNode,a=i.memoizedProps,c[Xn]=i,(m=c.nodeValue!==a)&&(n=un,n!==null))switch(n.tag){case 3:Fl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Fl(c.nodeValue,a,(n.mode&1)!==0)}m&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Xn]=i,i.stateNode=c}return Mt(i),null;case 13:if(Ze(rt),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&cn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Vp(),Ys(),i.flags|=98560,m=!1;else if(m=Kl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Xn]=i}else Ys(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Mt(i),m=!1}else Ln!==null&&(Xd(Ln),Ln=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(rt.current&1)!==0?_t===0&&(_t=3):eh())),i.updateQueue!==null&&(i.flags|=4),Mt(i),null);case 4:return eo(),Ud(n,i),n===null&&oa(i.stateNode.containerInfo),Mt(i),null;case 10:return pd(i.type._context),Mt(i),null;case 17:return Jt(i.type)&&Bl(),Mt(i),null;case 19:if(Ze(rt),m=i.memoizedState,m===null)return Mt(i),null;if(c=(i.flags&128)!==0,v=m.rendering,v===null)if(c)_a(m,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=Zl(n),v!==null){for(i.flags|=128,_a(m,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)m=a,n=c,m.flags&=14680066,v=m.alternate,v===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=v.childLanes,m.lanes=v.lanes,m.child=v.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=v.memoizedProps,m.memoizedState=v.memoizedState,m.updateQueue=v.updateQueue,m.type=v.type,n=v.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Xe(rt,rt.current&1|2),i.child}n=n.sibling}m.tail!==null&&Ye()>io&&(i.flags|=128,c=!0,_a(m,!1),i.lanes=4194304)}else{if(!c)if(n=Zl(v),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),_a(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!nt)return Mt(i),null}else 2*Ye()-m.renderingStartTime>io&&a!==1073741824&&(i.flags|=128,c=!0,_a(m,!1),i.lanes=4194304);m.isBackwards?(v.sibling=i.child,i.child=v):(a=m.last,a!==null?a.sibling=v:i.child=v,m.last=v)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Ye(),i.sibling=null,a=rt.current,Xe(rt,c?a&1|2:a&1),i):(Mt(i),null);case 22:case 23:return Zd(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(dn&1073741824)!==0&&(Mt(i),i.subtreeFlags&6&&(i.flags|=8192)):Mt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Z0(n,i){switch(ld(i),i.tag){case 1:return Jt(i.type)&&Bl(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return eo(),Ze(Xt),Ze(Ot),Ed(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return vd(i),null;case 13:if(Ze(rt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ys()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ze(rt),null;case 4:return eo(),null;case 10:return pd(i.type._context),null;case 22:case 23:return Zd(),null;case 24:return null;default:return null}}var lu=!1,jt=!1,ew=typeof WeakSet=="function"?WeakSet:Set,ue=null;function no(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ot(n,i,c)}else a.current=null}function zd(n,i,a){try{a()}catch(c){ot(n,i,c)}}var bm=!1;function tw(n,i){if(Zc=Kr,n=cp(),Hc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,S=-1,D=-1,$=0,Q=0,X=n,G=null;t:for(;;){for(var ae;X!==a||h!==0&&X.nodeType!==3||(S=v+h),X!==m||c!==0&&X.nodeType!==3||(D=v+c),X.nodeType===3&&(v+=X.nodeValue.length),(ae=X.firstChild)!==null;)G=X,X=ae;for(;;){if(X===n)break t;if(G===a&&++$===h&&(S=v),G===m&&++Q===c&&(D=v),(ae=X.nextSibling)!==null)break;X=G,G=X.parentNode}X=ae}a=S===-1||D===-1?null:{start:S,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(ed={focusedElem:n,selectionRange:a},Kr=!1,ue=i;ue!==null;)if(i=ue,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ue=n;else for(;ue!==null;){i=ue;try{var de=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var he=de.memoizedProps,lt=de.memoizedState,j=i.stateNode,O=j.getSnapshotBeforeUpdate(i.elementType===i.type?he:Mn(i.type,he),lt);j.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var U=i.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){ot(i,i.return,te)}if(n=i.sibling,n!==null){n.return=i.return,ue=n;break}ue=i.return}return de=bm,bm=!1,de}function va(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&n)===n){var m=h.destroy;h.destroy=void 0,m!==void 0&&zd(i,a,m)}h=h.next}while(h!==c)}}function uu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Bd(n){var i=n.ref;if(i!==null){var a=n.stateNode;n.tag,n=a,typeof i=="function"?i(n):i.current=n}}function Dm(n){var i=n.alternate;i!==null&&(n.alternate=null,Dm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Xn],delete i[la],delete i[id],delete i[M0],delete i[j0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Vm(n){return n.tag===5||n.tag===3||n.tag===4}function Om(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Vm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $d(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ul));else if(c!==4&&(n=n.child,n!==null))for($d(n,i,a),n=n.sibling;n!==null;)$d(n,i,a),n=n.sibling}function qd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(qd(n,i,a),n=n.sibling;n!==null;)qd(n,i,a),n=n.sibling}var Ct=null,jn=!1;function ni(n,i,a){for(a=a.child;a!==null;)Lm(n,i,a),a=a.sibling}function Lm(n,i,a){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Vi,a)}catch{}switch(a.tag){case 5:jt||no(a,i);case 6:var c=Ct,h=jn;Ct=null,ni(n,i,a),Ct=c,jn=h,Ct!==null&&(jn?(n=Ct,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ct.removeChild(a.stateNode));break;case 18:Ct!==null&&(jn?(n=Ct,a=a.stateNode,n.nodeType===8?rd(n.parentNode,a):n.nodeType===1&&rd(n,a),Dn(n)):rd(Ct,a.stateNode));break;case 4:c=Ct,h=jn,Ct=a.stateNode.containerInfo,jn=!0,ni(n,i,a),Ct=c,jn=h;break;case 0:case 11:case 14:case 15:if(!jt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var m=h,v=m.destroy;m=m.tag,v!==void 0&&((m&2)!==0||(m&4)!==0)&&zd(a,i,v),h=h.next}while(h!==c)}ni(n,i,a);break;case 1:if(!jt&&(no(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){ot(a,i,S)}ni(n,i,a);break;case 21:ni(n,i,a);break;case 22:a.mode&1?(jt=(c=jt)||a.memoizedState!==null,ni(n,i,a),jt=c):ni(n,i,a);break;default:ni(n,i,a)}}function Mm(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new ew),i.forEach(function(c){var h=cw.bind(null,n,c);a.has(c)||(a.add(c),c.then(h,h))})}}function Fn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var m=n,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 5:Ct=S.stateNode,jn=!1;break e;case 3:Ct=S.stateNode.containerInfo,jn=!0;break e;case 4:Ct=S.stateNode.containerInfo,jn=!0;break e}S=S.return}if(Ct===null)throw Error(t(160));Lm(m,v,h),Ct=null,jn=!1;var D=h.alternate;D!==null&&(D.return=null),h.return=null}catch($){ot(h,i,$)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)jm(i,n),i=i.sibling}function jm(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Fn(i,n),er(n),c&4){try{va(3,n,n.return),uu(3,n)}catch(he){ot(n,n.return,he)}try{va(5,n,n.return)}catch(he){ot(n,n.return,he)}}break;case 1:Fn(i,n),er(n),c&512&&a!==null&&no(a,a.return);break;case 5:if(Fn(i,n),er(n),c&512&&a!==null&&no(a,a.return),n.flags&32){var h=n.stateNode;try{Fr(h,"")}catch(he){ot(n,n.return,he)}}if(c&4&&(h=n.stateNode,h!=null)){var m=n.memoizedProps,v=a!==null?a.memoizedProps:m,S=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{S==="input"&&m.type==="radio"&&m.name!=null&&Ro(h,m),Fo(S,v);var $=Fo(S,m);for(v=0;v<D.length;v+=2){var Q=D[v],X=D[v+1];Q==="style"?Lo(h,X):Q==="dangerouslySetInnerHTML"?Vo(h,X):Q==="children"?Fr(h,X):ee(h,Q,X,$)}switch(S){case"input":No(h,m);break;case"textarea":_s(h,m);break;case"select":var G=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!m.multiple;var ae=m.value;ae!=null?cr(h,!!m.multiple,ae,!1):G!==!!m.multiple&&(m.defaultValue!=null?cr(h,!!m.multiple,m.defaultValue,!0):cr(h,!!m.multiple,m.multiple?[]:"",!1))}h[la]=m}catch(he){ot(n,n.return,he)}}break;case 6:if(Fn(i,n),er(n),c&4){if(n.stateNode===null)throw Error(t(162));h=n.stateNode,m=n.memoizedProps;try{h.nodeValue=m}catch(he){ot(n,n.return,he)}}break;case 3:if(Fn(i,n),er(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Dn(i.containerInfo)}catch(he){ot(n,n.return,he)}break;case 4:Fn(i,n),er(n);break;case 13:Fn(i,n),er(n),h=n.child,h.flags&8192&&(m=h.memoizedState!==null,h.stateNode.isHidden=m,!m||h.alternate!==null&&h.alternate.memoizedState!==null||(Kd=Ye())),c&4&&Mm(n);break;case 22:if(Q=a!==null&&a.memoizedState!==null,n.mode&1?(jt=($=jt)||Q,Fn(i,n),jt=$):Fn(i,n),er(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!Q&&(n.mode&1)!==0)for(ue=n,Q=n.child;Q!==null;){for(X=ue=Q;ue!==null;){switch(G=ue,ae=G.child,G.tag){case 0:case 11:case 14:case 15:va(4,G,G.return);break;case 1:no(G,G.return);var de=G.stateNode;if(typeof de.componentWillUnmount=="function"){c=G,a=G.return;try{i=c,de.props=i.memoizedProps,de.state=i.memoizedState,de.componentWillUnmount()}catch(he){ot(c,a,he)}}break;case 5:no(G,G.return);break;case 22:if(G.memoizedState!==null){zm(X);continue}}ae!==null?(ae.return=G,ue=ae):zm(X)}Q=Q.sibling}e:for(Q=null,X=n;;){if(X.tag===5){if(Q===null){Q=X;try{h=X.stateNode,$?(m=h.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(S=X.stateNode,D=X.memoizedProps.style,v=D!=null&&D.hasOwnProperty("display")?D.display:null,S.style.display=Oo("display",v))}catch(he){ot(n,n.return,he)}}}else if(X.tag===6){if(Q===null)try{X.stateNode.nodeValue=$?"":X.memoizedProps}catch(he){ot(n,n.return,he)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break e;for(;X.sibling===null;){if(X.return===null||X.return===n)break e;Q===X&&(Q=null),X=X.return}Q===X&&(Q=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Fn(i,n),er(n),c&4&&Mm(n);break;case 21:break;default:Fn(i,n),er(n)}}function er(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Vm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(Fr(h,""),c.flags&=-33);var m=Om(n);qd(n,m,h);break;case 3:case 4:var v=c.stateNode.containerInfo,S=Om(n);$d(n,S,v);break;default:throw Error(t(161))}}catch(D){ot(n,n.return,D)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function nw(n,i,a){ue=n,Fm(n)}function Fm(n,i,a){for(var c=(n.mode&1)!==0;ue!==null;){var h=ue,m=h.child;if(h.tag===22&&c){var v=h.memoizedState!==null||lu;if(!v){var S=h.alternate,D=S!==null&&S.memoizedState!==null||jt;S=lu;var $=jt;if(lu=v,(jt=D)&&!$)for(ue=h;ue!==null;)v=ue,D=v.child,v.tag===22&&v.memoizedState!==null?Bm(h):D!==null?(D.return=v,ue=D):Bm(h);for(;m!==null;)ue=m,Fm(m),m=m.sibling;ue=h,lu=S,jt=$}Um(n)}else(h.subtreeFlags&8772)!==0&&m!==null?(m.return=h,ue=m):Um(n)}}function Um(n){for(;ue!==null;){var i=ue;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:jt||uu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!jt)if(a===null)c.componentDidMount();else{var h=i.elementType===i.type?a.memoizedProps:Mn(i.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&zp(i,m,c);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}zp(i,v,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var $=i.alternate;if($!==null){var Q=$.memoizedState;if(Q!==null){var X=Q.dehydrated;X!==null&&Dn(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jt||i.flags&512&&Bd(i)}catch(G){ot(i,i.return,G)}}if(i===n){ue=null;break}if(a=i.sibling,a!==null){a.return=i.return,ue=a;break}ue=i.return}}function zm(n){for(;ue!==null;){var i=ue;if(i===n){ue=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ue=a;break}ue=i.return}}function Bm(n){for(;ue!==null;){var i=ue;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{uu(4,i)}catch(D){ot(i,a,D)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var h=i.return;try{c.componentDidMount()}catch(D){ot(i,h,D)}}var m=i.return;try{Bd(i)}catch(D){ot(i,m,D)}break;case 5:var v=i.return;try{Bd(i)}catch(D){ot(i,v,D)}}}catch(D){ot(i,i.return,D)}if(i===n){ue=null;break}var S=i.sibling;if(S!==null){S.return=i.return,ue=S;break}ue=i.return}}var rw=Math.ceil,cu=oe.ReactCurrentDispatcher,Hd=oe.ReactCurrentOwner,Tn=oe.ReactCurrentBatchConfig,Ue=0,It=null,dt=null,Rt=0,dn=0,ro=Xr(0),_t=0,wa=null,Gi=0,du=0,Wd=0,Ea=null,en=null,Kd=0,io=1/0,Sr=null,hu=!1,Gd=null,ri=null,fu=!1,ii=null,pu=0,Ta=0,Qd=null,mu=-1,gu=0;function Wt(){return(Ue&6)!==0?Ye():mu!==-1?mu:mu=Ye()}function si(n){return(n.mode&1)===0?1:(Ue&2)!==0&&Rt!==0?Rt&-Rt:U0.transition!==null?(gu===0&&(gu=Li()),gu):(n=Ve,n!==0||(n=window.event,n=n===void 0?16:Yo(n.type)),n)}function Un(n,i,a,c){if(50<Ta)throw Ta=0,Qd=null,Error(t(185));$r(n,a,c),((Ue&2)===0||n!==It)&&(n===It&&((Ue&2)===0&&(du|=a),_t===4&&oi(n,Rt)),tn(n,c),a===1&&Ue===0&&(i.mode&1)===0&&(io=Ye()+500,ql&&Zr()))}function tn(n,i){var a=n.callbackNode;fr(n,i);var c=Oi(n,n===It?Rt:0);if(c===0)a!==null&&Ho(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Ho(a),i===1)n.tag===0?F0(qm.bind(null,n)):Cp(qm.bind(null,n)),O0(function(){(Ue&6)===0&&Zr()}),a=null;else{switch(Hr(c)){case 1:a=Di;break;case 4:a=Ur;break;case 16:a=mn;break;case 536870912:a=gl;break;default:a=mn}a=Jm(a,$m.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function $m(n,i){if(mu=-1,gu=0,(Ue&6)!==0)throw Error(t(327));var a=n.callbackNode;if(so()&&n.callbackNode!==a)return null;var c=Oi(n,n===It?Rt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=yu(n,c);else{i=c;var h=Ue;Ue|=2;var m=Wm();(It!==n||Rt!==i)&&(Sr=null,io=Ye()+500,Yi(n,i));do try{ow();break}catch(S){Hm(n,S)}while(!0);fd(),cu.current=m,Ue=h,dt!==null?i=0:(It=null,Rt=0,i=_t)}if(i!==0){if(i===2&&(h=on(n),h!==0&&(c=h,i=Yd(n,h))),i===1)throw a=wa,Yi(n,0),oi(n,c),tn(n,Ye()),a;if(i===6)oi(n,c);else{if(h=n.current.alternate,(c&30)===0&&!iw(h)&&(i=yu(n,c),i===2&&(m=on(n),m!==0&&(c=m,i=Yd(n,m))),i===1))throw a=wa,Yi(n,0),oi(n,c),tn(n,Ye()),a;switch(n.finishedWork=h,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:Xi(n,en,Sr);break;case 3:if(oi(n,c),(c&130023424)===c&&(i=Kd+500-Ye(),10<i)){if(Oi(n,0)!==0)break;if(h=n.suspendedLanes,(h&c)!==c){Wt(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=nd(Xi.bind(null,n,en,Sr),i);break}Xi(n,en,Sr);break;case 4:if(oi(n,c),(c&4194240)===c)break;for(i=n.eventTimes,h=-1;0<c;){var v=31-$t(c);m=1<<v,v=i[v],v>h&&(h=v),c&=~m}if(c=h,c=Ye()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*rw(c/1960))-c,10<c){n.timeoutHandle=nd(Xi.bind(null,n,en,Sr),c);break}Xi(n,en,Sr);break;case 5:Xi(n,en,Sr);break;default:throw Error(t(329))}}}return tn(n,Ye()),n.callbackNode===a?$m.bind(null,n):null}function Yd(n,i){var a=Ea;return n.current.memoizedState.isDehydrated&&(Yi(n,i).flags|=256),n=yu(n,i),n!==2&&(i=en,en=a,i!==null&&Xd(i)),n}function Xd(n){en===null?en=n:en.push.apply(en,n)}function iw(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],m=h.getSnapshot;h=h.value;try{if(!On(m(),h))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function oi(n,i){for(i&=~Wd,i&=~du,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-$t(i),c=1<<a;n[a]=-1,i&=~c}}function qm(n){if((Ue&6)!==0)throw Error(t(327));so();var i=Oi(n,0);if((i&1)===0)return tn(n,Ye()),null;var a=yu(n,i);if(n.tag!==0&&a===2){var c=on(n);c!==0&&(i=c,a=Yd(n,c))}if(a===1)throw a=wa,Yi(n,0),oi(n,i),tn(n,Ye()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Xi(n,en,Sr),tn(n,Ye()),null}function Jd(n,i){var a=Ue;Ue|=1;try{return n(i)}finally{Ue=a,Ue===0&&(io=Ye()+500,ql&&Zr())}}function Qi(n){ii!==null&&ii.tag===0&&(Ue&6)===0&&so();var i=Ue;Ue|=1;var a=Tn.transition,c=Ve;try{if(Tn.transition=null,Ve=1,n)return n()}finally{Ve=c,Tn.transition=a,Ue=i,(Ue&6)===0&&Zr()}}function Zd(){dn=ro.current,Ze(ro)}function Yi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,V0(a)),dt!==null)for(a=dt.return;a!==null;){var c=a;switch(ld(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Bl();break;case 3:eo(),Ze(Xt),Ze(Ot),Ed();break;case 5:vd(c);break;case 4:eo();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:pd(c.type._context);break;case 22:case 23:Zd()}a=a.return}if(It=n,dt=n=ai(n.current,null),Rt=dn=i,_t=0,wa=null,Wd=du=Gi=0,en=Ea=null,Hi!==null){for(i=0;i<Hi.length;i++)if(a=Hi[i],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,m=a.pending;if(m!==null){var v=m.next;m.next=h,c.next=v}a.pending=c}Hi=null}return n}function Hm(n,i){do{var a=dt;try{if(fd(),eu.current=iu,tu){for(var c=it.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}tu=!1}if(Ki=0,Tt=yt=it=null,pa=!1,ma=0,Hd.current=null,a===null||a.return===null){_t=1,wa=i,dt=null;break}e:{var m=n,v=a.return,S=a,D=i;if(i=Rt,S.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=D,Q=S,X=Q.tag;if((Q.mode&1)===0&&(X===0||X===11||X===15)){var G=Q.alternate;G?(Q.updateQueue=G.updateQueue,Q.memoizedState=G.memoizedState,Q.lanes=G.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ae=gm(v);if(ae!==null){ae.flags&=-257,ym(ae,v,S,m,i),ae.mode&1&&mm(m,$,i),i=ae,D=$;var de=i.updateQueue;if(de===null){var he=new Set;he.add(D),i.updateQueue=he}else de.add(D);break e}else{if((i&1)===0){mm(m,$,i),eh();break e}D=Error(t(426))}}else if(nt&&S.mode&1){var lt=gm(v);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),ym(lt,v,S,m,i),dd(to(D,S));break e}}m=D=to(D,S),_t!==4&&(_t=2),Ea===null?Ea=[m]:Ea.push(m),m=v;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var j=fm(m,D,i);Up(m,j);break e;case 1:S=D;var O=m.type,U=m.stateNode;if((m.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(ri===null||!ri.has(U)))){m.flags|=65536,i&=-i,m.lanes|=i;var te=pm(m,S,i);Up(m,te);break e}}m=m.return}while(m!==null)}Gm(a)}catch(me){i=me,dt===a&&a!==null&&(dt=a=a.return);continue}break}while(!0)}function Wm(){var n=cu.current;return cu.current=iu,n===null?iu:n}function eh(){(_t===0||_t===3||_t===2)&&(_t=4),It===null||(Gi&268435455)===0&&(du&268435455)===0||oi(It,Rt)}function yu(n,i){var a=Ue;Ue|=2;var c=Wm();(It!==n||Rt!==i)&&(Sr=null,Yi(n,i));do try{sw();break}catch(h){Hm(n,h)}while(!0);if(fd(),Ue=a,cu.current=c,dt!==null)throw Error(t(261));return It=null,Rt=0,_t}function sw(){for(;dt!==null;)Km(dt)}function ow(){for(;dt!==null&&!pl();)Km(dt)}function Km(n){var i=Xm(n.alternate,n,dn);n.memoizedProps=n.pendingProps,i===null?Gm(n):dt=i,Hd.current=null}function Gm(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=J0(a,i,dn),a!==null){dt=a;return}}else{if(a=Z0(a,i),a!==null){a.flags&=32767,dt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_t=6,dt=null;return}}if(i=i.sibling,i!==null){dt=i;return}dt=i=n}while(i!==null);_t===0&&(_t=5)}function Xi(n,i,a){var c=Ve,h=Tn.transition;try{Tn.transition=null,Ve=1,aw(n,i,a,c)}finally{Tn.transition=h,Ve=c}return null}function aw(n,i,a,c){do so();while(ii!==null);if((Ue&6)!==0)throw Error(t(327));a=n.finishedWork;var h=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(Ge(n,m),n===It&&(dt=It=null,Rt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||fu||(fu=!0,Jm(mn,function(){return so(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=Tn.transition,Tn.transition=null;var v=Ve;Ve=1;var S=Ue;Ue|=4,Hd.current=null,tw(n,a),jm(a,n),A0(ed),Kr=!!Zc,ed=Zc=null,n.current=a,nw(a),Mc(),Ue=S,Ve=v,Tn.transition=m}else n.current=a;if(fu&&(fu=!1,ii=n,pu=h),m=n.pendingLanes,m===0&&(ri=null),yl(a.stateNode),tn(n,Ye()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)h=i[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(hu)throw hu=!1,n=Gd,Gd=null,n;return(pu&1)!==0&&n.tag!==0&&so(),m=n.pendingLanes,(m&1)!==0?n===Qd?Ta++:(Ta=0,Qd=n):Ta=0,Zr(),null}function so(){if(ii!==null){var n=Hr(pu),i=Tn.transition,a=Ve;try{if(Tn.transition=null,Ve=16>n?16:n,ii===null)var c=!1;else{if(n=ii,ii=null,pu=0,(Ue&6)!==0)throw Error(t(331));var h=Ue;for(Ue|=4,ue=n.current;ue!==null;){var m=ue,v=m.child;if((ue.flags&16)!==0){var S=m.deletions;if(S!==null){for(var D=0;D<S.length;D++){var $=S[D];for(ue=$;ue!==null;){var Q=ue;switch(Q.tag){case 0:case 11:case 15:va(8,Q,m)}var X=Q.child;if(X!==null)X.return=Q,ue=X;else for(;ue!==null;){Q=ue;var G=Q.sibling,ae=Q.return;if(Dm(Q),Q===$){ue=null;break}if(G!==null){G.return=ae,ue=G;break}ue=ae}}}var de=m.alternate;if(de!==null){var he=de.child;if(he!==null){de.child=null;do{var lt=he.sibling;he.sibling=null,he=lt}while(he!==null)}}ue=m}}if((m.subtreeFlags&2064)!==0&&v!==null)v.return=m,ue=v;else e:for(;ue!==null;){if(m=ue,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:va(9,m,m.return)}var j=m.sibling;if(j!==null){j.return=m.return,ue=j;break e}ue=m.return}}var O=n.current;for(ue=O;ue!==null;){v=ue;var U=v.child;if((v.subtreeFlags&2064)!==0&&U!==null)U.return=v,ue=U;else e:for(v=O;ue!==null;){if(S=ue,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:uu(9,S)}}catch(me){ot(S,S.return,me)}if(S===v){ue=null;break e}var te=S.sibling;if(te!==null){te.return=S.return,ue=te;break e}ue=S.return}}if(Ue=h,Zr(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Vi,n)}catch{}c=!0}return c}finally{Ve=a,Tn.transition=i}}return!1}function Qm(n,i,a){i=to(a,i),i=fm(n,i,1),n=ti(n,i,1),i=Wt(),n!==null&&($r(n,1,i),tn(n,i))}function ot(n,i,a){if(n.tag===3)Qm(n,n,a);else for(;i!==null;){if(i.tag===3){Qm(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ri===null||!ri.has(c))){n=to(a,n),n=pm(i,n,1),i=ti(i,n,1),n=Wt(),i!==null&&($r(i,1,n),tn(i,n));break}}i=i.return}}function lw(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Wt(),n.pingedLanes|=n.suspendedLanes&a,It===n&&(Rt&a)===a&&(_t===4||_t===3&&(Rt&130023424)===Rt&&500>Ye()-Kd?Yi(n,0):Wd|=a),tn(n,i)}function Ym(n,i){i===0&&((n.mode&1)===0?i=1:(i=Ps,Ps<<=1,(Ps&130023424)===0&&(Ps=4194304)));var a=Wt();n=Tr(n,i),n!==null&&($r(n,i,a),tn(n,a))}function uw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Ym(n,a)}function cw(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Ym(n,a)}var Xm;Xm=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Xt.current)Zt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Zt=!1,X0(n,i,a);Zt=(n.flags&131072)!==0}else Zt=!1,nt&&(i.flags&1048576)!==0&&Rp(i,Wl,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;au(n,i),n=i.pendingProps;var h=Ks(i,Ot.current);Zs(i,a),h=xd(null,i,c,n,h,a);var m=Sd();return i.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Jt(c)?(m=!0,$l(i)):m=!1,i.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,yd(i),h.updater=su,i.stateNode=h,h._reactInternals=i,Nd(i,c,n,a),i=Od(null,i,c,!0,m,a)):(i.tag=0,nt&&m&&ad(i),Ht(null,i,h,a),i=i.child),i;case 16:c=i.elementType;e:{switch(au(n,i),n=i.pendingProps,h=c._init,c=h(c._payload),i.type=c,h=i.tag=hw(c),n=Mn(c,n),h){case 0:i=Vd(null,i,c,n,a);break e;case 1:i=Im(null,i,c,n,a);break e;case 11:i=_m(null,i,c,n,a);break e;case 14:i=vm(null,i,c,Mn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Mn(c,h),Vd(n,i,c,h,a);case 1:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Mn(c,h),Im(n,i,c,h,a);case 3:e:{if(xm(i),n===null)throw Error(t(387));c=i.pendingProps,m=i.memoizedState,h=m.element,Fp(n,i),Jl(i,c,null,a);var v=i.memoizedState;if(c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){h=to(Error(t(423)),i),i=Sm(n,i,c,a,h);break e}else if(c!==h){h=to(Error(t(424)),i),i=Sm(n,i,c,a,h);break e}else for(cn=Yr(i.stateNode.containerInfo.firstChild),un=i,nt=!0,Ln=null,a=Mp(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ys(),c===h){i=xr(n,i,a);break e}Ht(n,i,c,a)}i=i.child}return i;case 5:return Bp(i),n===null&&cd(i),c=i.type,h=i.pendingProps,m=n!==null?n.memoizedProps:null,v=h.children,td(c,h)?v=null:m!==null&&td(c,m)&&(i.flags|=32),Tm(n,i),Ht(n,i,v,a),i.child;case 6:return n===null&&cd(i),null;case 13:return km(n,i,a);case 4:return _d(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Xs(i,null,c,a):Ht(n,i,c,a),i.child;case 11:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Mn(c,h),_m(n,i,c,h,a);case 7:return Ht(n,i,i.pendingProps,a),i.child;case 8:return Ht(n,i,i.pendingProps.children,a),i.child;case 12:return Ht(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,h=i.pendingProps,m=i.memoizedProps,v=h.value,Xe(Ql,c._currentValue),c._currentValue=v,m!==null)if(On(m.value,v)){if(m.children===h.children&&!Xt.current){i=xr(n,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var S=m.dependencies;if(S!==null){v=m.child;for(var D=S.firstContext;D!==null;){if(D.context===c){if(m.tag===1){D=Ir(-1,a&-a),D.tag=2;var $=m.updateQueue;if($!==null){$=$.shared;var Q=$.pending;Q===null?D.next=D:(D.next=Q.next,Q.next=D),$.pending=D}}m.lanes|=a,D=m.alternate,D!==null&&(D.lanes|=a),md(m.return,a,i),S.lanes|=a;break}D=D.next}}else if(m.tag===10)v=m.type===i.type?null:m.child;else if(m.tag===18){if(v=m.return,v===null)throw Error(t(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),md(v,a,i),v=m.sibling}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===i){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}Ht(n,i,h.children,a),i=i.child}return i;case 9:return h=i.type,c=i.pendingProps.children,Zs(i,a),h=wn(h),c=c(h),i.flags|=1,Ht(n,i,c,a),i.child;case 14:return c=i.type,h=Mn(c,i.pendingProps),h=Mn(c.type,h),vm(n,i,c,h,a);case 15:return wm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,h=i.pendingProps,h=i.elementType===c?h:Mn(c,h),au(n,i),i.tag=1,Jt(c)?(n=!0,$l(i)):n=!1,Zs(i,a),dm(i,c,h),Nd(i,c,h,a),Od(null,i,c,!0,n,a);case 19:return Pm(n,i,a);case 22:return Em(n,i,a)}throw Error(t(156,i.tag))};function Jm(n,i){return ks(n,i)}function dw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(n,i,a,c){return new dw(n,i,a,c)}function th(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hw(n){if(typeof n=="function")return th(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===ze)return 14}return 2}function ai(n,i){var a=n.alternate;return a===null?(a=In(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function _u(n,i,a,c,h,m){var v=2;if(c=n,typeof n=="function")th(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case C:return Ji(a.children,h,m,i);case T:v=8,h|=8;break;case x:return n=In(12,a,i,h|2),n.elementType=x,n.lanes=m,n;case k:return n=In(13,a,i,h),n.elementType=k,n.lanes=m,n;case Ne:return n=In(19,a,i,h),n.elementType=Ne,n.lanes=m,n;case ge:return vu(a,h,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:v=10;break e;case R:v=9;break e;case V:v=11;break e;case ze:v=14;break e;case qe:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=In(v,a,i,h),i.elementType=n,i.type=c,i.lanes=m,i}function Ji(n,i,a,c){return n=In(7,n,c,i),n.lanes=a,n}function vu(n,i,a,c){return n=In(22,n,c,i),n.elementType=ge,n.lanes=a,n.stateNode={isHidden:!1},n}function nh(n,i,a){return n=In(6,n,null,i),n.lanes=a,n}function rh(n,i,a){return i=In(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function fw(n,i,a,c,h){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Br(0),this.expirationTimes=Br(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Br(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function ih(n,i,a,c,h,m,v,S,D){return n=new fw(n,i,a,S,D),i===1?(i=1,m===!0&&(i|=8)):i=0,m=In(3,null,null,i),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},yd(m),n}function pw(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Zm(n){if(!n)return Jr;n=n._reactInternals;e:{if(Pn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Jt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Jt(a))return Ap(n,a,i)}return i}function eg(n,i,a,c,h,m,v,S,D){return n=ih(a,c,!0,n,h,m,v,S,D),n.context=Zm(null),a=n.current,c=Wt(),h=si(a),m=Ir(c,h),m.callback=i??null,ti(a,m,h),n.current.lanes=h,$r(n,h,c),tn(n,c),n}function wu(n,i,a,c){var h=i.current,m=Wt(),v=si(h);return a=Zm(a),i.context===null?i.context=a:i.pendingContext=a,i=Ir(m,v),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=ti(h,i,v),n!==null&&(Un(n,h,v,m),Xl(n,h,v)),v}function Eu(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function tg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function sh(n,i){tg(n,i),(n=n.alternate)&&tg(n,i)}function mw(){return null}var ng=typeof reportError=="function"?reportError:function(n){console.error(n)};function oh(n){this._internalRoot=n}Tu.prototype.render=oh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));wu(n,i,null,null)},Tu.prototype.unmount=oh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Qi(function(){wu(null,n,null,null)}),i[_r]=null}};function Tu(n){this._internalRoot=n}Tu.prototype.unstable_scheduleHydration=function(n){if(n){var i=Tl();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Kn.length&&i!==0&&i<Kn[a].priority;a++);Kn.splice(a,0,n),a===0&&Sl(n)}};function ah(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Iu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function rg(){}function gw(n,i,a,c,h){if(h){if(typeof c=="function"){var m=c;c=function(){var $=Eu(v);m.call($)}}var v=eg(i,c,n,0,null,!1,!1,"",rg);return n._reactRootContainer=v,n[_r]=v.current,oa(n.nodeType===8?n.parentNode:n),Qi(),v}for(;h=n.lastChild;)n.removeChild(h);if(typeof c=="function"){var S=c;c=function(){var $=Eu(D);S.call($)}}var D=ih(n,0,!1,null,null,!1,!1,"",rg);return n._reactRootContainer=D,n[_r]=D.current,oa(n.nodeType===8?n.parentNode:n),Qi(function(){wu(i,D,a,c)}),D}function xu(n,i,a,c,h){var m=a._reactRootContainer;if(m){var v=m;if(typeof h=="function"){var S=h;h=function(){var D=Eu(v);S.call(D)}}wu(i,v,n,h)}else v=gw(a,i,n,h,c);return Eu(v)}wl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=zr(i.pendingLanes);a!==0&&(qr(i,a|1),tn(i,Ye()),(Ue&6)===0&&(io=Ye()+500,Zr()))}break;case 13:Qi(function(){var c=Tr(n,1);if(c!==null){var h=Wt();Un(c,n,1,h)}}),sh(n,1)}},Cs=function(n){if(n.tag===13){var i=Tr(n,134217728);if(i!==null){var a=Wt();Un(i,n,134217728,a)}sh(n,134217728)}},El=function(n){if(n.tag===13){var i=si(n),a=Tr(n,i);if(a!==null){var c=Wt();Un(a,n,i,c)}sh(n,i)}},Tl=function(){return Ve},Il=function(n,i){var a=Ve;try{return Ve=n,i()}finally{Ve=a}},ws=function(n,i,a){switch(i){case"input":if(No(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var h=zl(c);if(!h)throw Error(t(90));ps(c),No(c,h)}}}break;case"textarea":_s(n,a);break;case"select":i=a.value,i!=null&&cr(n,!!a.multiple,i,!1)}},Ci=Jd,zo=Qi;var yw={usingClientEntryPoint:!1,Events:[ua,Hs,zl,Hn,Uo,Jd]},Ia={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_w={bundleType:Ia.bundleType,version:Ia.version,rendererPackageName:Ia.rendererPackageName,rendererConfig:Ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=qo(n),n===null?null:n.stateNode},findFiberByHostInstance:Ia.findFiberByHostInstance||mw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Su.isDisabled&&Su.supportsFiber)try{Vi=Su.inject(_w),sn=Su}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yw,nn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ah(i))throw Error(t(200));return pw(n,i,null,a)},nn.createRoot=function(n,i){if(!ah(n))throw Error(t(299));var a=!1,c="",h=ng;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),i=ih(n,1,!1,null,null,a,!1,c,h),n[_r]=i.current,oa(n.nodeType===8?n.parentNode:n),new oh(i)},nn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=qo(i),n=n===null?null:n.stateNode,n},nn.flushSync=function(n){return Qi(n)},nn.hydrate=function(n,i,a){if(!Iu(i))throw Error(t(200));return xu(null,n,i,!0,a)},nn.hydrateRoot=function(n,i,a){if(!ah(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,h=!1,m="",v=ng;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=eg(i,null,n,1,a??null,h,!1,m,v),n[_r]=i.current,oa(n),c)for(n=0;n<c.length;n++)a=c[n],h=a._getVersion,h=h(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,h]:i.mutableSourceEagerHydrationData.push(a,h);return new Tu(i)},nn.render=function(n,i,a){if(!Iu(i))throw Error(t(200));return xu(null,n,i,!1,a)},nn.unmountComponentAtNode=function(n){if(!Iu(n))throw Error(t(40));return n._reactRootContainer?(Qi(function(){xu(null,null,n,!1,function(){n._reactRootContainer=null,n[_r]=null})}),!0):!1},nn.unstable_batchedUpdates=Jd,nn.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Iu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return xu(n,i,a,!1,c)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var dg;function kw(){if(dg)return ch.exports;dg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ch.exports=Sw(),ch.exports}var hg;function Aw(){if(hg)return ku;hg=1;var r=kw();return ku.createRoot=r.createRoot,ku.hydrateRoot=r.hydrateRoot,ku}var Pw=Aw();const Cw=zy(Pw);var fg={};const By=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Rw=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],d=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},$y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,f=d?r[o+1]:0,g=o+2<r.length,_=g?r[o+2]:0,E=l>>2,A=(l&3)<<4|f>>4;let b=(f&15)<<2|_>>6,F=_&63;g||(F=64,d||(b=64)),s.push(t[E],t[A],t[b],t[F])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(By(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Rw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const A=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||_==null||A==null)throw new Nw;const b=l<<2|f>>4;if(s.push(b),_!==64){const F=f<<4&240|_>>2;if(s.push(F),A!==64){const z=_<<6&192|A;s.push(z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Nw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bw=function(r){const e=By(r);return $y.encodeByteArray(e,!0)},Gu=function(r){return bw(r).replace(/\./g,"")},qy=function(r){try{return $y.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Dw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Vw=()=>Dw().__FIREBASE_DEFAULTS__,Ow=()=>{if(typeof process>"u"||typeof fg>"u")return;const r=fg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Lw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&qy(r[1]);return e&&JSON.parse(e)},fc=()=>{try{return Vw()||Ow()||Lw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Hy=r=>{var e,t;return(t=(e=fc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Mw=r=>{const e=Hy(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Wy=()=>{var r;return(r=fc())===null||r===void 0?void 0:r.config},Ky=r=>{var e;return(e=fc())===null||e===void 0?void 0:e[`_${r}`]};class jw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function Fw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Gu(JSON.stringify(t)),Gu(JSON.stringify(d)),""].join(".")}function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Uw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function zw(){var r;const e=(r=fc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $w(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function qw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hw(){const r=Bt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Ww(){return!zw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kw(){try{return typeof indexedDB=="object"}catch{return!1}}function Gw(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}const Qw="FirebaseError";class Lr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Qw,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ja.prototype.create)}}class Ja{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?Yw(l,s):"Error",f=`${this.serviceName}: ${d} (${o}).`;return new Lr(o,f,s)}}function Yw(r,e){return r.replace(Xw,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Xw=/\{\$([^}]+)}/g;function Jw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Qu(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],d=e[o];if(pg(l)&&pg(d)){if(!Qu(l,d))return!1}else if(l!==d)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function pg(r){return r!==null&&typeof r=="object"}function Za(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ka(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Aa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function Zw(r,e){const t=new eE(r,e);return t.subscribe.bind(t)}class eE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");tE(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=fh),o.error===void 0&&(o.error=fh),o.complete===void 0&&(o.complete=fh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function fh(){}function kt(r){return r&&r._delegate?r._delegate:r}class os{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zi="[DEFAULT]";class nE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new jw;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iE(e))try{this.getOrInitializeService({instanceIdentifier:Zi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zi){return this.instances.has(e)}getOptions(e=Zi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&d.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rE(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Zi){return this.component?this.component.multipleInstances?e:Zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rE(r){return r===Zi?void 0:r}function iE(r){return r.instantiationMode==="EAGER"}class sE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Oe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Oe||(Oe={}));const oE={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},aE=Oe.INFO,lE={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},uE=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=lE[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tf{constructor(e){this.name=e,this._logLevel=aE,this._logHandler=uE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const cE=(r,e)=>e.some(t=>r instanceof t);let mg,gg;function dE(){return mg||(mg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hE(){return gg||(gg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gy=new WeakMap,Sh=new WeakMap,Qy=new WeakMap,ph=new WeakMap,nf=new WeakMap;function fE(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(mi(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Gy.set(t,r)}).catch(()=>{}),nf.set(e,r),e}function pE(r){if(Sh.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});Sh.set(r,e)}let kh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Sh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Qy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function mE(r){kh=r(kh)}function gE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(mh(this),e,...t);return Qy.set(s,e.sort?e.sort():[e]),mi(s)}:hE().includes(r)?function(...e){return r.apply(mh(this),e),mi(Gy.get(this))}:function(...e){return mi(r.apply(mh(this),e))}}function yE(r){return typeof r=="function"?gE(r):(r instanceof IDBTransaction&&pE(r),cE(r,dE())?new Proxy(r,kh):r)}function mi(r){if(r instanceof IDBRequest)return fE(r);if(ph.has(r))return ph.get(r);const e=yE(r);return e!==r&&(ph.set(r,e),nf.set(e,r)),e}const mh=r=>nf.get(r);function _E(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),f=mi(d);return s&&d.addEventListener("upgradeneeded",g=>{s(mi(d.result),g.oldVersion,g.newVersion,mi(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),f}const vE=["get","getKey","getAll","getAllKeys","count"],wE=["put","add","delete","clear"],gh=new Map;function yg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(gh.get(e))return gh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=wE.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||vE.includes(t)))return;const l=async function(d,...f){const g=this.transaction(d,o?"readwrite":"readonly");let _=g.store;return s&&(_=_.index(f.shift())),(await Promise.all([_[t](...f),o&&g.done]))[0]};return gh.set(e,l),l}mE(r=>({...r,get:(e,t,s)=>yg(e,t)||r.get(e,t,s),has:(e,t)=>!!yg(e,t)||r.has(e,t)}));class EE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TE(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function TE(r){const e=r.getComponent();return e?.type==="VERSION"}const Ah="@firebase/app",_g="0.10.13";const Nr=new tf("@firebase/app"),IE="@firebase/app-compat",xE="@firebase/analytics-compat",SE="@firebase/analytics",kE="@firebase/app-check-compat",AE="@firebase/app-check",PE="@firebase/auth",CE="@firebase/auth-compat",RE="@firebase/database",NE="@firebase/data-connect",bE="@firebase/database-compat",DE="@firebase/functions",VE="@firebase/functions-compat",OE="@firebase/installations",LE="@firebase/installations-compat",ME="@firebase/messaging",jE="@firebase/messaging-compat",FE="@firebase/performance",UE="@firebase/performance-compat",zE="@firebase/remote-config",BE="@firebase/remote-config-compat",$E="@firebase/storage",qE="@firebase/storage-compat",HE="@firebase/firestore",WE="@firebase/vertexai-preview",KE="@firebase/firestore-compat",GE="firebase",QE="10.14.1";const Ph="[DEFAULT]",YE={[Ah]:"fire-core",[IE]:"fire-core-compat",[SE]:"fire-analytics",[xE]:"fire-analytics-compat",[AE]:"fire-app-check",[kE]:"fire-app-check-compat",[PE]:"fire-auth",[CE]:"fire-auth-compat",[RE]:"fire-rtdb",[NE]:"fire-data-connect",[bE]:"fire-rtdb-compat",[DE]:"fire-fn",[VE]:"fire-fn-compat",[OE]:"fire-iid",[LE]:"fire-iid-compat",[ME]:"fire-fcm",[jE]:"fire-fcm-compat",[FE]:"fire-perf",[UE]:"fire-perf-compat",[zE]:"fire-rc",[BE]:"fire-rc-compat",[$E]:"fire-gcs",[qE]:"fire-gcs-compat",[HE]:"fire-fst",[KE]:"fire-fst-compat",[WE]:"fire-vertex","fire-js":"fire-js",[GE]:"fire-js-all"};const Yu=new Map,XE=new Map,Ch=new Map;function vg(r,e){try{r.container.addComponent(e)}catch(t){Nr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function mo(r){const e=r.name;if(Ch.has(e))return Nr.debug(`There were multiple attempts to register component ${e}.`),!1;Ch.set(e,r);for(const t of Yu.values())vg(t,r);for(const t of XE.values())vg(t,r);return!0}function rf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function xn(r){return r.settings!==void 0}const JE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gi=new Ja("app","Firebase",JE);class ZE{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}const Io=QE;function Yy(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Ph,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw gi.create("bad-app-name",{appName:String(o)});if(t||(t=Wy()),!t)throw gi.create("no-options");const l=Yu.get(o);if(l){if(Qu(t,l.options)&&Qu(s,l.config))return l;throw gi.create("duplicate-app",{appName:o})}const d=new sE(o);for(const g of Ch.values())d.addComponent(g);const f=new ZE(t,s,d);return Yu.set(o,f),f}function Xy(r=Ph){const e=Yu.get(r);if(!e&&r===Ph&&Wy())return Yy();if(!e)throw gi.create("no-app",{appName:r});return e}function yi(r,e,t){var s;let o=(s=YE[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nr.warn(f.join(" "));return}mo(new os(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const e1="firebase-heartbeat-database",t1=1,Fa="firebase-heartbeat-store";let yh=null;function Jy(){return yh||(yh=_E(e1,t1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Fa)}catch(t){console.warn(t)}}}}).catch(r=>{throw gi.create("idb-open",{originalErrorMessage:r.message})})),yh}async function n1(r){try{const t=(await Jy()).transaction(Fa),s=await t.objectStore(Fa).get(Zy(r));return await t.done,s}catch(e){if(e instanceof Lr)Nr.warn(e.message);else{const t=gi.create("idb-get",{originalErrorMessage:e?.message});Nr.warn(t.message)}}}async function wg(r,e){try{const s=(await Jy()).transaction(Fa,"readwrite");await s.objectStore(Fa).put(e,Zy(r)),await s.done}catch(t){if(t instanceof Lr)Nr.warn(t.message);else{const s=gi.create("idb-set",{originalErrorMessage:t?.message});Nr.warn(s.message)}}}function Zy(r){return`${r.name}!${r.options.appId}`}const r1=1024,i1=720*60*60*1e3;class s1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new a1(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Eg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const f=new Date(d.date).valueOf();return Date.now()-f<=i1}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Nr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Eg(),{heartbeatsToSend:s,unsentEntries:o}=o1(this._heartbeatsCache.heartbeats),l=Gu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Nr.warn(t),""}}}function Eg(){return new Date().toISOString().substring(0,10)}function o1(r,e=r1){const t=[];let s=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),Tg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Tg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class a1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kw()?Gw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await n1(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return wg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return wg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Tg(r){return Gu(JSON.stringify({version:2,heartbeats:r})).length}function l1(r){mo(new os("platform-logger",e=>new EE(e),"PRIVATE")),mo(new os("heartbeat",e=>new s1(e),"PRIVATE")),yi(Ah,_g,r),yi(Ah,_g,"esm2017"),yi("fire-js","")}l1("");function sf(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function e_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const u1=e_,t_=new Ja("auth","Firebase",e_());const Xu=new tf("@firebase/auth");function c1(r,...e){Xu.logLevel<=Oe.WARN&&Xu.warn(`Auth (${Io}): ${r}`,...e)}function Mu(r,...e){Xu.logLevel<=Oe.ERROR&&Xu.error(`Auth (${Io}): ${r}`,...e)}function Sn(r,...e){throw af(r,...e)}function zn(r,...e){return af(r,...e)}function of(r,e,t){const s=Object.assign(Object.assign({},u1()),{[e]:t});return new Ja("auth","Firebase",s).create(e,{appName:r.name})}function nr(r){return of(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function d1(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Sn(r,"argument-error"),of(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function af(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return t_.create(r,...e)}function Te(r,e,...t){if(!r)throw af(e,...t)}function Ar(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mu(e),new Error(e)}function br(r,e){r||Ar(e)}function Rh(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function h1(){return Ig()==="http:"||Ig()==="https:"}function Ig(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}function f1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h1()||$w()||"connection"in navigator)?navigator.onLine:!0}function p1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class el{constructor(e,t){this.shortDelay=e,this.longDelay=t,br(t>e,"Short delay should be less than long delay!"),this.isMobile=Uw()||qw()}get(){return f1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lf(r,e){br(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class n_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const m1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const g1=new el(3e4,6e4);function Ti(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ii(r,e,t,s,o={}){return r_(r,o,async()=>{let l={},d={};s&&(e==="GET"?d=s:l={body:JSON.stringify(s)});const f=Za(Object.assign({key:r.config.apiKey},d)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _=Object.assign({method:e,headers:g},l);return Bw()||(_.referrerPolicy="no-referrer"),n_.fetch()(i_(r,r.config.apiHost,t,f),_)})}async function r_(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},m1),e);try{const o=new _1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Au(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const f=l.ok?d.errorMessage:d.error.message,[g,_]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Au(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Au(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Au(r,"user-disabled",d);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw of(r,E,_);Sn(r,E)}}catch(o){if(o instanceof Lr)throw o;Sn(r,"network-request-failed",{message:String(o)})}}async function tl(r,e,t,s,o={}){const l=await Ii(r,e,t,s,o);return"mfaPendingCredential"in l&&Sn(r,"multi-factor-auth-required",{_serverResponse:l}),l}function i_(r,e,t,s){const o=`${e}${t}?${s}`;return r.config.emulator?lf(r.config,o):`${r.config.apiScheme}://${o}`}function y1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(zn(this.auth,"network-request-failed")),g1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Au(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=zn(r,e,s);return o.customData._tokenResponse=t,o}function xg(r){return r!==void 0&&r.enterprise!==void 0}class v1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return y1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function w1(r,e){return Ii(r,"GET","/v2/recaptchaConfig",Ti(r,e))}async function E1(r,e){return Ii(r,"POST","/v1/accounts:delete",e)}async function s_(r,e){return Ii(r,"POST","/v1/accounts:lookup",e)}function ba(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T1(r,e=!1){const t=kt(r),s=await t.getIdToken(e),o=uf(s);Te(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l?.sign_in_provider;return{claims:o,token:s,authTime:ba(_h(o.auth_time)),issuedAtTime:ba(_h(o.iat)),expirationTime:ba(_h(o.exp)),signInProvider:d||null,signInSecondFactor:l?.sign_in_second_factor||null}}function _h(r){return Number(r)*1e3}function uf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Mu("JWT malformed, contained fewer than 3 sections"),null;try{const o=qy(t);return o?JSON.parse(o):(Mu("Failed to decode base64 JWT payload"),null)}catch(o){return Mu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Sg(r){const e=uf(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ua(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Lr&&I1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function I1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class x1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Nh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ba(this.lastLoginAt),this.creationTime=ba(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ju(r){var e;const t=r.auth,s=await r.getIdToken(),o=await Ua(r,s_(t,{idToken:s}));Te(o?.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?o_(l.providerUserInfo):[],f=k1(r.providerData,d),g=r.isAnonymous,_=!(r.email&&l.passwordHash)&&!f?.length,E=g?_:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Nh(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,A)}async function S1(r){const e=kt(r);await Ju(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function k1(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function o_(r){return r.map(e=>{var{providerId:t}=e,s=sf(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}async function A1(r,e){const t=await r_(r,{},async()=>{const s=Za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=i_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",n_.fetch()(d,{method:"POST",headers:f,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function P1(r,e){return Ii(r,"POST","/v2/accounts:revokeToken",Ti(r,e))}class uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=Sg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await A1(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,d=new uo;return s&&(Te(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Te(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(Te(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uo,this.toJSON())}_performRefresh(){return Ar("not implemented")}}function ui(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Pr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=sf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new x1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Nh(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ua(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return T1(this,e)}reload(){return S1(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Pr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Ju(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(nr(this.auth));const e=await this.getIdToken();return await Ua(this,E1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,d,f,g,_,E;const A=(s=t.displayName)!==null&&s!==void 0?s:void 0,b=(o=t.email)!==null&&o!==void 0?o:void 0,F=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,z=(d=t.photoURL)!==null&&d!==void 0?d:void 0,B=(f=t.tenantId)!==null&&f!==void 0?f:void 0,q=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,J=(_=t.createdAt)!==null&&_!==void 0?_:void 0,ne=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ee,emailVerified:oe,isAnonymous:Ce,providerData:ye,stsTokenManager:C}=t;Te(ee&&C,e,"internal-error");const T=uo.fromJSON(this.name,C);Te(typeof ee=="string",e,"internal-error"),ui(A,e.name),ui(b,e.name),Te(typeof oe=="boolean",e,"internal-error"),Te(typeof Ce=="boolean",e,"internal-error"),ui(F,e.name),ui(z,e.name),ui(B,e.name),ui(q,e.name),ui(J,e.name),ui(ne,e.name);const x=new Pr({uid:ee,auth:e,email:b,emailVerified:oe,displayName:A,isAnonymous:Ce,photoURL:z,phoneNumber:F,tenantId:B,stsTokenManager:T,createdAt:J,lastLoginAt:ne});return ye&&Array.isArray(ye)&&(x.providerData=ye.map(P=>Object.assign({},P))),q&&(x._redirectEventId=q),x}static async _fromIdTokenResponse(e,t,s=!1){const o=new uo;o.updateFromServerResponse(t);const l=new Pr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ju(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Te(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?o_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!l?.length,f=new uo;f.updateFromIdToken(s);const g=new Pr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:d}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Nh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,_),g}}const kg=new Map;function Cr(r){br(r instanceof Function,"Expected a class definition");let e=kg.get(r);return e?(br(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,kg.set(r,e),e)}class a_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}a_.type="NONE";const Ag=a_;function ju(r,e,t){return`firebase:${r}:${e}:${t}`}class co{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=ju(this.userKey,o.apiKey,l),this.fullPersistenceKey=ju("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Pr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new co(Cr(Ag),e,s);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||Cr(Ag);const d=ju(s,e.config.apiKey,e.name);let f=null;for(const _ of t)try{const E=await _._get(d);if(E){const A=Pr._fromJSON(e,E);_!==l&&(f=A),l=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new co(l,e,s):(l=g[0],f&&await l._set(d,f.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(d)}catch{}})),new co(l,e,s))}}function Pg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(l_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f_(e))return"Blackberry";if(p_(e))return"Webos";if(u_(e))return"Safari";if((e.includes("chrome/")||c_(e))&&!e.includes("edge/"))return"Chrome";if(h_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function l_(r=Bt()){return/firefox\//i.test(r)}function u_(r=Bt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c_(r=Bt()){return/crios\//i.test(r)}function d_(r=Bt()){return/iemobile/i.test(r)}function h_(r=Bt()){return/android/i.test(r)}function f_(r=Bt()){return/blackberry/i.test(r)}function p_(r=Bt()){return/webos/i.test(r)}function cf(r=Bt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function C1(r=Bt()){var e;return cf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function R1(){return Hw()&&document.documentMode===10}function m_(r=Bt()){return cf(r)||h_(r)||p_(r)||f_(r)||/windows phone/i.test(r)||d_(r)}function g_(r,e=[]){let t;switch(r){case"Browser":t=Pg(Bt());break;case"Worker":t=`${Pg(Bt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Io}/${s}`}class N1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((d,f)=>{try{const g=e(l);d(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function b1(r,e={}){return Ii(r,"GET","/v2/passwordPolicy",Ti(r,e))}const D1=6;class V1{constructor(e){var t,s,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:D1,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,d,f;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(f=g.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),g}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class O1{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cg(this),this.idTokenSubscription=new Cg(this),this.beforeStateQueue=new N1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cr(t)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await co.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await s_(this,{idToken:e}),s=await Pr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===f)&&g?.user&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ju(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=p1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(nr(this));const t=e?kt(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await b1(this),t=new V1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ja("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await P1(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cr(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[Cr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(f,this,"internal-error"),f.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=g_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&c1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Mr(r){return kt(r)}class Cg{constructor(e){this.auth=e,this.observer=null,this.addObserver=Zw(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L1(r){pc=r}function y_(r){return pc.loadJS(r)}function M1(){return pc.recaptchaEnterpriseScript}function j1(){return pc.gapiScript}function F1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}const U1="recaptcha-enterprise",z1="NO_RECAPTCHA";class B1{constructor(e){this.type=U1,this.auth=Mr(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,f)=>{w1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const _=new v1(g);return l.tenantId==null?l._agentRecaptchaConfig=_:l._tenantRecaptchaConfigs[l.tenantId]=_,d(_.siteKey)}}).catch(g=>{f(g)})})}function o(l,d,f){const g=window.grecaptcha;xg(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(_=>{d(_)}).catch(()=>{d(z1)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,d)=>{s(this.auth).then(f=>{if(!t&&xg(window.grecaptcha))o(f,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=M1();g.length!==0&&(g+=f),y_(g).then(()=>{o(f,l,d)}).catch(_=>{d(_)})}}).catch(f=>{d(f)})})}}async function Rg(r,e,t,s=!1){const o=new B1(r);let l;try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const d=Object.assign({},e);return s?Object.assign(d,{captchaResp:l}):Object.assign(d,{captchaResponse:l}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function bh(r,e,t,s){var o;if(!((o=r._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Rg(r,e,t,t==="getOobCode");return s(r,l)}else return s(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Rg(r,e,t,t==="getOobCode");return s(r,d)}else return Promise.reject(l)})}function $1(r,e){const t=rf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Qu(l,e??{}))return o;Sn(o,"already-initialized")}return t.initialize({options:e})}function q1(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Cr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function H1(r,e,t){const s=Mr(r);Te(s._canInitEmulator,s,"emulator-config-failed"),Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=__(e),{host:d,port:f}=W1(e),g=f===null?"":`:${f}`;s.config.emulator={url:`${l}//${d}${g}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:d,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),K1()}function __(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function W1(r){const e=__(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Ng(s.substr(l.length+1))}}else{const[l,d]=s.split(":");return{host:l,port:Ng(d)}}}function Ng(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function K1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class df{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,t){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}async function G1(r,e){return Ii(r,"POST","/v1/accounts:signUp",e)}async function Q1(r,e){return tl(r,"POST","/v1/accounts:signInWithPassword",Ti(r,e))}async function Y1(r,e){return tl(r,"POST","/v1/accounts:signInWithEmailLink",Ti(r,e))}async function X1(r,e){return tl(r,"POST","/v1/accounts:signInWithEmailLink",Ti(r,e))}class za extends df{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new za(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new za(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bh(e,t,"signInWithPassword",Q1);case"emailLink":return Y1(e,{email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bh(e,s,"signUpPassword",G1);case"emailLink":return X1(e,{idToken:t,email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ho(r,e){return tl(r,"POST","/v1/accounts:signInWithIdp",Ti(r,e))}const J1="http://localhost";class as extends df{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new as(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=sf(t,["providerId","signInMethod"]);if(!s||!o)return null;const d=new as(s,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return ho(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,ho(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ho(e,t)}buildRequest(){const e={requestUri:J1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Za(t)}return e}}function Z1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eT(r){const e=ka(Aa(r)).link,t=e?ka(Aa(e)).deep_link_id:null,s=ka(Aa(r)).deep_link_id;return(s?ka(Aa(s)).link:null)||s||t||e||r}class hf{constructor(e){var t,s,o,l,d,f;const g=ka(Aa(e)),_=(t=g.apiKey)!==null&&t!==void 0?t:null,E=(s=g.oobCode)!==null&&s!==void 0?s:null,A=Z1((o=g.mode)!==null&&o!==void 0?o:null);Te(_&&E&&A,"argument-error"),this.apiKey=_,this.operation=A,this.code=E,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=g.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(f=g.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=eT(e);try{return new hf(t)}catch{return null}}}class xo{constructor(){this.providerId=xo.PROVIDER_ID}static credential(e,t){return za._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=hf.parseLink(t);return Te(s,"argument-error"),za._fromEmailAndCode(e,s.code,s.tenantId)}}xo.PROVIDER_ID="password";xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ff{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class nl extends ff{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ci extends nl{constructor(){super("facebook.com")}static credential(e){return as._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";ci.PROVIDER_ID="facebook.com";class kr extends nl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return as._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return kr.credential(t,s)}catch{return null}}}kr.GOOGLE_SIGN_IN_METHOD="google.com";kr.PROVIDER_ID="google.com";class di extends nl{constructor(){super("github.com")}static credential(e){return as._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";class hi extends nl{constructor(){super("twitter.com")}static credential(e,t){return as._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return hi.credential(t,s)}catch{return null}}}hi.TWITTER_SIGN_IN_METHOD="twitter.com";hi.PROVIDER_ID="twitter.com";async function v_(r,e){return tl(r,"POST","/v1/accounts:signUp",Ti(r,e))}class Dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Pr._fromIdTokenResponse(e,s,o),d=bg(s);return new Dr({user:l,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=bg(s);return new Dr({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function bg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function tT(r){var e;if(xn(r.app))return Promise.reject(nr(r));const t=Mr(r);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Dr({user:t.currentUser,providerId:null,operationType:"signIn"});const s=await v_(t,{returnSecureToken:!0}),o=await Dr._fromIdTokenResponse(t,"signIn",s,!0);return await t._updateCurrentUser(o.user),o}class Zu extends Lr{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Zu.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Zu(e,t,s,o)}}function w_(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Zu._fromErrorAndOperation(r,l,e,s):l})}async function nT(r,e,t=!1){const s=await Ua(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Dr._forOperation(r,"link",s)}async function rT(r,e,t=!1){const{auth:s}=r;if(xn(s.app))return Promise.reject(nr(s));const o="reauthenticate";try{const l=await Ua(r,w_(s,o,e,r),t);Te(l.idToken,s,"internal-error");const d=uf(l.idToken);Te(d,s,"internal-error");const{sub:f}=d;return Te(r.uid===f,s,"user-mismatch"),Dr._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Sn(s,"user-mismatch"),l}}async function E_(r,e,t=!1){if(xn(r.app))return Promise.reject(nr(r));const s="signIn",o=await w_(r,s,e),l=await Dr._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function iT(r,e){return E_(Mr(r),e)}async function T_(r){const e=Mr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sT(r,e,t){if(xn(r.app))return Promise.reject(nr(r));const s=Mr(r),d=await bh(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",v_).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&T_(r),g}),f=await Dr._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function oT(r,e,t){return xn(r.app)?Promise.reject(nr(r)):iT(kt(r),xo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&T_(r),s})}function aT(r,e,t,s){return kt(r).onIdTokenChanged(e,t,s)}function lT(r,e,t){return kt(r).beforeAuthStateChanged(e,t)}function uT(r,e,t,s){return kt(r).onAuthStateChanged(e,t,s)}function Dg(r){return kt(r).signOut()}const ec="__sak";class I_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ec,"1"),this.storage.removeItem(ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const cT=1e3,dT=10;class x_ extends I_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},l=this.storage.getItem(s);R1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,dT):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},cT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}x_.type="LOCAL";const hT=x_;class S_ extends I_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}S_.type="SESSION";const k_=S_;function fT(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new mc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(d).map(async _=>_(t.origin,l)),g=await fT(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mc.receivers=[];function pf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class pT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((f,g)=>{const _=pf("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(A){const b=A;if(b.data.eventId===_)switch(b.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function rr(){return window}function mT(r){rr().location.href=r}function A_(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function gT(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yT(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function _T(){return A_()?self:null}const P_="firebaseLocalStorageDb",vT=1,tc="firebaseLocalStorage",C_="fbase_key";class rl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gc(r,e){return r.transaction([tc],e?"readwrite":"readonly").objectStore(tc)}function wT(){const r=indexedDB.deleteDatabase(P_);return new rl(r).toPromise()}function Dh(){const r=indexedDB.open(P_,vT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(tc,{keyPath:C_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(tc)?e(s):(s.close(),await wT(),e(await Dh()))})})}async function Vg(r,e,t){const s=gc(r,!0).put({[C_]:e,value:t});return new rl(s).toPromise()}async function ET(r,e){const t=gc(r,!1).get(e),s=await new rl(t).toPromise();return s===void 0?null:s.value}function Og(r,e){const t=gc(r,!0).delete(e);return new rl(t).toPromise()}const TT=800,IT=3;class R_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>IT)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mc._getInstance(_T()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await gT(),!this.activeServiceWorker)return;this.sender=new pT(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dh();return await Vg(e,ec,"1"),await Og(e,ec),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Vg(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>ET(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Og(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=gc(o,!1).getAll();return new rl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R_.type="LOCAL";const xT=R_;new el(3e4,6e4);function N_(r,e){return e?Cr(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class mf extends df{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ho(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ho(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ST(r){return E_(r.auth,new mf(r),r.bypassAuthState)}function kT(r){const{auth:e,user:t}=r;return Te(t,e,"internal-error"),rT(t,new mf(r),r.bypassAuthState)}async function AT(r){const{auth:e,user:t}=r;return Te(t,e,"internal-error"),nT(t,new mf(r),r.bypassAuthState)}class b_{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:d,type:f}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ST;case"linkViaPopup":case"linkViaRedirect":return AT;case"reauthViaPopup":case"reauthViaRedirect":return kT;default:Sn(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const PT=new el(2e3,1e4);async function CT(r,e,t){if(xn(r.app))return Promise.reject(zn(r,"operation-not-supported-in-this-environment"));const s=Mr(r);d1(r,e,ff);const o=N_(s,t);return new es(s,"signInViaPopup",e,o).executeNotNull()}class es extends b_{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,es.currentPopupAction&&es.currentPopupAction.cancel(),es.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=pf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,es.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PT.get())};e()}}es.currentPopupAction=null;const RT="pendingRedirect",Fu=new Map;class NT extends b_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Fu.get(this.auth._key());if(!e){try{const s=await bT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Fu.set(this.auth._key(),e)}return this.bypassAuthState||Fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bT(r,e){const t=OT(e),s=VT(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function DT(r,e){Fu.set(r._key(),e)}function VT(r){return Cr(r._redirectPersistence)}function OT(r){return ju(RT,r.config.apiKey,r.name)}async function LT(r,e,t=!1){if(xn(r.app))return Promise.reject(nr(r));const s=Mr(r),o=N_(s,e),d=await new NT(s,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const MT=600*1e3;class jT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!D_(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(zn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MT&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lg(e))}saveEventToCache(e){this.cachedEventUids.add(Lg(e)),this.lastProcessedEventTime=Date.now()}}function Lg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function D_({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function FT(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D_(r);default:return!1}}async function UT(r,e={}){return Ii(r,"GET","/v1/projects",e)}const zT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BT=/^https?/;async function $T(r){if(r.config.emulator)return;const{authorizedDomains:e}=await UT(r);for(const t of e)try{if(qT(t))return}catch{}Sn(r,"unauthorized-domain")}function qT(r){const e=Rh(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!BT.test(t))return!1;if(zT.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const HT=new el(3e4,6e4);function Mg(){const r=rr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function WT(r){return new Promise((e,t)=>{var s,o,l;function d(){Mg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mg(),t(zn(r,"network-request-failed"))},timeout:HT.get()})}if(!((o=(s=rr().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=rr().gapi)===null||l===void 0)&&l.load)d();else{const f=F1("iframefcb");return rr()[f]=()=>{gapi.load?d():t(zn(r,"network-request-failed"))},y_(`${j1()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Uu=null,e})}let Uu=null;function KT(r){return Uu=Uu||WT(r),Uu}const GT=new el(5e3,15e3),QT="__/auth/iframe",YT="emulator/auth/iframe",XT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZT(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?lf(e,YT):`https://${r.config.authDomain}/${QT}`,s={apiKey:e.apiKey,appName:r.name,v:Io},o=JT.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Za(s).slice(1)}`}async function eI(r){const e=await KT(r),t=rr().gapi;return Te(t,r,"internal-error"),e.open({where:document.body,url:ZT(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XT,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const d=zn(r,"network-request-failed"),f=rr().setTimeout(()=>{l(d)},GT.get());function g(){rr().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(d)})}))}const tI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nI=500,rI=600,iI="_blank",sI="http://localhost";class jg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oI(r,e,t,s=nI,o=rI){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g=Object.assign(Object.assign({},tI),{width:s.toString(),height:o.toString(),top:l,left:d}),_=Bt().toLowerCase();t&&(f=c_(_)?iI:t),l_(_)&&(e=e||sI,g.scrollbars="yes");const E=Object.entries(g).reduce((b,[F,z])=>`${b}${F}=${z},`,"");if(C1(_)&&f!=="_self")return aI(e||"",f),new jg(null);const A=window.open(e||"",f,E);Te(A,r,"popup-blocked");try{A.focus()}catch{}return new jg(A)}function aI(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const lI="__/auth/handler",uI="emulator/auth/handler",cI=encodeURIComponent("fac");async function Fg(r,e,t,s,o,l){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Io,eventId:o};if(e instanceof ff){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",Jw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,A]of Object.entries({}))d[E]=A}if(e instanceof nl){const E=e.getScopes().filter(A=>A!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const g=await r._getAppCheckToken(),_=g?`#${cI}=${encodeURIComponent(g)}`:"";return`${dI(r)}?${Za(f).slice(1)}${_}`}function dI({config:r}){return r.emulator?lf(r,uI):`https://${r.authDomain}/${lI}`}const vh="webStorageSupport";class hI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k_,this._completeRedirectFn=LT,this._overrideRedirectResult=DT}async _openPopup(e,t,s,o){var l;br((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await Fg(e,t,s,Rh(),o);return oI(e,d,pf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Fg(e,t,s,Rh(),o);return mT(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(br(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await eI(e),s=new jT(e);return t.register("authEvent",o=>(Te(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vh,{type:vh},o=>{var l;const d=(l=o?.[0])===null||l===void 0?void 0:l[vh];d!==void 0&&t(!!d),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$T(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return m_()||u_()||cf()}}const fI=hI;var Ug="@firebase/auth",zg="1.7.9";class pI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gI(r){mo(new os("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;Te(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:g_(r)},_=new O1(s,o,l,g);return q1(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),mo(new os("auth-internal",e=>{const t=Mr(e.getProvider("auth").getImmediate());return(s=>new pI(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yi(Ug,zg,mI(r)),yi(Ug,zg,"esm2017")}const yI=300,_I=Ky("authIdTokenMaxAge")||yI;let Bg=null;const vI=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>_I)return;const o=t?.token;Bg!==o&&(Bg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function wI(r=Xy()){const e=rf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=$1(r,{popupRedirectResolver:fI,persistence:[xT,hT,k_]}),s=Ky("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const d=vI(l.toString());lT(t,d,()=>d(t.currentUser)),aT(t,f=>d(f))}}const o=Hy("auth");return o&&H1(t,`http://${o}`),t}function EI(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}L1({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=zn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",EI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gI("Browser");var TI="firebase",II="10.14.1";yi(TI,II,"app");var $g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ns,V_;(function(){var r;function e(C,T){function x(){}x.prototype=T.prototype,C.D=T.prototype,C.prototype=new x,C.prototype.constructor=C,C.C=function(P,R,V){for(var k=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)k[Ne-2]=arguments[Ne];return T.prototype[R].apply(P,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,T,x){x||(x=0);var P=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)P[R]=T.charCodeAt(x++)|T.charCodeAt(x++)<<8|T.charCodeAt(x++)<<16|T.charCodeAt(x++)<<24;else for(R=0;16>R;++R)P[R]=T[x++]|T[x++]<<8|T[x++]<<16|T[x++]<<24;T=C.g[0],x=C.g[1],R=C.g[2];var V=C.g[3],k=T+(V^x&(R^V))+P[0]+3614090360&4294967295;T=x+(k<<7&4294967295|k>>>25),k=V+(R^T&(x^R))+P[1]+3905402710&4294967295,V=T+(k<<12&4294967295|k>>>20),k=R+(x^V&(T^x))+P[2]+606105819&4294967295,R=V+(k<<17&4294967295|k>>>15),k=x+(T^R&(V^T))+P[3]+3250441966&4294967295,x=R+(k<<22&4294967295|k>>>10),k=T+(V^x&(R^V))+P[4]+4118548399&4294967295,T=x+(k<<7&4294967295|k>>>25),k=V+(R^T&(x^R))+P[5]+1200080426&4294967295,V=T+(k<<12&4294967295|k>>>20),k=R+(x^V&(T^x))+P[6]+2821735955&4294967295,R=V+(k<<17&4294967295|k>>>15),k=x+(T^R&(V^T))+P[7]+4249261313&4294967295,x=R+(k<<22&4294967295|k>>>10),k=T+(V^x&(R^V))+P[8]+1770035416&4294967295,T=x+(k<<7&4294967295|k>>>25),k=V+(R^T&(x^R))+P[9]+2336552879&4294967295,V=T+(k<<12&4294967295|k>>>20),k=R+(x^V&(T^x))+P[10]+4294925233&4294967295,R=V+(k<<17&4294967295|k>>>15),k=x+(T^R&(V^T))+P[11]+2304563134&4294967295,x=R+(k<<22&4294967295|k>>>10),k=T+(V^x&(R^V))+P[12]+1804603682&4294967295,T=x+(k<<7&4294967295|k>>>25),k=V+(R^T&(x^R))+P[13]+4254626195&4294967295,V=T+(k<<12&4294967295|k>>>20),k=R+(x^V&(T^x))+P[14]+2792965006&4294967295,R=V+(k<<17&4294967295|k>>>15),k=x+(T^R&(V^T))+P[15]+1236535329&4294967295,x=R+(k<<22&4294967295|k>>>10),k=T+(R^V&(x^R))+P[1]+4129170786&4294967295,T=x+(k<<5&4294967295|k>>>27),k=V+(x^R&(T^x))+P[6]+3225465664&4294967295,V=T+(k<<9&4294967295|k>>>23),k=R+(T^x&(V^T))+P[11]+643717713&4294967295,R=V+(k<<14&4294967295|k>>>18),k=x+(V^T&(R^V))+P[0]+3921069994&4294967295,x=R+(k<<20&4294967295|k>>>12),k=T+(R^V&(x^R))+P[5]+3593408605&4294967295,T=x+(k<<5&4294967295|k>>>27),k=V+(x^R&(T^x))+P[10]+38016083&4294967295,V=T+(k<<9&4294967295|k>>>23),k=R+(T^x&(V^T))+P[15]+3634488961&4294967295,R=V+(k<<14&4294967295|k>>>18),k=x+(V^T&(R^V))+P[4]+3889429448&4294967295,x=R+(k<<20&4294967295|k>>>12),k=T+(R^V&(x^R))+P[9]+568446438&4294967295,T=x+(k<<5&4294967295|k>>>27),k=V+(x^R&(T^x))+P[14]+3275163606&4294967295,V=T+(k<<9&4294967295|k>>>23),k=R+(T^x&(V^T))+P[3]+4107603335&4294967295,R=V+(k<<14&4294967295|k>>>18),k=x+(V^T&(R^V))+P[8]+1163531501&4294967295,x=R+(k<<20&4294967295|k>>>12),k=T+(R^V&(x^R))+P[13]+2850285829&4294967295,T=x+(k<<5&4294967295|k>>>27),k=V+(x^R&(T^x))+P[2]+4243563512&4294967295,V=T+(k<<9&4294967295|k>>>23),k=R+(T^x&(V^T))+P[7]+1735328473&4294967295,R=V+(k<<14&4294967295|k>>>18),k=x+(V^T&(R^V))+P[12]+2368359562&4294967295,x=R+(k<<20&4294967295|k>>>12),k=T+(x^R^V)+P[5]+4294588738&4294967295,T=x+(k<<4&4294967295|k>>>28),k=V+(T^x^R)+P[8]+2272392833&4294967295,V=T+(k<<11&4294967295|k>>>21),k=R+(V^T^x)+P[11]+1839030562&4294967295,R=V+(k<<16&4294967295|k>>>16),k=x+(R^V^T)+P[14]+4259657740&4294967295,x=R+(k<<23&4294967295|k>>>9),k=T+(x^R^V)+P[1]+2763975236&4294967295,T=x+(k<<4&4294967295|k>>>28),k=V+(T^x^R)+P[4]+1272893353&4294967295,V=T+(k<<11&4294967295|k>>>21),k=R+(V^T^x)+P[7]+4139469664&4294967295,R=V+(k<<16&4294967295|k>>>16),k=x+(R^V^T)+P[10]+3200236656&4294967295,x=R+(k<<23&4294967295|k>>>9),k=T+(x^R^V)+P[13]+681279174&4294967295,T=x+(k<<4&4294967295|k>>>28),k=V+(T^x^R)+P[0]+3936430074&4294967295,V=T+(k<<11&4294967295|k>>>21),k=R+(V^T^x)+P[3]+3572445317&4294967295,R=V+(k<<16&4294967295|k>>>16),k=x+(R^V^T)+P[6]+76029189&4294967295,x=R+(k<<23&4294967295|k>>>9),k=T+(x^R^V)+P[9]+3654602809&4294967295,T=x+(k<<4&4294967295|k>>>28),k=V+(T^x^R)+P[12]+3873151461&4294967295,V=T+(k<<11&4294967295|k>>>21),k=R+(V^T^x)+P[15]+530742520&4294967295,R=V+(k<<16&4294967295|k>>>16),k=x+(R^V^T)+P[2]+3299628645&4294967295,x=R+(k<<23&4294967295|k>>>9),k=T+(R^(x|~V))+P[0]+4096336452&4294967295,T=x+(k<<6&4294967295|k>>>26),k=V+(x^(T|~R))+P[7]+1126891415&4294967295,V=T+(k<<10&4294967295|k>>>22),k=R+(T^(V|~x))+P[14]+2878612391&4294967295,R=V+(k<<15&4294967295|k>>>17),k=x+(V^(R|~T))+P[5]+4237533241&4294967295,x=R+(k<<21&4294967295|k>>>11),k=T+(R^(x|~V))+P[12]+1700485571&4294967295,T=x+(k<<6&4294967295|k>>>26),k=V+(x^(T|~R))+P[3]+2399980690&4294967295,V=T+(k<<10&4294967295|k>>>22),k=R+(T^(V|~x))+P[10]+4293915773&4294967295,R=V+(k<<15&4294967295|k>>>17),k=x+(V^(R|~T))+P[1]+2240044497&4294967295,x=R+(k<<21&4294967295|k>>>11),k=T+(R^(x|~V))+P[8]+1873313359&4294967295,T=x+(k<<6&4294967295|k>>>26),k=V+(x^(T|~R))+P[15]+4264355552&4294967295,V=T+(k<<10&4294967295|k>>>22),k=R+(T^(V|~x))+P[6]+2734768916&4294967295,R=V+(k<<15&4294967295|k>>>17),k=x+(V^(R|~T))+P[13]+1309151649&4294967295,x=R+(k<<21&4294967295|k>>>11),k=T+(R^(x|~V))+P[4]+4149444226&4294967295,T=x+(k<<6&4294967295|k>>>26),k=V+(x^(T|~R))+P[11]+3174756917&4294967295,V=T+(k<<10&4294967295|k>>>22),k=R+(T^(V|~x))+P[2]+718787259&4294967295,R=V+(k<<15&4294967295|k>>>17),k=x+(V^(R|~T))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+V&4294967295}s.prototype.u=function(C,T){T===void 0&&(T=C.length);for(var x=T-this.blockSize,P=this.B,R=this.h,V=0;V<T;){if(R==0)for(;V<=x;)o(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<T;)if(P[R++]=C.charCodeAt(V++),R==this.blockSize){o(this,P),R=0;break}}else for(;V<T;)if(P[R++]=C[V++],R==this.blockSize){o(this,P),R=0;break}}this.h=R,this.o+=T},s.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;var x=8*this.o;for(T=C.length-8;T<C.length;++T)C[T]=x&255,x/=256;for(this.u(C),C=Array(16),T=x=0;4>T;++T)for(var P=0;32>P;P+=8)C[x++]=this.g[T]>>>P&255;return C};function l(C,T){var x=f;return Object.prototype.hasOwnProperty.call(x,C)?x[C]:x[C]=T(C)}function d(C,T){this.h=T;for(var x=[],P=!0,R=C.length-1;0<=R;R--){var V=C[R]|0;P&&V==T||(x[R]=V,P=!1)}this.g=x}var f={};function g(C){return-128<=C&&128>C?l(C,function(T){return new d([T|0],0>T?-1:0)}):new d([C|0],0>C?-1:0)}function _(C){if(isNaN(C)||!isFinite(C))return A;if(0>C)return q(_(-C));for(var T=[],x=1,P=0;C>=x;P++)T[P]=C/x|0,x*=4294967296;return new d(T,0)}function E(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return q(E(C.substring(1),T));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=_(Math.pow(T,8)),P=A,R=0;R<C.length;R+=8){var V=Math.min(8,C.length-R),k=parseInt(C.substring(R,R+V),T);8>V?(V=_(Math.pow(T,V)),P=P.j(V).add(_(k))):(P=P.j(x),P=P.add(_(k)))}return P}var A=g(0),b=g(1),F=g(16777216);r=d.prototype,r.m=function(){if(B(this))return-q(this).m();for(var C=0,T=1,x=0;x<this.g.length;x++){var P=this.i(x);C+=(0<=P?P:4294967296+P)*T,T*=4294967296}return C},r.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(z(this))return"0";if(B(this))return"-"+q(this).toString(C);for(var T=_(Math.pow(C,6)),x=this,P="";;){var R=oe(x,T).g;x=J(x,R.j(T));var V=((0<x.g.length?x.g[0]:x.h)>>>0).toString(C);if(x=R,z(x))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},r.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function z(C){if(C.h!=0)return!1;for(var T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function B(C){return C.h==-1}r.l=function(C){return C=J(this,C),B(C)?-1:z(C)?0:1};function q(C){for(var T=C.g.length,x=[],P=0;P<T;P++)x[P]=~C.g[P];return new d(x,~C.h).add(b)}r.abs=function(){return B(this)?q(this):this},r.add=function(C){for(var T=Math.max(this.g.length,C.g.length),x=[],P=0,R=0;R<=T;R++){var V=P+(this.i(R)&65535)+(C.i(R)&65535),k=(V>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);P=k>>>16,V&=65535,k&=65535,x[R]=k<<16|V}return new d(x,x[x.length-1]&-2147483648?-1:0)};function J(C,T){return C.add(q(T))}r.j=function(C){if(z(this)||z(C))return A;if(B(this))return B(C)?q(this).j(q(C)):q(q(this).j(C));if(B(C))return q(this.j(q(C)));if(0>this.l(F)&&0>C.l(F))return _(this.m()*C.m());for(var T=this.g.length+C.g.length,x=[],P=0;P<2*T;P++)x[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<C.g.length;R++){var V=this.i(P)>>>16,k=this.i(P)&65535,Ne=C.i(R)>>>16,ze=C.i(R)&65535;x[2*P+2*R]+=k*ze,ne(x,2*P+2*R),x[2*P+2*R+1]+=V*ze,ne(x,2*P+2*R+1),x[2*P+2*R+1]+=k*Ne,ne(x,2*P+2*R+1),x[2*P+2*R+2]+=V*Ne,ne(x,2*P+2*R+2)}for(P=0;P<T;P++)x[P]=x[2*P+1]<<16|x[2*P];for(P=T;P<2*T;P++)x[P]=0;return new d(x,0)};function ne(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function ee(C,T){this.g=C,this.h=T}function oe(C,T){if(z(T))throw Error("division by zero");if(z(C))return new ee(A,A);if(B(C))return T=oe(q(C),T),new ee(q(T.g),q(T.h));if(B(T))return T=oe(C,q(T)),new ee(q(T.g),T.h);if(30<C.g.length){if(B(C)||B(T))throw Error("slowDivide_ only works with positive integers.");for(var x=b,P=T;0>=P.l(C);)x=Ce(x),P=Ce(P);var R=ye(x,1),V=ye(P,1);for(P=ye(P,2),x=ye(x,2);!z(P);){var k=V.add(P);0>=k.l(C)&&(R=R.add(x),V=k),P=ye(P,1),x=ye(x,1)}return T=J(C,R.j(T)),new ee(R,T)}for(R=A;0<=C.l(T);){for(x=Math.max(1,Math.floor(C.m()/T.m())),P=Math.ceil(Math.log(x)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=_(x),k=V.j(T);B(k)||0<k.l(C);)x-=P,V=_(x),k=V.j(T);z(V)&&(V=b),R=R.add(V),C=J(C,k)}return new ee(R,C)}r.A=function(C){return oe(this,C).h},r.and=function(C){for(var T=Math.max(this.g.length,C.g.length),x=[],P=0;P<T;P++)x[P]=this.i(P)&C.i(P);return new d(x,this.h&C.h)},r.or=function(C){for(var T=Math.max(this.g.length,C.g.length),x=[],P=0;P<T;P++)x[P]=this.i(P)|C.i(P);return new d(x,this.h|C.h)},r.xor=function(C){for(var T=Math.max(this.g.length,C.g.length),x=[],P=0;P<T;P++)x[P]=this.i(P)^C.i(P);return new d(x,this.h^C.h)};function Ce(C){for(var T=C.g.length+1,x=[],P=0;P<T;P++)x[P]=C.i(P)<<1|C.i(P-1)>>>31;return new d(x,C.h)}function ye(C,T){var x=T>>5;T%=32;for(var P=C.g.length-x,R=[],V=0;V<P;V++)R[V]=0<T?C.i(V+x)>>>T|C.i(V+x+1)<<32-T:C.i(V+x);return new d(R,C.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,V_=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=E,ns=d}).apply(typeof $g<"u"?$g:typeof self<"u"?self:typeof window<"u"?window:{});var Pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var O_,Pa,L_,zu,Vh,M_,j_,F_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,y){return u==Array.prototype||u==Object.prototype||(u[p]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pu=="object"&&Pu];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function o(u,p){if(p)e:{var y=s;u=u.split(".");for(var I=0;I<u.length-1;I++){var M=u[I];if(!(M in y))break e;y=y[M]}u=u[u.length-1],I=y[u],p=p(I),p!=I&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var y=0,I=!1,M={next:function(){if(!I&&y<u.length){var H=y++;return{value:p(H,u[H]),done:!1}}return I=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,y){return y})}});var d=d||{},f=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function _(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function E(u,p,y){return u.call.apply(u.bind,arguments)}function A(u,p,y){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,I),u.apply(p,M)}}return function(){return u.apply(p,arguments)}}function b(u,p,y){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,b.apply(null,arguments)}function F(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function z(u,p){function y(){}y.prototype=p.prototype,u.aa=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(I,M,H){for(var re=Array(arguments.length-2),He=2;He<arguments.length;He++)re[He-2]=arguments[He];return p.prototype[M].apply(I,re)}}function B(u){const p=u.length;if(0<p){const y=Array(p);for(let I=0;I<p;I++)y[I]=u[I];return y}return[]}function q(u,p){for(let y=1;y<arguments.length;y++){const I=arguments[y];if(g(I)){const M=u.length||0,H=I.length||0;u.length=M+H;for(let re=0;re<H;re++)u[M+re]=I[re]}else u.push(I)}}class J{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ne(u){return/^[\s\xa0]*$/.test(u)}function ee(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var Ce=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function ye(u,p,y){for(const I in u)p.call(y,u[I],I,u)}function C(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function T(u){const p={};for(const y in u)p[y]=u[y];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,p){let y,I;for(let M=1;M<arguments.length;M++){I=arguments[M];for(y in I)u[y]=I[y];for(let H=0;H<x.length;H++)y=x[H],Object.prototype.hasOwnProperty.call(I,y)&&(u[y]=I[y])}}function R(u){var p=1;u=u.split(":");const y=[];for(;0<p&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function V(u){f.setTimeout(()=>{throw u},0)}function k(){var u=ce;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Ne{constructor(){this.h=this.g=null}add(p,y){const I=ze.get();I.set(p,y),this.h?this.h.next=I:this.g=I,this.h=I}}var ze=new J(()=>new qe,u=>u.reset());class qe{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,Z=!1,ce=new Ne,L=()=>{const u=f.Promise.resolve(void 0);ge=()=>{u.then(N)}};var N=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(y){V(y)}var p=ze;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}Z=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};f.addEventListener("test",y,p),f.removeEventListener("test",y,p)}catch{}return u})();function pe(u,p){if(ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Ce){e:{try{oe(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ae[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&pe.aa.h.call(this)}}z(pe,ie);var Ae={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Qe(u,p,y,I,M){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!I,this.ha=M,this.key=++Fe,this.da=this.fa=!1}function wt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function lr(u){this.src=u,this.g={},this.h=0}lr.prototype.add=function(u,p,y,I,M){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var re=jr(u,p,I,M);return-1<re?(p=u[re],y||(p.fa=!1)):(p=new Qe(p,this.src,H,!!I,M),p.fa=y,u.push(p)),p};function ps(u,p){var y=p.type;if(y in u.g){var I=u.g[y],M=Array.prototype.indexOf.call(I,p,void 0),H;(H=0<=M)&&Array.prototype.splice.call(I,M,1),H&&(wt(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function jr(u,p,y,I){for(var M=0;M<u.length;++M){var H=u[M];if(!H.da&&H.listener==p&&H.capture==!!y&&H.ha==I)return M}return-1}var Si="closure_lm_"+(1e6*Math.random()|0),ms={};function Ro(u,p,y,I,M){if(Array.isArray(p)){for(var H=0;H<p.length;H++)Ro(u,p[H],y,I,M);return null}return y=Do(y),u&&u[be]?u.K(p,y,_(I)?!!I.capture:!1,M):No(u,p,y,!1,I,M)}function No(u,p,y,I,M,H){if(!p)throw Error("Invalid event type");var re=_(M)?!!M.capture:!!M,He=ys(u);if(He||(u[Si]=He=new lr(u)),y=He.add(p,y,I,re,H),y.proxy)return y;if(I=dl(),y.proxy=I,I.src=u,I.listener=y,u.addEventListener)_e||(M=re),M===void 0&&(M=!1),u.addEventListener(p.toString(),I,M);else if(u.attachEvent)u.attachEvent(cr(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function dl(){function u(y){return p.call(u.src,u.listener,y)}const p=bo;return u}function gs(u,p,y,I,M){if(Array.isArray(p))for(var H=0;H<p.length;H++)gs(u,p[H],y,I,M);else I=_(I)?!!I.capture:!!I,y=Do(y),u&&u[be]?(u=u.i,p=String(p).toString(),p in u.g&&(H=u.g[p],y=jr(H,y,I,M),-1<y&&(wt(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete u.g[p],u.h--)))):u&&(u=ys(u))&&(p=u.g[p.toString()],u=-1,p&&(u=jr(p,y,I,M)),(y=-1<u?p[u]:null)&&ur(y))}function ur(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[be])ps(p.i,u);else{var y=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(y,I,u.capture):p.detachEvent?p.detachEvent(cr(y),I):p.addListener&&p.removeListener&&p.removeListener(I),(y=ys(p))?(ps(y,u),y.h==0&&(y.src=null,p[Si]=null)):wt(u)}}}function cr(u){return u in ms?ms[u]:ms[u]="on"+u}function bo(u,p){if(u.da)u=!0;else{p=new pe(p,this);var y=u.listener,I=u.ha||u.src;u.fa&&ur(u),u=y.call(I,p)}return u}function ys(u){return u=u[Si],u instanceof lr?u:null}var _s="__closure_events_fn_"+(1e9*Math.random()>>>0);function Do(u){return typeof u=="function"?u:(u[_s]||(u[_s]=function(p){return u.handleEvent(p)}),u[_s])}function pt(){W.call(this),this.i=new lr(this),this.M=this,this.F=null}z(pt,W),pt.prototype[be]=!0,pt.prototype.removeEventListener=function(u,p,y,I){gs(this,u,p,y,I)};function mt(u,p){var y,I=u.F;if(I)for(y=[];I;I=I.F)y.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new ie(p,u);else if(p instanceof ie)p.target=p.target||u;else{var M=p;p=new ie(I,u),P(p,M)}if(M=!0,y)for(var H=y.length-1;0<=H;H--){var re=p.g=y[H];M=dr(re,I,!0,p)&&M}if(re=p.g=u,M=dr(re,I,!0,p)&&M,M=dr(re,I,!1,p)&&M,y)for(H=0;H<y.length;H++)re=p.g=y[H],M=dr(re,I,!1,p)&&M}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var y=u.g[p],I=0;I<y.length;I++)wt(y[I]);delete u.g[p],u.h--}}this.F=null},pt.prototype.K=function(u,p,y,I){return this.i.add(String(u),p,!1,y,I)},pt.prototype.L=function(u,p,y,I){return this.i.add(String(u),p,!0,y,I)};function dr(u,p,y,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,H=0;H<p.length;++H){var re=p[H];if(re&&!re.da&&re.capture==y){var He=re.listener,gt=re.ha||re.src;re.fa&&ps(u.i,re),M=He.call(gt,I)!==!1&&M}}return M&&!I.defaultPrevented}function Vo(u,p,y){if(typeof u=="function")y&&(u=b(u,y));else if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function Fr(u){u.g=Vo(()=>{u.g=null,u.i&&(u.i=!1,Fr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class ki extends W{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ai(u){W.call(this),this.h=u,this.g={}}z(Ai,W);var Oo=[];function Lo(u){ye(u.g,function(p,y){this.g.hasOwnProperty(y)&&ur(p)},u),u.g={}}Ai.prototype.N=function(){Ai.aa.N.call(this),Lo(this)},Ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mo=f.JSON.stringify,jo=f.JSON.parse,Fo=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Pi(){}Pi.prototype.h=null;function vs(u){return u.h||(u.h=u.i())}function ws(){}var pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qn(){ie.call(this,"d")}z(qn,ie);function Es(){ie.call(this,"c")}z(Es,ie);var Hn={},Uo=null;function Ci(){return Uo=Uo||new pt}Hn.La="serverreachability";function zo(u){ie.call(this,Hn.La,u)}z(zo,ie);function hr(u){const p=Ci();mt(p,new zo(p))}Hn.STAT_EVENT="statevent";function Bo(u,p){ie.call(this,Hn.STAT_EVENT,u),this.stat=p}z(Bo,ie);function at(u){const p=Ci();mt(p,new Bo(p,u))}Hn.Ma="timingevent";function Ts(u,p){ie.call(this,Hn.Ma,u),this.size=p}z(Ts,ie);function kn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Ri(){this.g=!0}Ri.prototype.xa=function(){this.g=!1};function Ni(u,p,y,I,M,H){u.info(function(){if(u.g)if(H)for(var re="",He=H.split("&"),gt=0;gt<He.length;gt++){var Le=He[gt].split("=");if(1<Le.length){var Et=Le[0];Le=Le[1];var ct=Et.split("_");re=2<=ct.length&&ct[1]=="type"?re+(Et+"="+Le+"&"):re+(Et+"=redacted&")}}else re=null;else re=H;return"XMLHTTP REQ ("+I+") [attempt "+M+"]: "+p+`
`+y+`
`+re})}function Is(u,p,y,I,M,H,re){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+M+"]: "+p+`
`+y+`
`+H+" "+re})}function An(u,p,y,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Lc(u,y)+(I?" "+I:"")})}function $o(u,p){u.info(function(){return"TIMEOUT: "+p})}Ri.prototype.info=function(){};function Lc(u,p){if(!u.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var I=y[u];if(!(2>I.length)){var M=I[1];if(Array.isArray(M)&&!(1>M.length)){var H=M[0];if(H!="noop"&&H!="stop"&&H!="close")for(var re=1;re<M.length;re++)M[re]=""}}}}return Mo(y)}catch{return p}}var xs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pn;function bi(){}z(bi,Pi),bi.prototype.g=function(){return new XMLHttpRequest},bi.prototype.i=function(){return{}},Pn=new bi;function Cn(u,p,y,I){this.j=u,this.i=p,this.l=y,this.R=I||1,this.U=new Ai(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fl}function fl(){this.i=null,this.g="",this.h=!1}var qo={},Ss={};function ks(u,p,y){u.L=1,u.v=qr(on(p)),u.m=y,u.P=!0,Ho(u,null)}function Ho(u,p){u.F=Date.now(),Ye(u),u.A=on(u.v);var y=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Wr(y.i,"t",I),u.C=0,y=u.j.J,u.h=new fl,u.g=Nl(u.j,y?p:null,!u.m),0<u.O&&(u.M=new ki(b(u.Y,u,u.g),u.O)),p=u.U,y=u.g,I=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Oo[0]=M.toString()),M=Oo);for(var H=0;H<M.length;H++){var re=Ro(y,M[H],I||p.handleEvent,!1,p.h||p);if(!re)break;p.g[re.key]=re}p=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),hr(),Ni(u.i,u.u,u.A,u.l,u.R,u.m)}Cn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Yt(u)==3?p.j():this.Y(u)},Cn.prototype.Y=function(u){try{if(u==this.g)e:{const ct=Yt(this.g);var p=this.g.Ba();const yn=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||Xo(this.g)))){this.J||ct!=4||p==7||(p==8||0>=yn?hr(3):hr(2)),Di(this);var y=this.g.Z();this.X=y;t:if(pl(this)){var I=Xo(this.g);u="";var M=I.length,H=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),Ur(this);var re="";break t}this.h.i=new f.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!(H&&p==M-1)});I.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=y==200,Is(this.i,this.u,this.A,this.l,this.R,ct,y),this.o){if(this.T&&!this.K){t:{if(this.g){var He,gt=this.g;if((He=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(He)){var Le=He;break t}}Le=null}if(y=Le)An(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wo(this,y);else{this.o=!1,this.s=3,at(12),mn(this),Ur(this);break e}}if(this.P){y=!0;let ln;for(;!this.J&&this.C<re.length;)if(ln=Mc(this,re),ln==Ss){ct==4&&(this.s=4,at(14),y=!1),An(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==qo){this.s=4,at(15),An(this.i,this.l,re,"[Invalid Chunk]"),y=!1;break}else An(this.i,this.l,ln,null),Wo(this,ln);if(pl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||re.length!=0||this.h.h||(this.s=1,at(16),y=!1),this.o=this.o&&y,!y)An(this.i,this.l,re,"[Invalid Chunked Response]"),mn(this),Ur(this);else if(0<re.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Zo(Et),Et.M=!0,at(11))}}else An(this.i,this.l,re,null),Wo(this,re);ct==4&&mn(this),this.o&&!this.J&&(ct==4?Ms(this.j,this):(this.o=!1,Ye(this)))}else bs(this.g),y==400&&0<re.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),mn(this),Ur(this)}}}catch{}};function pl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Mc(u,p){var y=u.C,I=p.indexOf(`
`,y);return I==-1?Ss:(y=Number(p.substring(y,I)),isNaN(y)?qo:(I+=1,I+y>p.length?Ss:(p=p.slice(I,I+y),u.C=I+y,p)))}Cn.prototype.cancel=function(){this.J=!0,mn(this)};function Ye(u){u.S=Date.now()+u.I,ml(u,u.I)}function ml(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=kn(b(u.ba,u),p)}function Di(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Cn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?($o(this.i,this.A),this.L!=2&&(hr(),at(17)),mn(this),this.s=2,Ur(this)):ml(this,this.S-u)};function Ur(u){u.j.G==0||u.J||Ms(u.j,u)}function mn(u){Di(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Lo(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Wo(u,p){try{var y=u.j;if(y.G!=0&&(y.g==u||$t(y.h,u))){if(!u.K&&$t(y.h,u)&&y.G==3){try{var I=y.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var M=I;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Ls(y),Vn(y);else break e;Os(y),at(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=kn(b(y.Za,y),6e3));if(1>=yl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else yr(y,11)}else if((u.K||y.g==u)&&Ls(y),!ne(p))for(M=y.Da.g.parse(p),p=0;p<M.length;p++){let Le=M[p];if(y.T=Le[0],Le=Le[1],y.G==2)if(Le[0]=="c"){y.K=Le[1],y.ia=Le[2];const Et=Le[3];Et!=null&&(y.la=Et,y.j.info("VER="+y.la));const ct=Le[4];ct!=null&&(y.Aa=ct,y.j.info("SVER="+y.Aa));const yn=Le[5];yn!=null&&typeof yn=="number"&&0<yn&&(I=1.5*yn,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const ln=u.g;if(ln){const Ui=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ui){var H=I.h;H.g||Ui.indexOf("spdy")==-1&&Ui.indexOf("quic")==-1&&Ui.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Ko(H,H.h),H.h=null))}if(I.D){const Fs=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Fs&&(I.ya=Fs,Ge(I.I,I.D,Fs))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var re=u;if(I.qa=Rl(I,I.J?I.ia:null,I.W),re.K){_l(I.h,re);var He=re,gt=I.L;gt&&(He.I=gt),He.B&&(Di(He),Ye(He)),I.g=re}else Fi(I);0<y.i.length&&Qn(y)}else Le[0]!="stop"&&Le[0]!="close"||yr(y,7);else y.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?yr(y,7):Pt(y):Le[0]!="noop"&&y.l&&y.l.ta(Le),y.v=0)}}hr(4)}catch{}}var gl=class{constructor(u,p){this.g=u,this.map=p}};function Vi(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function yl(u){return u.h?1:u.g?u.g.size:0}function $t(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ko(u,p){u.g?u.g.add(p):u.h=p}function _l(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Vi.prototype.cancel=function(){if(this.i=vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function vl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.D);return p}return B(u.i)}function As(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],y=u.length,I=0;I<y;I++)p.push(u[I]);return p}p=[],y=0;for(I in u)p[y++]=u[I];return p}function Ps(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var y=0;y<u;y++)p.push(y);return p}p=[],y=0;for(const I in u)p[y++]=I;return p}}}function zr(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var y=Ps(u),I=As(u),M=I.length,H=0;H<M;H++)p.call(void 0,I[H],y&&y[H],u)}var Oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jc(u,p){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var I=u[y].indexOf("="),M=null;if(0<=I){var H=u[y].substring(0,I);M=u[y].substring(I+1)}else H=u[y];p(H,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function fr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fr){this.h=u.h,Li(this,u.j),this.o=u.o,this.g=u.g,Br(this,u.s),this.l=u.l;var p=u.i,y=new Wn;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),$r(this,y),this.m=u.m}else u&&(p=String(u).match(Oi))?(this.h=!1,Li(this,p[1]||"",!0),this.o=Ve(p[2]||""),this.g=Ve(p[3]||"",!0),Br(this,p[4]),this.l=Ve(p[5]||"",!0),$r(this,p[6]||"",!0),this.m=Ve(p[7]||"")):(this.h=!1,this.i=new Wn(null,this.h))}fr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Hr(p,Cs,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Hr(p,Cs,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Hr(y,y.charAt(0)=="/"?Tl:El,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Hr(y,Go)),u.join("")};function on(u){return new fr(u)}function Li(u,p,y){u.j=y?Ve(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Br(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function $r(u,p,y){p instanceof Wn?(u.i=p,Kn(u.i,u.h)):(y||(p=Hr(p,Il)),u.i=new Wn(p,u.h))}function Ge(u,p,y){u.i.set(p,y)}function qr(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ve(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Hr(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,wl),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function wl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Cs=/[#\/\?@]/g,El=/[#\?:]/g,Tl=/[#\?]/g,Il=/[#\?@]/g,Go=/#/g;function Wn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function At(u){u.g||(u.g=new Map,u.h=0,u.i&&jc(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}r=Wn.prototype,r.add=function(u,p){At(this),this.i=null,u=gn(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function Rn(u,p){At(u),p=gn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Nn(u,p){return At(u),p=gn(u,p),u.g.has(p)}r.forEach=function(u,p){At(this),this.g.forEach(function(y,I){y.forEach(function(M){u.call(p,M,I,this)},this)},this)},r.na=function(){At(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let I=0;I<p.length;I++){const M=u[I];for(let H=0;H<M.length;H++)y.push(p[I])}return y},r.V=function(u){At(this);let p=[];if(typeof u=="string")Nn(this,u)&&(p=p.concat(this.g.get(gn(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)p=p.concat(u[y])}return p},r.set=function(u,p){return At(this),this.i=null,u=gn(this,u),Nn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Wr(u,p,y){Rn(u,p),0<y.length&&(u.i=null,u.g.set(gn(u,p),B(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var I=p[y];const H=encodeURIComponent(String(I)),re=this.V(I);for(I=0;I<re.length;I++){var M=H;re[I]!==""&&(M+="="+encodeURIComponent(String(re[I]))),u.push(M)}}return this.i=u.join("&")};function gn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Kn(u,p){p&&!u.j&&(At(u),u.i=null,u.g.forEach(function(y,I){var M=I.toLowerCase();I!=M&&(Rn(this,I),Wr(this,M,y))},u)),u.j=p}function Fc(u,p){const y=new Ri;if(f.Image){const I=new Image;I.onload=F(Qt,y,"TestLoadImage: loaded",!0,p,I),I.onerror=F(Qt,y,"TestLoadImage: error",!1,p,I),I.onabort=F(Qt,y,"TestLoadImage: abort",!1,p,I),I.ontimeout=F(Qt,y,"TestLoadImage: timeout",!1,p,I),f.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function xl(u,p){const y=new Ri,I=new AbortController,M=setTimeout(()=>{I.abort(),Qt(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(H=>{clearTimeout(M),H.ok?Qt(y,"TestPingServer: ok",!0,p):Qt(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),Qt(y,"TestPingServer: error",!1,p)})}function Qt(u,p,y,I,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),I(y)}catch{}}function Uc(){this.g=new Fo}function Sl(u,p,y){const I=y||"";try{zr(u,function(M,H){let re=M;_(M)&&(re=Mo(M)),p.push(I+H+"="+encodeURIComponent(re))})}catch(M){throw p.push(I+"type="+encodeURIComponent("_badmap")),M}}function pr(u){this.l=u.Ub||null,this.j=u.eb||!1}z(pr,Pi),pr.prototype.g=function(){return new Mi(this.l,this.j)},pr.prototype.i=(function(u){return function(){return u}})({});function Mi(u,p){pt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(Mi,pt),r=Mi.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Dn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Dn(this)),this.g&&(this.readyState=3,Dn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function kl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?bn(this):Dn(this),this.readyState==3&&kl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,bn(this))},r.Qa=function(u){this.g&&(this.response=u,bn(this))},r.ga=function(){this.g&&bn(this)};function bn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Dn(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function Dn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function mr(u){let p="";return ye(u,function(y,I){p+=I,p+=":",p+=y,p+=`\r
`}),p}function Kr(u,p,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=mr(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Ge(u,p,y))}function tt(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(tt,pt);var zc=/^https?$/i,Qo=["POST","PUT"];r=tt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pn.g(),this.v=this.o?vs(this.o):vs(Pn),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(H){ji(this,H);return}if(u=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var M in I)y.set(M,I[M]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())y.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),M=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Qo,p,void 0))||I||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,re]of y)this.g.setRequestHeader(H,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ns(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){ji(this,H)}};function ji(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Rs(u),an(u)}function Rs(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),an(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),an(this,!0)),tt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Yo(this):this.bb())},r.bb=function(){Yo(this)};function Yo(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Yt(u)!=4||u.Z()!=2)){if(u.u&&Yt(u)==4)Vo(u.Ea,0,u);else if(mt(u,"readystatechange"),Yt(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var I;if(I=re===0){var M=String(u.D).match(Oi)[1]||null;!M&&f.self&&f.self.location&&(M=f.self.location.protocol.slice(0,-1)),I=!zc.test(M?M.toLowerCase():"")}y=I}if(y)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var H=2<Yt(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",Rs(u)}}finally{an(u)}}}}function an(u,p){if(u.g){Ns(u);const y=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||mt(u,"ready");try{y.onreadystatechange=I}catch{}}}function Ns(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Yt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),jo(p)}};function Xo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bs(u){const p={};u=(u.g&&2<=Yt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(ne(u[I]))continue;var y=R(u[I]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=p[M]||[];p[M]=H,H.push(y)}C(p,function(I){return I.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gn(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function Jo(u){this.Aa=0,this.i=[],this.j=new Ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gn("baseRetryDelayMs",5e3,u),this.cb=Gn("retryDelaySeedMs",1e4,u),this.Wa=Gn("forwardChannelMaxRetries",2,u),this.wa=Gn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Vi(u&&u.concurrentRequestLimit),this.Da=new Uc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Jo.prototype,r.la=8,r.G=1,r.connect=function(u,p,y,I){at(0),this.W=u,this.H=p||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=Rl(this,null,this.W),Qn(this)};function Pt(u){if(Ds(u),u.G==3){var p=u.U++,y=on(u.I);if(Ge(y,"SID",u.K),Ge(y,"RID",p),Ge(y,"TYPE","terminate"),gr(u,y),p=new Cn(u,u.j,p),p.L=2,p.v=qr(on(y)),y=!1,f.navigator&&f.navigator.sendBeacon)try{y=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&f.Image&&(new Image().src=p.v,y=!0),y||(p.g=Nl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ye(p)}Cl(u)}function Vn(u){u.g&&(Zo(u),u.g.cancel(),u.g=null)}function Ds(u){Vn(u),u.u&&(f.clearTimeout(u.u),u.u=null),Ls(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Qn(u){if(!sn(u.h)&&!u.s){u.s=!0;var p=u.Ga;ge||L(),Z||(ge(),Z=!0),ce.add(p,u),u.B=0}}function Bc(u,p){return yl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=kn(b(u.Ga,u,p),Pl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Cn(this,this.j,u);let H=this.o;if(this.S&&(H?(H=T(H),P(H,this.S)):H=this.S),this.m!==null||this.O||(M.H=H,H=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Gr(this,M,p),y=on(this.I),Ge(y,"RID",u),Ge(y,"CVER",22),this.D&&Ge(y,"X-HTTP-Session-Id",this.D),gr(this,y),H&&(this.O?p="headers="+encodeURIComponent(String(mr(H)))+"&"+p:this.m&&Kr(y,this.m,H)),Ko(this.h,M),this.Ua&&Ge(y,"TYPE","init"),this.P?(Ge(y,"$req",p),Ge(y,"SID","null"),M.T=!0,ks(M,y,null)):ks(M,y,p),this.G=2}}else this.G==3&&(u?Vs(this,u):this.i.length==0||sn(this.h)||Vs(this))};function Vs(u,p){var y;p?y=p.l:y=u.U++;const I=on(u.I);Ge(I,"SID",u.K),Ge(I,"RID",y),Ge(I,"AID",u.T),gr(u,I),u.m&&u.o&&Kr(I,u.m,u.o),y=new Cn(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Gr(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ko(u.h,y),ks(y,I,p)}function gr(u,p){u.H&&ye(u.H,function(y,I){Ge(p,I,y)}),u.l&&zr({},function(y,I){Ge(p,I,y)})}function Gr(u,p,y){y=Math.min(u.i.length,y);var I=u.l?b(u.l.Na,u.l,u):null;e:{var M=u.i;let H=-1;for(;;){const re=["count="+y];H==-1?0<y?(H=M[0].g,re.push("ofs="+H)):H=0:re.push("ofs="+H);let He=!0;for(let gt=0;gt<y;gt++){let Le=M[gt].g;const Et=M[gt].map;if(Le-=H,0>Le)H=Math.max(0,M[gt].g-100),He=!1;else try{Sl(Et,re,"req"+Le+"_")}catch{I&&I(Et)}}if(He){I=re.join("&");break e}}}return u=u.i.splice(0,y),p.D=u,I}function Fi(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ge||L(),Z||(ge(),Z=!0),ce.add(p,u),u.v=0}}function Os(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=kn(b(u.Fa,u),Pl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Al(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=kn(b(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Vn(this),Al(this))};function Zo(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Al(u){u.g=new Cn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=on(u.qa);Ge(p,"RID","rpc"),Ge(p,"SID",u.K),Ge(p,"AID",u.T),Ge(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(p,"TO",u.ja),Ge(p,"TYPE","xmlhttp"),gr(u,p),u.m&&u.o&&Kr(p,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=qr(on(p)),y.m=null,y.P=!0,Ho(y,u)}r.Za=function(){this.C!=null&&(this.C=null,Vn(this),Os(this),at(19))};function Ls(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Ms(u,p){var y=null;if(u.g==p){Ls(u),Zo(u),u.g=null;var I=2}else if($t(u.h,p))y=p.D,_l(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var M=u.B;I=Ci(),mt(I,new Ts(I,y)),Qn(u)}else Fi(u);else if(M=p.s,M==3||M==0&&0<p.X||!(I==1&&Bc(u,p)||I==2&&Os(u)))switch(y&&0<y.length&&(p=u.h,p.i=p.i.concat(y)),M){case 1:yr(u,5);break;case 4:yr(u,10);break;case 3:yr(u,6);break;default:yr(u,2)}}}function Pl(u,p){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*p}function yr(u,p){if(u.j.info("Error code "+p),p==2){var y=b(u.fb,u),I=u.Xa;const M=!I;I=new fr(I||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Li(I,"https"),qr(I),M?Fc(I.toString(),y):xl(I.toString(),y)}else at(2);u.G=0,u.l&&u.l.sa(p),Cl(u),Ds(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Cl(u){if(u.G=0,u.ka=[],u.l){const p=vl(u.h);(p.length!=0||u.i.length!=0)&&(q(u.ka,p),q(u.ka,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.ra()}}function Rl(u,p,y){var I=y instanceof fr?on(y):new fr(y);if(I.g!="")p&&(I.g=p+"."+I.g),Br(I,I.s);else{var M=f.location;I=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var H=new fr(null);I&&Li(H,I),p&&(H.g=p),M&&Br(H,M),y&&(H.l=y),I=H}return y=u.D,p=u.ya,y&&p&&Ge(I,y,p),Ge(I,"VER",u.la),gr(u,I),I}function Nl(u,p,y){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new tt(new pr({eb:y})):new tt(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ea(){}r=ea.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function js(){}js.prototype.g=function(u,p){return new qt(u,p)};function qt(u,p){pt.call(this),this.g=new Jo(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!ne(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ne(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Yn(this)}z(qt,pt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Pt(this.g)},qt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Mo(u),u=y);p.i.push(new gl(p.Ya++,u)),p.G==3&&Qn(p)},qt.prototype.N=function(){this.g.l=null,delete this.j,Pt(this.g),delete this.g,qt.aa.N.call(this)};function bl(u){qn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}z(bl,qn);function Dl(){Es.call(this),this.status=1}z(Dl,Es);function Yn(u){this.g=u}z(Yn,ea),Yn.prototype.ua=function(){mt(this.g,"a")},Yn.prototype.ta=function(u){mt(this.g,new bl(u))},Yn.prototype.sa=function(u){mt(this.g,new Dl)},Yn.prototype.ra=function(){mt(this.g,"b")},js.prototype.createWebChannel=js.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,F_=function(){return new js},j_=function(){return Ci()},M_=Hn,Vh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xs.NO_ERROR=0,xs.TIMEOUT=8,xs.HTTP_ERROR=6,zu=xs,hl.COMPLETE="complete",L_=hl,ws.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Pa=ws,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,O_=tt}).apply(typeof Pu<"u"?Pu:typeof self<"u"?self:typeof window<"u"?window:{});const qg="@firebase/firestore";let Ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");let So="10.14.0";const ls=new tf("@firebase/firestore");function Sa(){return ls.logLevel}function fe(r,...e){if(ls.logLevel<=Oe.DEBUG){const t=e.map(gf);ls.debug(`Firestore (${So}): ${r}`,...t)}}function Vr(r,...e){if(ls.logLevel<=Oe.ERROR){const t=e.map(gf);ls.error(`Firestore (${So}): ${r}`,...t)}}function go(r,...e){if(ls.logLevel<=Oe.WARN){const t=e.map(gf);ls.warn(`Firestore (${So}): ${r}`,...t)}}function gf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function xe(r="Unexpected state"){const e=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: `+r;throw Vr(e),new Error(e)}function We(r,e){r||xe()}function ke(r,e){return r}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class U_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ut.UNAUTHENTICATED)))}shutdown(){}}class SI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kI{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Rr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Rr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string"),new U_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new Ut(e)}}class AI{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class PI{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new AI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ut.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class CI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){We(this.o===void 0);const s=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.R;return this.R=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string"),this.R=t.token,new CI(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function NI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class z_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=NI(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%e.length))}return s}}function $e(r,e){return r<e?-1:r>e?1:0}function yo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}class vt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new vt(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new vt(0,0))}static max(){return new Se(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ba{constructor(e,t,s){t===void 0?t=0:t>e.length&&xe(),s===void 0?s=e.length-t:s>e.length-t&&xe(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ba.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ba?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=e.get(o),d=t.get(o);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class et extends Ba{construct(e,t,s){return new et(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const bI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends Ba{construct(e,t,s){return new bt(e,t,s)}static isValidIdentifier(e){return bI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new le(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new le(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(d=!d,o++):f!=="."||d?(s+=f,o++):(l(),o++)}if(l(),d)throw new le(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}class ve{constructor(e){this.path=e}static fromPath(e){return new ve(et.fromString(e))}static fromName(e){return new ve(et.fromString(e).popFirst(5))}static empty(){return new ve(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new et(e.slice()))}}function DI(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new vt(t+1,0):new vt(t,s));return new vi(o,ve.empty(),e)}function VI(r){return new vi(r.readTime,r.key,-1)}class vi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new vi(Se.min(),ve.empty(),-1)}static max(){return new vi(Se.max(),ve.empty(),-1)}}function OI(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(r.documentKey,e.documentKey),t!==0?t:$e(r.largestBatchId,e.largestBatchId))}const LI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function il(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==LI)throw r;fe("LocalStore","Unexpectedly lost primary lease")}class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.reject(t)}static resolve(e){return new Y(((t,s)=>{t(e)}))}static reject(e){return new Y(((t,s)=>{s(e)}))}static waitFor(e){return new Y(((t,s)=>{let o=0,l=0,d=!1;e.forEach((f=>{++o,f.next((()=>{++l,d&&l===o&&t()}),(g=>s(g)))})),d=!0,l===o&&t()}))}static or(e){let t=Y.resolve(!1);for(const s of e)t=t.next((o=>o?Y.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new Y(((s,o)=>{const l=e.length,d=new Array(l);let f=0;for(let g=0;g<l;g++){const _=g;t(e[_]).next((E=>{d[_]=E,++f,f===l&&s(d)}),(E=>o(E)))}}))}static doWhile(e,t){return new Y(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function jI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sl(r){return r.name==="IndexedDbTransactionError"}class yf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}yf.oe=-1;function yc(r){return r==null}function nc(r){return r===0&&1/r==-1/0}function FI(r){return typeof r=="number"&&Number.isInteger(r)&&!nc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Hg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ds(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function B_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class st{constructor(e,t){this.comparator=e,this.root=t||Nt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cu(this.root,e,this.comparator,!0)}}class Cu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Nt.RED,this.left=o??Nt.EMPTY,this.right=l??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Nt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Nt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,t,s,o,l){return this}insert(e,t,s){return new Nt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dt{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wg(this.data.getIterator())}getIteratorFrom(e){return new Wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class Wg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class hn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new hn([])}unionWith(e){let t=new Dt(bt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class $_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new $_("Invalid base64 string: "+l):l}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const UI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wi(r){if(We(!!r),typeof r=="string"){let e=0;const t=UI.exec(r);if(We(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ut(r.seconds),nanos:ut(r.nanos)}}function ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function us(r){return typeof r=="string"?Vt.fromBase64String(r):Vt.fromUint8Array(r)}function _f(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function vf(r){const e=r.mapValue.fields.__previous_value__;return _f(e)?vf(e):e}function $a(r){const e=wi(r.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}class zI{constructor(e,t,s,o,l,d,f,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=_}}class qa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qa&&e.projectId===this.projectId&&e.database===this.database}}const Ru={mapValue:{}};function cs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?_f(r)?4:$I(r)?9007199254740991:BI(r)?10:11:xe()}function or(r,e){if(r===e)return!0;const t=cs(r);if(t!==cs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return $a(r).isEqual($a(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=wi(o.timestampValue),f=wi(l.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return us(o.bytesValue).isEqual(us(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=ut(o.doubleValue),f=ut(l.doubleValue);return d===f?nc(d)===nc(f):isNaN(d)&&isNaN(f)}return!1})(r,e);case 9:return yo(r.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Hg(d)!==Hg(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(f[g]===void 0||!or(d[g],f[g])))return!1;return!0})(r,e);default:return xe()}}function Ha(r,e){return(r.values||[]).find((t=>or(t,e)))!==void 0}function _o(r,e){if(r===e)return 0;const t=cs(r),s=cs(e);if(t!==s)return $e(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(r.booleanValue,e.booleanValue);case 2:return(function(l,d){const f=ut(l.integerValue||l.doubleValue),g=ut(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return Kg(r.timestampValue,e.timestampValue);case 4:return Kg($a(r),$a(e));case 5:return $e(r.stringValue,e.stringValue);case 6:return(function(l,d){const f=us(l),g=us(d);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,d){const f=l.split("/"),g=d.split("/");for(let _=0;_<f.length&&_<g.length;_++){const E=$e(f[_],g[_]);if(E!==0)return E}return $e(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,d){const f=$e(ut(l.latitude),ut(d.latitude));return f!==0?f:$e(ut(l.longitude),ut(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Gg(r.arrayValue,e.arrayValue);case 10:return(function(l,d){var f,g,_,E;const A=l.fields||{},b=d.fields||{},F=(f=A.value)===null||f===void 0?void 0:f.arrayValue,z=(g=b.value)===null||g===void 0?void 0:g.arrayValue,B=$e(((_=F?.values)===null||_===void 0?void 0:_.length)||0,((E=z?.values)===null||E===void 0?void 0:E.length)||0);return B!==0?B:Gg(F,z)})(r.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Ru.mapValue&&d===Ru.mapValue)return 0;if(l===Ru.mapValue)return 1;if(d===Ru.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),_=d.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let A=0;A<g.length&&A<E.length;++A){const b=$e(g[A],E[A]);if(b!==0)return b;const F=_o(f[g[A]],_[E[A]]);if(F!==0)return F}return $e(g.length,E.length)})(r.mapValue,e.mapValue);default:throw xe()}}function Kg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return $e(r,e);const t=wi(r),s=wi(e),o=$e(t.seconds,s.seconds);return o!==0?o:$e(t.nanos,s.nanos)}function Gg(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=_o(t[o],s[o]);if(l)return l}return $e(t.length,s.length)}function vo(r){return Oh(r)}function Oh(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=wi(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return us(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ve.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Oh(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of s)l?l=!1:o+=",",o+=`${d}:${Oh(t.fields[d])}`;return o+"}"})(r.mapValue):xe()}function Qg(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Lh(r){return!!r&&"integerValue"in r}function wf(r){return!!r&&"arrayValue"in r}function Yg(r){return!!r&&"nullValue"in r}function Xg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Bu(r){return!!r&&"mapValue"in r}function BI(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Da(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ds(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Da(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Da(r.arrayValue.values[t]);return e}return Object.assign({},r)}function $I(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Bu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Da(t)}setAll(e){let t=bt.emptyPath(),s={},o=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}d?s[f.lastSegment()]=Da(d):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Bu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Bu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ds(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new rn(Da(this.value))}}function q_(r){const e=[];return ds(r.fields,((t,s)=>{const o=new bt([t]);if(Bu(s)){const l=q_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new hn(e)}class zt{constructor(e,t,s,o,l,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=d,this.documentState=f}static newInvalidDocument(e){return new zt(e,0,Se.min(),Se.min(),Se.min(),rn.empty(),0)}static newFoundDocument(e,t,s,o){return new zt(e,1,t,Se.min(),s,o,0)}static newNoDocument(e,t){return new zt(e,2,t,Se.min(),Se.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new zt(e,3,t,Se.min(),Se.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rc{constructor(e,t){this.position=e,this.inclusive=t}}function Jg(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?s=ve.comparator(ve.fromName(d.referenceValue),t.key):s=_o(d,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Zg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!or(r.position[t],e.position[t]))return!1;return!0}class Wa{constructor(e,t="asc"){this.field=e,this.dir=t}}function qI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}let H_=class{};class ft extends H_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new WI(e,t,s):t==="array-contains"?new QI(e,s):t==="in"?new YI(e,s):t==="not-in"?new XI(e,s):t==="array-contains-any"?new JI(e,s):new ft(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new KI(e,s):new GI(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(_o(t,this.value)):t!==null&&cs(this.value)===cs(t)&&this.matchesComparison(_o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends H_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new $n(e,t)}matches(e){return W_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function W_(r){return r.op==="and"}function K_(r){return HI(r)&&W_(r)}function HI(r){for(const e of r.filters)if(e instanceof $n)return!1;return!0}function Mh(r){if(r instanceof ft)return r.field.canonicalString()+r.op.toString()+vo(r.value);if(K_(r))return r.filters.map((e=>Mh(e))).join(",");{const e=r.filters.map((t=>Mh(t))).join(",");return`${r.op}(${e})`}}function G_(r,e){return r instanceof ft?(function(s,o){return o instanceof ft&&s.op===o.op&&s.field.isEqual(o.field)&&or(s.value,o.value)})(r,e):r instanceof $n?(function(s,o){return o instanceof $n&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,d,f)=>l&&G_(d,o.filters[f])),!0):!1})(r,e):void xe()}function Q_(r){return r instanceof ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${vo(t.value)}`})(r):r instanceof $n?(function(t){return t.op.toString()+" {"+t.getFilters().map(Q_).join(" ,")+"}"})(r):"Filter"}class WI extends ft{constructor(e,t,s){super(e,t,s),this.key=ve.fromName(s.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class KI extends ft{constructor(e,t){super(e,"in",t),this.keys=Y_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class GI extends ft{constructor(e,t){super(e,"not-in",t),this.keys=Y_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Y_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((s=>ve.fromName(s.referenceValue)))}class QI extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wf(t)&&Ha(t.arrayValue,this.value)}}class YI extends ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ha(this.value.arrayValue,t)}}class XI extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ha(this.value.arrayValue,t)}}class JI extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Ha(this.value.arrayValue,s)))}}class ZI{constructor(e,t=null,s=[],o=[],l=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=d,this.endAt=f,this.ue=null}}function ey(r,e=null,t=[],s=[],o=null,l=null,d=null){return new ZI(r,e,t,s,o,l,d)}function Ef(r){const e=ke(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Mh(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),yc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>vo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>vo(s))).join(",")),e.ue=t}return e.ue}function Tf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!qI(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!G_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Zg(r.startAt,e.startAt)&&Zg(r.endAt,e.endAt)}function jh(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class ko{constructor(e,t=null,s=[],o=[],l=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ex(r,e,t,s,o,l,d,f){return new ko(r,e,t,s,o,l,d,f)}function If(r){return new ko(r)}function ty(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function X_(r){return r.collectionGroup!==null}function Va(r){const e=ke(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Dt(bt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(f=f.add(_.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Wa(l,s))})),t.has(bt.keyField().canonicalString())||e.ce.push(new Wa(bt.keyField(),s))}return e.ce}function ir(r){const e=ke(r);return e.le||(e.le=tx(e,Va(r))),e.le}function tx(r,e){if(r.limitType==="F")return ey(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Wa(o.field,l)}));const t=r.endAt?new rc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new rc(r.startAt.position,r.startAt.inclusive):null;return ey(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Fh(r,e){const t=r.filters.concat([e]);return new ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Uh(r,e,t){return new ko(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function _c(r,e){return Tf(ir(r),ir(e))&&r.limitType===e.limitType}function J_(r){return`${Ef(ir(r))}|lt:${r.limitType}`}function oo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Q_(o))).join(", ")}]`),yc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>vo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>vo(o))).join(",")),`Target(${s})`})(ir(r))}; limitType=${r.limitType})`}function vc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ve.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Va(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(d,f,g){const _=Jg(d,f,g);return d.inclusive?_<=0:_<0})(s.startAt,Va(s),o)||s.endAt&&!(function(d,f,g){const _=Jg(d,f,g);return d.inclusive?_>=0:_>0})(s.endAt,Va(s),o))})(r,e)}function nx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Z_(r){return(e,t)=>{let s=!1;for(const o of Va(r)){const l=rx(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function rx(r,e,t){const s=r.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,d,f){const g=d.data.field(l),_=f.data.field(l);return g!==null&&_!==null?_o(g,_):xe()})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return xe()}}class Ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return B_(this.inner)}size(){return this.innerSize}}const ix=new st(ve.comparator);function Or(){return ix}const ev=new st(ve.comparator);function Ca(...r){let e=ev;for(const t of r)e=e.insert(t.key,t);return e}function tv(r){let e=ev;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ts(){return Oa()}function nv(){return Oa()}function Oa(){return new Ao((r=>r.toString()),((r,e)=>r.isEqual(e)))}const sx=new st(ve.comparator),ox=new Dt(ve.comparator);function De(...r){let e=ox;for(const t of r)e=e.add(t);return e}const ax=new Dt($e);function lx(){return ax}function xf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function rv(r){return{integerValue:""+r}}function ux(r,e){return FI(e)?rv(e):xf(r,e)}class wc{constructor(){this._=void 0}}function cx(r,e,t){return r instanceof Ka?(function(o,l){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&_f(l)&&(l=vf(l)),l&&(d.fields.__previous_value__=l),{mapValue:d}})(t,e):r instanceof Ga?sv(r,e):r instanceof Qa?ov(r,e):(function(o,l){const d=iv(o,l),f=ny(d)+ny(o.Pe);return Lh(d)&&Lh(o.Pe)?rv(f):xf(o.serializer,f)})(r,e)}function dx(r,e,t){return r instanceof Ga?sv(r,e):r instanceof Qa?ov(r,e):t}function iv(r,e){return r instanceof ic?(function(s){return Lh(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Ka extends wc{}class Ga extends wc{constructor(e){super(),this.elements=e}}function sv(r,e){const t=av(e);for(const s of r.elements)t.some((o=>or(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Qa extends wc{constructor(e){super(),this.elements=e}}function ov(r,e){let t=av(e);for(const s of r.elements)t=t.filter((o=>!or(o,s)));return{arrayValue:{values:t}}}class ic extends wc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ny(r){return ut(r.integerValue||r.doubleValue)}function av(r){return wf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class hx{constructor(e,t){this.field=e,this.transform=t}}function fx(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Ga&&o instanceof Ga||s instanceof Qa&&o instanceof Qa?yo(s.elements,o.elements,or):s instanceof ic&&o instanceof ic?or(s.Pe,o.Pe):s instanceof Ka&&o instanceof Ka})(r.transform,e.transform)}class px{constructor(e,t){this.version=e,this.transformResults=t}}class Bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $u(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ec{}function lv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Sf(r.key,Bn.none()):new ol(r.key,r.data,Bn.none());{const t=r.data,s=rn.empty();let o=new Dt(bt.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?s.delete(l):s.set(l,d),o=o.add(l)}return new xi(r.key,s,new hn(o.toArray()),Bn.none())}}function mx(r,e,t){r instanceof ol?(function(o,l,d){const f=o.value.clone(),g=iy(o.fieldTransforms,l,d.transformResults);f.setAll(g),l.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(r,e,t):r instanceof xi?(function(o,l,d){if(!$u(o.precondition,l))return void l.convertToUnknownDocument(d.version);const f=iy(o.fieldTransforms,l,d.transformResults),g=l.data;g.setAll(uv(o)),g.setAll(f),l.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function La(r,e,t,s){return r instanceof ol?(function(l,d,f,g){if(!$u(l.precondition,d))return f;const _=l.value.clone(),E=sy(l.fieldTransforms,g,d);return _.setAll(E),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(r,e,t,s):r instanceof xi?(function(l,d,f,g){if(!$u(l.precondition,d))return f;const _=sy(l.fieldTransforms,g,d),E=d.data;return E.setAll(uv(l)),E.setAll(_),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((A=>A.field)))})(r,e,t,s):(function(l,d,f){return $u(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(r,e,t)}function gx(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=iv(s.transform,o||null);l!=null&&(t===null&&(t=rn.empty()),t.set(s.field,l))}return t||null}function ry(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&yo(s,o,((l,d)=>fx(l,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ol extends Ec{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xi extends Ec{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function uv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function iy(r,e,t){const s=new Map;We(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,f=e.data.field(l.field);s.set(l.field,dx(d,f,t[o]))}return s}function sy(r,e,t){const s=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);s.set(o.field,cx(l,d,e))}return s}class Sf extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yx extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _x{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&mx(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=La(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=La(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=nv();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let f=this.applyToLocalView(d,l.mutatedFields);f=t.has(o.key)?null:f;const g=lv(d,f);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,((t,s)=>ry(t,s)))&&yo(this.baseMutations,e.baseMutations,((t,s)=>ry(t,s)))}}class kf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){We(e.mutations.length===s.length);let o=(function(){return sx})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,s[d].version);return new kf(e,t,s,o)}}class vx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class wx{constructor(e,t){this.count=e,this.unchangedNames=t}}var ht,Me;function Ex(r){switch(r){default:return xe();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function cv(r){if(r===void 0)return Vr("GRPC error has no .code"),K.UNKNOWN;switch(r){case ht.OK:return K.OK;case ht.CANCELLED:return K.CANCELLED;case ht.UNKNOWN:return K.UNKNOWN;case ht.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ht.INTERNAL:return K.INTERNAL;case ht.UNAVAILABLE:return K.UNAVAILABLE;case ht.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ht.NOT_FOUND:return K.NOT_FOUND;case ht.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ht.ABORTED:return K.ABORTED;case ht.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ht.DATA_LOSS:return K.DATA_LOSS;default:return xe()}}(Me=ht||(ht={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";function Tx(){return new TextEncoder}const Ix=new ns([4294967295,4294967295],0);function oy(r){const e=Tx().encode(r),t=new V_;return t.update(e),new Uint8Array(t.digest())}function ay(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ns([t,s],0),new ns([o,l],0)]}class Af{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ra(`Invalid padding: ${t}`);if(s<0)throw new Ra(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ra(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ra(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ns.fromNumber(this.Ie)}Ee(e,t,s){let o=e.add(t.multiply(ns.fromNumber(s)));return o.compare(Ix)===1&&(o=new ns([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=oy(e),[s,o]=ay(t);for(let l=0;l<this.hashCount;l++){const d=this.Ee(s,o,l);if(!this.de(d))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new Af(l,o,t);return s.forEach((f=>d.insert(f))),d}insert(e){if(this.Ie===0)return;const t=oy(e),[s,o]=ay(t);for(let l=0;l<this.hashCount;l++){const d=this.Ee(s,o,l);this.Ae(d)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,al.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Tc(Se.min(),o,new st($e),Or(),De())}}class al{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new al(s,t,De(),De(),De())}}class qu{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class dv{constructor(e,t){this.targetId=e,this.me=t}}class hv{constructor(e,t,s=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class ly{constructor(){this.fe=0,this.ge=cy(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=De(),t=De(),s=De();return this.ge.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:xe()}})),new al(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=cy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xx{constructor(e){this.Le=e,this.Be=new Map,this.ke=Or(),this.qe=uy(),this.Qe=new st($e)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const s=this.Ge(t);switch(e.state){case 0:this.ze(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),s.De(e.resumeToken));break;default:xe()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((s,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,s=e.me.count,o=this.Je(t);if(o){const l=o.target;if(jh(l))if(s===0){const d=new ve(l.path);this.Ue(t,d,zt.newNoDocument(d,Se.min()))}else We(s===1);else{const d=this.Ye(t);if(d!==s){const f=this.Ze(e),g=f?this.Xe(f,e,d):1;if(g!==0){this.je(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,_)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let d,f;try{d=us(s).toUint8Array()}catch(g){if(g instanceof $_)return go("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Af(d,o,l)}catch(g){return go(g instanceof Ra?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.Ie===0?null:f}Xe(e,t,s){return t.me.count===s-this.nt(e,t.targetId)?0:2}nt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const d=this.Le.tt(),f=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Ue(t,l,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((l,d)=>{const f=this.Je(d);if(f){if(l.current&&jh(f.target)){const g=new ve(f.target.path);this.ke.get(g)!==null||this.it(d,g)||this.Ue(d,g,zt.newNoDocument(g,e))}l.be&&(t.set(d,l.ve()),l.Ce())}}));let s=De();this.qe.forEach(((l,d)=>{let f=!0;d.forEachWhile((g=>{const _=this.Je(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.ke.forEach(((l,d)=>d.setReadTime(e)));const o=new Tc(e,t,this.Qe,this.ke,s);return this.ke=Or(),this.qe=uy(),this.Qe=new st($e),o}$e(e,t){if(!this.ze(e))return;const s=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,s){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ly,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Dt($e),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ly),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function uy(){return new st(ve.comparator)}function cy(){return new st(ve.comparator)}const Sx={asc:"ASCENDING",desc:"DESCENDING"},kx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ax={and:"AND",or:"OR"};class Px{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zh(r,e){return r.useProto3Json||yc(e)?e:{value:e}}function sc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Cx(r,e){return sc(r,e.toTimestamp())}function sr(r){return We(!!r),Se.fromTimestamp((function(t){const s=wi(t);return new vt(s.seconds,s.nanos)})(r))}function Pf(r,e){return Bh(r,e).canonicalString()}function Bh(r,e){const t=(function(o){return new et(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function pv(r){const e=et.fromString(r);return We(vv(e)),e}function $h(r,e){return Pf(r.databaseId,e.path)}function wh(r,e){const t=pv(e);if(t.get(1)!==r.databaseId.projectId)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ve(gv(t))}function mv(r,e){return Pf(r.databaseId,e)}function Rx(r){const e=pv(r);return e.length===4?et.emptyPath():gv(e)}function qh(r){return new et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function gv(r){return We(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function dy(r,e,t){return{name:$h(r,e),fields:t.value.mapValue.fields}}function Nx(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:xe()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(_,E){return _.useProto3Json?(We(E===void 0||typeof E=="string"),Vt.fromBase64String(E||"")):(We(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Vt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(_){const E=_.code===void 0?K.UNKNOWN:cv(_.code);return new le(E,_.message||"")})(d);t=new hv(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=wh(r,s.document.name),l=sr(s.document.updateTime),d=s.document.createTime?sr(s.document.createTime):Se.min(),f=new rn({mapValue:{fields:s.document.fields}}),g=zt.newFoundDocument(o,l,d,f),_=s.targetIds||[],E=s.removedTargetIds||[];t=new qu(_,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=wh(r,s.document),l=s.readTime?sr(s.readTime):Se.min(),d=zt.newNoDocument(o,l),f=s.removedTargetIds||[];t=new qu([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=wh(r,s.document),l=s.removedTargetIds||[];t=new qu([],l,o,null)}else{if(!("filter"in e))return xe();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,d=new wx(o,l),f=s.targetId;t=new dv(f,d)}}return t}function bx(r,e){let t;if(e instanceof ol)t={update:dy(r,e.key,e.value)};else if(e instanceof Sf)t={delete:$h(r,e.key)};else if(e instanceof xi)t={update:dy(r,e.key,e.data),updateMask:zx(e.fieldMask)};else{if(!(e instanceof yx))return xe();t={verify:$h(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,d){const f=d.transform;if(f instanceof Ka)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ga)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Qa)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ic)return{fieldPath:d.field.canonicalString(),increment:f.Pe};throw xe()})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:Cx(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:xe()})(r,e.precondition)),t}function Dx(r,e){return r&&r.length>0?(We(e!==void 0),r.map((t=>(function(o,l){let d=o.updateTime?sr(o.updateTime):sr(l);return d.isEqual(Se.min())&&(d=sr(l)),new px(d,o.transformResults||[])})(t,e)))):[]}function Vx(r,e){return{documents:[mv(r,e.path)]}}function Ox(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=mv(r,o);const l=(function(_){if(_.length!==0)return _v($n.create(_,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(_){if(_.length!==0)return _.map((E=>(function(b){return{field:ao(b.field),direction:jx(b.dir)}})(E)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=zh(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{_t:t,parent:o}}function Lx(r){let e=Rx(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){We(s===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(A){const b=yv(A);return b instanceof $n&&K_(b)?b.getFilters():[b]})(t.where));let d=[];t.orderBy&&(d=(function(A){return A.map((b=>(function(z){return new Wa(lo(z.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(b)))})(t.orderBy));let f=null;t.limit&&(f=(function(A){let b;return b=typeof A=="object"?A.value:A,yc(b)?null:b})(t.limit));let g=null;t.startAt&&(g=(function(A){const b=!!A.before,F=A.values||[];return new rc(F,b)})(t.startAt));let _=null;return t.endAt&&(_=(function(A){const b=!A.before,F=A.values||[];return new rc(F,b)})(t.endAt)),ex(e,o,d,l,f,"F",g,_)}function Mx(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yv(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=lo(t.unaryFilter.field);return ft.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=lo(t.unaryFilter.field);return ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=lo(t.unaryFilter.field);return ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=lo(t.unaryFilter.field);return ft.create(d,"!=",{nullValue:"NULL_VALUE"});default:return xe()}})(r):r.fieldFilter!==void 0?(function(t){return ft.create(lo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return $n.create(t.compositeFilter.filters.map((s=>yv(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe()}})(t.compositeFilter.op))})(r):xe()}function jx(r){return Sx[r]}function Fx(r){return kx[r]}function Ux(r){return Ax[r]}function ao(r){return{fieldPath:r.canonicalString()}}function lo(r){return bt.fromServerFormat(r.fieldPath)}function _v(r){return r instanceof ft?(function(t){if(t.op==="=="){if(Xg(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NAN"}};if(Yg(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Xg(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NOT_NAN"}};if(Yg(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(t.field),op:Fx(t.op),value:t.value}}})(r):r instanceof $n?(function(t){const s=t.getFilters().map((o=>_v(o)));return s.length===1?s[0]:{compositeFilter:{op:Ux(t.op),filters:s}}})(r):xe()}function zx(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function vv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class fi{constructor(e,t,s,o,l=Se.min(),d=Se.min(),f=Vt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Bx{constructor(e){this.ct=e}}function $x(r){const e=Lx({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Uh(e,e.limit,"L"):e}class qx{constructor(){this.un=new Hx}addToCollectionParentIndex(e,t){return this.un.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(vi.min())}updateCollectionGroup(e,t,s){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class Hx{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Dt(et.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Dt(et.comparator)).toArray()}}class wo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wo(0)}static kn(){return new wo(-1)}}class Wx{constructor(){this.changes=new Ao((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Y.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Kx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Gx{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&La(s.mutation,o,hn.empty(),vt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,De()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=De()){const o=ts();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let d=Ca();return l.forEach(((f,g)=>{d=d.insert(f,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=ts();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,De())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,s,o){let l=Or();const d=Oa(),f=(function(){return Oa()})();return t.forEach(((g,_)=>{const E=s.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof xi)?l=l.insert(_.key,_):E!==void 0?(d.set(_.key,E.mutation.getFieldMask()),La(E.mutation,_,E.mutation.getFieldMask(),vt.now())):d.set(_.key,hn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((_,E)=>d.set(_,E))),t.forEach(((_,E)=>{var A;return f.set(_,new Kx(E,(A=d.get(_))!==null&&A!==void 0?A:null))})),f)))}recalculateAndSaveOverlays(e,t){const s=Oa();let o=new st(((d,f)=>d-f)),l=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((g=>{const _=t.get(g);if(_===null)return;let E=s.get(g)||hn.empty();E=f.applyToLocalView(_,E),s.set(g,E);const A=(o.get(f.batchId)||De()).add(g);o=o.insert(f.batchId,A)}))})).next((()=>{const d=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),_=g.key,E=g.value,A=nv();E.forEach((b=>{if(!l.has(b)){const F=lv(t.get(b),s.get(b));F!==null&&A.set(b,F),l=l.add(b)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,A))}return Y.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):X_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):Y.resolve(ts());let f=-1,g=l;return d.next((_=>Y.forEach(_,((E,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),l.get(E)?Y.resolve():this.remoteDocumentCache.getEntry(e,E).next((b=>{g=g.insert(E,b)}))))).next((()=>this.populateOverlays(e,_,l))).next((()=>this.computeViews(e,g,_,De()))).next((E=>({batchId:f,changes:tv(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((s=>{let o=Ca();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let d=Ca();return this.indexManager.getCollectionParents(e,l).next((f=>Y.forEach(f,(g=>{const _=(function(A,b){return new ko(b,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,s,o).next((E=>{E.forEach(((A,b)=>{d=d.insert(A,b)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((d=>{l.forEach(((g,_)=>{const E=_.getKey();d.get(E)===null&&(d=d.insert(E,zt.newInvalidDocument(E)))}));let f=Ca();return d.forEach(((g,_)=>{const E=l.get(g);E!==void 0&&La(E.mutation,_,hn.empty(),vt.now()),vc(t,_)&&(f=f.insert(g,_))})),f}))}}class Qx{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Y.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:sr(o.createTime)}})(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:$x(o.bundledQuery),readTime:sr(o.readTime)}})(t)),Y.resolve()}}class Yx{constructor(){this.overlays=new st(ve.comparator),this.Ir=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ts();return Y.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.ht(e,t,l)})),Y.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Ir.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(s)),Y.resolve()}getOverlaysForCollection(e,t,s){const o=ts(),l=t.length+1,d=new ve(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return Y.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new st(((_,E)=>_-E));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>s){let E=l.get(_.largestBatchId);E===null&&(E=ts(),l=l.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const f=ts(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,E)=>f.set(_,E))),!(f.size()>=o)););return Y.resolve(f)}ht(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Ir.get(o.largestBatchId).delete(s.key);this.Ir.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new vx(t,s));let l=this.Ir.get(t);l===void 0&&(l=De(),this.Ir.set(t,l)),this.Ir.set(t,l.add(s.key))}}class Xx{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}class Cf{constructor(){this.Tr=new Dt(St.Er),this.dr=new Dt(St.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const s=new St(e,t);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Vr(new St(e,t))}mr(e,t){e.forEach((s=>this.removeReference(s,t)))}gr(e){const t=new ve(new et([])),s=new St(t,e),o=new St(t,e+1),l=[];return this.dr.forEachInRange([s,o],(d=>{this.Vr(d),l.push(d.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ve(new et([])),s=new St(t,e),o=new St(t,e+1);let l=De();return this.dr.forEachInRange([s,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new St(e,0),s=this.Tr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class St{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ve.comparator(e.key,t.key)||$e(e.wr,t.wr)}static Ar(e,t){return $e(e.wr,t.wr)||ve.comparator(e.key,t.key)}}class Jx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Dt(St.Er)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new _x(l,t,s,o);this.mutationQueue.push(d);for(const f of o)this.br=this.br.add(new St(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Y.resolve(d)}lookupMutationBatch(e,t){return Y.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.vr(s),l=o<0?0:o;return Y.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new St(t,0),o=new St(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([s,o],(d=>{const f=this.Dr(d.wr);l.push(f)})),Y.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Dt($e);return t.forEach((o=>{const l=new St(o,0),d=new St(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,d],(f=>{s=s.add(f.wr)}))})),Y.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ve.isDocumentKey(l)||(l=l.child(""));const d=new St(new ve(l),0);let f=new Dt($e);return this.br.forEachWhile((g=>{const _=g.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(f=f.add(g.wr)),!0)}),d),Y.resolve(this.Cr(f))}Cr(e){const t=[];return e.forEach((s=>{const o=this.Dr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return Y.forEach(t.mutations,(o=>{const l=new St(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=s}))}On(e){}containsKey(e,t){const s=new St(t,0),o=this.br.firstAfterOrEqual(s);return Y.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Zx{constructor(e){this.Mr=e,this.docs=(function(){return new st(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,d=this.Mr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Y.resolve(s?s.document.mutableCopy():zt.newInvalidDocument(t))}getEntries(e,t){let s=Or();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():zt.newInvalidDocument(o))})),Y.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Or();const d=t.path,f=new ve(d.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||OI(VI(E),s)<=0||(o.has(E.key)||vc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Y.resolve(l)}getAllFromCollectionGroup(e,t,s,o){xe()}Or(e,t){return Y.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new eS(this)}getSize(e){return Y.resolve(this.size)}}class eS extends Wx{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(s)})),Y.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class tS{constructor(e){this.persistence=e,this.Nr=new Ao((t=>Ef(t)),Tf),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cf,this.targetCount=0,this.kr=wo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((s,o)=>t(o))),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Lr&&(this.Lr=t),Y.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new wo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.Kn(t),Y.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.Nr.forEach(((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.Nr.delete(d),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),Y.waitFor(l).next((()=>o))}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const s=this.Nr.get(t)||null;return Y.resolve(s)}addMatchingKeys(e,t,s){return this.Br.Rr(t,s),Y.resolve()}removeMatchingKeys(e,t,s){this.Br.mr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),Y.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Br.yr(t);return Y.resolve(s)}containsKey(e,t){return Y.resolve(this.Br.containsKey(t))}}class nS{constructor(e,t){this.qr={},this.overlays={},this.Qr=new yf(0),this.Kr=!1,this.Kr=!0,this.$r=new Xx,this.referenceDelegate=e(this),this.Ur=new tS(this),this.indexManager=new qx,this.remoteDocumentCache=(function(o){return new Zx(o)})((s=>this.referenceDelegate.Wr(s))),this.serializer=new Bx(t),this.Gr=new Qx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Yx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.qr[e.toKey()];return s||(s=new Jx(t,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,s){fe("MemoryPersistence","Starting transaction:",e);const o=new rS(this.Qr.next());return this.referenceDelegate.zr(),s(o).next((l=>this.referenceDelegate.jr(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Hr(e,t){return Y.or(Object.values(this.qr).map((s=>()=>s.containsKey(e,t))))}}class rS extends MI{constructor(e){super(),this.currentSequenceNumber=e}}class Rf{constructor(e){this.persistence=e,this.Jr=new Cf,this.Yr=null}static Zr(e){return new Rf(e)}get Xr(){if(this.Yr)return this.Yr;throw xe()}addReference(e,t,s){return this.Jr.addReference(s,t),this.Xr.delete(s.toString()),Y.resolve()}removeReference(e,t,s){return this.Jr.removeReference(s,t),this.Xr.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.Xr.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Xr,(s=>{const o=ve.fromPath(s);return this.ei(e,o).next((l=>{l||t.removeEntry(o,Se.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((s=>{s?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Y.or([()=>Y.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Nf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.$i=s,this.Ui=o}static Wi(e,t){let s=De(),o=De();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Nf(e,t.fromCache,s,o)}}class iS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class sS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Ww()?8:jI(Bt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.Yi(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.Zi(e,t,o,s).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new iS;return this.Xi(e,t,d).next((f=>{if(l.result=f,this.zi)return this.es(e,t,d,f.size)}))})).next((()=>l.result))}es(e,t,s,o){return s.documentReadCount<this.ji?(Sa()<=Oe.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Y.resolve()):(Sa()<=Oe.DEBUG&&fe("QueryEngine","Query:",oo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Hi*o?(Sa()<=Oe.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ir(t))):Y.resolve())}Yi(e,t){if(ty(t))return Y.resolve(null);let s=ir(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Uh(t,null,"F"),s=ir(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const d=De(...l);return this.Ji.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const _=this.ts(t,f);return this.ns(t,_,d,g.readTime)?this.Yi(e,Uh(t,null,"F")):this.rs(e,_,t,g)}))))})))))}Zi(e,t,s,o){return ty(t)||o.isEqual(Se.min())?Y.resolve(null):this.Ji.getDocuments(e,s).next((l=>{const d=this.ts(t,l);return this.ns(t,d,s,o)?Y.resolve(null):(Sa()<=Oe.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oo(t)),this.rs(e,d,t,DI(o,-1)).next((f=>f)))}))}ts(e,t){let s=new Dt(Z_(e));return t.forEach(((o,l)=>{vc(e,l)&&(s=s.add(l))})),s}ns(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,t,s){return Sa()<=Oe.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",oo(t)),this.Ji.getDocumentsMatchingQuery(e,t,vi.min(),s)}rs(e,t,s,o){return this.Ji.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}class oS{constructor(e,t,s,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new st($e),this._s=new Ao((l=>Ef(l)),Tf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gx(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function aS(r,e,t,s){return new oS(r,e,t,s)}async function wv(r,e){const t=ke(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.ls(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const d=[],f=[];let g=De();for(const _ of o){d.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of l){f.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(s,g).next((_=>({hs:_,removedBatchIds:d,addedBatchIds:f})))}))}))}function lS(r,e){const t=ke(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return(function(f,g,_,E){const A=_.batch,b=A.keys();let F=Y.resolve();return b.forEach((z=>{F=F.next((()=>E.getEntry(g,z))).next((B=>{const q=_.docVersions.get(z);We(q!==null),B.version.compareTo(q)<0&&(A.applyToRemoteDocument(B,_),B.isValidDocument()&&(B.setReadTime(_.commitVersion),E.addEntry(B)))}))})),F.next((()=>f.mutationQueue.removeMutationBatch(g,A)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=De();for(let _=0;_<f.mutationResults.length;++_)f.mutationResults[_].transformResults.length>0&&(g=g.add(f.batch.mutations[_].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Ev(r){const e=ke(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function uS(r,e){const t=ke(r),s=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const f=[];e.targetChanges.forEach(((E,A)=>{const b=o.get(A);if(!b)return;f.push(t.Ur.removeMatchingKeys(l,E.removedDocuments,A).next((()=>t.Ur.addMatchingKeys(l,E.addedDocuments,A))));let F=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(A)!==null?F=F.withResumeToken(Vt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):E.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(E.resumeToken,s)),o=o.insert(A,F),(function(B,q,J){return B.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(b,F,E)&&f.push(t.Ur.updateTargetData(l,F))}));let g=Or(),_=De();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),f.push(cS(l,d,e.documentUpdates).next((E=>{g=E.Ps,_=E.Is}))),!s.isEqual(Se.min())){const E=t.Ur.getLastRemoteSnapshotVersion(l).next((A=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(E)}return Y.waitFor(f).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,_))).next((()=>g))})).then((l=>(t.os=o,l)))}function cS(r,e,t){let s=De(),o=De();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let d=Or();return t.forEach(((f,g)=>{const _=l.get(f);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Se.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):fe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",_.version," Watch version:",g.version)})),{Ps:d,Is:o}}))}function dS(r,e){const t=ke(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function hS(r,e){const t=ke(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Ur.getTargetData(s,e).next((l=>l?(o=l,Y.resolve(o)):t.Ur.allocateTargetId(s).next((d=>(o=new fi(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Ur.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.os.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(s.targetId,s),t._s.set(e,s.targetId)),s}))}async function Hh(r,e,t){const s=ke(r),o=s.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!sl(d))throw d;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}s.os=s.os.remove(e),s._s.delete(o.target)}function hy(r,e,t){const s=ke(r);let o=Se.min(),l=De();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,_,E){const A=ke(g),b=A._s.get(E);return b!==void 0?Y.resolve(A.os.get(b)):A.Ur.getTargetData(_,E)})(s,d,ir(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(d,f.targetId).next((g=>{l=g}))})).next((()=>s.ss.getDocumentsMatchingQuery(d,e,t?o:Se.min(),t?l:De()))).next((f=>(fS(s,nx(e),f),{documents:f,Ts:l})))))}function fS(r,e,t){let s=r.us.get(e)||Se.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.us.set(e,s)}class fy{constructor(){this.activeTargetIds=lx()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pS{constructor(){this.so=new fy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,s){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mS{_o(e){}shutdown(){}}class py{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Nu=null;function Eh(){return Nu===null?Nu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nu++,"0x"+Nu.toString(16)}const gS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ft="WebChannelConnection";class _S extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+t.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(t,s,o,l,d){const f=Eh(),g=this.xo(t,s.toUriEncodedString());fe("RestConnection",`Sending RPC '${t}' ${f}:`,g,o);const _={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(_,l,d),this.No(t,g,_,o).then((E=>(fe("RestConnection",`Received RPC '${t}' ${f}: `,E),E)),(E=>{throw go("RestConnection",`RPC '${t}' ${f} failed with error: `,E,"url: ",g,"request:",o),E}))}Lo(t,s,o,l,d,f){return this.Mo(t,s,o,l,d)}Oo(t,s,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+So})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((l,d)=>t[d]=l)),o&&o.headers.forEach(((l,d)=>t[d]=l))}xo(t,s){const o=gS[t];return`${this.Do}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,s,o){const l=Eh();return new Promise(((d,f)=>{const g=new O_;g.setWithCredentials(!0),g.listenOnce(L_.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case zu.NO_ERROR:const E=g.getResponseJson();fe(Ft,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),d(E);break;case zu.TIMEOUT:fe(Ft,`RPC '${e}' ${l} timed out`),f(new le(K.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:const A=g.getStatus();if(fe(Ft,`RPC '${e}' ${l} failed with status:`,A,"response text:",g.getResponseText()),A>0){let b=g.getResponseJson();Array.isArray(b)&&(b=b[0]);const F=b?.error;if(F&&F.status&&F.message){const z=(function(q){const J=q.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(J)>=0?J:K.UNKNOWN})(F.status);f(new le(z,F.message))}else f(new le(K.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new le(K.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{fe(Ft,`RPC '${e}' ${l} completed.`)}}));const _=JSON.stringify(o);fe(Ft,`RPC '${e}' ${l} sending request:`,o),g.send(t,"POST",_,s,15)}))}Bo(e,t,s){const o=Eh(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=F_(),f=j_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const E=l.join("");fe(Ft,`Creating RPC '${e}' stream ${o}: ${E}`,g);const A=d.createWebChannel(E,g);let b=!1,F=!1;const z=new yS({Io:q=>{F?fe(Ft,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(b||(fe(Ft,`Opening RPC '${e}' stream ${o} transport.`),A.open(),b=!0),fe(Ft,`RPC '${e}' stream ${o} sending:`,q),A.send(q))},To:()=>A.close()}),B=(q,J,ne)=>{q.listen(J,(ee=>{try{ne(ee)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return B(A,Pa.EventType.OPEN,(()=>{F||(fe(Ft,`RPC '${e}' stream ${o} transport opened.`),z.yo())})),B(A,Pa.EventType.CLOSE,(()=>{F||(F=!0,fe(Ft,`RPC '${e}' stream ${o} transport closed`),z.So())})),B(A,Pa.EventType.ERROR,(q=>{F||(F=!0,go(Ft,`RPC '${e}' stream ${o} transport errored:`,q),z.So(new le(K.UNAVAILABLE,"The operation could not be completed")))})),B(A,Pa.EventType.MESSAGE,(q=>{var J;if(!F){const ne=q.data[0];We(!!ne);const ee=ne,oe=ee.error||((J=ee[0])===null||J===void 0?void 0:J.error);if(oe){fe(Ft,`RPC '${e}' stream ${o} received error:`,oe);const Ce=oe.status;let ye=(function(x){const P=ht[x];if(P!==void 0)return cv(P)})(Ce),C=oe.message;ye===void 0&&(ye=K.INTERNAL,C="Unknown error status: "+Ce+" with message "+oe.message),F=!0,z.So(new le(ye,C)),A.close()}else fe(Ft,`RPC '${e}' stream ${o} received:`,ne),z.bo(ne)}})),B(f,M_.STAT_EVENT,(q=>{q.stat===Vh.PROXY?fe(Ft,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===Vh.NOPROXY&&fe(Ft,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.wo()}),0),z}}function Th(){return typeof document<"u"?document:null}function Ic(r){return new Px(r,!0)}class Tv{constructor(e,t,s=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=s,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-s);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Iv{constructor(e,t,s,o,l,d,f,g){this.ui=e,this.Ho=s,this.Jo=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tv(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.Yo===t&&this.P_(s,o)}),(s=>{e((()=>{const o=new le(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(o)}))}))}P_(e,t){const s=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{s((()=>this.listener.Eo()))})),this.stream.Ro((()=>{s((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{s((()=>this.I_(o)))})),this.stream.onMessage((o=>{s((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vS extends Iv{constructor(e,t,s,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=Nx(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Se.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Se.min():d.readTime?sr(d.readTime):Se.min()})(e);return this.listener.d_(t,s)}A_(e){const t={};t.database=qh(this.serializer),t.addTarget=(function(l,d){let f;const g=d.target;if(f=jh(g)?{documents:Vx(l,g)}:{query:Ox(l,g)._t},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=fv(l,d.resumeToken);const _=zh(l,d.expectedCount);_!==null&&(f.expectedCount=_)}else if(d.snapshotVersion.compareTo(Se.min())>0){f.readTime=sc(l,d.snapshotVersion.toTimestamp());const _=zh(l,d.expectedCount);_!==null&&(f.expectedCount=_)}return f})(this.serializer,e);const s=Mx(this.serializer,e);s&&(t.labels=s),this.a_(t)}R_(e){const t={};t.database=qh(this.serializer),t.removeTarget=e,this.a_(t)}}class wS extends Iv{constructor(e,t,s,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=Dx(e.writeResults,e.commitTime),s=sr(e.commitTime);return this.listener.g_(s,t)}p_(){const e={};e.database=qh(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>bx(this.serializer,s)))};this.a_(t)}}class ES extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Mo(e,Bh(t,s),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(K.UNKNOWN,l.toString())}))}Lo(e,t,s,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Lo(e,Bh(t,s),o,d,f,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new le(K.UNKNOWN,d.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class TS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vr(t),this.D_=!1):fe("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class IS{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((d=>{s.enqueueAndForget((async()=>{hs(this)&&(fe("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const _=ke(g);_.L_.add(4),await ll(_),_.q_.set("Unknown"),_.L_.delete(4),await xc(_)})(this))}))})),this.q_=new TS(s,o)}}async function xc(r){if(hs(r))for(const e of r.B_)await e(!0)}async function ll(r){for(const e of r.B_)await e(!1)}function xv(r,e){const t=ke(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Of(t)?Vf(t):Po(t).r_()&&Df(t,e))}function bf(r,e){const t=ke(r),s=Po(t);t.N_.delete(e),s.r_()&&Sv(t,e),t.N_.size===0&&(s.r_()?s.o_():hs(t)&&t.q_.set("Unknown"))}function Df(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Po(r).A_(e)}function Sv(r,e){r.Q_.xe(e),Po(r).R_(e)}function Vf(r){r.Q_=new xx({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Po(r).start(),r.q_.v_()}function Of(r){return hs(r)&&!Po(r).n_()&&r.N_.size>0}function hs(r){return ke(r).L_.size===0}function kv(r){r.Q_=void 0}async function xS(r){r.q_.set("Online")}async function SS(r){r.N_.forEach(((e,t)=>{Df(r,e)}))}async function kS(r,e){kv(r),Of(r)?(r.q_.M_(e),Vf(r)):r.q_.set("Unknown")}async function AS(r,e,t){if(r.q_.set("Online"),e instanceof hv&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const f of l.targetIds)o.N_.has(f)&&(await o.remoteSyncer.rejectListen(f,d),o.N_.delete(f),o.Q_.removeTarget(f))})(r,e)}catch(s){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await oc(r,s)}else if(e instanceof qu?r.Q_.Ke(e):e instanceof dv?r.Q_.He(e):r.Q_.We(e),!t.isEqual(Se.min()))try{const s=await Ev(r.localStore);t.compareTo(s)>=0&&await(function(l,d){const f=l.Q_.rt(d);return f.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.N_.get(_);E&&l.N_.set(_,E.withResumeToken(g.resumeToken,d))}})),f.targetMismatches.forEach(((g,_)=>{const E=l.N_.get(g);if(!E)return;l.N_.set(g,E.withResumeToken(Vt.EMPTY_BYTE_STRING,E.snapshotVersion)),Sv(l,g);const A=new fi(E.target,g,_,E.sequenceNumber);Df(l,A)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){fe("RemoteStore","Failed to raise snapshot:",s),await oc(r,s)}}async function oc(r,e,t){if(!sl(e))throw e;r.L_.add(1),await ll(r),r.q_.set("Offline"),t||(t=()=>Ev(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{fe("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await xc(r)}))}function Av(r,e){return e().catch((t=>oc(r,t,e)))}async function Sc(r){const e=ke(r),t=Ei(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;PS(e);)try{const o=await dS(e.localStore,s);if(o===null){e.O_.length===0&&t.o_();break}s=o.batchId,CS(e,o)}catch(o){await oc(e,o)}Pv(e)&&Cv(e)}function PS(r){return hs(r)&&r.O_.length<10}function CS(r,e){r.O_.push(e);const t=Ei(r);t.r_()&&t.V_&&t.m_(e.mutations)}function Pv(r){return hs(r)&&!Ei(r).n_()&&r.O_.length>0}function Cv(r){Ei(r).start()}async function RS(r){Ei(r).p_()}async function NS(r){const e=Ei(r);for(const t of r.O_)e.m_(t.mutations)}async function bS(r,e,t){const s=r.O_.shift(),o=kf.from(s,e,t);await Av(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Sc(r)}async function DS(r,e){e&&Ei(r).V_&&await(async function(s,o){if((function(d){return Ex(d)&&d!==K.ABORTED})(o.code)){const l=s.O_.shift();Ei(s).s_(),await Av(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Sc(s)}})(r,e),Pv(r)&&Cv(r)}async function my(r,e){const t=ke(r);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const s=hs(t);t.L_.add(3),await ll(t),s&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await xc(t)}async function VS(r,e){const t=ke(r);e?(t.L_.delete(2),await xc(t)):e||(t.L_.add(2),await ll(t),t.q_.set("Unknown"))}function Po(r){return r.K_||(r.K_=(function(t,s,o){const l=ke(t);return l.w_(),new vS(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Eo:xS.bind(null,r),Ro:SS.bind(null,r),mo:kS.bind(null,r),d_:AS.bind(null,r)}),r.B_.push((async e=>{e?(r.K_.s_(),Of(r)?Vf(r):r.q_.set("Unknown")):(await r.K_.stop(),kv(r))}))),r.K_}function Ei(r){return r.U_||(r.U_=(function(t,s,o){const l=ke(t);return l.w_(),new wS(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:RS.bind(null,r),mo:DS.bind(null,r),f_:NS.bind(null,r),g_:bS.bind(null,r)}),r.B_.push((async e=>{e?(r.U_.s_(),await Sc(r)):(await r.U_.stop(),r.O_.length>0&&(fe("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}class Lf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const d=Date.now()+s,f=new Lf(e,t,d,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mf(r,e){if(Vr("AsyncQueue",`${e}: ${r}`),sl(r))return new le(K.UNAVAILABLE,`${e}: ${r}`);throw r}class fo{constructor(e){this.comparator=e?(t,s)=>e(t,s)||ve.comparator(t.key,s.key):(t,s)=>ve.comparator(t.key,s.key),this.keyedMap=Ca(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new fo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new fo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class gy{constructor(){this.W_=new st(ve.comparator)}track(e){const t=e.doc.key,s=this.W_.get(t);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(t,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(t):e.type===1&&s.type===2?this.W_=this.W_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):xe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Eo{constructor(e,t,s,o,l,d,f,g,_){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,s,o,l){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new Eo(e,t,fo.emptySet(t),d,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class OS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class LS{constructor(){this.queries=yy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,s){const o=ke(t),l=o.queries;o.queries=yy(),l.forEach(((d,f)=>{for(const g of f.j_)g.onError(s)}))})(this,new le(K.ABORTED,"Firestore shutting down"))}}function yy(){return new Ao((r=>J_(r)),_c)}async function Rv(r,e){const t=ke(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.H_()&&e.J_()&&(s=2):(l=new OS,s=e.J_()?0:1);try{switch(s){case 0:l.z_=await t.onListen(o,!0);break;case 1:l.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const f=Mf(d,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&jf(t)}async function Nv(r,e){const t=ke(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const d=l.j_.indexOf(e);d>=0&&(l.j_.splice(d,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function MS(r,e){const t=ke(r);let s=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const f of d.j_)f.X_(o)&&(s=!0);d.z_=o}}s&&jf(t)}function jS(r,e,t){const s=ke(r),o=s.queries.get(e);if(o)for(const l of o.j_)l.onError(t);s.queries.delete(e)}function jf(r){r.Y_.forEach((e=>{e.next()}))}var Wh,_y;(_y=Wh||(Wh={})).ea="default",_y.Cache="cache";class bv{constructor(e,t,s){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Eo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const s=t!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wh.Cache}}class Dv{constructor(e){this.key=e}}class Vv{constructor(e){this.key=e}}class FS{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=De(),this.mutatedKeys=De(),this.Aa=Z_(e),this.Ra=new fo(this.Aa)}get Va(){return this.Ta}ma(e,t){const s=t?t.fa:new gy,o=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,A)=>{const b=o.get(E),F=vc(this.query,A)?A:null,z=!!b&&this.mutatedKeys.has(b.key),B=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let q=!1;b&&F?b.data.isEqual(F.data)?z!==B&&(s.track({type:3,doc:F}),q=!0):this.ga(b,F)||(s.track({type:2,doc:F}),q=!0,(g&&this.Aa(F,g)>0||_&&this.Aa(F,_)<0)&&(f=!0)):!b&&F?(s.track({type:0,doc:F}),q=!0):b&&!F&&(s.track({type:1,doc:b}),q=!0,(g||_)&&(f=!0)),q&&(F?(d=d.add(F),l=B?l.add(E):l.delete(E)):(d=d.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{Ra:d,fa:s,ns:f,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const d=e.fa.G_();d.sort(((E,A)=>(function(F,z){const B=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return B(F)-B(z)})(E.type,A.type)||this.Aa(E.doc,A.doc))),this.pa(s),o=o!=null&&o;const f=t&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,_=g!==this.Ea;return this.Ea=g,d.length!==0||_?{snapshot:new Eo(this.query,e.Ra,l,d,e.mutatedKeys,g===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new gy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=De(),this.Ra.forEach((s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))}));const t=[];return e.forEach((s=>{this.da.has(s)||t.push(new Vv(s))})),this.da.forEach((s=>{e.has(s)||t.push(new Dv(s))})),t}ba(e){this.Ta=e.Ts,this.da=De();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Eo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class US{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class zS{constructor(e){this.key=e,this.va=!1}}class BS{constructor(e,t,s,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Ca={},this.Fa=new Ao((f=>J_(f)),_c),this.Ma=new Map,this.xa=new Set,this.Oa=new st(ve.comparator),this.Na=new Map,this.La=new Cf,this.Ba={},this.ka=new Map,this.qa=wo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function $S(r,e,t=!0){const s=Uv(r);let o;const l=s.Fa.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await Ov(s,e,t,!0),o}async function qS(r,e){const t=Uv(r);await Ov(t,e,!0,!1)}async function Ov(r,e,t,s){const o=await hS(r.localStore,ir(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await HS(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&xv(r.remoteStore,o),f}async function HS(r,e,t,s,o){r.Ka=(A,b,F)=>(async function(B,q,J,ne){let ee=q.view.ma(J);ee.ns&&(ee=await hy(B.localStore,q.query,!1).then((({documents:C})=>q.view.ma(C,ee))));const oe=ne&&ne.targetChanges.get(q.targetId),Ce=ne&&ne.targetMismatches.get(q.targetId)!=null,ye=q.view.applyChanges(ee,B.isPrimaryClient,oe,Ce);return wy(B,q.targetId,ye.wa),ye.snapshot})(r,A,b,F);const l=await hy(r.localStore,e,!0),d=new FS(e,l.Ts),f=d.ma(l.documents),g=al.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),_=d.applyChanges(f,r.isPrimaryClient,g);wy(r,t,_.wa);const E=new US(e,t,d);return r.Fa.set(e,E),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),_.snapshot}async function WS(r,e,t){const s=ke(r),o=s.Fa.get(e),l=s.Ma.get(o.targetId);if(l.length>1)return s.Ma.set(o.targetId,l.filter((d=>!_c(d,e)))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Hh(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&bf(s.remoteStore,o.targetId),Kh(s,o.targetId)})).catch(il)):(Kh(s,o.targetId),await Hh(s.localStore,o.targetId,!0))}async function KS(r,e){const t=ke(r),s=t.Fa.get(e),o=t.Ma.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),bf(t.remoteStore,s.targetId))}async function GS(r,e,t){const s=tk(r);try{const o=await(function(d,f){const g=ke(d),_=vt.now(),E=f.reduce(((F,z)=>F.add(z.key)),De());let A,b;return g.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let z=Or(),B=De();return g.cs.getEntries(F,E).next((q=>{z=q,z.forEach(((J,ne)=>{ne.isValidDocument()||(B=B.add(J))}))})).next((()=>g.localDocuments.getOverlayedDocuments(F,z))).next((q=>{A=q;const J=[];for(const ne of f){const ee=gx(ne,A.get(ne.key).overlayedDocument);ee!=null&&J.push(new xi(ne.key,ee,q_(ee.value.mapValue),Bn.exists(!0)))}return g.mutationQueue.addMutationBatch(F,_,J,f)})).next((q=>{b=q;const J=q.applyToLocalDocumentSet(A,B);return g.documentOverlayCache.saveOverlays(F,q.batchId,J)}))})).then((()=>({batchId:b.batchId,changes:tv(A)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,f,g){let _=d.Ba[d.currentUser.toKey()];_||(_=new st($e)),_=_.insert(f,g),d.Ba[d.currentUser.toKey()]=_})(s,o.batchId,t),await ul(s,o.changes),await Sc(s.remoteStore)}catch(o){const l=Mf(o,"Failed to persist write");t.reject(l)}}async function Lv(r,e){const t=ke(r);try{const s=await uS(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Na.get(l);d&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.va=!0:o.modifiedDocuments.size>0?We(d.va):o.removedDocuments.size>0&&(We(d.va),d.va=!1))})),await ul(t,s,e)}catch(s){await il(s)}}function vy(r,e,t){const s=ke(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Fa.forEach(((l,d)=>{const f=d.view.Z_(e);f.snapshot&&o.push(f.snapshot)})),(function(d,f){const g=ke(d);g.onlineState=f;let _=!1;g.queries.forEach(((E,A)=>{for(const b of A.j_)b.Z_(f)&&(_=!0)})),_&&jf(g)})(s.eventManager,e),o.length&&s.Ca.d_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function QS(r,e,t){const s=ke(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Na.get(e),l=o&&o.key;if(l){let d=new st(ve.comparator);d=d.insert(l,zt.newNoDocument(l,Se.min()));const f=De().add(l),g=new Tc(Se.min(),new Map,new st($e),d,f);await Lv(s,g),s.Oa=s.Oa.remove(l),s.Na.delete(e),Ff(s)}else await Hh(s.localStore,e,!1).then((()=>Kh(s,e,t))).catch(il)}async function YS(r,e){const t=ke(r),s=e.batch.batchId;try{const o=await lS(t.localStore,e);jv(t,s,null),Mv(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ul(t,o)}catch(o){await il(o)}}async function XS(r,e,t){const s=ke(r);try{const o=await(function(d,f){const g=ke(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let E;return g.mutationQueue.lookupMutationBatch(_,f).next((A=>(We(A!==null),E=A.keys(),g.mutationQueue.removeMutationBatch(_,A)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E))).next((()=>g.localDocuments.getDocuments(_,E)))}))})(s.localStore,e);jv(s,e,t),Mv(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ul(s,o)}catch(o){await il(o)}}function Mv(r,e){(r.ka.get(e)||[]).forEach((t=>{t.resolve()})),r.ka.delete(e)}function jv(r,e,t){const s=ke(r);let o=s.Ba[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Ba[s.currentUser.toKey()]=o}}function Kh(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Ma.get(e))r.Fa.delete(s),t&&r.Ca.$a(s,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach((s=>{r.La.containsKey(s)||Fv(r,s)}))}function Fv(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(bf(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),Ff(r))}function wy(r,e,t){for(const s of t)s instanceof Dv?(r.La.addReference(s.key,e),JS(r,s)):s instanceof Vv?(fe("SyncEngine","Document no longer in limbo: "+s.key),r.La.removeReference(s.key,e),r.La.containsKey(s.key)||Fv(r,s.key)):xe()}function JS(r,e){const t=e.key,s=t.path.canonicalString();r.Oa.get(t)||r.xa.has(s)||(fe("SyncEngine","New document in limbo: "+t),r.xa.add(s),Ff(r))}function Ff(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new ve(et.fromString(e)),s=r.qa.next();r.Na.set(s,new zS(t)),r.Oa=r.Oa.insert(t,s),xv(r.remoteStore,new fi(ir(If(t.path)),s,"TargetPurposeLimboResolution",yf.oe))}}async function ul(r,e,t){const s=ke(r),o=[],l=[],d=[];s.Fa.isEmpty()||(s.Fa.forEach(((f,g)=>{d.push(s.Ka(g,e,t).then((_=>{var E;if((_||t)&&s.isPrimaryClient){const A=_?!_.fromCache:(E=t?.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(_){o.push(_);const A=Nf.Wi(g.targetId,_);l.push(A)}})))})),await Promise.all(d),s.Ca.d_(o),await(async function(g,_){const E=ke(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>Y.forEach(_,(b=>Y.forEach(b.$i,(F=>E.persistence.referenceDelegate.addReference(A,b.targetId,F))).next((()=>Y.forEach(b.Ui,(F=>E.persistence.referenceDelegate.removeReference(A,b.targetId,F)))))))))}catch(A){if(!sl(A))throw A;fe("LocalStore","Failed to update sequence numbers: "+A)}for(const A of _){const b=A.targetId;if(!A.fromCache){const F=E.os.get(b),z=F.snapshotVersion,B=F.withLastLimboFreeSnapshotVersion(z);E.os=E.os.insert(b,B)}}})(s.localStore,l))}async function ZS(r,e){const t=ke(r);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const s=await wv(t.localStore,e);t.currentUser=e,(function(l,d){l.ka.forEach((f=>{f.forEach((g=>{g.reject(new le(K.CANCELLED,d))}))})),l.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ul(t,s.hs)}}function ek(r,e){const t=ke(r),s=t.Na.get(e);if(s&&s.va)return De().add(s.key);{let o=De();const l=t.Ma.get(e);if(!l)return o;for(const d of l){const f=t.Fa.get(d);o=o.unionWith(f.view.Va)}return o}}function Uv(r){const e=ke(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ek.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QS.bind(null,e),e.Ca.d_=MS.bind(null,e.eventManager),e.Ca.$a=jS.bind(null,e.eventManager),e}function tk(r){const e=ke(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XS.bind(null,e),e}class ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ic(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return aS(this.persistence,new sS,e.initialUser,this.serializer)}Ga(e){return new nS(Rf.Zr,this.serializer)}Wa(e){return new pS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ac.provider={build:()=>new ac};class Gh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>vy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZS.bind(null,this.syncEngine),await VS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new LS})()}createDatastore(e){const t=Ic(e.databaseInfo.databaseId),s=(function(l){return new _S(l)})(e.databaseInfo);return(function(l,d,f,g){return new ES(l,d,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,d,f){return new IS(s,o,l,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>vy(this.syncEngine,t,0)),(function(){return py.D()?new py:new mS})())}createSyncEngine(e,t){return(function(o,l,d,f,g,_,E){const A=new BS(o,l,d,f,g,_);return E&&(A.Qa=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=ke(o);fe("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await ll(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Gh.provider={build:()=>new Gh};class zv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class nk{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ut.UNAUTHENTICATED,this.clientId=z_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async d=>{fe("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(fe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Mf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Ih(r,e){r.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await wv(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Ey(r,e){r.asyncQueue.verifyOperationInProgress();const t=await rk(r);fe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>my(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>my(e.remoteStore,o))),r._onlineComponents=e}async function rk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ih(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;go("Error using user provided cache. Falling back to memory cache: "+t),await Ih(r,new ac)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),await Ih(r,new ac);return r._offlineComponents}async function Bv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),await Ey(r,r._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),await Ey(r,new Gh))),r._onlineComponents}function ik(r){return Bv(r).then((e=>e.syncEngine))}async function $v(r){const e=await Bv(r),t=e.eventManager;return t.onListen=$S.bind(null,e.syncEngine),t.onUnlisten=WS.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qS.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=KS.bind(null,e.syncEngine),t}function sk(r,e,t={}){const s=new Rr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,f,g,_){const E=new zv({next:b=>{E.Za(),d.enqueueAndForget((()=>Nv(l,A)));const F=b.docs.has(f);!F&&b.fromCache?_.reject(new le(K.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&b.fromCache&&g&&g.source==="server"?_.reject(new le(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(b)},error:b=>_.reject(b)}),A=new bv(If(f.path),E,{includeMetadataChanges:!0,_a:!0});return Rv(l,A)})(await $v(r),r.asyncQueue,e,t,s))),s.promise}function ok(r,e,t={}){const s=new Rr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,f,g,_){const E=new zv({next:b=>{E.Za(),d.enqueueAndForget((()=>Nv(l,A))),b.fromCache&&g.source==="server"?_.reject(new le(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(b)},error:b=>_.reject(b)}),A=new bv(f,E,{includeMetadataChanges:!0,_a:!0});return Rv(l,A)})(await $v(r),r.asyncQueue,e,t,s))),s.promise}function qv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Ty=new Map;function Hv(r,e,t){if(!t)throw new le(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ak(r,e,t,s){if(e===!0&&s===!0)throw new le(K.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Iy(r){if(!ve.isDocumentKey(r))throw new le(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function xy(r){if(ve.isDocumentKey(r))throw new le(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function kc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xe()}function ar(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new le(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kc(r);throw new le(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}class Sy{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new le(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ak("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qv((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ac{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sy(e),e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new xI;switch(s.type){case"firstParty":return new PI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Ty.get(t);s&&(fe("ComponentProvider","Removing Datastore"),Ty.delete(t),s.terminate())})(this),Promise.resolve()}}function lk(r,e,t,s={}){var o;const l=(r=ar(r,Ac))._getSettings(),d=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==d&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:d,ssl:!1})),s.mockUserToken){let f,g;if(typeof s.mockUserToken=="string")f=s.mockUserToken,g=Ut.MOCK_USER;else{f=Fw(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const _=s.mockUserToken.sub||s.mockUserToken.user_id;if(!_)throw new le(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ut(_)}r._authCredentials=new SI(new U_(f,g))}}class fs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new fs(this.firestore,e,this._query)}}class Gt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}}class _i extends fs{constructor(e,t,s){super(e,t,If(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ve(e))}withConverter(e){return new _i(this.firestore,e,this._path)}}function uk(r,e,...t){if(r=kt(r),Hv("collection","path",e),r instanceof Ac){const s=et.fromString(e,...t);return xy(s),new _i(r,null,s)}{if(!(r instanceof Gt||r instanceof _i))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(et.fromString(e,...t));return xy(s),new _i(r.firestore,null,s)}}function po(r,e,...t){if(r=kt(r),arguments.length===1&&(e=z_.newId()),Hv("doc","path",e),r instanceof Ac){const s=et.fromString(e,...t);return Iy(s),new Gt(r,null,new ve(s))}{if(!(r instanceof Gt||r instanceof _i))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(et.fromString(e,...t));return Iy(s),new Gt(r.firestore,r instanceof _i?r.converter:null,new ve(s))}}class ky{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Tv(this,"async_queue_retry"),this.Vu=()=>{const s=Th();s&&fe("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const t=Th();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Th();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Rr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sl(e))throw e;fe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((s=>{this.Eu=s,this.du=!1;const o=(function(d){let f=d.message||"";return d.stack&&(f=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),f})(s);throw Vr("INTERNAL UNHANDLED ERROR: ",o),s})).then((s=>(this.du=!1,s))))));return this.mu=t,t}enqueueAfterDelay(e,t,s){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Lf.createAndSchedule(this,e,t,s,(l=>this.yu(l)));return this.Tu.push(o),o}fu(){this.Eu&&xe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Co extends Ac{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new ky,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ky(e),this._firestoreClient=void 0,await e}}}function ck(r,e){const t=typeof r=="object"?r:Xy(),s=typeof r=="string"?r:"(default)",o=rf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=Mw("firestore");l&&lk(o,...l)}return o}function Uf(r){if(r._terminated)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||dk(r),r._firestoreClient}function dk(r){var e,t,s;const o=r._freezeSettings(),l=(function(f,g,_,E){return new zI(f,g,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,qv(E.experimentalLongPollingOptions),E.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new nk(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(f){const g=f?._online.build();return{_offline:f?._offline.build(g),_online:g}})(r._componentsProvider))}class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(Vt.fromBase64String(e))}catch(t){throw new le(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new To(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cc{constructor(e){this._methodName=e}}class zf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}class Bf{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}}const hk=/^__.*__$/;class fk{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new xi(e,this.data,this.fieldMask,t,this.fieldTransforms):new ol(e,this.data,t,this.fieldTransforms)}}class Wv{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new xi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class $f{constructor(e,t,s,o,l,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $f(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:s,xu:!1});return o.Ou(e),o}Nu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:s,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return lc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Kv(this.Cu)&&hk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class pk{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Ic(e)}Qu(e,t,s,o=!1){return new $f({Cu:e,methodName:t,qu:s,path:bt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qf(r){const e=r._freezeSettings(),t=Ic(r._databaseId);return new pk(r._databaseId,!!e.ignoreUndefinedProperties,t)}function mk(r,e,t,s,o,l={}){const d=r.Qu(l.merge||l.mergeFields?2:0,e,t,o);Wf("Data must be an object, but it was:",d,s);const f=Gv(s,d);let g,_;if(l.merge)g=new hn(d.fieldMask),_=d.fieldTransforms;else if(l.mergeFields){const E=[];for(const A of l.mergeFields){const b=Qh(e,A,t);if(!d.contains(b))throw new le(K.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Yv(E,b)||E.push(b)}g=new hn(E),_=d.fieldTransforms.filter((A=>g.covers(A.field)))}else g=null,_=d.fieldTransforms;return new fk(new rn(f),g,_)}class Rc extends Cc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rc}}class Hf extends Cc{_toFieldTransform(e){return new hx(e.path,new Ka)}isEqual(e){return e instanceof Hf}}function gk(r,e,t,s){const o=r.Qu(1,e,t);Wf("Data must be an object, but it was:",o,s);const l=[],d=rn.empty();ds(s,((g,_)=>{const E=Kf(e,g,t);_=kt(_);const A=o.Nu(E);if(_ instanceof Rc)l.push(E);else{const b=cl(_,A);b!=null&&(l.push(E),d.set(E,b))}}));const f=new hn(l);return new Wv(d,f,o.fieldTransforms)}function yk(r,e,t,s,o,l){const d=r.Qu(1,e,t),f=[Qh(e,s,t)],g=[o];if(l.length%2!=0)throw new le(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)f.push(Qh(e,l[b])),g.push(l[b+1]);const _=[],E=rn.empty();for(let b=f.length-1;b>=0;--b)if(!Yv(_,f[b])){const F=f[b];let z=g[b];z=kt(z);const B=d.Nu(F);if(z instanceof Rc)_.push(F);else{const q=cl(z,B);q!=null&&(_.push(F),E.set(F,q))}}const A=new hn(_);return new Wv(E,A,d.fieldTransforms)}function _k(r,e,t,s=!1){return cl(t,r.Qu(s?4:3,e))}function cl(r,e){if(Qv(r=kt(r)))return Wf("Unsupported field value:",e,r),Gv(r,e);if(r instanceof Cc)return(function(s,o){if(!Kv(o.Cu))throw o.Bu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(s,o){const l=[];let d=0;for(const f of s){let g=cl(f,o.Lu(d));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),d++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=kt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ux(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=vt.fromDate(s);return{timestampValue:sc(o.serializer,l)}}if(s instanceof vt){const l=new vt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:sc(o.serializer,l)}}if(s instanceof zf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof To)return{bytesValue:fv(o.serializer,s._byteString)};if(s instanceof Gt){const l=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(l))throw o.Bu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Pf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Bf)return(function(d,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw f.Bu("VectorValues must only contain numeric values.");return xf(f.serializer,g)}))}}}}}})(s,o);throw o.Bu(`Unsupported field value: ${kc(s)}`)})(r,e)}function Gv(r,e){const t={};return B_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(r,((s,o)=>{const l=cl(o,e.Mu(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function Qv(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof vt||r instanceof zf||r instanceof To||r instanceof Gt||r instanceof Cc||r instanceof Bf)}function Wf(r,e,t){if(!Qv(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const s=kc(t);throw s==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+s)}}function Qh(r,e,t){if((e=kt(e))instanceof Pc)return e._internalPath;if(typeof e=="string")return Kf(r,e);throw lc("Field path arguments must be of type string or ",r,!1,void 0,t)}const vk=new RegExp("[~\\*/\\[\\]]");function Kf(r,e,t){if(e.search(vk)>=0)throw lc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Pc(...e.split("."))._internalPath}catch{throw lc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function lc(r,e,t,s,o){const l=s&&!s.isEmpty(),d=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||d)&&(g+=" (found",l&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new le(K.INVALID_ARGUMENT,f+r+g)}function Yv(r,e){return r.some((t=>t.isEqual(e)))}class Xv{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Nc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wk extends Xv{data(){return super.data()}}function Nc(r,e){return typeof e=="string"?Kf(r,e):e instanceof Pc?e._internalPath:e._delegate._internalPath}function Ek(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new le(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gf{}class Jv extends Gf{}function Ay(r,e,...t){let s=[];e instanceof Gf&&s.push(e),s=s.concat(t),(function(l){const d=l.filter((g=>g instanceof Qf)).length,f=l.filter((g=>g instanceof bc)).length;if(d>1||d>0&&f>0)throw new le(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class bc extends Jv{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new bc(e,t,s)}_apply(e){const t=this._parse(e);return Zv(e._query,t),new fs(e.firestore,e.converter,Fh(e._query,t))}_parse(e){const t=qf(e.firestore);return(function(l,d,f,g,_,E,A){let b;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new le(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Ry(A,E);const F=[];for(const z of A)F.push(Cy(g,l,z));b={arrayValue:{values:F}}}else b=Cy(g,l,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Ry(A,E),b=_k(f,d,A,E==="in"||E==="not-in");return ft.create(_,E,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Tk(r,e,t){const s=e,o=Nc("where",r);return bc._create(o,s,t)}class Qf extends Gf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qf(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:$n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let d=o;const f=l.getFlattenedFilters();for(const g of f)Zv(d,g),d=Fh(d,g)})(e._query,t),new fs(e.firestore,e.converter,Fh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yf extends Jv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Yf(e,t)}_apply(e){const t=(function(o,l,d){if(o.startAt!==null)throw new le(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new le(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wa(l,d)})(e._query,this._field,this._direction);return new fs(e.firestore,e.converter,(function(o,l){const d=o.explicitOrderBy.concat([l]);return new ko(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Py(r,e="asc"){const t=e,s=Nc("orderBy",r);return Yf._create(s,t)}function Cy(r,e,t){if(typeof(t=kt(t))=="string"){if(t==="")throw new le(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X_(e)&&t.indexOf("/")!==-1)throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(et.fromString(t));if(!ve.isDocumentKey(s))throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Qg(r,new ve(s))}if(t instanceof Gt)return Qg(r,t._key);throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kc(t)}.`)}function Ry(r,e){if(!Array.isArray(r)||r.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zv(r,e){const t=(function(o,l){for(const d of o)for(const f of d.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Ik{convertValue(e,t="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ds(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map((d=>ut(d.doubleValue)));return new Bf(l)}convertGeoPoint(e){return new zf(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=vf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp($a(e));default:return null}}convertTimestamp(e){const t=wi(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=et.fromString(e);We(vv(s));const o=new qa(s.get(1),s.get(3)),l=new ve(s.popFirst(5));return o.isEqual(t)||Vr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function xk(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Na{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class e0 extends Xv{constructor(e,t,s,o,l,d){super(e,t,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Nc("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Hu extends e0{data(e={}){return super.data(e)}}class Sk{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Na(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Hu(this._firestore,this._userDataWriter,s.key,s,new Na(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((f=>{const g=new Hu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Na(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Hu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Na(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return f.type!==0&&(_=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),E=d.indexOf(f.doc.key)),{type:kk(f.type),doc:g,oldIndex:_,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}function Ak(r){r=ar(r,Gt);const e=ar(r.firestore,Co);return sk(Uf(e),r._key).then((t=>Rk(e,r,t)))}class t0 extends Ik{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function Pk(r){r=ar(r,fs);const e=ar(r.firestore,Co),t=Uf(e),s=new t0(e);return Ek(r._query),ok(t,r._query).then((o=>new Sk(e,s,r,o)))}function n0(r,e,t){r=ar(r,Gt);const s=ar(r.firestore,Co),o=xk(r.converter,e,t);return Xf(s,[mk(qf(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Bn.none())])}function Ck(r,e,t,...s){r=ar(r,Gt);const o=ar(r.firestore,Co),l=qf(o);let d;return d=typeof(e=kt(e))=="string"||e instanceof Pc?yk(l,"updateDoc",r._key,e,t,s):gk(l,"updateDoc",r._key,e),Xf(o,[d.toMutation(r._key,Bn.exists(!0))])}function r0(r){return Xf(ar(r.firestore,Co),[new Sf(r._key,Bn.none())])}function Xf(r,e){return(function(s,o){const l=new Rr;return s.asyncQueue.enqueueAndForget((async()=>GS(await ik(s),o,l))),l.promise})(Uf(r),e)}function Rk(r,e,t){const s=t.docs.get(e._key),o=new t0(r);return new e0(r,o,e._key,s,new Na(t.hasPendingWrites,t.fromCache),e.converter)}function uc(){return new Hf("serverTimestamp")}(function(e,t=!0){(function(o){So=o})(Io),mo(new os("firestore",((s,{instanceIdentifier:o,options:l})=>{const d=s.getProvider("app").getImmediate(),f=new Co(new kI(s.getProvider("auth-internal")),new RI(s.getProvider("app-check-internal")),(function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new le(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qa(_.options.projectId,E)})(d,o),d);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),yi(qg,"4.7.3",e),yi(qg,"4.7.3","esm2017")})();const Nk={apiKey:"AIzaSyB1UL7Ji4gqaJ2EX_r1UoZzmZYl-succf4",authDomain:"lastz-power.firebaseapp.com",projectId:"lastz-power",storageBucket:"lastz-power.firebasestorage.app",messagingSenderId:"158054571749",appId:"1:158054571749:web:e223407cf48ec8cb93be0c"},i0=Yy(Nk),rs=wI(i0),is=ck(i0),bk=async(r,e)=>{try{let t=e.gameId.trim();if(t=t.replace(/\//g,"_"),!t)throw new Error("Game ID ");const s=po(is,"users",t),o={gameId:e.gameId.trim(),alliance:e.alliance.trim(),team1Power:Number(e.team1Power),team2Power:Number(e.team2Power),team3Power:Number(e.team3Power),updatedAt:uc(),submittedAt:uc()};return await n0(s,o,{merge:!0}),{success:!0}}catch(t){return console.error(":",t),{success:!1,error:t.message}}},Dk=async r=>{try{const e=po(is,"admins",r),t=await Ak(e);return t.exists()&&t.data().isActive?{success:!0,isAdmin:!0,adminData:t.data()}:{success:!0,isAdmin:!1}}catch(e){return console.error(":",e),{success:!1,error:e.message}}},s0=()=>{const[r,e]=se.useState(null),[t,s]=se.useState(!1),[o,l]=se.useState(null),[d,f]=se.useState(!0);return se.useEffect(()=>{const g=uT(rs,async _=>{if(e(_),_){const E=await Dk(_.uid);s(E.isAdmin||!1),l(E.isAdmin?E.adminData:null)}else s(!1),l(null);f(!1)});return()=>g()},[]),{user:r,isAdmin:t,adminData:o,loading:d}},Vk={zh:{title:"",subtitle:" V2",guest_mode:"",admin_tag:"",logout:"",personal_entry:"",all_management:"",footer_text:" 2026 ",admin_login_gate:"",status_operational:"",loading_system:"...",preparing_env:"...",back_to_guest:" ",login_success:"",register_success:"",op_failed:"",email_in_use:" Email ",invalid_email:"Email ",weak_password:"6",auth_failed:"Email ",google_failed:"Google ",system_name:"",login:"",register:"",password_label:"",processing:"...",or_text:"",google_login:" Google ",form_title:"",form_desc:"",save_success:" ",save_failed:"",error_occurred:"",game_id:" ID",alliance:"",game_id_placeholder:": KingArthas",alliance_placeholder:": LastHope",team1:" (M)",team2:" (M)",team3:" (M)",save_data:"",saving:"...",combat_details:"",current_total:"",data_preview:"",sync_notice:"",last_updated:"",id_required:" ID ",alliance_required:"",admin_title:"",admin_desc:"",refresh:"",export_csv:"",preparing_export:" CSV...",stats_overview:"",display_count:"",avg_s1:"S1 ",avg_s2:"S2 ",avg_s3:"S3 ",search_placeholder:"  ID  ...",filter_options:"",member_id:" ID",alliance_label:"",s1_power:"S1 (M)",s2_power:"S2 (M)",s3_power:"S3 (M)",total_eval:"",update_record:"",actions:"",delete_confirm:"  {id} ",delete_success:"",edit:"",edit_record:"",update_success:"",cancel:"",confirm_save:"",no_data:"",no_results:"",intel_v2:" V2.0 ",data_count:"",loading_data:"...",alliance_total_power:"",alliance_avg_power:"",view_members:"",view_alliances:"",view_planner:"SVS",total_member:""},en:{title:"Combat Tracker",subtitle:"Alliance Intel V2",guest_mode:"Guest Mode",admin_tag:"ADMIN",logout:"Logout",personal_entry:"Entry Form",all_management:"Dashboard",footer_text:" 2026 Combat Tracker",admin_login_gate:"Admin Server Entrance",status_operational:"Operational",loading_system:"Initializing Combat System...",preparing_env:"Preparing Combat Environment...",back_to_guest:" Back to Guest Mode",login_success:"Login successful!",register_success:"Registration successful!",op_failed:"Operation failed, please try again later",email_in_use:"This Email is already in use",invalid_email:"Invalid Email format",weak_password:"Password too weak (at least 6 characters)",auth_failed:"Invalid Email or password",google_failed:"Google login failed, please try again",system_name:"Game Power Tracker",login:"Login",register:"Register",password_label:"Password",processing:"Processing...",or_text:"Or",google_login:"Sign in with Google",form_title:"Power Data Entry",form_desc:"Enter your latest hero power info to keep allies updated",save_success:" Data saved successfully!",save_failed:"Save failed: ",error_occurred:"Error occurred: ",game_id:"Game ID",alliance:"Alliance",game_id_placeholder:"e.g., KingArthas",alliance_placeholder:"e.g., LastHope",team1:"Team 1 Power (M)",team2:"Team 2 Power (M)",team3:"Team 3 Power (M)",save_data:"Save Data",saving:"Saving...",combat_details:"Team Power Details",current_total:"Total Combat Power",data_preview:"Data Preview",sync_notice:"Data will be synced to Alliance database",last_updated:"Last updated",id_required:"Game ID is required",alliance_required:"Alliance name is required",admin_title:"Alliance Intel Center",admin_desc:"Monitor and analyze member power distribution",refresh:"Refresh",export_csv:"Export CSV",preparing_export:"Preparing CSV download...",stats_overview:"Statistics",display_count:"Members",avg_s1:"S1 Avg",avg_s2:"S2 Avg",avg_s3:"S3 Avg",search_placeholder:"Search Game ID or Alliance...",filter_options:"Filters",member_id:"Member ID",alliance_label:"Alliance",s1_power:"S1 Power(M)",s2_power:"S2 Power(M)",s3_power:"S3 Power(M)",total_eval:"Total Eval",update_record:"Update Record",actions:"Action",delete_confirm:" Are you sure you want to delete {id}? This cannot be undone.",delete_success:"Deleted successfully",edit:"Edit",edit_record:"Edit Member Record",update_success:"Update successful",cancel:"Cancel",confirm_save:"Save Changes",no_data:"No data submitted yet",no_results:"No matching records found",intel_v2:"Alliance Intel V2.0 Stable",data_count:"Total Records",loading_data:"Loading Big Data...",alliance_total_power:"Total Alliance Power",alliance_avg_power:"Avg Member Power",view_members:"Members",view_alliances:"Alliances",view_planner:"SVS Strategy",total_member:"Total Members"}},o0=se.createContext(),Ok=({children:r})=>{const[e,t]=se.useState(localStorage.getItem("preferred_lang")||"zh"),s=l=>Vk[e][l]||l,o=()=>{const l=e==="zh"?"en":"zh";t(l),localStorage.setItem("preferred_lang",l)};return w.jsx(o0.Provider,{value:{lang:e,t:s,toggleLang:o},children:r})},Dc=()=>se.useContext(o0);function a0(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var o=r.length;for(e=0;e<o;e++)r[e]&&(t=a0(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function pi(){for(var r,e,t=0,s="",o=arguments.length;t<o;t++)(r=arguments[t])&&(e=a0(r))&&(s&&(s+=" "),s+=e);return s}const Ya=r=>typeof r=="number"&&!isNaN(r),ss=r=>typeof r=="string",fn=r=>typeof r=="function",Wu=r=>ss(r)||fn(r)?r:null,Yh=r=>se.isValidElement(r)||ss(r)||fn(r)||Ya(r);function Lk(r,e,t){t===void 0&&(t=300);const{scrollHeight:s,style:o}=r;requestAnimationFrame(()=>{o.minHeight="initial",o.height=s+"px",o.transition=`all ${t}ms`,requestAnimationFrame(()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(e,t)})})}function Vc(r){let{enter:e,exit:t,appendPosition:s=!1,collapse:o=!0,collapseDuration:l=300}=r;return function(d){let{children:f,position:g,preventExitTransition:_,done:E,nodeRef:A,isIn:b,playToast:F}=d;const z=s?`${e}--${g}`:e,B=s?`${t}--${g}`:t,q=se.useRef(0);return se.useLayoutEffect(()=>{const J=A.current,ne=z.split(" "),ee=oe=>{oe.target===A.current&&(F(),J.removeEventListener("animationend",ee),J.removeEventListener("animationcancel",ee),q.current===0&&oe.type!=="animationcancel"&&J.classList.remove(...ne))};J.classList.add(...ne),J.addEventListener("animationend",ee),J.addEventListener("animationcancel",ee)},[]),se.useEffect(()=>{const J=A.current,ne=()=>{J.removeEventListener("animationend",ne),o?Lk(J,E,l):E()};b||(_?ne():(q.current=1,J.className+=` ${B}`,J.addEventListener("animationend",ne)))},[b]),Ke.createElement(Ke.Fragment,null,f)}}function Ny(r,e){return r!=null?{content:r.content,containerId:r.props.containerId,id:r.props.toastId,theme:r.props.theme,type:r.props.type,data:r.props.data||{},isLoading:r.props.isLoading,icon:r.props.icon,status:e}:{}}const Kt=new Map;let Xa=[];const Xh=new Set,Mk=r=>Xh.forEach(e=>e(r)),l0=()=>Kt.size>0;function u0(r,e){var t;if(e)return!((t=Kt.get(e))==null||!t.isToastActive(r));let s=!1;return Kt.forEach(o=>{o.isToastActive(r)&&(s=!0)}),s}function c0(r,e){Yh(r)&&(l0()||Xa.push({content:r,options:e}),Kt.forEach(t=>{t.buildToast(r,e)}))}function by(r,e){Kt.forEach(t=>{e!=null&&e!=null&&e.containerId?e?.containerId===t.id&&t.toggle(r,e?.id):t.toggle(r,e?.id)})}function jk(r){const{subscribe:e,getSnapshot:t,setProps:s}=se.useRef((function(l){const d=l.containerId||1;return{subscribe(f){const g=(function(E,A,b){let F=1,z=0,B=[],q=[],J=[],ne=A;const ee=new Map,oe=new Set,Ce=()=>{J=Array.from(ee.values()),oe.forEach(T=>T())},ye=T=>{q=T==null?[]:q.filter(x=>x!==T),Ce()},C=T=>{const{toastId:x,onOpen:P,updateId:R,children:V}=T.props,k=R==null;T.staleId&&ee.delete(T.staleId),ee.set(x,T),q=[...q,T.props.toastId].filter(Ne=>Ne!==T.staleId),Ce(),b(Ny(T,k?"added":"updated")),k&&fn(P)&&P(se.isValidElement(V)&&V.props)};return{id:E,props:ne,observe:T=>(oe.add(T),()=>oe.delete(T)),toggle:(T,x)=>{ee.forEach(P=>{x!=null&&x!==P.props.toastId||fn(P.toggle)&&P.toggle(T)})},removeToast:ye,toasts:ee,clearQueue:()=>{z-=B.length,B=[]},buildToast:(T,x)=>{if((W=>{let{containerId:ie,toastId:_e,updateId:pe}=W;const Ae=ie?ie!==E:E!==1,be=ee.has(_e)&&pe==null;return Ae||be})(x))return;const{toastId:P,updateId:R,data:V,staleId:k,delay:Ne}=x,ze=()=>{ye(P)},qe=R==null;qe&&z++;const ge={...ne,style:ne.toastStyle,key:F++,...Object.fromEntries(Object.entries(x).filter(W=>{let[ie,_e]=W;return _e!=null})),toastId:P,updateId:R,data:V,closeToast:ze,isIn:!1,className:Wu(x.className||ne.toastClassName),bodyClassName:Wu(x.bodyClassName||ne.bodyClassName),progressClassName:Wu(x.progressClassName||ne.progressClassName),autoClose:!x.isLoading&&(Z=x.autoClose,ce=ne.autoClose,Z===!1||Ya(Z)&&Z>0?Z:ce),deleteToast(){const W=ee.get(P),{onClose:ie,children:_e}=W.props;fn(ie)&&ie(se.isValidElement(_e)&&_e.props),b(Ny(W,"removed")),ee.delete(P),z--,z<0&&(z=0),B.length>0?C(B.shift()):Ce()}};var Z,ce;ge.closeButton=ne.closeButton,x.closeButton===!1||Yh(x.closeButton)?ge.closeButton=x.closeButton:x.closeButton===!0&&(ge.closeButton=!Yh(ne.closeButton)||ne.closeButton);let L=T;se.isValidElement(T)&&!ss(T.type)?L=se.cloneElement(T,{closeToast:ze,toastProps:ge,data:V}):fn(T)&&(L=T({closeToast:ze,toastProps:ge,data:V}));const N={content:L,props:ge,staleId:k};ne.limit&&ne.limit>0&&z>ne.limit&&qe?B.push(N):Ya(Ne)?setTimeout(()=>{C(N)},Ne):C(N)},setProps(T){ne=T},setToggle:(T,x)=>{ee.get(T).toggle=x},isToastActive:T=>q.some(x=>x===T),getSnapshot:()=>J}})(d,l,Mk);Kt.set(d,g);const _=g.observe(f);return Xa.forEach(E=>c0(E.content,E.options)),Xa=[],()=>{_(),Kt.delete(d)}},setProps(f){var g;(g=Kt.get(d))==null||g.setProps(f)},getSnapshot(){var f;return(f=Kt.get(d))==null?void 0:f.getSnapshot()}}})(r)).current;s(r);const o=se.useSyncExternalStore(e,t,t);return{getToastToRender:function(l){if(!o)return[];const d=new Map;return r.newestOnTop&&o.reverse(),o.forEach(f=>{const{position:g}=f.props;d.has(g)||d.set(g,[]),d.get(g).push(f)}),Array.from(d,f=>l(f[0],f[1]))},isToastActive:u0,count:o?.length}}function Fk(r){const[e,t]=se.useState(!1),[s,o]=se.useState(!1),l=se.useRef(null),d=se.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:f,pauseOnHover:g,closeToast:_,onClick:E,closeOnClick:A}=r;var b,F;function z(){t(!0)}function B(){t(!1)}function q(ee){const oe=l.current;d.canDrag&&oe&&(d.didMove=!0,e&&B(),d.delta=r.draggableDirection==="x"?ee.clientX-d.start:ee.clientY-d.start,d.start!==ee.clientX&&(d.canCloseOnClick=!1),oe.style.transform=`translate3d(${r.draggableDirection==="x"?`${d.delta}px, var(--y)`:`0, calc(${d.delta}px + var(--y))`},0)`,oe.style.opacity=""+(1-Math.abs(d.delta/d.removalDistance)))}function J(){document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",J);const ee=l.current;if(d.canDrag&&d.didMove&&ee){if(d.canDrag=!1,Math.abs(d.delta)>d.removalDistance)return o(!0),r.closeToast(),void r.collapseAll();ee.style.transition="transform 0.2s, opacity 0.2s",ee.style.removeProperty("transform"),ee.style.removeProperty("opacity")}}(F=Kt.get((b={id:r.toastId,containerId:r.containerId,fn:t}).containerId||1))==null||F.setToggle(b.id,b.fn),se.useEffect(()=>{if(r.pauseOnFocusLoss)return document.hasFocus()||B(),window.addEventListener("focus",z),window.addEventListener("blur",B),()=>{window.removeEventListener("focus",z),window.removeEventListener("blur",B)}},[r.pauseOnFocusLoss]);const ne={onPointerDown:function(ee){if(r.draggable===!0||r.draggable===ee.pointerType){d.didMove=!1,document.addEventListener("pointermove",q),document.addEventListener("pointerup",J);const oe=l.current;d.canCloseOnClick=!0,d.canDrag=!0,oe.style.transition="none",r.draggableDirection==="x"?(d.start=ee.clientX,d.removalDistance=oe.offsetWidth*(r.draggablePercent/100)):(d.start=ee.clientY,d.removalDistance=oe.offsetHeight*(r.draggablePercent===80?1.5*r.draggablePercent:r.draggablePercent)/100)}},onPointerUp:function(ee){const{top:oe,bottom:Ce,left:ye,right:C}=l.current.getBoundingClientRect();ee.nativeEvent.type!=="touchend"&&r.pauseOnHover&&ee.clientX>=ye&&ee.clientX<=C&&ee.clientY>=oe&&ee.clientY<=Ce?B():z()}};return f&&g&&(ne.onMouseEnter=B,r.stacked||(ne.onMouseLeave=z)),A&&(ne.onClick=ee=>{E&&E(ee),d.canCloseOnClick&&_()}),{playToast:z,pauseToast:B,isRunning:e,preventExitTransition:s,toastRef:l,eventHandlers:ne}}function Uk(r){let{delay:e,isRunning:t,closeToast:s,type:o="default",hide:l,className:d,style:f,controlledProgress:g,progress:_,rtl:E,isIn:A,theme:b}=r;const F=l||g&&_===0,z={...f,animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};g&&(z.transform=`scaleX(${_})`);const B=pi("Toastify__progress-bar",g?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${b}`,`Toastify__progress-bar--${o}`,{"Toastify__progress-bar--rtl":E}),q=fn(d)?d({rtl:E,type:o,defaultClassName:B}):pi(B,d),J={[g&&_>=1?"onTransitionEnd":"onAnimationEnd"]:g&&_<1?null:()=>{A&&s()}};return Ke.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":F},Ke.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${b} Toastify__progress-bar--${o}`}),Ke.createElement("div",{role:"progressbar","aria-hidden":F?"true":"false","aria-label":"notification timer",className:q,style:z,...J}))}let zk=1;const d0=()=>""+zk++;function Bk(r){return r&&(ss(r.toastId)||Ya(r.toastId))?r.toastId:d0()}function Ma(r,e){return c0(r,e),e.toastId}function cc(r,e){return{...e,type:e&&e.type||r,toastId:Bk(e)}}function bu(r){return(e,t)=>Ma(e,cc(r,t))}function Pe(r,e){return Ma(r,cc("default",e))}Pe.loading=(r,e)=>Ma(r,cc("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Pe.promise=function(r,e,t){let s,{pending:o,error:l,success:d}=e;o&&(s=ss(o)?Pe.loading(o,t):Pe.loading(o.render,{...t,...o}));const f={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},g=(E,A,b)=>{if(A==null)return void Pe.dismiss(s);const F={type:E,...f,...t,data:b},z=ss(A)?{render:A}:A;return s?Pe.update(s,{...F,...z}):Pe(z.render,{...F,...z}),b},_=fn(r)?r():r;return _.then(E=>g("success",d,E)).catch(E=>g("error",l,E)),_},Pe.success=bu("success"),Pe.info=bu("info"),Pe.error=bu("error"),Pe.warning=bu("warning"),Pe.warn=Pe.warning,Pe.dark=(r,e)=>Ma(r,cc("default",{theme:"dark",...e})),Pe.dismiss=function(r){(function(e){var t;if(l0()){if(e==null||ss(t=e)||Ya(t))Kt.forEach(s=>{s.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const s=Kt.get(e.containerId);s?s.removeToast(e.id):Kt.forEach(o=>{o.removeToast(e.id)})}}else Xa=Xa.filter(s=>e!=null&&s.options.toastId!==e)})(r)},Pe.clearWaitingQueue=function(r){r===void 0&&(r={}),Kt.forEach(e=>{!e.props.limit||r.containerId&&e.id!==r.containerId||e.clearQueue()})},Pe.isActive=u0,Pe.update=function(r,e){e===void 0&&(e={});const t=((s,o)=>{var l;let{containerId:d}=o;return(l=Kt.get(d||1))==null?void 0:l.toasts.get(s)})(r,e);if(t){const{props:s,content:o}=t,l={delay:100,...s,...e,toastId:e.toastId||r,updateId:d0()};l.toastId!==r&&(l.staleId=r);const d=l.render||o;delete l.render,Ma(d,l)}},Pe.done=r=>{Pe.update(r,{progress:1})},Pe.onChange=function(r){return Xh.add(r),()=>{Xh.delete(r)}},Pe.play=r=>by(!0,r),Pe.pause=r=>by(!1,r);const $k=typeof window<"u"?se.useLayoutEffect:se.useEffect,Du=r=>{let{theme:e,type:t,isLoading:s,...o}=r;return Ke.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...o})},xh={info:function(r){return Ke.createElement(Du,{...r},Ke.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(r){return Ke.createElement(Du,{...r},Ke.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(r){return Ke.createElement(Du,{...r},Ke.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(r){return Ke.createElement(Du,{...r},Ke.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Ke.createElement("div",{className:"Toastify__spinner"})}},qk=r=>{const{isRunning:e,preventExitTransition:t,toastRef:s,eventHandlers:o,playToast:l}=Fk(r),{closeButton:d,children:f,autoClose:g,onClick:_,type:E,hideProgressBar:A,closeToast:b,transition:F,position:z,className:B,style:q,bodyClassName:J,bodyStyle:ne,progressClassName:ee,progressStyle:oe,updateId:Ce,role:ye,progress:C,rtl:T,toastId:x,deleteToast:P,isIn:R,isLoading:V,closeOnClick:k,theme:Ne}=r,ze=pi("Toastify__toast",`Toastify__toast-theme--${Ne}`,`Toastify__toast--${E}`,{"Toastify__toast--rtl":T},{"Toastify__toast--close-on-click":k}),qe=fn(B)?B({rtl:T,position:z,type:E,defaultClassName:ze}):pi(ze,B),ge=(function(N){let{theme:W,type:ie,isLoading:_e,icon:pe}=N,Ae=null;const be={theme:W,type:ie};return pe===!1||(fn(pe)?Ae=pe({...be,isLoading:_e}):se.isValidElement(pe)?Ae=se.cloneElement(pe,be):_e?Ae=xh.spinner():(Fe=>Fe in xh)(ie)&&(Ae=xh[ie](be))),Ae})(r),Z=!!C||!g,ce={closeToast:b,type:E,theme:Ne};let L=null;return d===!1||(L=fn(d)?d(ce):se.isValidElement(d)?se.cloneElement(d,ce):(function(N){let{closeToast:W,theme:ie,ariaLabel:_e="close"}=N;return Ke.createElement("button",{className:`Toastify__close-button Toastify__close-button--${ie}`,type:"button",onClick:pe=>{pe.stopPropagation(),W(pe)},"aria-label":_e},Ke.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ke.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))})(ce)),Ke.createElement(F,{isIn:R,done:P,position:z,preventExitTransition:t,nodeRef:s,playToast:l},Ke.createElement("div",{id:x,onClick:_,"data-in":R,className:qe,...o,style:q,ref:s},Ke.createElement("div",{...R&&{role:ye},className:fn(J)?J({type:E}):pi("Toastify__toast-body",J),style:ne},ge!=null&&Ke.createElement("div",{className:pi("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!V})},ge),Ke.createElement("div",null,f)),L,Ke.createElement(Uk,{...Ce&&!Z?{key:`pb-${Ce}`}:{},rtl:T,theme:Ne,delay:g,isRunning:e,isIn:R,closeToast:b,hide:A,type:E,style:oe,className:ee,controlledProgress:Z,progress:C||0})))},Oc=function(r,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${r}-enter`,exit:`Toastify--animate Toastify__${r}-exit`,appendPosition:e}},Hk=Vc(Oc("bounce",!0));Vc(Oc("slide",!0));Vc(Oc("zoom"));Vc(Oc("flip"));const Wk={position:"top-right",transition:Hk,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function Kk(r){let e={...Wk,...r};const t=r.stacked,[s,o]=se.useState(!0),l=se.useRef(null),{getToastToRender:d,isToastActive:f,count:g}=jk(e),{className:_,style:E,rtl:A,containerId:b}=e;function F(B){const q=pi("Toastify__toast-container",`Toastify__toast-container--${B}`,{"Toastify__toast-container--rtl":A});return fn(_)?_({position:B,rtl:A,defaultClassName:q}):pi(q,Wu(_))}function z(){t&&(o(!0),Pe.play())}return $k(()=>{if(t){var B;const q=l.current.querySelectorAll('[data-in="true"]'),J=12,ne=(B=e.position)==null?void 0:B.includes("top");let ee=0,oe=0;Array.from(q).reverse().forEach((Ce,ye)=>{const C=Ce;C.classList.add("Toastify__toast--stacked"),ye>0&&(C.dataset.collapsed=`${s}`),C.dataset.pos||(C.dataset.pos=ne?"top":"bot");const T=ee*(s?.2:1)+(s?0:J*ye);C.style.setProperty("--y",`${ne?T:-1*T}px`),C.style.setProperty("--g",`${J}`),C.style.setProperty("--s",""+(1-(s?oe:0))),ee+=C.offsetHeight,oe+=.025})}},[s,g,t]),Ke.createElement("div",{ref:l,className:"Toastify",id:b,onMouseEnter:()=>{t&&(o(!1),Pe.pause())},onMouseLeave:z},d((B,q)=>{const J=q.length?{...E}:{...E,pointerEvents:"none"};return Ke.createElement("div",{className:F(B),style:J,key:`container-${B}`},q.map(ne=>{let{content:ee,props:oe}=ne;return Ke.createElement(qk,{...oe,stacked:t,collapseAll:z,isIn:f(oe.toastId,oe.containerId),style:oe.style,key:`toast-${oe.key}`},ee)}))}))}function Gk(){const{t:r}=Dc(),[e,t]=se.useState(!0),[s,o]=se.useState(""),[l,d]=se.useState(""),[f,g]=se.useState(!1),_=async A=>{A.preventDefault(),g(!0);try{e?(await oT(rs,s,l),Pe.success(r("login_success"))):(await sT(rs,s,l),Pe.success(r("register_success")))}catch(b){console.error("Authentication error:",b);let F=r("op_failed");b.code==="auth/email-already-in-use"?F=r("email_in_use"):b.code==="auth/invalid-email"?F=r("invalid_email"):b.code==="auth/weak-password"?F=r("weak_password"):(b.code==="auth/user-not-found"||b.code==="auth/wrong-password"||b.code==="auth/invalid-credential")&&(F=r("auth_failed")),Pe.error(F)}finally{g(!1)}},E=async()=>{g(!0);const A=new kr;try{await CT(rs,A),Pe.success(r("login_success"))}catch(b){console.error("Google sign in error:",b),Pe.error(r("google_failed"))}finally{g(!1)}};return w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-transparent px-4",children:w.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md border border-gray-100 animate-in fade-in zoom-in duration-500",children:[w.jsx("h1",{className:"text-3xl font-black text-center text-gray-900 mb-8 tracking-tighter uppercase",children:r("system_name")}),w.jsx("div",{className:"mb-8",children:w.jsxs("div",{className:"flex p-1 bg-gray-50 rounded-xl border border-gray-100",children:[w.jsx("button",{className:`flex-1 py-2.5 text-center text-sm font-black rounded-lg transition-all duration-300 ${e?"bg-white text-indigo-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,onClick:()=>t(!0),children:r("login")}),w.jsx("button",{className:`flex-1 py-2.5 text-center text-sm font-black rounded-lg transition-all duration-300 ${e?"text-gray-400 hover:text-gray-600":"bg-white text-indigo-600 shadow-sm"}`,onClick:()=>t(!1),children:r("register")})]})}),w.jsxs("form",{onSubmit:_,className:"space-y-5",children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Email"}),w.jsx("input",{type:"email",value:s,onChange:A=>o(A.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold",placeholder:"commander@alliance.com"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:r("password_label")}),w.jsx("input",{type:"password",value:l,onChange:A=>d(A.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 border border-gray-200 rounded-xl outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold",placeholder:""})]}),w.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-indigo-600 to-blue-600 text-white py-4 rounded-xl font-black uppercase tracking-widest text-xs hover:from-indigo-700 hover:to-blue-700 transition-all shadow-lg shadow-indigo-100 disabled:from-gray-300 disabled:to-gray-400 disabled:shadow-none transform active:scale-[0.98]",children:r(f?"processing":e?"login":"register")})]}),w.jsxs("div",{className:"relative my-8",children:[w.jsx("div",{className:"absolute inset-0 flex items-center",children:w.jsx("div",{className:"w-full border-t border-gray-100"})}),w.jsx("div",{className:"relative flex justify-center text-[10px] font-black uppercase tracking-[0.3em]",children:w.jsx("span",{className:"px-3 bg-white text-gray-300",children:r("or_text")})})]}),w.jsxs("button",{onClick:E,disabled:f,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-200 text-gray-600 py-3.5 rounded-xl text-xs font-black uppercase tracking-widest hover:bg-gray-50 hover:border-gray-300 transition-all shadow-sm disabled:opacity-50",children:[w.jsxs("svg",{className:"w-5 h-5 translate-y-[-1px]",viewBox:"0 0 24 24",children:[w.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"}),w.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),w.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),w.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"})]}),r("google_login")]})]})})}var Qk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Yk=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),je=(r,e)=>{const t=se.forwardRef(({color:s="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:f="",children:g,..._},E)=>se.createElement("svg",{ref:E,...Qk,width:o,height:o,stroke:s,strokeWidth:d?Number(l)*24/Number(o):l,className:["lucide",`lucide-${Yk(r)}`,f].join(" "),..._},[...e.map(([A,b])=>se.createElement(A,b)),...Array.isArray(g)?g:[g]]));return t.displayName=`${r}`,t};const Dy=je("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Vy=je("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const Xk=je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Jk=je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Zk=je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const h0=je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const eA=je("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const f0=je("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const tA=je("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);const Oy=je("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const nA=je("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const rA=je("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);const iA=je("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const sA=je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const oA=je("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);const aA=je("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);const lA=je("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);const Ly=je("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const uA=je("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);const Vu=je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const p0=je("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const My=je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const cA=je("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const dc=je("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const ja=je("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);const m0=je("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);const Jh=je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const dA=je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const hA=je("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);const g0=je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Ku=je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const fA=je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const pA=je("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);const mA=je("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Ou=r=>r==null||r===""?"0":Number(r).toLocaleString("en-US",{maximumFractionDigits:2}),gA=r=>r?new Date(r).toLocaleString("zh-TW"):"",yA=({user:r})=>{const{t:e}=Dc(),[t,s]=se.useState({gameId:"",alliance:"",team1Power:"",team2Power:"",team3Power:""}),[o,l]=se.useState({}),[d,f]=se.useState(!1),[g,_]=se.useState(null);se.useEffect(()=>{const z=localStorage.getItem("game_power_last_entry"),B=localStorage.getItem("game_power_last_time");z&&s(JSON.parse(z)),B&&_(B)},[]);const E=z=>{const{name:B,value:q}=z.target;s(J=>({...J,[B]:q})),o[B]&&l(J=>({...J,[B]:""}))},A=z=>{const B={};return z.gameId?.trim()||(B.gameId=e("id_required")),z.alliance?.trim()||(B.alliance=e("alliance_required")),{valid:Object.keys(B).length===0,errors:B}},b=async z=>{z.preventDefault();const B=A(t);if(!B.valid){l(B.errors);return}f(!0);try{const q={gameId:t.gameId,alliance:t.alliance,team1Power:Number(t.team1Power||0),team2Power:Number(t.team2Power||0),team3Power:Number(t.team3Power||0)},J=await bk(r.uid,q);if(J.success){const ne=new Date().toISOString();Pe.success(e("save_success")),_(ne),localStorage.setItem("game_power_last_entry",JSON.stringify(t)),localStorage.setItem("game_power_last_time",ne)}else Pe.error(e("save_failed")+J.error),l({submit:e("save_failed")+J.error})}catch(q){Pe.error(e("error_occurred")+q.message),l({submit:e("error_occurred")+q.message})}finally{f(!1)}},F=Number(t.team1Power||0)+Number(t.team2Power||0)+Number(t.team3Power||0);return w.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[w.jsxs("div",{className:"text-center space-y-2",children:[w.jsxs("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight flex items-center justify-center gap-2",children:[w.jsx(hA,{className:"text-yellow-500"})," ",e("form_title")]}),w.jsx("p",{className:"text-gray-500",children:e("form_desc")})]}),w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[w.jsx("form",{onSubmit:b,className:"lg:col-span-3 space-y-6",children:w.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-gray-200/50 border border-gray-100 p-8 space-y-6",children:[o.submit&&w.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 text-red-700 text-sm rounded-r-lg animate-pulse",children:o.submit}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[w.jsx(g0,{size:16,className:"text-blue-500"})," ",e("game_id")," *"]}),w.jsx("input",{type:"text",name:"gameId",value:t.gameId,onChange:E,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 outline-none focus:ring-2 ${o.gameId?"border-red-300 ring-red-100 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-100 hover:border-gray-300"}`,placeholder:e("game_id_placeholder")}),o.gameId&&w.jsx("p",{className:"text-xs text-red-500 mt-1",children:o.gameId})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[w.jsx(Ku,{size:16,className:"text-green-500"})," ",e("alliance")," *"]}),w.jsx("input",{type:"text",name:"alliance",value:t.alliance,onChange:E,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 outline-none focus:ring-2 ${o.alliance?"border-red-300 ring-red-100 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-100 hover:border-gray-300"}`,placeholder:e("alliance_placeholder")}),o.alliance&&w.jsx("p",{className:"text-xs text-red-500 mt-1",children:o.alliance})]})]}),w.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"}),w.jsxs("div",{className:"space-y-5",children:[w.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-bold mb-2 text-sm uppercase tracking-wide",children:[w.jsx(m0,{className:"text-red-500",size:18})," ",e("combat_details")]}),w.jsx("div",{className:"grid grid-cols-1 gap-4",children:[{name:"team1Power",label:e("team1"),color:"blue"},{name:"team2Power",label:e("team2"),color:"indigo"},{name:"team3Power",label:e("team3"),color:"purple"}].map(z=>w.jsxs("div",{className:"relative group",children:[w.jsx("div",{className:"flex justify-between items-center mb-1",children:w.jsxs("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-1",children:[w.jsx(dc,{size:12})," ",z.label]})}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"number",step:"any",name:z.name,value:t[z.name],onChange:E,className:"w-full px-4 py-3 pl-10 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all hover:border-gray-300 font-mono text-lg",placeholder:"0"}),w.jsxs("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-bold italic group-hover:text-indigo-400 transition-colors",children:["S",z.name.charAt(4)]})]})]},z.name))})]}),w.jsx("button",{type:"submit",disabled:d,className:"w-full py-4 mt-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 transition-all duration-300 disabled:from-gray-300 disabled:to-gray-400 disabled:shadow-none transform active:scale-[0.98] flex items-center justify-center gap-2",children:d?w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e("saving")]}):w.jsxs(w.Fragment,{children:[w.jsx(p0,{size:18})," ",e("save_data")]})})]})}),w.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[w.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-blue-700 rounded-2xl p-6 text-white shadow-xl shadow-indigo-100 flex flex-col justify-between h-[180px] relative overflow-hidden",children:[w.jsxs("div",{className:"relative z-10",children:[w.jsx("p",{className:"text-indigo-100 text-[10px] font-black uppercase tracking-widest opacity-80",children:e("current_total")}),w.jsx("h3",{className:"text-4xl font-black mt-2 tracking-tighter tabular-nums leading-none",children:Ou(F)})]}),w.jsxs("div",{className:"relative z-10 flex justify-between items-end",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx("p",{className:"text-[10px] text-indigo-100/60 uppercase font-bold tracking-wider",children:e("game_id")}),w.jsx("p",{className:"font-bold truncate max-w-[120px] text-sm tabular-nums",children:t.gameId||"---"})]}),w.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-lg p-2.5 flex items-center gap-2 border border-white/20",children:[w.jsx(Oy,{size:14}),w.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest leading-none",children:"STATUS OK"})]})]}),w.jsx("div",{className:"absolute -right-4 -top-4 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),w.jsx("div",{className:"absolute -left-4 -bottom-4 w-24 h-24 bg-indigo-400/20 rounded-full blur-xl"})]}),w.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-gray-200/50 border border-gray-100 p-6 space-y-4",children:[w.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 pb-3",children:[w.jsxs("h4",{className:"font-black text-gray-800 flex items-center gap-2 text-[10px] uppercase tracking-widest",children:[w.jsx(Oy,{size:14,className:"text-gray-400"})," ",e("data_preview")]}),g&&w.jsxs("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-tighter",children:[e("last_updated")," ",gA(g).split(" ")[1]]})]}),w.jsx("div",{className:"space-y-4",children:[{label:e("game_id"),value:t.gameId},{label:e("alliance"),value:t.alliance},{label:e("team1"),value:Ou(t.team1Power),emphasize:!0},{label:e("team2"),value:Ou(t.team2Power),emphasize:!0},{label:e("team3"),value:Ou(t.team3Power),emphasize:!0}].map((z,B)=>w.jsxs("div",{className:"flex justify-between items-center text-xs group",children:[w.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-wider group-hover:text-gray-600 transition-colors",children:z.label}),w.jsx("span",{className:`font-black ${z.emphasize?"text-gray-700 font-mono text-sm":"text-gray-800"}`,children:z.value||(B<2?"---":"0")})]},B))}),w.jsx("div",{className:"pt-4 mt-2 border-t border-dashed border-gray-200",children:w.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold text-[10px] p-3 bg-blue-50/50 rounded-xl border border-blue-100/50 uppercase tracking-tight",children:[w.jsx(dc,{size:14}),w.jsx("span",{children:e("sync_notice")})]})})]})]})]})]})},_A=async(r=[])=>{try{const e=uk(is,"users");let t;!r||r.length===0||r.includes("*")?t=Ay(e,Py("updatedAt","desc")):t=Ay(e,Tk("alliance","in",r),Py("updatedAt","desc"));const s=await Pk(t),o=[];return s.forEach(l=>{o.push({id:l.id,...l.data()})}),o}catch(e){throw console.error(":",e),new Error(e.message||"")}},vA=async r=>{try{return await r0(po(is,"users",r)),{success:!0}}catch(e){throw console.error(":",e),new Error("")}},wA=async(r,e)=>{try{const{id:t,...s}=e;let o=e.gameId.trim().replace(/\//g,"_");if(o!==r){const l=po(is,"users",o),d=po(is,"users",r);await n0(l,{...s,updatedAt:uc()}),await r0(d)}else{const l=po(is,"users",r);await Ck(l,{...s,updatedAt:uc()})}return{success:!0}}catch(t){throw console.error(":",t),new Error(t.message||"")}},EA=r=>{if(!r||r.length===0)return{totalUsers:0,averageTeam1Power:0,averageTeam2Power:0,averageTeam3Power:0,averageTotalPower:0,maxTotalPower:0,minTotalPower:0};const e=r.map(f=>{const g=Number(f.team1Power)||0,_=Number(f.team2Power)||0,E=Number(f.team3Power)||0;return{team1:g,team2:_,team3:E,total:g+_+E}}),t=e.reduce((f,g)=>f+g.team1,0),s=e.reduce((f,g)=>f+g.team2,0),o=e.reduce((f,g)=>f+g.team3,0),l=e.reduce((f,g)=>f+g.total,0),d=e.map(f=>f.total);return{totalUsers:r.length,averageTeam1Power:Math.round(t/r.length),averageTeam2Power:Math.round(s/r.length),averageTeam3Power:Math.round(o/r.length),averageTotalPower:Math.round(l/r.length),maxTotalPower:Math.max(...d),minTotalPower:Math.min(...d)}},TA=r=>{if(!r||r.length===0)return[];const e={};return r.forEach(t=>{const s=t.alliance||"";e[s]||(e[s]={name:s,memberCount:0,totalPower:0,avgPower:0,team1Power:0,team2Power:0,team3Power:0,lastUpdated:null});const o=Number(t.team1Power)||0,l=Number(t.team2Power)||0,d=Number(t.team3Power)||0,f=o+l+d,g=t.submittedAt?.toDate?.()||new Date(t.submittedAt);e[s].memberCount++,e[s].totalPower+=f,e[s].team1Power+=o,e[s].team2Power+=l,e[s].team3Power+=d,(!e[s].lastUpdated||g>e[s].lastUpdated)&&(e[s].lastUpdated=g)}),Object.values(e).map(t=>({...t,avgPower:Math.round(t.totalPower/t.memberCount),avgTeam1Power:Math.round(t.team1Power/t.memberCount),avgTeam2Power:Math.round(t.team2Power/t.memberCount),avgTeam3Power:Math.round(t.team3Power/t.memberCount)})).sort((t,s)=>s.totalPower-t.totalPower)},IA=r=>r==null||r===""?"0":Number(r).toLocaleString("en-US",{maximumFractionDigits:2}),jy=r=>{if(!r)return"";const e=r.toDate?r.toDate():new Date(r),t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),d=String(e.getMinutes()).padStart(2,"0");return`${t}-${s}-${o} ${l}:${d}`},tr=r=>IA(r),hc=25,Zh=17,Fy=35,xA=55,SA=[{q:0,r:0},{q:1,r:-1},{q:1,r:0},{q:0,r:1},{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],kA=[{q:0,r:0},{q:0,r:-1},{q:0,r:1}],AA=()=>{const r=[];for(let e=-3;e<=3;e++)for(let t=-3;t<=3;t++){const s=-e-t;Math.abs(e)<=3&&Math.abs(t)<=3&&Math.abs(s)<=3&&r.push({q:e,r:t})}return r},PA=AA(),CA=()=>{const[r,e]=se.useState({}),[t,s]=se.useState("brush"),[o,l]=se.useState("#3b82f6"),[d,f]=se.useState(.8),[g,_]=se.useState({x:300,y:300}),[E,A]=se.useState(!0),[b,F]=se.useState({w:800,h:600}),z=se.useRef(null),B=se.useRef(!1),q=se.useRef({x:0,y:0}),J=()=>{const T={};[{id:"1",name:"1",center:{q:-16,r:16},label:"1"},{id:"2",name:"2",center:{q:0,r:-16},label:"2"},{id:"3",name:"3",center:{q:16,r:0},label:"3"}].forEach(P=>{const R=`battery_${P.id}`;PA.forEach(V=>{const k=P.center.q+V.q,Ne=P.center.r+V.r;T[`${k},${Ne}`]={type:"battery",color:"rgba(153, 27, 27, 0.7)",parent:R,isCenter:V.q===0&&V.r===0,label:V.q===0&&V.r===0?P.label:null}})}),e(T)};se.useEffect(()=>{Object.keys(r).length===0&&J()},[]);const ne=()=>{window.confirm("")&&J()};se.useEffect(()=>{const T=z.current;if(!T)return;const x=P=>{P.preventDefault();const R=P.deltaY>0?-.05:.05;f(V=>Math.min(3,Math.max(.2,V+R)))};return T.addEventListener("wheel",x,{passive:!1}),()=>T.removeEventListener("wheel",x)},[]);const ee=(T,x)=>{const P=hc*(Math.sqrt(3)*T+Math.sqrt(3)/2*x),R=hc*(3/2)*x;return{x:P,y:R}};se.useEffect(()=>{const T=()=>{z.current&&F({w:z.current.clientWidth,h:z.current.clientHeight})};return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]);const oe=T=>{(T.button===1||T.button===0&&T.altKey)&&(B.current=!0,q.current={x:T.clientX,y:T.clientY},T.preventDefault())},Ce=T=>{if(B.current){const x=T.clientX-q.current.x,P=T.clientY-q.current.y;_(R=>({x:R.x+x,y:R.y+P})),q.current={x:T.clientX,y:T.clientY}}},ye=(T,x)=>{e(P=>{const R=`${T},${x}`;let V={...P};if(t==="brush")V[R]={type:"color",color:o};else if(t==="eraser"){const k=V[R];if(k?.parent){const Ne=k.parent;Object.keys(V).forEach(ze=>{V[ze].parent===Ne&&delete V[ze]})}else delete V[R]}else if(t==="hq"||t==="cannon"){const k=t==="hq"?SA:kA;if(k.some(qe=>{const ge=T+qe.q,Z=x+qe.r,ce=`${ge},${Z}`,L=V[ce];return!!(L&&L.type!=="color"||Math.max(Math.abs(ge),Math.abs(Z),Math.abs(-ge-Z))<=Zh)}))return P;const ze=R;k.forEach(qe=>{const ge=T+qe.q,Z=x+qe.r;V[`${ge},${Z}`]={type:t,color:o,parent:ze,isCenter:qe.q===0&&qe.r===0}})}return V})},C=se.useMemo(()=>{const T=[],x=xA;for(let P=-x;P<=x;P++)for(let R=-x;R<=x;R++){const V=-P-R;Math.abs(V)<=x&&T.push(w.jsx(RA,{q:P,r:R,cell:r[`${P},${R}`],showCoords:E,applyAction:ye,hexToPixel:ee},`${P},${R}`))}return T},[r,E]);return w.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] bg-slate-900 rounded-2xl overflow-hidden border border-slate-700 shadow-2xl relative",children:[w.jsxs("div",{className:"p-4 bg-slate-900/80 backdrop-blur-md border-b border-slate-800 flex items-center justify-between z-10",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("div",{className:"flex bg-slate-800 rounded-lg p-1",children:[w.jsx(Lu,{active:t==="brush",onClick:()=>s("brush"),icon:w.jsx(aA,{size:18}),label:""}),w.jsx(Lu,{active:t==="hq",onClick:()=>s("hq"),icon:w.jsx(f0,{size:18}),label:""}),w.jsx(Lu,{active:t==="cannon",onClick:()=>s("cannon"),icon:w.jsx(ja,{size:18}),label:"/"}),w.jsx(Lu,{active:t==="eraser",onClick:()=>s("eraser"),icon:w.jsx(Jh,{size:18}),label:""})]}),w.jsx("div",{className:"h-6 w-[1px] bg-slate-700"}),w.jsx("div",{className:"flex gap-2",children:["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6"].map(T=>w.jsx("button",{className:`w-8 h-8 rounded-full border-2 transition-transform ${o===T?"border-white scale-110":"border-transparent opacity-60 hover:opacity-100"}`,style:{backgroundColor:T},onClick:()=>l(T)},T))})]}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("button",{onClick:()=>A(!E),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${E?"bg-blue-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[w.jsx(lA,{size:14})," "]}),w.jsx("div",{className:"h-6 w-[1px] bg-slate-700"}),w.jsxs("div",{className:"flex items-center gap-3 bg-slate-800/50 px-3 py-1.5 rounded-xl border border-slate-700/50",children:[w.jsx("button",{onClick:()=>f(T=>Math.max(.1,T-.1)),className:"text-slate-400 hover:text-white transition-colors",children:w.jsx(mA,{size:16})}),w.jsx("input",{type:"range",min:"0.1",max:"2.5",step:"0.05",value:d,onChange:T=>f(parseFloat(T.target.value)),className:"w-24 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),w.jsx("button",{onClick:()=>f(T=>Math.min(2.5,T+.1)),className:"text-slate-400 hover:text-white transition-colors",children:w.jsx(pA,{size:16})}),w.jsxs("span",{className:"text-[10px] font-mono text-blue-400 w-10 text-center",children:[Math.round(d*100),"%"]})]}),w.jsxs("button",{onClick:ne,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 text-slate-400 rounded-lg text-xs font-medium hover:bg-red-900/40 hover:text-red-400 transition-all border border-slate-700",children:[w.jsx(Jh,{size:14})," "]}),w.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-blue-900/20 hover:from-blue-500 transition-all",children:[w.jsx(h0,{size:16})," "]})]})]}),w.jsxs("div",{ref:z,className:"flex-1 overflow-hidden cursor-move relative",onMouseDown:oe,onMouseMove:Ce,onMouseUp:()=>B.current=!1,onMouseLeave:()=>B.current=!1,children:[w.jsx("svg",{width:"100%",height:"100%",className:"absolute inset-0",children:w.jsx("g",{transform:`translate(${g.x}, ${g.y}) scale(${d})`,children:C})}),w.jsxs("div",{className:"absolute bottom-6 right-6 bg-slate-900/60 backdrop-blur border border-slate-700 p-4 rounded-xl pointer-events-none",children:[w.jsx("h4",{className:"text-blue-400 font-bold text-xs mb-2 uppercase tracking-widest",children:""}),w.jsxs("ul",{className:"text-[10px] text-slate-400 space-y-1",children:[w.jsxs("li",{children:[" ",w.jsx("b",{children:""}),": "]}),w.jsxs("li",{children:[" ",w.jsx("b",{children:""}),": "]}),w.jsxs("li",{children:[" ",w.jsx("b",{children:"Alt + "}),": "]}),w.jsxs("li",{children:[" ",w.jsx("b",{children:""}),": "]})]})]})]})]})},RA=se.memo(({q:r,r:e,cell:t,showCoords:s,applyAction:o,hexToPixel:l})=>{const{x:d,y:f}=l(r,e),g=Math.max(Math.abs(r),Math.abs(e),Math.abs(-r-e)),_=g<=Zh,E=g===Zh,A=g<=Fy,b=g===Fy,F=se.useMemo(()=>{const q=[];for(let J=0;J<6;J++){const ne=Math.PI/180*(60*J+30);q.push(`${d+hc*Math.cos(ne)},${f+hc*Math.sin(ne)}`)}return q.join(" ")},[d,f]);let z="rgba(248, 250, 252, 0.3)",B="rgba(186, 230, 253, 0.2)";return _?(z="rgba(30, 58, 138, 0.6)",B="rgba(59, 130, 246, 0.3)"):A&&(z="rgba(120, 113, 108, 0.4)",B="rgba(168, 162, 158, 0.2)"),w.jsxs("g",{className:"group/hex transition-all duration-200",children:[w.jsx("polygon",{points:F,onClick:()=>o(r,e),fill:t?.color||z,fillOpacity:t?.type==="color"?.4:1,stroke:E?"#06b6d4":b?"#d97706":t?"rgba(255,255,255,0.8)":B,strokeWidth:E||b?3:t?.isCenter?2.5:.8,className:"cursor-pointer transition-all duration-300 hover:fill-slate-400/30"}),s&&r%4===0&&e%4===0&&!t?.label&&w.jsxs("text",{x:d,y:f,fontSize:"5",textAnchor:"middle",fill:_?"rgba(147, 197, 253, 0.3)":A?"rgba(68, 64, 60, 0.4)":"rgba(14, 165, 233, 0.3)",className:"pointer-events-none select-none font-mono",children:[r,",",e]}),t?.label&&w.jsx("text",{x:d,y:f+5,fontSize:"14",fontWeight:"bold",textAnchor:"middle",fill:"white",className:"pointer-events-none select-none drop-shadow-md",children:t.label}),t?.isCenter&&w.jsx("g",{transform:`translate(${d-8}, ${f-8})`,className:"pointer-events-none",children:t.type==="hq"?w.jsx(f0,{size:16,className:"text-white drop-shadow-[0_0_10px_rgba(255,255,255,0.8)]"}):w.jsx(ja,{size:16,className:"text-white animate-pulse"})})]})}),Lu=({active:r,onClick:e,icon:t,label:s})=>w.jsx("button",{onClick:e,title:s,className:`p-2.5 rounded-md flex flex-col items-center gap-1 transition-all ${r?"bg-blue-600 text-white shadow-inner":"text-slate-400 hover:bg-slate-700 hover:text-slate-200"}`,children:t}),Uy=({forcePlanner:r=!1})=>{const{t:e}=Dc(),{adminData:t}=s0(),[s,o]=se.useState([]),[l,d]=se.useState(!0),[f,g]=se.useState(""),[_,E]=se.useState(null),[A,b]=se.useState([]),[F,z]=se.useState(r?"planner":"members"),[B,q]=se.useState(""),[J,ne]=se.useState({key:"submittedAt",direction:"desc"}),[ee,oe]=se.useState(null),[Ce,ye]=se.useState(!1),[C,T]=se.useState({gameId:"",alliance:"",team1Power:"",team2Power:"",team3Power:""}),[x,P]=se.useState(!1);se.useEffect(()=>{t&&R()},[t]);const R=async()=>{d(!0),g("");try{const L=await _A(t?.allowedAlliances||[]);Array.isArray(L)&&(o(L),E(EA(L)),b(TA(L)))}catch(L){g(e("error_occurred")+L.message),Pe.error(e("error_occurred"))}finally{d(!1)}},V=L=>{let N="desc";J.key===L&&J.direction==="desc"&&(N="asc"),ne({key:L,direction:N})},k=async(L,N)=>{if(window.confirm(e("delete_confirm").replace("{id}",N)))try{const W=await vA(L);W.success?(Pe.success(e("delete_success")),R()):Pe.error(e("error_occurred")+W.error)}catch(W){Pe.error(e("error_occurred")+W.message)}},Ne=L=>{oe(L),T({gameId:L.gameId||"",alliance:L.alliance||"",team1Power:L.team1Power||0,team2Power:L.team2Power||0,team3Power:L.team3Power||0}),ye(!0)},ze=L=>{const{name:N,value:W}=L.target;T(ie=>({...ie,[N]:W}))},qe=async L=>{if(L.preventDefault(),!!ee){P(!0);try{const N={...ee,gameId:C.gameId,alliance:C.alliance,team1Power:Number(C.team1Power||0),team2Power:Number(C.team2Power||0),team3Power:Number(C.team3Power||0)};(await wA(ee.id,N)).success&&(Pe.success(e("update_success")),ye(!1),oe(null),R())}catch(N){Pe.error(e("error_occurred")+N.message)}finally{P(!1)}}},ge=s.filter(L=>L.gameId?.toLowerCase().includes(B.toLowerCase())||L.alliance?.toLowerCase().includes(B.toLowerCase())).sort((L,N)=>{let W,ie;return J.key==="totalPower"?(W=(L.team1Power||0)+(L.team2Power||0)+(L.team3Power||0),ie=(N.team1Power||0)+(N.team2Power||0)+(N.team3Power||0)):(W=L[J.key],ie=N[J.key]),W<ie?J.direction==="asc"?-1:1:W>ie?J.direction==="asc"?1:-1:0});ge.length,ge.length>0&&Math.round(ge.reduce((L,N)=>L+(N.team1Power||0),0)/ge.length),ge.length>0&&Math.round(ge.reduce((L,N)=>L+(N.team2Power||0),0)/ge.length),ge.length>0&&Math.round(ge.reduce((L,N)=>L+(N.team3Power||0),0)/ge.length);const Z=()=>{const L=[e("member_id"),e("alliance_label"),e("team1"),e("team2"),e("team3"),e("total_eval"),e("update_record")],N=ge.map(pe=>[pe.gameId,pe.alliance,pe.team1Power,pe.team2Power,pe.team3Power,(pe.team1Power||0)+(pe.team2Power||0)+(pe.team3Power||0),jy(pe.submittedAt)]),W=[L.join(","),...N.map(pe=>pe.join(","))].join(`
`),ie=new Blob(["\uFEFF"+W],{type:"text/csv;charset=utf-8;"}),_e=document.createElement("a");_e.href=URL.createObjectURL(ie),_e.download=`_${new Date().toISOString().split("T")[0]}.csv`,_e.click(),Pe.info(e("preparing_export"))},ce=L=>J.key!==L?w.jsx(Vu,{size:12,className:"opacity-20 translate-y-[2px]"}):J.direction==="asc"?w.jsx(Zk,{size:14,className:"text-blue-500"}):w.jsx(Xk,{size:14,className:"text-blue-500"});return l?w.jsxs("div",{className:"flex flex-col items-center justify-center p-20 space-y-4 text-center animate-in fade-in transition-all duration-700",children:[w.jsx(Vu,{className:"w-10 h-10 text-blue-500 animate-spin"}),w.jsx("p",{className:"text-gray-400 font-black tracking-widest uppercase text-[10px]",children:e("loading_data")})]}):w.jsxs("div",{className:"space-y-8 animate-in fade-in duration-700 relative",children:[Ce&&w.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[w.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>ye(!1)}),w.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg relative z-10 overflow-hidden animate-in zoom-in duration-300 border border-gray-100",children:[w.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 p-6 text-white flex justify-between items-center",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-md border border-white/20",children:w.jsx(Ly,{size:20})}),w.jsxs("div",{children:[w.jsx("h3",{className:"font-black text-lg tracking-tight",children:e("edit_record")}),w.jsx("p",{className:"text-xs text-indigo-100 font-bold opacity-80 uppercase tracking-widest",children:ee?.gameId})]})]}),w.jsx("button",{onClick:()=>ye(!1),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:w.jsx(fA,{size:20})})]}),w.jsxs("form",{onSubmit:qe,className:"p-8 space-y-6",children:[w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{className:"space-y-1.5",children:[w.jsxs("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1 flex items-center gap-1.5",children:[w.jsx(g0,{size:12,className:"text-blue-500"})," ",e("game_id")]}),w.jsx("input",{type:"text",name:"gameId",value:C.gameId,onChange:ze,className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold"})]}),w.jsxs("div",{className:"space-y-1.5",children:[w.jsxs("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1 flex items-center gap-1.5",children:[w.jsx(dc,{size:12,className:"text-green-500"})," ",e("alliance_label")]}),w.jsx("input",{type:"text",name:"alliance",value:C.alliance,onChange:ze,className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold"})]})]}),w.jsx("div",{className:"h-px bg-gray-100 italic flex items-center justify-center",children:w.jsx("span",{className:"bg-white px-3 text-[9px] font-black text-gray-300 uppercase tracking-[0.3em]",children:e("combat_details")})}),w.jsx("div",{className:"space-y-4",children:[{name:"team1Power",label:e("s1_power")},{name:"team2Power",label:e("s2_power")},{name:"team3Power",label:e("s3_power")}].map(L=>w.jsxs("div",{className:"flex items-center gap-4 group",children:[w.jsx("label",{className:"w-24 text-[10px] font-black text-gray-400 uppercase tracking-widest group-hover:text-indigo-500 transition-colors",children:L.label}),w.jsxs("div",{className:"flex-grow relative",children:[w.jsx("input",{type:"number",name:L.name,value:C[L.name],onChange:ze,className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 transition-all text-sm font-mono font-bold"}),w.jsx(m0,{size:14,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300 group-focus-within:text-indigo-400 transition-colors"})]})]},L.name))}),w.jsxs("div",{className:"pt-6 flex gap-4",children:[w.jsx("button",{type:"button",onClick:()=>ye(!1),className:"flex-1 py-3 px-6 rounded-xl border border-gray-200 text-gray-400 text-xs font-black uppercase tracking-widest hover:bg-gray-50 transition-all",children:e("cancel")}),w.jsxs("button",{type:"submit",disabled:x,className:"flex-[2] py-3 px-6 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100 flex items-center justify-center gap-2 cursor-pointer disabled:opacity-50",children:[x?w.jsx(Vu,{size:14,className:"animate-spin"}):w.jsx(p0,{size:14}),w.jsx("span",{children:e("confirm_save")})]})]})]})]})]}),!r&&w.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsxs("h2",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-2 uppercase",children:[w.jsx(Dy,{className:"text-indigo-600"})," ",e("admin_title")]}),w.jsx("p",{className:"text-sm text-gray-500",children:e("admin_desc")})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("div",{className:"bg-white border border-gray-100 p-1 rounded-xl flex shadow-sm mr-2",children:[w.jsxs("button",{onClick:()=>z("members"),className:`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-tight flex items-center gap-1.5 transition-all ${F==="members"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:bg-gray-50"}`,children:[w.jsx(Ku,{size:14})," ",e("view_members")]}),w.jsxs("button",{onClick:()=>z("alliances"),className:`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-tight flex items-center gap-1.5 transition-all ${F==="alliances"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:bg-gray-50"}`,children:[w.jsx(nA,{size:14})," ",e("view_alliances")]})]}),w.jsxs("button",{onClick:R,className:"p-2.5 bg-white border border-gray-200 text-gray-600 rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-all shadow-sm flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[w.jsx(Vu,{size:14})," ",w.jsx("span",{className:"hidden sm:inline",children:e("refresh")})]}),w.jsxs("button",{onClick:Z,className:"p-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all shadow-md shadow-indigo-100 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[w.jsx(h0,{size:14})," ",e("export_csv")]})]})]}),_&&!r&&w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:e("total_member"),value:s.length,icon:w.jsx(Ku,{}),color:"blue"},{label:e("alliance_total_power"),value:tr(s.reduce((L,N)=>L+(N.team1Power||0)+(N.team2Power||0)+(N.team3Power||0),0)),icon:w.jsx(uA,{}),color:"green"},{label:e("alliance_avg_power"),value:tr(s.length>0?Math.round(s.reduce((L,N)=>L+(N.team1Power||0)+(N.team2Power||0)+(N.team3Power||0),0)/s.length):0),icon:w.jsx(dA,{}),color:"indigo"},{label:e("data_count"),value:s.length,icon:w.jsx(Dy,{}),color:"purple"}].map((L,N)=>w.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm flex items-center gap-4 group hover:shadow-md transition-shadow",children:[w.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-50 flex items-center justify-center group-hover:bg-indigo-50 transition-colors",children:w.jsx("div",{className:"text-indigo-600 group-hover:scale-110 transition-transform",children:L.icon})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:L.label}),w.jsx("p",{className:"text-xl font-black text-gray-800 tracking-tighter tabular-nums leading-none mt-1",children:L.value})]})]},N))}),w.jsxs("div",{className:r?"":"bg-white rounded-2xl border border-gray-100 shadow-xl shadow-gray-200/40 relative overflow-hidden",children:[F!=="planner"&&!r&&w.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50/30 flex flex-col sm:flex-row gap-4",children:[w.jsxs("div",{className:"relative flex-grow",children:[w.jsx(My,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),w.jsx("input",{type:"text",placeholder:e("search_placeholder"),value:B,onChange:L=>q(L.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 outline-none transition-all text-xs font-bold"})]}),w.jsxs("button",{className:"px-4 py-2.5 bg-white border border-gray-200 text-gray-400 rounded-xl hover:bg-gray-50 transition-all text-[10px] font-black uppercase tracking-widest flex items-center gap-2",children:[w.jsx(eA,{size:14})," ",e("filter_options")]})]}),w.jsx("div",{className:r?"":"overflow-x-auto",children:F==="planner"?w.jsx("div",{className:r?"":"p-4 bg-slate-950",children:w.jsx(CA,{})}):F==="alliances"?w.jsxs("table",{className:"w-full text-left border-collapse",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"bg-gray-50/50",children:[w.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("alliance_label")}),w.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("total_member")}),w.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-indigo-600 bg-indigo-50/10 uppercase tracking-widest",children:e("avg_s1")}),w.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-indigo-600 bg-indigo-50/10 uppercase tracking-widest",children:e("avg_s2")}),w.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-indigo-600 bg-indigo-50/10 uppercase tracking-widest",children:e("avg_s3")}),w.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("alliance_avg_power")}),w.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("last_updated")})]})}),w.jsx("tbody",{className:"divide-y divide-gray-100",children:A.length===0?w.jsx("tr",{children:w.jsx("td",{colSpan:"7",className:"px-6 py-20 text-center text-gray-400 font-bold uppercase text-xs tracking-widest opacity-20",children:e("no_data")})}):A.filter(L=>L.name.toLowerCase().includes(B.toLowerCase())).map(L=>w.jsxs("tr",{className:"group hover:bg-indigo-50/20 transition-colors",children:[w.jsx("td",{className:"px-6 py-5",children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-[10px] font-black text-indigo-500 border border-indigo-200",children:w.jsx(dc,{size:14})}),w.jsx("span",{className:"font-bold text-gray-800 tracking-tight",children:L.name})]})}),w.jsx("td",{className:"px-6 py-5",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Ku,{size:14,className:"text-gray-300"}),w.jsx("span",{className:"font-bold text-gray-600 tabular-nums",children:L.memberCount})]})}),w.jsx("td",{className:"px-6 py-5",children:w.jsx("span",{className:"font-black text-indigo-600 font-mono text-sm tabular-nums tracking-tighter",children:tr(L.avgTeam1Power)})}),w.jsx("td",{className:"px-6 py-5",children:w.jsx("span",{className:"font-black text-indigo-600 font-mono text-sm tabular-nums tracking-tighter",children:tr(L.avgTeam2Power)})}),w.jsx("td",{className:"px-6 py-5",children:w.jsx("span",{className:"font-black text-indigo-600 font-mono text-sm tabular-nums tracking-tighter",children:tr(L.avgTeam3Power)})}),w.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:tr(L.avgPower)}),w.jsx("td",{className:"px-6 py-5",children:w.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400 text-[10px] font-bold uppercase tabular-nums",children:[w.jsx(Vy,{size:12}),L.lastUpdated?L.lastUpdated.toLocaleString("zh-TW").split(" ")[0]:"---"]})})]},L.name))})]}):w.jsxs("table",{className:"w-full text-left border-collapse",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"bg-gray-50/50",children:[[{key:"gameId",label:e("member_id")},{key:"alliance",label:e("alliance_label")},{key:"team1Power",label:e("s1_power")},{key:"team2Power",label:e("s2_power")},{key:"team3Power",label:e("s3_power")},{key:"totalPower",label:e("total_eval"),focus:!0},{key:"submittedAt",label:e("update_record")}].map(L=>w.jsx("th",{onClick:()=>V(L.key),className:`px-6 py-4 text-[10px] font-black uppercase tracking-widest cursor-pointer hover:bg-gray-100/50 transition-colors select-none ${L.focus?"text-indigo-600 bg-indigo-50/10":"text-gray-400"}`,children:w.jsxs("div",{className:"flex items-center justify-between gap-1",children:[L.label,ce(L.key)]})},L.key)),w.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:e("actions")})]})}),w.jsx("tbody",{className:"divide-y divide-gray-100",children:ge.length===0?w.jsx("tr",{children:w.jsx("td",{colSpan:"8",className:"px-6 py-20 text-center",children:w.jsxs("div",{className:"flex flex-col items-center space-y-4 opacity-20",children:[w.jsx(My,{size:48}),w.jsx("p",{className:"font-bold uppercase text-xs tracking-widest",children:e(B?"no_results":"no_data")})]})})}):ge.map(L=>{const N=(L.team1Power||0)+(L.team2Power||0)+(L.team3Power||0);return w.jsxs("tr",{className:"group hover:bg-indigo-50/20 transition-colors",children:[w.jsx("td",{className:"px-6 py-5",children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-[10px] font-black text-gray-500 border border-gray-200",children:L.gameId?.substring(0,2).toUpperCase()}),w.jsx("span",{className:"font-bold text-gray-800 tracking-tight",children:L.gameId})]})}),w.jsx("td",{className:"px-6 py-5 text-xs font-bold text-gray-500 tracking-tighter",children:L.alliance}),w.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:tr(L.team1Power)}),w.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:tr(L.team2Power)}),w.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:tr(L.team3Power)}),w.jsx("td",{className:"px-6 py-5",children:w.jsx("span",{className:"font-black text-indigo-600 font-mono text-base tabular-nums tracking-tighter",children:tr(N)})}),w.jsx("td",{className:"px-6 py-5",children:w.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400 text-[10px] font-bold uppercase tabular-nums",children:[w.jsx(Vy,{size:12}),jy(L.submittedAt).split(" ")[0]]})}),w.jsx("td",{className:"px-6 py-5 text-center",children:w.jsxs("div",{className:"flex items-center justify-center gap-2",children:[w.jsx("button",{onClick:()=>Ne(L),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",title:e("edit"),children:w.jsx(Ly,{size:16})}),w.jsx("button",{onClick:()=>k(L.id,L.gameId),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",title:e("delete"),children:w.jsx(Jh,{size:16})})]})})]},L.id)})})]})}),w.jsxs("div",{className:"p-4 bg-gray-50/50 border-t border-gray-100 text-[9px] font-black text-gray-300 uppercase tracking-[0.2em] flex justify-between items-center",children:[w.jsx("span",{children:e("intel_v2")}),w.jsxs("span",{className:"bg-white px-2 py-0.5 rounded border border-gray-200 text-gray-400",children:[e(F==="alliances"?"alliance_label":"data_count"),": ",F==="alliances"?A.length:ge.length]})]})]})]})};function NA(){const[r,e]=se.useState("form"),[t,s]=se.useState(!1),{user:o,isAdmin:l,loading:d}=s0(),{lang:f,t:g,toggleLang:_}=Dc();se.useEffect(()=>{const F=localStorage.getItem("isLoginMode")==="true";!d&&!o&&!t&&!F&&tT(rs).catch(z=>{console.error(":",z)}),!o&&F&&s(!0)},[o,d,t]),se.useEffect(()=>{o&&(localStorage.removeItem("isLoginMode"),s(!1))},[o]);const E=async()=>{try{localStorage.removeItem("isLoginMode"),s(!1),await Dg(rs)}catch(F){console.error(":",F)}},A=async()=>{localStorage.setItem("isLoginMode","true"),s(!0),await Dg(rs)},b=()=>{localStorage.removeItem("isLoginMode"),s(!1)};return d?w.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 space-y-4",children:[w.jsx(iA,{className:"w-10 h-10 text-blue-600 animate-spin"}),w.jsx("p",{className:"text-gray-500 font-medium animate-pulse",children:g("loading_system")})]}):t&&!o?w.jsx("div",{className:"min-h-screen bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-blue-100 via-white to-indigo-100 flex flex-col items-center justify-center p-4",children:w.jsxs("div",{className:"w-full max-w-md animate-in fade-in zoom-in duration-500",children:[w.jsx(Gk,{}),w.jsx("button",{onClick:b,className:"w-full mt-6 py-3 text-gray-400 hover:text-gray-600 text-sm font-bold flex items-center justify-center gap-2 transition-colors border border-transparent hover:border-gray-200 rounded-xl",children:g("back_to_guest")})]})}):o?w.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] flex flex-col font-sans selection:bg-indigo-100 selection:text-indigo-900",children:[w.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-gray-100 shadow-sm",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-18 flex justify-between items-center",children:[w.jsxs("div",{className:"flex items-center gap-3 group cursor-default",children:[w.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-200 group-hover:rotate-12 transition-transform duration-300",children:w.jsx(ja,{className:"text-white w-6 h-6"})}),w.jsxs("div",{children:[w.jsx("h1",{className:"text-lg font-black text-gray-900 tracking-tight leading-none",children:g("title")}),w.jsx("p",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-[0.2em] mt-1 opacity-80",children:g("subtitle")})]})]}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-3 py-1.5 rounded-full border border-gray-100 bg-gray-50 text-xs font-bold text-gray-600 hover:bg-gray-100 transition-all",children:[w.jsx(tA,{size:14,className:"text-blue-500"}),f==="zh"?"English":""]}),w.jsxs("div",{className:"hidden md:flex items-center gap-4 py-1.5 px-3 bg-gray-50 rounded-full border border-gray-100",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:`w-2 h-2 rounded-full ${o.isAnonymous?"bg-orange-400 animate-pulse":"bg-green-500"}`}),w.jsx("span",{className:"text-xs font-bold text-gray-600 tracking-wide",children:o.isAnonymous?g("guest_mode"):o.email?.split("@")[0]})]}),l&&w.jsx("span",{className:"bg-indigo-600 text-[10px] text-white px-2 py-0.5 rounded-full font-black uppercase tracking-wider shadow-sm",children:g("admin_tag")})]}),!o.isAnonymous&&w.jsx("button",{onClick:E,className:"group flex items-center gap-2 text-gray-400 hover:text-red-500 transition-colors p-2 rounded-lg hover:bg-red-50",title:g("logout"),children:w.jsx(sA,{size:20,className:"group-hover:-translate-x-0.5 transition-transform"})})]})]})}),w.jsx("main",{className:"flex-grow",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12",children:[l&&w.jsxs("div",{className:"inline-flex p-1 bg-white border border-gray-200 rounded-2xl mb-10 shadow-sm",children:[w.jsxs("button",{onClick:()=>e("form"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 ${r==="form"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[w.jsx(rA,{size:18})," ",g("personal_entry")]}),w.jsxs("button",{onClick:()=>e("admin"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 ${r==="admin"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[w.jsx(cA,{size:18})," ",g("all_management")]}),w.jsxs("button",{onClick:()=>e("planner"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 ${r==="planner"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[w.jsx(oA,{size:18})," ",g("view_planner")]})]}),w.jsxs("div",{className:"relative",children:[r==="admin"&&l&&w.jsx(Uy,{}),r==="planner"&&l&&w.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:w.jsx(Uy,{forcePlanner:!0})}),r==="form"&&w.jsx(yA,{user:o})]})]})}),w.jsx("footer",{className:"bg-white border-t border-gray-100 py-12 px-4",children:w.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-8",children:[w.jsxs("div",{className:"flex flex-col items-center md:items-start gap-2",children:[w.jsxs("div",{className:"flex items-center gap-2 opacity-30 grayscale",children:[w.jsx(ja,{size:20}),w.jsx("span",{className:"font-black text-lg tracking-tighter uppercase whitespace-nowrap",children:g("title")})]}),w.jsx("p",{className:"text-gray-400 text-xs font-medium",children:g("footer_text")})]}),w.jsxs("div",{className:"flex items-center gap-8",children:[w.jsxs("div",{className:"text-[10px] font-black text-gray-300 uppercase tracking-[0.3em] hidden sm:block",children:["Intel Status: ",w.jsx("span",{className:"text-green-500",children:g("status_operational")})]}),o.isAnonymous&&w.jsxs("button",{onClick:A,className:"group flex items-center gap-2 py-2 px-4 rounded-full border border-gray-200 text-[11px] font-black text-gray-500 hover:bg-gray-900 hover:text-white hover:border-gray-900 transition-all shadow-sm",children:[g("admin_login_gate")," ",w.jsx(Jk,{size:14,className:"group-hover:translate-x-0.5 transition-transform"})]})]})]})}),w.jsx(Kk,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!1,theme:"light"})]}):w.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 space-y-4",children:[w.jsx(ja,{className:"w-12 h-12 text-blue-600 animate-bounce"}),w.jsx("div",{className:"text-gray-600 font-black tracking-widest uppercase text-xs",children:g("preparing_env")})]})}Cw.createRoot(document.getElementById("root")).render(w.jsx(Ke.StrictMode,{children:w.jsx(Ok,{children:w.jsx(NA,{})})}));
