(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function $y(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var uh={exports:{}},ka={},ch={exports:{}},be={};var og;function xw(){if(og)return be;og=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function C(N){return N===null||typeof N!="object"?null:(N=A&&N[A]||N["@@iterator"],typeof N=="function"?N:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,z={};function $(N,W,ie){this.props=N,this.context=W,this.refs=z,this.updater=ie||O}$.prototype.isReactComponent={},$.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},$.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Q(){}Q.prototype=$.prototype;function te(N,W,ie){this.props=N,this.context=W,this.refs=z,this.updater=ie||O}var J=te.prototype=new Q;J.constructor=te,L(J,$.prototype),J.isPureReactComponent=!0;var oe=Array.isArray,Se=Object.prototype.hasOwnProperty,ye={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function x(N,W,ie){var _e,pe={},Ce=null,De=null;if(W!=null)for(_e in W.ref!==void 0&&(De=W.ref),W.key!==void 0&&(Ce=""+W.key),W)Se.call(W,_e)&&!R.hasOwnProperty(_e)&&(pe[_e]=W[_e]);var Fe=arguments.length-2;if(Fe===1)pe.children=ie;else if(1<Fe){for(var Qe=Array(Fe),wt=0;wt<Fe;wt++)Qe[wt]=arguments[wt+2];pe.children=Qe}if(N&&N.defaultProps)for(_e in Fe=N.defaultProps,Fe)pe[_e]===void 0&&(pe[_e]=Fe[_e]);return{$$typeof:r,type:N,key:Ce,ref:De,props:pe,_owner:ye.current}}function I(N,W){return{$$typeof:r,type:N.type,key:W,ref:N.ref,props:N.props,_owner:N._owner}}function P(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function b(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ie){return W[ie]})}var V=/\/+/g;function k(N,W){return typeof N=="object"&&N!==null&&N.key!=null?b(""+N.key):W.toString(36)}function Ne(N,W,ie,_e,pe){var Ce=typeof N;(Ce==="undefined"||Ce==="boolean")&&(N=null);var De=!1;if(N===null)De=!0;else switch(Ce){case"string":case"number":De=!0;break;case"object":switch(N.$$typeof){case r:case e:De=!0}}if(De)return De=N,pe=pe(De),N=_e===""?"."+k(De,0):_e,oe(pe)?(ie="",N!=null&&(ie=N.replace(V,"$&/")+"/"),Ne(pe,W,ie,"",function(wt){return wt})):pe!=null&&(P(pe)&&(pe=I(pe,ie+(!pe.key||De&&De.key===pe.key?"":(""+pe.key).replace(V,"$&/")+"/")+N)),W.push(pe)),1;if(De=0,_e=_e===""?".":_e+":",oe(N))for(var Fe=0;Fe<N.length;Fe++){Ce=N[Fe];var Qe=_e+k(Ce,Fe);De+=Ne(Ce,W,ie,Qe,pe)}else if(Qe=C(N),typeof Qe=="function")for(N=Qe.call(N),Fe=0;!(Ce=N.next()).done;)Ce=Ce.value,Qe=_e+k(Ce,Fe++),De+=Ne(Ce,W,ie,Qe,pe);else if(Ce==="object")throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return De}function ze(N,W,ie){if(N==null)return N;var _e=[],pe=0;return Ne(N,_e,"","",function(Ce){return W.call(ie,Ce,pe++)}),_e}function qe(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(ie){(N._status===0||N._status===-1)&&(N._status=1,N._result=ie)},function(ie){(N._status===0||N._status===-1)&&(N._status=2,N._result=ie)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var ge={current:null},ee={transition:null},ce={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:ee,ReactCurrentOwner:ye};function j(){throw Error("act(...) is not supported in production builds of React.")}return be.Children={map:ze,forEach:function(N,W,ie){ze(N,function(){W.apply(this,arguments)},ie)},count:function(N){var W=0;return ze(N,function(){W++}),W},toArray:function(N){return ze(N,function(W){return W})||[]},only:function(N){if(!P(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},be.Component=$,be.Fragment=t,be.Profiler=o,be.PureComponent=te,be.StrictMode=i,be.Suspense=g,be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,be.act=j,be.cloneElement=function(N,W,ie){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var _e=L({},N.props),pe=N.key,Ce=N.ref,De=N._owner;if(W!=null){if(W.ref!==void 0&&(Ce=W.ref,De=ye.current),W.key!==void 0&&(pe=""+W.key),N.type&&N.type.defaultProps)var Fe=N.type.defaultProps;for(Qe in W)Se.call(W,Qe)&&!R.hasOwnProperty(Qe)&&(_e[Qe]=W[Qe]===void 0&&Fe!==void 0?Fe[Qe]:W[Qe])}var Qe=arguments.length-2;if(Qe===1)_e.children=ie;else if(1<Qe){Fe=Array(Qe);for(var wt=0;wt<Qe;wt++)Fe[wt]=arguments[wt+2];_e.children=Fe}return{$$typeof:r,type:N.type,key:pe,ref:Ce,props:_e,_owner:De}},be.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:l,_context:N},N.Consumer=N},be.createElement=x,be.createFactory=function(N){var W=x.bind(null,N);return W.type=N,W},be.createRef=function(){return{current:null}},be.forwardRef=function(N){return{$$typeof:f,render:N}},be.isValidElement=P,be.lazy=function(N){return{$$typeof:E,_payload:{_status:-1,_result:N},_init:qe}},be.memo=function(N,W){return{$$typeof:v,type:N,compare:W===void 0?null:W}},be.startTransition=function(N){var W=ee.transition;ee.transition={};try{N()}finally{ee.transition=W}},be.unstable_act=j,be.useCallback=function(N,W){return ge.current.useCallback(N,W)},be.useContext=function(N){return ge.current.useContext(N)},be.useDebugValue=function(){},be.useDeferredValue=function(N){return ge.current.useDeferredValue(N)},be.useEffect=function(N,W){return ge.current.useEffect(N,W)},be.useId=function(){return ge.current.useId()},be.useImperativeHandle=function(N,W,ie){return ge.current.useImperativeHandle(N,W,ie)},be.useInsertionEffect=function(N,W){return ge.current.useInsertionEffect(N,W)},be.useLayoutEffect=function(N,W){return ge.current.useLayoutEffect(N,W)},be.useMemo=function(N,W){return ge.current.useMemo(N,W)},be.useReducer=function(N,W,ie){return ge.current.useReducer(N,W,ie)},be.useRef=function(N){return ge.current.useRef(N)},be.useState=function(N){return ge.current.useState(N)},be.useSyncExternalStore=function(N,W,ie){return ge.current.useSyncExternalStore(N,W,ie)},be.useTransition=function(){return ge.current.useTransition()},be.version="18.3.1",be}var ag;function tf(){return ag||(ag=1,ch.exports=xw()),ch.exports}var lg;function Tw(){if(lg)return ka;lg=1;var r=tf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(f,g,v){var E,A={},C=null,O=null;v!==void 0&&(C=""+v),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(O=g.ref);for(E in g)i.call(g,E)&&!l.hasOwnProperty(E)&&(A[E]=g[E]);if(f&&f.defaultProps)for(E in g=f.defaultProps,g)A[E]===void 0&&(A[E]=g[E]);return{$$typeof:e,type:f,key:C,ref:O,props:A,_owner:o.current}}return ka.Fragment=t,ka.jsx=d,ka.jsxs=d,ka}var ug;function Iw(){return ug||(ug=1,uh.exports=Tw()),uh.exports}var y=Iw(),se=tf();const Ke=$y(se);var Pu={},dh={exports:{}},nn={},hh={exports:{}},fh={};var cg;function Sw(){return cg||(cg=1,(function(r){function e(ee,ce){var j=ee.length;ee.push(ce);e:for(;0<j;){var N=j-1>>>1,W=ee[N];if(0<o(W,ce))ee[N]=ce,ee[j]=W,j=N;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ce=ee[0],j=ee.pop();if(j!==ce){ee[0]=j;e:for(var N=0,W=ee.length,ie=W>>>1;N<ie;){var _e=2*(N+1)-1,pe=ee[_e],Ce=_e+1,De=ee[Ce];if(0>o(pe,j))Ce<W&&0>o(De,pe)?(ee[N]=De,ee[Ce]=j,N=Ce):(ee[N]=pe,ee[_e]=j,N=_e);else if(Ce<W&&0>o(De,j))ee[N]=De,ee[Ce]=j,N=Ce;else break e}}return ce}function o(ee,ce){var j=ee.sortIndex-ce.sortIndex;return j!==0?j:ee.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var g=[],v=[],E=1,A=null,C=3,O=!1,L=!1,z=!1,$=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(ee){for(var ce=t(v);ce!==null;){if(ce.callback===null)i(v);else if(ce.startTime<=ee)i(v),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=t(v)}}function oe(ee){if(z=!1,J(ee),!L)if(t(g)!==null)L=!0,qe(Se);else{var ce=t(v);ce!==null&&ge(oe,ce.startTime-ee)}}function Se(ee,ce){L=!1,z&&(z=!1,Q(x),x=-1),O=!0;var j=C;try{for(J(ce),A=t(g);A!==null&&(!(A.expirationTime>ce)||ee&&!b());){var N=A.callback;if(typeof N=="function"){A.callback=null,C=A.priorityLevel;var W=N(A.expirationTime<=ce);ce=r.unstable_now(),typeof W=="function"?A.callback=W:A===t(g)&&i(g),J(ce)}else i(g);A=t(g)}if(A!==null)var ie=!0;else{var _e=t(v);_e!==null&&ge(oe,_e.startTime-ce),ie=!1}return ie}finally{A=null,C=j,O=!1}}var ye=!1,R=null,x=-1,I=5,P=-1;function b(){return!(r.unstable_now()-P<I)}function V(){if(R!==null){var ee=r.unstable_now();P=ee;var ce=!0;try{ce=R(!0,ee)}finally{ce?k():(ye=!1,R=null)}}else ye=!1}var k;if(typeof te=="function")k=function(){te(V)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,ze=Ne.port2;Ne.port1.onmessage=V,k=function(){ze.postMessage(null)}}else k=function(){$(V,0)};function qe(ee){R=ee,ye||(ye=!0,k())}function ge(ee,ce){x=$(function(){ee(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ee){ee.callback=null},r.unstable_continueExecution=function(){L||O||(L=!0,qe(Se))},r.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ee?Math.floor(1e3/ee):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(ee){switch(C){case 1:case 2:case 3:var ce=3;break;default:ce=C}var j=C;C=ce;try{return ee()}finally{C=j}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ee,ce){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var j=C;C=ee;try{return ce()}finally{C=j}},r.unstable_scheduleCallback=function(ee,ce,j){var N=r.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?N+j:N):j=N,ee){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=j+W,ee={id:E++,callback:ce,priorityLevel:ee,startTime:j,expirationTime:W,sortIndex:-1},j>N?(ee.sortIndex=j,e(v,ee),t(g)===null&&ee===t(v)&&(z?(Q(x),x=-1):z=!0,ge(oe,j-N))):(ee.sortIndex=W,e(g,ee),L||O||(L=!0,qe(Se))),ee},r.unstable_shouldYield=b,r.unstable_wrapCallback=function(ee){var ce=C;return function(){var j=C;C=ce;try{return ee.apply(this,arguments)}finally{C=j}}}})(fh)),fh}var dg;function kw(){return dg||(dg=1,hh.exports=Sw()),hh.exports}var hg;function Aw(){if(hg)return nn;hg=1;var r=tf(),e=kw();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){d(n,s),d(n+"Capture",s)}function d(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},A={};function C(n){return g.call(A,n)?!0:g.call(E,n)?!1:v.test(n)?A[n]=!0:(E[n]=!0,!1)}function O(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,s,a,c){if(s===null||typeof s>"u"||O(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function z(n,s,a,c,h,m,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=w}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){$[n]=new z(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];$[s]=new z(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){$[n]=new z(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){$[n]=new z(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){$[n]=new z(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){$[n]=new z(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){$[n]=new z(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){$[n]=new z(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){$[n]=new z(n,5,!1,n.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function te(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(Q,te);$[s]=new z(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(Q,te);$[s]=new z(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(Q,te);$[s]=new z(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){$[n]=new z(n,1,!1,n.toLowerCase(),null,!1,!1)}),$.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){$[n]=new z(n,1,!1,n.toLowerCase(),null,!0,!0)});function J(n,s,a,c){var h=$.hasOwnProperty(s)?$[s]:null;(h!==null?h.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,a,h,c)&&(a=null),c||h===null?C(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):h.mustUseProperty?n[h.propertyName]=a===null?h.type===3?!1:"":a:(s=h.attributeName,c=h.attributeNamespace,a===null?n.removeAttribute(s):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var oe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),ye=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),b=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),ze=Symbol.for("react.memo"),qe=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),ee=Symbol.iterator;function ce(n){return n===null||typeof n!="object"?null:(n=ee&&n[ee]||n["@@iterator"],typeof n=="function"?n:null)}var j=Object.assign,N;function W(n){if(N===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);N=s&&s[1]||""}return`
`+N+n}var ie=!1;function _e(n,s){if(!n||ie)return"";ie=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(q){var c=q}Reflect.construct(n,[],s)}else{try{s.call()}catch(q){c=q}n.call(s.prototype)}else{try{throw Error()}catch(q){c=q}n()}}catch(q){if(q&&c&&typeof q.stack=="string"){for(var h=q.stack.split(`
`),m=c.stack.split(`
`),w=h.length-1,S=m.length-1;1<=w&&0<=S&&h[w]!==m[S];)S--;for(;1<=w&&0<=S;w--,S--)if(h[w]!==m[S]){if(w!==1||S!==1)do if(w--,S--,0>S||h[w]!==m[S]){var D=`
`+h[w].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=w&&0<=S);break}}}finally{ie=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?W(n):""}function pe(n){switch(n.tag){case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return n=_e(n.type,!1),n;case 11:return n=_e(n.type.render,!1),n;case 1:return n=_e(n.type,!0),n;default:return""}}function Ce(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case ye:return"Portal";case I:return"Profiler";case x:return"StrictMode";case k:return"Suspense";case Ne:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case b:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case V:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ze:return s=n.displayName||null,s!==null?s:Ce(n.type)||"Memo";case qe:s=n._payload,n=n._init;try{return Ce(n(s))}catch{}}return null}function De(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(s);case 8:return s===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Qe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function wt(n){var s=Qe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function lr(n){n._valueTracker||(n._valueTracker=wt(n))}function mi(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Qe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function jr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ss(n,s){var a=s.checked;return j({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function gi(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Fe(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function No(n,s){s=s.checked,s!=null&&J(n,"checked",s,!1)}function Do(n,s){No(n,s);var a=Fe(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?yi(n,s.type,a):s.hasOwnProperty("defaultValue")&&yi(n,s.type,Fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function fl(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function yi(n,s,a){(s!=="number"||jr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ur=Array.isArray;function cr(n,s,a,c){if(n=n.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=s.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),s=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function Vo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return j({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function _i(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(ur(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Fe(a)}}function vi(n,s){var a=Fe(s.value),c=Fe(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Mo(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function pt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?pt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var dr,Oo=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,h){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,h)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=dr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Fr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},As=["Webkit","ms","Moz","O"];Object.keys(ks).forEach(function(n){As.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),ks[s]=ks[n]})});function Lo(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||ks.hasOwnProperty(n)&&ks[n]?(""+s).trim():s+"px"}function jo(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=Lo(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,h):n[a]=h}}var Fo=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uo(n,s){if(s){if(Fo[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function zo(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ps=null;function wi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ei=null,pn=null,qn=null;function xi(n){if(n=da(n)){if(typeof Ei!="function")throw Error(t(280));var s=n.stateNode;s&&(s=$l(s),Ei(n.stateNode,n.type,s))}}function Hn(n){pn?qn?qn.push(n):qn=[n]:pn=n}function Bo(){if(pn){var n=pn,s=qn;if(qn=pn=null,xi(n),s)for(n=0;n<s.length;n++)xi(s[n])}}function Cs(n,s){return n(s)}function $o(){}var hr=!1;function qo(n,s,a){if(hr)return n(s,a);hr=!0;try{return Cs(n,s,a)}finally{hr=!1,(pn!==null||qn!==null)&&($o(),Bo())}}function at(n,s){var a=n.stateNode;if(a===null)return null;var c=$l(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ti=!1;if(f)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){Ti=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{Ti=!1}function Rs(n,s,a,c,h,m,w,S,D){var q=Array.prototype.slice.call(arguments,3);try{s.apply(a,q)}catch(Y){this.onError(Y)}}var bs=!1,Ii=null,An=!1,Ho=null,Lc={onError:function(n){bs=!0,Ii=n}};function Si(n,s,a,c,h,m,w,S,D){bs=!1,Ii=null,Rs.apply(Lc,arguments)}function pl(n,s,a,c,h,m,w,S,D){if(Si.apply(this,arguments),bs){if(bs){var q=Ii;bs=!1,Ii=null}else throw Error(t(198));An||(An=!0,Ho=q)}}function Pn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Ns(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Cn(n){if(Pn(n)!==n)throw Error(t(188))}function ml(n){var s=n.alternate;if(!s){if(s=Pn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return Cn(h),n;if(m===c)return Cn(h),s;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=h,c=m;else{for(var w=!1,S=h.child;S;){if(S===a){w=!0,a=h,c=m;break}if(S===c){w=!0,c=h,a=m;break}S=S.sibling}if(!w){for(S=m.child;S;){if(S===a){w=!0,a=m,c=h;break}if(S===c){w=!0,c=m,a=h;break}S=S.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Wo(n){return n=ml(n),n!==null?ki(n):null}function ki(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=ki(n);if(s!==null)return s;n=n.sibling}return null}var Ai=e.unstable_scheduleCallback,Ko=e.unstable_cancelCallback,gl=e.unstable_shouldYield,jc=e.unstable_requestPaint,Ye=e.unstable_now,yl=e.unstable_getCurrentPriorityLevel,Ds=e.unstable_ImmediatePriority,Ur=e.unstable_UserBlockingPriority,mn=e.unstable_NormalPriority,Go=e.unstable_LowPriority,_l=e.unstable_IdlePriority,Vs=null,sn=null;function vl(n){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Vs,n,void 0,(n.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:El,Qo=Math.log,wl=Math.LN2;function El(n){return n>>>=0,n===0?32:31-(Qo(n)/wl|0)|0}var Pi=64,Ci=4194304;function zr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ms(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,h=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var S=w&~h;S!==0?c=zr(S):(m&=w,m!==0&&(c=zr(m)))}else w=a&~h,w!==0?c=zr(w):m!==0&&(c=zr(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&h)===0&&(h=c&-c,m=s&-s,h>=m||h===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-$t(s),h=1<<a,c|=n[a],s&=~h;return c}function Fc(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-$t(m),S=1<<w,D=h[w];D===-1?((S&a)===0||(S&c)!==0)&&(h[w]=Fc(S,s)):D<=s&&(n.expiredLanes|=S),m&=~S}}function on(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Os(){var n=Pi;return Pi<<=1,(Pi&4194240)===0&&(Pi=64),n}function Br(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function $r(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-$t(s),n[s]=a}function Ge(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var h=31-$t(a),m=1<<h;s[h]=0,c[h]=-1,n[h]=-1,a&=~m}}function qr(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-$t(a),h=1<<c;h&s|n[c]&s&&(n[c]|=s),a&=~h}}var Me=0;function Hr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var xl,Ri,Tl,Il,Sl,Yo=!1,Wn=[],At=null,Rn=null,bn=null,Wr=new Map,gn=new Map,Kn=[],Uc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kl(n,s){switch(n){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":Wr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":gn.delete(s.pointerId)}}function Qt(n,s,a,c,h,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[h]},s!==null&&(s=da(s),s!==null&&Ri(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function zc(n,s,a,c,h){switch(s){case"focusin":return At=Qt(At,n,s,a,c,h),!0;case"dragenter":return Rn=Qt(Rn,n,s,a,c,h),!0;case"mouseover":return bn=Qt(bn,n,s,a,c,h),!0;case"pointerover":var m=h.pointerId;return Wr.set(m,Qt(Wr.get(m)||null,n,s,a,c,h)),!0;case"gotpointercapture":return m=h.pointerId,gn.set(m,Qt(gn.get(m)||null,n,s,a,c,h)),!0}return!1}function Al(n){var s=zs(n.target);if(s!==null){var a=Pn(s);if(a!==null){if(s=a.tag,s===13){if(s=Ns(a),s!==null){n.blockedOn=s,Sl(n.priority,function(){Tl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function pr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=bi(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Ps=c,a.target.dispatchEvent(c),Ps=null}else return s=da(a),s!==null&&Ri(s),n.blockedOn=a,!1;s.shift()}return!0}function Ls(n,s,a){pr(n)&&a.delete(s)}function Pl(){Yo=!1,At!==null&&pr(At)&&(At=null),Rn!==null&&pr(Rn)&&(Rn=null),bn!==null&&pr(bn)&&(bn=null),Wr.forEach(Ls),gn.forEach(Ls)}function Nn(n,s){n.blockedOn===s&&(n.blockedOn=null,Yo||(Yo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Pl)))}function Dn(n){function s(h){return Nn(h,n)}if(0<Wn.length){Nn(Wn[0],n);for(var a=1;a<Wn.length;a++){var c=Wn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(At!==null&&Nn(At,n),Rn!==null&&Nn(Rn,n),bn!==null&&Nn(bn,n),Wr.forEach(s),gn.forEach(s),a=0;a<Kn.length;a++)c=Kn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Kn.length&&(a=Kn[0],a.blockedOn===null);)Al(a),a.blockedOn===null&&Kn.shift()}var mr=oe.ReactCurrentBatchConfig,Kr=!0;function tt(n,s,a,c){var h=Me,m=mr.transition;mr.transition=null;try{Me=1,Xo(n,s,a,c)}finally{Me=h,mr.transition=m}}function Bc(n,s,a,c){var h=Me,m=mr.transition;mr.transition=null;try{Me=4,Xo(n,s,a,c)}finally{Me=h,mr.transition=m}}function Xo(n,s,a,c){if(Kr){var h=bi(n,s,a,c);if(h===null)Zc(n,s,c,js,a),kl(n,c);else if(zc(h,n,s,a,c))c.stopPropagation();else if(kl(n,c),s&4&&-1<Uc.indexOf(n)){for(;h!==null;){var m=da(h);if(m!==null&&xl(m),m=bi(n,s,a,c),m===null&&Zc(n,s,c,js,a),m===h)break;h=m}h!==null&&c.stopPropagation()}else Zc(n,s,c,null,a)}}var js=null;function bi(n,s,a,c){if(js=null,n=wi(c),n=zs(n),n!==null)if(s=Pn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Ns(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return js=n,null}function Jo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yl()){case Ds:return 1;case Ur:return 4;case mn:case Go:return 16;case _l:return 536870912;default:return 16}default:return 16}}var an=null,Ni=null,Yt=null;function Zo(){if(Yt)return Yt;var n,s=Ni,a=s.length,c,h="value"in an?an.value:an.textContent,m=h.length;for(n=0;n<a&&s[n]===h[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===h[m-c];c++);return Yt=h.slice(n,1<c?1-c:void 0)}function Di(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Gn(){return!0}function ea(){return!1}function Pt(n){function s(a,c,h,m,w){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Gn:ea,this.isPropagationStopped=ea,this}return j(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),s}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Pt(Vn),Qn=j({},Vn,{view:0,detail:0}),$c=Pt(Qn),Mi,gr,Gr,Fs=j({},Qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Gr&&(Gr&&n.type==="mousemove"?(Mi=n.screenX-Gr.screenX,gr=n.screenY-Gr.screenY):gr=Mi=0,Gr=n),Mi)},movementY:function(n){return"movementY"in n?n.movementY:gr}}),Oi=Pt(Fs),ta=j({},Fs,{dataTransfer:0}),Cl=Pt(ta),Li=j({},Qn,{relatedTarget:0}),ji=Pt(Li),Rl=j({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),yr=Pt(Rl),bl=j({},Vn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Nl=Pt(bl),Dl=j({},Vn,{data:0}),na=Pt(Dl),Fi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ml(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Vl[n])?!!s[n]:!1}function Yn(){return Ml}var u=j({},Qn,{key:function(n){if(n.key){var s=Fi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Di(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?qt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yn,charCode:function(n){return n.type==="keypress"?Di(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Di(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Pt(u),_=j({},Fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Pt(_),F=j({},Qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yn}),H=Pt(F),re=j({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Pt(re),gt=j({},Fs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Pt(gt),Et=[9,13,27,32],ct=f&&"CompositionEvent"in window,yn=null;f&&"documentMode"in document&&(yn=document.documentMode);var ln=f&&"TextEvent"in window&&!yn,Us=f&&(!ct||yn&&8<yn&&11>=yn),Ui=" ",ep=!1;function tp(n,s){switch(n){case"keyup":return Et.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function np(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var zi=!1;function v0(n,s){switch(n){case"compositionend":return np(s);case"keypress":return s.which!==32?null:(ep=!0,Ui);case"textInput":return n=s.data,n===Ui&&ep?null:n;default:return null}}function w0(n,s){if(zi)return n==="compositionend"||!ct&&tp(n,s)?(n=Zo(),Yt=Ni=an=null,zi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Us&&s.locale!=="ko"?null:s.data;default:return null}}var E0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!E0[n.type]:s==="textarea"}function sp(n,s,a,c){Hn(c),s=Ul(s,"onChange"),0<s.length&&(a=new Vi("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var ra=null,sa=null;function x0(n){xp(n,0)}function Ol(n){var s=Wi(n);if(mi(s))return n}function T0(n,s){if(n==="change")return s}var ip=!1;if(f){var qc;if(f){var Hc="oninput"in document;if(!Hc){var op=document.createElement("div");op.setAttribute("oninput","return;"),Hc=typeof op.oninput=="function"}qc=Hc}else qc=!1;ip=qc&&(!document.documentMode||9<document.documentMode)}function ap(){ra&&(ra.detachEvent("onpropertychange",lp),sa=ra=null)}function lp(n){if(n.propertyName==="value"&&Ol(sa)){var s=[];sp(s,sa,n,wi(n)),qo(x0,s)}}function I0(n,s,a){n==="focusin"?(ap(),ra=s,sa=a,ra.attachEvent("onpropertychange",lp)):n==="focusout"&&ap()}function S0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ol(sa)}function k0(n,s){if(n==="click")return Ol(s)}function A0(n,s){if(n==="input"||n==="change")return Ol(s)}function P0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Mn=typeof Object.is=="function"?Object.is:P0;function ia(n,s){if(Mn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!g.call(s,h)||!Mn(n[h],s[h]))return!1}return!0}function up(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cp(n,s){var a=up(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=up(a)}}function dp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?dp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function hp(){for(var n=window,s=jr();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=jr(n.document)}return s}function Wc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function C0(n){var s=hp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&dp(a.ownerDocument.documentElement,a)){if(c!==null&&Wc(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var h=a.textContent.length,m=Math.min(c.start,h);c=c.end===void 0?m:Math.min(c.end,h),!n.extend&&m>c&&(h=c,c=m,m=h),h=cp(a,m);var w=cp(a,c);h&&w&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(h.node,h.offset),n.removeAllRanges(),m>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var R0=f&&"documentMode"in document&&11>=document.documentMode,Bi=null,Kc=null,oa=null,Gc=!1;function fp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gc||Bi==null||Bi!==jr(c)||(c=Bi,"selectionStart"in c&&Wc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),oa&&ia(oa,c)||(oa=c,c=Ul(Kc,"onSelect"),0<c.length&&(s=new Vi("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=Bi)))}function Ll(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var $i={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},Qc={},pp={};f&&(pp=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function jl(n){if(Qc[n])return Qc[n];if(!$i[n])return n;var s=$i[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in pp)return Qc[n]=s[a];return n}var mp=jl("animationend"),gp=jl("animationiteration"),yp=jl("animationstart"),_p=jl("transitionend"),vp=new Map,wp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(n,s){vp.set(n,s),l(s,[n])}for(var Yc=0;Yc<wp.length;Yc++){var Xc=wp[Yc],b0=Xc.toLowerCase(),N0=Xc[0].toUpperCase()+Xc.slice(1);Qr(b0,"on"+N0)}Qr(mp,"onAnimationEnd"),Qr(gp,"onAnimationIteration"),Qr(yp,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(_p,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D0=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function Ep(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,pl(c,s,void 0,n),n.currentTarget=null}function xp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],h=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var w=c.length-1;0<=w;w--){var S=c[w],D=S.instance,q=S.currentTarget;if(S=S.listener,D!==m&&h.isPropagationStopped())break e;Ep(h,S,q),m=D}else for(w=0;w<c.length;w++){if(S=c[w],D=S.instance,q=S.currentTarget,S=S.listener,D!==m&&h.isPropagationStopped())break e;Ep(h,S,q),m=D}}}if(An)throw n=Ho,An=!1,Ho=null,n}function Je(n,s){var a=s[id];a===void 0&&(a=s[id]=new Set);var c=n+"__bubble";a.has(c)||(Tp(s,n,2,!1),a.add(c))}function Jc(n,s,a){var c=0;s&&(c|=4),Tp(a,n,c,s)}var Fl="_reactListening"+Math.random().toString(36).slice(2);function la(n){if(!n[Fl]){n[Fl]=!0,i.forEach(function(a){a!=="selectionchange"&&(D0.has(a)||Jc(a,!1,n),Jc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Fl]||(s[Fl]=!0,Jc("selectionchange",!1,s))}}function Tp(n,s,a,c){switch(Jo(s)){case 1:var h=tt;break;case 4:h=Bc;break;default:h=Xo}a=h.bind(null,s,a,n),h=void 0,!Ti||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(s,a,{capture:!0,passive:h}):n.addEventListener(s,a,!0):h!==void 0?n.addEventListener(s,a,{passive:h}):n.addEventListener(s,a,!1)}function Zc(n,s,a,c,h){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var S=c.stateNode.containerInfo;if(S===h||S.nodeType===8&&S.parentNode===h)break;if(w===4)for(w=c.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===h||D.nodeType===8&&D.parentNode===h))return;w=w.return}for(;S!==null;){if(w=zs(S),w===null)return;if(D=w.tag,D===5||D===6){c=m=w;continue e}S=S.parentNode}}c=c.return}qo(function(){var q=m,Y=wi(a),Z=[];e:{var G=vp.get(n);if(G!==void 0){var ae=Vi,de=n;switch(n){case"keypress":if(Di(a)===0)break e;case"keydown":case"keyup":ae=p;break;case"focusin":de="focus",ae=ji;break;case"focusout":de="blur",ae=ji;break;case"beforeblur":case"afterblur":ae=ji;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Oi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Cl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=H;break;case mp:case gp:case yp:ae=yr;break;case _p:ae=He;break;case"scroll":ae=$c;break;case"wheel":ae=Le;break;case"copy":case"cut":case"paste":ae=Nl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=T}var he=(s&4)!==0,lt=!he&&n==="scroll",U=he?G!==null?G+"Capture":null:G;he=[];for(var M=q,B;M!==null;){B=M;var ne=B.stateNode;if(B.tag===5&&ne!==null&&(B=ne,U!==null&&(ne=at(M,U),ne!=null&&he.push(ua(M,ne,B)))),lt)break;M=M.return}0<he.length&&(G=new ae(G,de,null,a,Y),Z.push({event:G,listeners:he}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",G&&a!==Ps&&(de=a.relatedTarget||a.fromElement)&&(zs(de)||de[_r]))break e;if((ae||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,ae?(de=a.relatedTarget||a.toElement,ae=q,de=de?zs(de):null,de!==null&&(lt=Pn(de),de!==lt||de.tag!==5&&de.tag!==6)&&(de=null)):(ae=null,de=q),ae!==de)){if(he=Oi,ne="onMouseLeave",U="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(he=T,ne="onPointerLeave",U="onPointerEnter",M="pointer"),lt=ae==null?G:Wi(ae),B=de==null?G:Wi(de),G=new he(ne,M+"leave",ae,a,Y),G.target=lt,G.relatedTarget=B,ne=null,zs(Y)===q&&(he=new he(U,M+"enter",de,a,Y),he.target=B,he.relatedTarget=lt,ne=he),lt=ne,ae&&de)t:{for(he=ae,U=de,M=0,B=he;B;B=qi(B))M++;for(B=0,ne=U;ne;ne=qi(ne))B++;for(;0<M-B;)he=qi(he),M--;for(;0<B-M;)U=qi(U),B--;for(;M--;){if(he===U||U!==null&&he===U.alternate)break t;he=qi(he),U=qi(U)}he=null}else he=null;ae!==null&&Ip(Z,G,ae,he,!1),de!==null&&lt!==null&&Ip(Z,lt,de,he,!0)}}e:{if(G=q?Wi(q):window,ae=G.nodeName&&G.nodeName.toLowerCase(),ae==="select"||ae==="input"&&G.type==="file")var me=T0;else if(rp(G))if(ip)me=A0;else{me=S0;var we=I0}else(ae=G.nodeName)&&ae.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(me=k0);if(me&&(me=me(n,q))){sp(Z,me,a,Y);break e}we&&we(n,G,q),n==="focusout"&&(we=G._wrapperState)&&we.controlled&&G.type==="number"&&yi(G,"number",G.value)}switch(we=q?Wi(q):window,n){case"focusin":(rp(we)||we.contentEditable==="true")&&(Bi=we,Kc=q,oa=null);break;case"focusout":oa=Kc=Bi=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,fp(Z,a,Y);break;case"selectionchange":if(R0)break;case"keydown":case"keyup":fp(Z,a,Y)}var Ee;if(ct)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else zi?tp(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(Us&&a.locale!=="ko"&&(zi||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&zi&&(Ee=Zo()):(an=Y,Ni="value"in an?an.value:an.textContent,zi=!0)),we=Ul(q,Te),0<we.length&&(Te=new na(Te,n,null,a,Y),Z.push({event:Te,listeners:we}),Ee?Te.data=Ee:(Ee=np(a),Ee!==null&&(Te.data=Ee)))),(Ee=ln?v0(n,a):w0(n,a))&&(q=Ul(q,"onBeforeInput"),0<q.length&&(Y=new na("onBeforeInput","beforeinput",null,a,Y),Z.push({event:Y,listeners:q}),Y.data=Ee))}xp(Z,s)})}function ua(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Ul(n,s){for(var a=s+"Capture",c=[];n!==null;){var h=n,m=h.stateNode;h.tag===5&&m!==null&&(h=m,m=at(n,a),m!=null&&c.unshift(ua(n,m,h)),m=at(n,s),m!=null&&c.push(ua(n,m,h))),n=n.return}return c}function qi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ip(n,s,a,c,h){for(var m=s._reactName,w=[];a!==null&&a!==c;){var S=a,D=S.alternate,q=S.stateNode;if(D!==null&&D===c)break;S.tag===5&&q!==null&&(S=q,h?(D=at(a,m),D!=null&&w.unshift(ua(a,D,S))):h||(D=at(a,m),D!=null&&w.push(ua(a,D,S)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var V0=/\r\n?/g,M0=/\u0000|\uFFFD/g;function Sp(n){return(typeof n=="string"?n:""+n).replace(V0,`
`).replace(M0,"")}function zl(n,s,a){if(s=Sp(s),Sp(n)!==s&&a)throw Error(t(425))}function Bl(){}var ed=null,td=null;function nd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rd=typeof setTimeout=="function"?setTimeout:void 0,O0=typeof clearTimeout=="function"?clearTimeout:void 0,kp=typeof Promise=="function"?Promise:void 0,L0=typeof queueMicrotask=="function"?queueMicrotask:typeof kp<"u"?function(n){return kp.resolve(null).then(n).catch(j0)}:rd;function j0(n){setTimeout(function(){throw n})}function sd(n,s){var a=s,c=0;do{var h=a.nextSibling;if(n.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){n.removeChild(h),Dn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);Dn(s)}function Yr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Ap(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Hi=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Hi,ca="__reactProps$"+Hi,_r="__reactContainer$"+Hi,id="__reactEvents$"+Hi,F0="__reactListeners$"+Hi,U0="__reactHandles$"+Hi;function zs(n){var s=n[Xn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[_r]||a[Xn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Ap(n);n!==null;){if(a=n[Xn])return a;n=Ap(n)}return s}n=a,a=n.parentNode}return null}function da(n){return n=n[Xn]||n[_r],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Wi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function $l(n){return n[ca]||null}var od=[],Ki=-1;function Xr(n){return{current:n}}function Ze(n){0>Ki||(n.current=od[Ki],od[Ki]=null,Ki--)}function Xe(n,s){Ki++,od[Ki]=n.current,n.current=s}var Jr={},Mt=Xr(Jr),Xt=Xr(!1),Bs=Jr;function Gi(n,s){var a=n.type.contextTypes;if(!a)return Jr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var h={},m;for(m in a)h[m]=s[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=h),h}function Jt(n){return n=n.childContextTypes,n!=null}function ql(){Ze(Xt),Ze(Mt)}function Pp(n,s,a){if(Mt.current!==Jr)throw Error(t(168));Xe(Mt,s),Xe(Xt,a)}function Cp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in s))throw Error(t(108,De(n)||"Unknown",h));return j({},a,c)}function Hl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Jr,Bs=Mt.current,Xe(Mt,n),Xe(Xt,Xt.current),!0}function Rp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Cp(n,s,Bs),c.__reactInternalMemoizedMergedChildContext=n,Ze(Xt),Ze(Mt),Xe(Mt,n)):Ze(Xt),Xe(Xt,a)}var vr=null,Wl=!1,ad=!1;function bp(n){vr===null?vr=[n]:vr.push(n)}function z0(n){Wl=!0,bp(n)}function Zr(){if(!ad&&vr!==null){ad=!0;var n=0,s=Me;try{var a=vr;for(Me=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}vr=null,Wl=!1}catch(h){throw vr!==null&&(vr=vr.slice(n+1)),Ai(Ds,Zr),h}finally{Me=s,ad=!1}}return null}var Qi=[],Yi=0,Kl=null,Gl=0,_n=[],vn=0,$s=null,wr=1,Er="";function qs(n,s){Qi[Yi++]=Gl,Qi[Yi++]=Kl,Kl=n,Gl=s}function Np(n,s,a){_n[vn++]=wr,_n[vn++]=Er,_n[vn++]=$s,$s=n;var c=wr;n=Er;var h=32-$t(c)-1;c&=~(1<<h),a+=1;var m=32-$t(s)+h;if(30<m){var w=h-h%5;m=(c&(1<<w)-1).toString(32),c>>=w,h-=w,wr=1<<32-$t(s)+h|a<<h|c,Er=m+n}else wr=1<<m|a<<h|c,Er=n}function ld(n){n.return!==null&&(qs(n,1),Np(n,1,0))}function ud(n){for(;n===Kl;)Kl=Qi[--Yi],Qi[Yi]=null,Gl=Qi[--Yi],Qi[Yi]=null;for(;n===$s;)$s=_n[--vn],_n[vn]=null,Er=_n[--vn],_n[vn]=null,wr=_n[--vn],_n[vn]=null}var un=null,cn=null,nt=!1,On=null;function Dp(n,s){var a=Tn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Vp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,un=n,cn=Yr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,un=n,cn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=$s!==null?{id:wr,overflow:Er}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Tn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,un=n,cn=null,!0):!1;default:return!1}}function cd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function dd(n){if(nt){var s=cn;if(s){var a=s;if(!Vp(n,s)){if(cd(n))throw Error(t(418));s=Yr(a.nextSibling);var c=un;s&&Vp(n,s)?Dp(c,a):(n.flags=n.flags&-4097|2,nt=!1,un=n)}}else{if(cd(n))throw Error(t(418));n.flags=n.flags&-4097|2,nt=!1,un=n}}}function Mp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;un=n}function Ql(n){if(n!==un)return!1;if(!nt)return Mp(n),nt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!nd(n.type,n.memoizedProps)),s&&(s=cn)){if(cd(n))throw Op(),Error(t(418));for(;s;)Dp(n,s),s=Yr(s.nextSibling)}if(Mp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){cn=Yr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}cn=null}}else cn=un?Yr(n.stateNode.nextSibling):null;return!0}function Op(){for(var n=cn;n;)n=Yr(n.nextSibling)}function Xi(){cn=un=null,nt=!1}function hd(n){On===null?On=[n]:On.push(n)}var B0=oe.ReactCurrentBatchConfig;function ha(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var h=c,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(w){var S=h.refs;w===null?delete S[m]:S[m]=w},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Yl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Lp(n){var s=n._init;return s(n._payload)}function jp(n){function s(U,M){if(n){var B=U.deletions;B===null?(U.deletions=[M],U.flags|=16):B.push(M)}}function a(U,M){if(!n)return null;for(;M!==null;)s(U,M),M=M.sibling;return null}function c(U,M){for(U=new Map;M!==null;)M.key!==null?U.set(M.key,M):U.set(M.index,M),M=M.sibling;return U}function h(U,M){return U=as(U,M),U.index=0,U.sibling=null,U}function m(U,M,B){return U.index=B,n?(B=U.alternate,B!==null?(B=B.index,B<M?(U.flags|=2,M):B):(U.flags|=2,M)):(U.flags|=1048576,M)}function w(U){return n&&U.alternate===null&&(U.flags|=2),U}function S(U,M,B,ne){return M===null||M.tag!==6?(M=rh(B,U.mode,ne),M.return=U,M):(M=h(M,B),M.return=U,M)}function D(U,M,B,ne){var me=B.type;return me===R?Y(U,M,B.props.children,ne,B.key):M!==null&&(M.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===qe&&Lp(me)===M.type)?(ne=h(M,B.props),ne.ref=ha(U,M,B),ne.return=U,ne):(ne=wu(B.type,B.key,B.props,null,U.mode,ne),ne.ref=ha(U,M,B),ne.return=U,ne)}function q(U,M,B,ne){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=sh(B,U.mode,ne),M.return=U,M):(M=h(M,B.children||[]),M.return=U,M)}function Y(U,M,B,ne,me){return M===null||M.tag!==7?(M=Js(B,U.mode,ne,me),M.return=U,M):(M=h(M,B),M.return=U,M)}function Z(U,M,B){if(typeof M=="string"&&M!==""||typeof M=="number")return M=rh(""+M,U.mode,B),M.return=U,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Se:return B=wu(M.type,M.key,M.props,null,U.mode,B),B.ref=ha(U,null,M),B.return=U,B;case ye:return M=sh(M,U.mode,B),M.return=U,M;case qe:var ne=M._init;return Z(U,ne(M._payload),B)}if(ur(M)||ce(M))return M=Js(M,U.mode,B,null),M.return=U,M;Yl(U,M)}return null}function G(U,M,B,ne){var me=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return me!==null?null:S(U,M,""+B,ne);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Se:return B.key===me?D(U,M,B,ne):null;case ye:return B.key===me?q(U,M,B,ne):null;case qe:return me=B._init,G(U,M,me(B._payload),ne)}if(ur(B)||ce(B))return me!==null?null:Y(U,M,B,ne,null);Yl(U,B)}return null}function ae(U,M,B,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return U=U.get(B)||null,S(M,U,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Se:return U=U.get(ne.key===null?B:ne.key)||null,D(M,U,ne,me);case ye:return U=U.get(ne.key===null?B:ne.key)||null,q(M,U,ne,me);case qe:var we=ne._init;return ae(U,M,B,we(ne._payload),me)}if(ur(ne)||ce(ne))return U=U.get(B)||null,Y(M,U,ne,me,null);Yl(M,ne)}return null}function de(U,M,B,ne){for(var me=null,we=null,Ee=M,Te=M=0,It=null;Ee!==null&&Te<B.length;Te++){Ee.index>Te?(It=Ee,Ee=null):It=Ee.sibling;var Be=G(U,Ee,B[Te],ne);if(Be===null){Ee===null&&(Ee=It);break}n&&Ee&&Be.alternate===null&&s(U,Ee),M=m(Be,M,Te),we===null?me=Be:we.sibling=Be,we=Be,Ee=It}if(Te===B.length)return a(U,Ee),nt&&qs(U,Te),me;if(Ee===null){for(;Te<B.length;Te++)Ee=Z(U,B[Te],ne),Ee!==null&&(M=m(Ee,M,Te),we===null?me=Ee:we.sibling=Ee,we=Ee);return nt&&qs(U,Te),me}for(Ee=c(U,Ee);Te<B.length;Te++)It=ae(Ee,U,Te,B[Te],ne),It!==null&&(n&&It.alternate!==null&&Ee.delete(It.key===null?Te:It.key),M=m(It,M,Te),we===null?me=It:we.sibling=It,we=It);return n&&Ee.forEach(function(ls){return s(U,ls)}),nt&&qs(U,Te),me}function he(U,M,B,ne){var me=ce(B);if(typeof me!="function")throw Error(t(150));if(B=me.call(B),B==null)throw Error(t(151));for(var we=me=null,Ee=M,Te=M=0,It=null,Be=B.next();Ee!==null&&!Be.done;Te++,Be=B.next()){Ee.index>Te?(It=Ee,Ee=null):It=Ee.sibling;var ls=G(U,Ee,Be.value,ne);if(ls===null){Ee===null&&(Ee=It);break}n&&Ee&&ls.alternate===null&&s(U,Ee),M=m(ls,M,Te),we===null?me=ls:we.sibling=ls,we=ls,Ee=It}if(Be.done)return a(U,Ee),nt&&qs(U,Te),me;if(Ee===null){for(;!Be.done;Te++,Be=B.next())Be=Z(U,Be.value,ne),Be!==null&&(M=m(Be,M,Te),we===null?me=Be:we.sibling=Be,we=Be);return nt&&qs(U,Te),me}for(Ee=c(U,Ee);!Be.done;Te++,Be=B.next())Be=ae(Ee,U,Te,Be.value,ne),Be!==null&&(n&&Be.alternate!==null&&Ee.delete(Be.key===null?Te:Be.key),M=m(Be,M,Te),we===null?me=Be:we.sibling=Be,we=Be);return n&&Ee.forEach(function(Ew){return s(U,Ew)}),nt&&qs(U,Te),me}function lt(U,M,B,ne){if(typeof B=="object"&&B!==null&&B.type===R&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Se:e:{for(var me=B.key,we=M;we!==null;){if(we.key===me){if(me=B.type,me===R){if(we.tag===7){a(U,we.sibling),M=h(we,B.props.children),M.return=U,U=M;break e}}else if(we.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===qe&&Lp(me)===we.type){a(U,we.sibling),M=h(we,B.props),M.ref=ha(U,we,B),M.return=U,U=M;break e}a(U,we);break}else s(U,we);we=we.sibling}B.type===R?(M=Js(B.props.children,U.mode,ne,B.key),M.return=U,U=M):(ne=wu(B.type,B.key,B.props,null,U.mode,ne),ne.ref=ha(U,M,B),ne.return=U,U=ne)}return w(U);case ye:e:{for(we=B.key;M!==null;){if(M.key===we)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){a(U,M.sibling),M=h(M,B.children||[]),M.return=U,U=M;break e}else{a(U,M);break}else s(U,M);M=M.sibling}M=sh(B,U.mode,ne),M.return=U,U=M}return w(U);case qe:return we=B._init,lt(U,M,we(B._payload),ne)}if(ur(B))return de(U,M,B,ne);if(ce(B))return he(U,M,B,ne);Yl(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,M!==null&&M.tag===6?(a(U,M.sibling),M=h(M,B),M.return=U,U=M):(a(U,M),M=rh(B,U.mode,ne),M.return=U,U=M),w(U)):a(U,M)}return lt}var Ji=jp(!0),Fp=jp(!1),Xl=Xr(null),Jl=null,Zi=null,fd=null;function pd(){fd=Zi=Jl=null}function md(n){var s=Xl.current;Ze(Xl),n._currentValue=s}function gd(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function eo(n,s){Jl=n,fd=Zi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Zt=!0),n.firstContext=null)}function wn(n){var s=n._currentValue;if(fd!==n)if(n={context:n,memoizedValue:s,next:null},Zi===null){if(Jl===null)throw Error(t(308));Zi=n,Jl.dependencies={lanes:0,firstContext:n}}else Zi=Zi.next=n;return s}var Hs=null;function yd(n){Hs===null?Hs=[n]:Hs.push(n)}function Up(n,s,a,c){var h=s.interleaved;return h===null?(a.next=a,yd(s)):(a.next=h.next,h.next=a),s.interleaved=a,xr(n,c)}function xr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var es=!1;function _d(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Tr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ts(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ue&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,xr(n,a)}return h=c.interleaved,h===null?(s.next=s,yd(c)):(s.next=h.next,h.next=s),c.interleaved=s,xr(n,a)}function Zl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,qr(n,a)}}function Bp(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?h=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function eu(n,s,a,c){var h=n.updateQueue;es=!1;var m=h.firstBaseUpdate,w=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var D=S,q=D.next;D.next=null,w===null?m=q:w.next=q,w=D;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,S=Y.lastBaseUpdate,S!==w&&(S===null?Y.firstBaseUpdate=q:S.next=q,Y.lastBaseUpdate=D))}if(m!==null){var Z=h.baseState;w=0,Y=q=D=null,S=m;do{var G=S.lane,ae=S.eventTime;if((c&G)===G){Y!==null&&(Y=Y.next={eventTime:ae,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var de=n,he=S;switch(G=s,ae=a,he.tag){case 1:if(de=he.payload,typeof de=="function"){Z=de.call(ae,Z,G);break e}Z=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=he.payload,G=typeof de=="function"?de.call(ae,Z,G):de,G==null)break e;Z=j({},Z,G);break e;case 2:es=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,G=h.effects,G===null?h.effects=[S]:G.push(S))}else ae={eventTime:ae,lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Y===null?(q=Y=ae,D=Z):Y=Y.next=ae,w|=G;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;G=S,S=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);if(Y===null&&(D=Z),h.baseState=D,h.firstBaseUpdate=q,h.lastBaseUpdate=Y,s=h.shared.interleaved,s!==null){h=s;do w|=h.lane,h=h.next;while(h!==s)}else m===null&&(h.shared.lanes=0);Gs|=w,n.lanes=w,n.memoizedState=Z}}function $p(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(t(191,h));h.call(c)}}}var fa={},Jn=Xr(fa),pa=Xr(fa),ma=Xr(fa);function Ws(n){if(n===fa)throw Error(t(174));return n}function vd(n,s){switch(Xe(ma,s),Xe(pa,n),Xe(Jn,fa),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:mt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=mt(s,n)}Ze(Jn),Xe(Jn,s)}function to(){Ze(Jn),Ze(pa),Ze(ma)}function qp(n){Ws(ma.current);var s=Ws(Jn.current),a=mt(s,n.type);s!==a&&(Xe(pa,n),Xe(Jn,a))}function wd(n){pa.current===n&&(Ze(Jn),Ze(pa))}var rt=Xr(0);function tu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ed=[];function xd(){for(var n=0;n<Ed.length;n++)Ed[n]._workInProgressVersionPrimary=null;Ed.length=0}var nu=oe.ReactCurrentDispatcher,Td=oe.ReactCurrentBatchConfig,Ks=0,st=null,yt=null,xt=null,ru=!1,ga=!1,ya=0,$0=0;function Ot(){throw Error(t(321))}function Id(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Mn(n[a],s[a]))return!1;return!0}function Sd(n,s,a,c,h,m){if(Ks=m,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,nu.current=n===null||n.memoizedState===null?K0:G0,n=a(c,h),ga){m=0;do{if(ga=!1,ya=0,25<=m)throw Error(t(301));m+=1,xt=yt=null,s.updateQueue=null,nu.current=Q0,n=a(c,h)}while(ga)}if(nu.current=ou,s=yt!==null&&yt.next!==null,Ks=0,xt=yt=st=null,ru=!1,s)throw Error(t(300));return n}function kd(){var n=ya!==0;return ya=0,n}function Zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?st.memoizedState=xt=n:xt=xt.next=n,xt}function En(){if(yt===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=yt.next;var s=xt===null?st.memoizedState:xt.next;if(s!==null)xt=s,yt=n;else{if(n===null)throw Error(t(310));yt=n,n={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},xt===null?st.memoizedState=xt=n:xt=xt.next=n}return xt}function _a(n,s){return typeof s=="function"?s(n):s}function Ad(n){var s=En(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=yt,h=c.baseQueue,m=a.pending;if(m!==null){if(h!==null){var w=h.next;h.next=m.next,m.next=w}c.baseQueue=h=m,a.pending=null}if(h!==null){m=h.next,c=c.baseState;var S=w=null,D=null,q=m;do{var Y=q.lane;if((Ks&Y)===Y)D!==null&&(D=D.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),c=q.hasEagerState?q.eagerState:n(c,q.action);else{var Z={lane:Y,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};D===null?(S=D=Z,w=c):D=D.next=Z,st.lanes|=Y,Gs|=Y}q=q.next}while(q!==null&&q!==m);D===null?w=c:D.next=S,Mn(c,s.memoizedState)||(Zt=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=D,a.lastRenderedState=c}if(n=a.interleaved,n!==null){h=n;do m=h.lane,st.lanes|=m,Gs|=m,h=h.next;while(h!==n)}else h===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Pd(n){var s=En(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var w=h=h.next;do m=n(m,w.action),w=w.next;while(w!==h);Mn(m,s.memoizedState)||(Zt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function Hp(){}function Wp(n,s){var a=st,c=En(),h=s(),m=!Mn(c.memoizedState,h);if(m&&(c.memoizedState=h,Zt=!0),c=c.queue,Cd(Qp.bind(null,a,c,n),[n]),c.getSnapshot!==s||m||xt!==null&&xt.memoizedState.tag&1){if(a.flags|=2048,va(9,Gp.bind(null,a,c,h,s),void 0,null),Tt===null)throw Error(t(349));(Ks&30)!==0||Kp(a,s,h)}return h}function Kp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Gp(n,s,a,c){s.value=a,s.getSnapshot=c,Yp(s)&&Xp(n)}function Qp(n,s,a){return a(function(){Yp(s)&&Xp(n)})}function Yp(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Mn(n,a)}catch{return!0}}function Xp(n){var s=xr(n,1);s!==null&&Un(s,n,1,-1)}function Jp(n){var s=Zn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:n},s.queue=n,n=n.dispatch=W0.bind(null,st,n),[s.memoizedState,n]}function va(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function Zp(){return En().memoizedState}function su(n,s,a,c){var h=Zn();st.flags|=n,h.memoizedState=va(1|s,a,void 0,c===void 0?null:c)}function iu(n,s,a,c){var h=En();c=c===void 0?null:c;var m=void 0;if(yt!==null){var w=yt.memoizedState;if(m=w.destroy,c!==null&&Id(c,w.deps)){h.memoizedState=va(s,a,m,c);return}}st.flags|=n,h.memoizedState=va(1|s,a,m,c)}function em(n,s){return su(8390656,8,n,s)}function Cd(n,s){return iu(2048,8,n,s)}function tm(n,s){return iu(4,2,n,s)}function nm(n,s){return iu(4,4,n,s)}function rm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function sm(n,s,a){return a=a!=null?a.concat([n]):null,iu(4,4,rm.bind(null,s,n),a)}function Rd(){}function im(n,s){var a=En();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Id(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function om(n,s){var a=En();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Id(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function am(n,s,a){return(Ks&21)===0?(n.baseState&&(n.baseState=!1,Zt=!0),n.memoizedState=a):(Mn(a,s)||(a=Os(),st.lanes|=a,Gs|=a,n.baseState=!0),s)}function q0(n,s){var a=Me;Me=a!==0&&4>a?a:4,n(!0);var c=Td.transition;Td.transition={};try{n(!1),s()}finally{Me=a,Td.transition=c}}function lm(){return En().memoizedState}function H0(n,s,a){var c=is(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},um(n))cm(s,a);else if(a=Up(n,s,a,c),a!==null){var h=Wt();Un(a,n,c,h),dm(a,s,c)}}function W0(n,s,a){var c=is(n),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(um(n))cm(s,h);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,S=m(w,a);if(h.hasEagerState=!0,h.eagerState=S,Mn(S,w)){var D=s.interleaved;D===null?(h.next=h,yd(s)):(h.next=D.next,D.next=h),s.interleaved=h;return}}catch{}a=Up(n,s,h,c),a!==null&&(h=Wt(),Un(a,n,c,h),dm(a,s,c))}}function um(n){var s=n.alternate;return n===st||s!==null&&s===st}function cm(n,s){ga=ru=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function dm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,qr(n,a)}}var ou={readContext:wn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},K0={readContext:wn,useCallback:function(n,s){return Zn().memoizedState=[n,s===void 0?null:s],n},useContext:wn,useEffect:em,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,su(4194308,4,rm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return su(4194308,4,n,s)},useInsertionEffect:function(n,s){return su(4,2,n,s)},useMemo:function(n,s){var a=Zn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Zn();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=H0.bind(null,st,n),[c.memoizedState,n]},useRef:function(n){var s=Zn();return n={current:n},s.memoizedState=n},useState:Jp,useDebugValue:Rd,useDeferredValue:function(n){return Zn().memoizedState=n},useTransition:function(){var n=Jp(!1),s=n[0];return n=q0.bind(null,n[1]),Zn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=st,h=Zn();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Tt===null)throw Error(t(349));(Ks&30)!==0||Kp(c,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,em(Qp.bind(null,c,m,n),[n]),c.flags|=2048,va(9,Gp.bind(null,c,m,a,s),void 0,null),a},useId:function(){var n=Zn(),s=Tt.identifierPrefix;if(nt){var a=Er,c=wr;a=(c&~(1<<32-$t(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=ya++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=$0++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},G0={readContext:wn,useCallback:im,useContext:wn,useEffect:Cd,useImperativeHandle:sm,useInsertionEffect:tm,useLayoutEffect:nm,useMemo:om,useReducer:Ad,useRef:Zp,useState:function(){return Ad(_a)},useDebugValue:Rd,useDeferredValue:function(n){var s=En();return am(s,yt.memoizedState,n)},useTransition:function(){var n=Ad(_a)[0],s=En().memoizedState;return[n,s]},useMutableSource:Hp,useSyncExternalStore:Wp,useId:lm,unstable_isNewReconciler:!1},Q0={readContext:wn,useCallback:im,useContext:wn,useEffect:Cd,useImperativeHandle:sm,useInsertionEffect:tm,useLayoutEffect:nm,useMemo:om,useReducer:Pd,useRef:Zp,useState:function(){return Pd(_a)},useDebugValue:Rd,useDeferredValue:function(n){var s=En();return yt===null?s.memoizedState=n:am(s,yt.memoizedState,n)},useTransition:function(){var n=Pd(_a)[0],s=En().memoizedState;return[n,s]},useMutableSource:Hp,useSyncExternalStore:Wp,useId:lm,unstable_isNewReconciler:!1};function Ln(n,s){if(n&&n.defaultProps){s=j({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function bd(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:j({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var au={isMounted:function(n){return(n=n._reactInternals)?Pn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=Wt(),h=is(n),m=Tr(c,h);m.payload=s,a!=null&&(m.callback=a),s=ts(n,m,h),s!==null&&(Un(s,n,h,c),Zl(s,n,h))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=Wt(),h=is(n),m=Tr(c,h);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=ts(n,m,h),s!==null&&(Un(s,n,h,c),Zl(s,n,h))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Wt(),c=is(n),h=Tr(a,c);h.tag=2,s!=null&&(h.callback=s),s=ts(n,h,c),s!==null&&(Un(s,n,c,a),Zl(s,n,c))}};function hm(n,s,a,c,h,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):s.prototype&&s.prototype.isPureReactComponent?!ia(a,c)||!ia(h,m):!0}function fm(n,s,a){var c=!1,h=Jr,m=s.contextType;return typeof m=="object"&&m!==null?m=wn(m):(h=Jt(s)?Bs:Mt.current,c=s.contextTypes,m=(c=c!=null)?Gi(n,h):Jr),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=au,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=m),s}function pm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&au.enqueueReplaceState(s,s.state,null)}function Nd(n,s,a,c){var h=n.stateNode;h.props=a,h.state=n.memoizedState,h.refs={},_d(n);var m=s.contextType;typeof m=="object"&&m!==null?h.context=wn(m):(m=Jt(s)?Bs:Mt.current,h.context=Gi(n,m)),h.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(bd(n,s,m,a),h.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(s=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),s!==h.state&&au.enqueueReplaceState(h,h.state,null),eu(n,a,h,c),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function no(n,s){try{var a="",c=s;do a+=pe(c),c=c.return;while(c);var h=a}catch(m){h=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:h,digest:null}}function Dd(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Vd(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Y0=typeof WeakMap=="function"?WeakMap:Map;function mm(n,s,a){a=Tr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){pu||(pu=!0,Qd=c),Vd(n,s)},a}function gm(n,s,a){a=Tr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var h=s.value;a.payload=function(){return c(h)},a.callback=function(){Vd(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Vd(n,s),typeof c!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function ym(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Y0;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(a)||(h.add(a),n=cw.bind(null,n,s,a),s.then(n,n))}function _m(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function vm(n,s,a,c,h){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Tr(-1,1),s.tag=2,ts(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var X0=oe.ReactCurrentOwner,Zt=!1;function Ht(n,s,a,c){s.child=n===null?Fp(s,null,a,c):Ji(s,n.child,a,c)}function wm(n,s,a,c,h){a=a.render;var m=s.ref;return eo(s,h),c=Sd(n,s,a,c,m,h),a=kd(),n!==null&&!Zt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~h,Ir(n,s,h)):(nt&&a&&ld(s),s.flags|=1,Ht(n,s,c,h),s.child)}function Em(n,s,a,c,h){if(n===null){var m=a.type;return typeof m=="function"&&!nh(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,xm(n,s,m,c,h)):(n=wu(a.type,null,c,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&h)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:ia,a(w,c)&&n.ref===s.ref)return Ir(n,s,h)}return s.flags|=1,n=as(m,c),n.ref=s.ref,n.return=s,s.child=n}function xm(n,s,a,c,h){if(n!==null){var m=n.memoizedProps;if(ia(m,c)&&n.ref===s.ref)if(Zt=!1,s.pendingProps=c=m,(n.lanes&h)!==0)(n.flags&131072)!==0&&(Zt=!0);else return s.lanes=n.lanes,Ir(n,s,h)}return Md(n,s,a,c,h)}function Tm(n,s,a){var c=s.pendingProps,h=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(so,dn),dn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Xe(so,dn),dn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Xe(so,dn),dn|=c}else m!==null?(c=m.baseLanes|a,s.memoizedState=null):c=a,Xe(so,dn),dn|=c;return Ht(n,s,h,a),s.child}function Im(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Md(n,s,a,c,h){var m=Jt(a)?Bs:Mt.current;return m=Gi(s,m),eo(s,h),a=Sd(n,s,a,c,m,h),c=kd(),n!==null&&!Zt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~h,Ir(n,s,h)):(nt&&c&&ld(s),s.flags|=1,Ht(n,s,a,h),s.child)}function Sm(n,s,a,c,h){if(Jt(a)){var m=!0;Hl(s)}else m=!1;if(eo(s,h),s.stateNode===null)uu(n,s),fm(s,a,c),Nd(s,a,c,h),c=!0;else if(n===null){var w=s.stateNode,S=s.memoizedProps;w.props=S;var D=w.context,q=a.contextType;typeof q=="object"&&q!==null?q=wn(q):(q=Jt(a)?Bs:Mt.current,q=Gi(s,q));var Y=a.getDerivedStateFromProps,Z=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";Z||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==c||D!==q)&&pm(s,w,c,q),es=!1;var G=s.memoizedState;w.state=G,eu(s,c,w,h),D=s.memoizedState,S!==c||G!==D||Xt.current||es?(typeof Y=="function"&&(bd(s,a,Y,c),D=s.memoizedState),(S=es||hm(s,a,S,c,G,D,q))?(Z||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=D),w.props=c,w.state=D,w.context=q,c=S):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,zp(n,s),S=s.memoizedProps,q=s.type===s.elementType?S:Ln(s.type,S),w.props=q,Z=s.pendingProps,G=w.context,D=a.contextType,typeof D=="object"&&D!==null?D=wn(D):(D=Jt(a)?Bs:Mt.current,D=Gi(s,D));var ae=a.getDerivedStateFromProps;(Y=typeof ae=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==Z||G!==D)&&pm(s,w,c,D),es=!1,G=s.memoizedState,w.state=G,eu(s,c,w,h);var de=s.memoizedState;S!==Z||G!==de||Xt.current||es?(typeof ae=="function"&&(bd(s,a,ae,c),de=s.memoizedState),(q=es||hm(s,a,q,c,G,de,D)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,de,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,de,D)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=de),w.props=c,w.state=de,w.context=D,c=q):(typeof w.componentDidUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),c=!1)}return Od(n,s,a,c,m,h)}function Od(n,s,a,c,h,m){Im(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return h&&Rp(s,a,!1),Ir(n,s,m);c=s.stateNode,X0.current=s;var S=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=Ji(s,n.child,null,m),s.child=Ji(s,null,S,m)):Ht(n,s,S,m),s.memoizedState=c.state,h&&Rp(s,a,!0),s.child}function km(n){var s=n.stateNode;s.pendingContext?Pp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Pp(n,s.context,!1),vd(n,s.containerInfo)}function Am(n,s,a,c,h){return Xi(),hd(h),s.flags|=256,Ht(n,s,a,c),s.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function jd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Pm(n,s,a){var c=s.pendingProps,h=rt.current,m=!1,w=(s.flags&128)!==0,S;if((S=w)||(S=n!==null&&n.memoizedState===null?!1:(h&2)!==0),S?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),Xe(rt,h&1),n===null)return dd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,m?(c=s.mode,m=s.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=Eu(w,c,0,null),n=Js(n,c,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=jd(a),s.memoizedState=Ld,n):Fd(s,w));if(h=n.memoizedState,h!==null&&(S=h.dehydrated,S!==null))return J0(n,s,w,c,S,h,a);if(m){m=c.fallback,w=s.mode,h=n.child,S=h.sibling;var D={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==h?(c=s.child,c.childLanes=0,c.pendingProps=D,s.deletions=null):(c=as(h,D),c.subtreeFlags=h.subtreeFlags&14680064),S!==null?m=as(S,m):(m=Js(m,w,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,w=n.child.memoizedState,w=w===null?jd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,s.memoizedState=Ld,c}return m=n.child,n=m.sibling,c=as(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Fd(n,s){return s=Eu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function lu(n,s,a,c){return c!==null&&hd(c),Ji(s,n.child,null,a),n=Fd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function J0(n,s,a,c,h,m,w){if(a)return s.flags&256?(s.flags&=-257,c=Dd(Error(t(422))),lu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=c.fallback,h=s.mode,c=Eu({mode:"visible",children:c.children},h,0,null),m=Js(m,h,w,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&Ji(s,n.child,null,w),s.child.memoizedState=jd(w),s.memoizedState=Ld,m);if((s.mode&1)===0)return lu(n,s,w,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var S=c.dgst;return c=S,m=Error(t(419)),c=Dd(m,c,void 0),lu(n,s,w,c)}if(S=(w&n.childLanes)!==0,Zt||S){if(c=Tt,c!==null){switch(w&-w){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|w))!==0?0:h,h!==0&&h!==m.retryLane&&(m.retryLane=h,xr(n,h),Un(c,n,h,-1))}return th(),c=Dd(Error(t(421))),lu(n,s,w,c)}return h.data==="$?"?(s.flags|=128,s.child=n.child,s=dw.bind(null,n),h._reactRetry=s,null):(n=m.treeContext,cn=Yr(h.nextSibling),un=s,nt=!0,On=null,n!==null&&(_n[vn++]=wr,_n[vn++]=Er,_n[vn++]=$s,wr=n.id,Er=n.overflow,$s=s),s=Fd(s,c.children),s.flags|=4096,s)}function Cm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),gd(n.return,s,a)}function Ud(n,s,a,c,h){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=h)}function Rm(n,s,a){var c=s.pendingProps,h=c.revealOrder,m=c.tail;if(Ht(n,s,c.children,a),c=rt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Cm(n,a,s);else if(n.tag===19)Cm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Xe(rt,c),(s.mode&1)===0)s.memoizedState=null;else switch(h){case"forwards":for(a=s.child,h=null;a!==null;)n=a.alternate,n!==null&&tu(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Ud(s,!1,h,a,m);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&tu(n)===null){s.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}Ud(s,!0,a,null,m);break;case"together":Ud(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function uu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Ir(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Gs|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=as(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=as(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Z0(n,s,a){switch(s.tag){case 3:km(s),Xi();break;case 5:qp(s);break;case 1:Jt(s.type)&&Hl(s);break;case 4:vd(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,h=s.memoizedProps.value;Xe(Xl,c._currentValue),c._currentValue=h;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Xe(rt,rt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Pm(n,s,a):(Xe(rt,rt.current&1),n=Ir(n,s,a),n!==null?n.sibling:null);Xe(rt,rt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Rm(n,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Xe(rt,rt.current),c)break;return null;case 22:case 23:return s.lanes=0,Tm(n,s,a)}return Ir(n,s,a)}var bm,zd,Nm,Dm;bm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},zd=function(){},Nm=function(n,s,a,c){var h=n.memoizedProps;if(h!==c){n=s.stateNode,Ws(Jn.current);var m=null;switch(a){case"input":h=Ss(n,h),c=Ss(n,c),m=[];break;case"select":h=j({},h,{value:void 0}),c=j({},c,{value:void 0}),m=[];break;case"textarea":h=Vo(n,h),c=Vo(n,c),m=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Bl)}Uo(a,c);var w;a=null;for(q in h)if(!c.hasOwnProperty(q)&&h.hasOwnProperty(q)&&h[q]!=null)if(q==="style"){var S=h[q];for(w in S)S.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?m||(m=[]):(m=m||[]).push(q,null));for(q in c){var D=c[q];if(S=h?.[q],c.hasOwnProperty(q)&&D!==S&&(D!=null||S!=null))if(q==="style")if(S){for(w in S)!S.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in D)D.hasOwnProperty(w)&&S[w]!==D[w]&&(a||(a={}),a[w]=D[w])}else a||(m||(m=[]),m.push(q,a)),a=D;else q==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,S=S?S.__html:void 0,D!=null&&S!==D&&(m=m||[]).push(q,D)):q==="children"?typeof D!="string"&&typeof D!="number"||(m=m||[]).push(q,""+D):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(D!=null&&q==="onScroll"&&Je("scroll",n),m||S===D||(m=[])):(m=m||[]).push(q,D))}a&&(m=m||[]).push("style",a);var q=m;(s.updateQueue=q)&&(s.flags|=4)}},Dm=function(n,s,a,c){a!==c&&(s.flags|=4)};function wa(n,s){if(!nt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Lt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function ew(n,s,a){var c=s.pendingProps;switch(ud(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(s),null;case 1:return Jt(s.type)&&ql(),Lt(s),null;case 3:return c=s.stateNode,to(),Ze(Xt),Ze(Mt),xd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Ql(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,On!==null&&(Jd(On),On=null))),zd(n,s),Lt(s),null;case 5:wd(s);var h=Ws(ma.current);if(a=s.type,n!==null&&s.stateNode!=null)Nm(n,s,a,c,h),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Lt(s),null}if(n=Ws(Jn.current),Ql(s)){c=s.stateNode,a=s.type;var m=s.memoizedProps;switch(c[Xn]=s,c[ca]=m,n=(s.mode&1)!==0,a){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(h=0;h<aa.length;h++)Je(aa[h],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":gi(c,m),Je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Je("invalid",c);break;case"textarea":_i(c,m),Je("invalid",c)}Uo(a,m),h=null;for(var w in m)if(m.hasOwnProperty(w)){var S=m[w];w==="children"?typeof S=="string"?c.textContent!==S&&(m.suppressHydrationWarning!==!0&&zl(c.textContent,S,n),h=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(m.suppressHydrationWarning!==!0&&zl(c.textContent,S,n),h=["children",""+S]):o.hasOwnProperty(w)&&S!=null&&w==="onScroll"&&Je("scroll",c)}switch(a){case"input":lr(c),fl(c,m,!0);break;case"textarea":lr(c),Mo(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=Bl)}c=h,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=pt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Xn]=s,n[ca]=c,bm(n,s,!1,!1),s.stateNode=n;e:{switch(w=zo(a,c),a){case"dialog":Je("cancel",n),Je("close",n),h=c;break;case"iframe":case"object":case"embed":Je("load",n),h=c;break;case"video":case"audio":for(h=0;h<aa.length;h++)Je(aa[h],n);h=c;break;case"source":Je("error",n),h=c;break;case"img":case"image":case"link":Je("error",n),Je("load",n),h=c;break;case"details":Je("toggle",n),h=c;break;case"input":gi(n,c),h=Ss(n,c),Je("invalid",n);break;case"option":h=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},h=j({},c,{value:void 0}),Je("invalid",n);break;case"textarea":_i(n,c),h=Vo(n,c),Je("invalid",n);break;default:h=c}Uo(a,h),S=h;for(m in S)if(S.hasOwnProperty(m)){var D=S[m];m==="style"?jo(n,D):m==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Oo(n,D)):m==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&Fr(n,D):typeof D=="number"&&Fr(n,""+D):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?D!=null&&m==="onScroll"&&Je("scroll",n):D!=null&&J(n,m,D,w))}switch(a){case"input":lr(n),fl(n,c,!1);break;case"textarea":lr(n),Mo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?cr(n,!!c.multiple,m,!1):c.defaultValue!=null&&cr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=Bl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Lt(s),null;case 6:if(n&&s.stateNode!=null)Dm(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Ws(ma.current),Ws(Jn.current),Ql(s)){if(c=s.stateNode,a=s.memoizedProps,c[Xn]=s,(m=c.nodeValue!==a)&&(n=un,n!==null))switch(n.tag){case 3:zl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&zl(c.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Xn]=s,s.stateNode=c}return Lt(s),null;case 13:if(Ze(rt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&cn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Op(),Xi(),s.flags|=98560,m=!1;else if(m=Ql(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Xn]=s}else Xi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Lt(s),m=!1}else On!==null&&(Jd(On),On=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(rt.current&1)!==0?_t===0&&(_t=3):th())),s.updateQueue!==null&&(s.flags|=4),Lt(s),null);case 4:return to(),zd(n,s),n===null&&la(s.stateNode.containerInfo),Lt(s),null;case 10:return md(s.type._context),Lt(s),null;case 17:return Jt(s.type)&&ql(),Lt(s),null;case 19:if(Ze(rt),m=s.memoizedState,m===null)return Lt(s),null;if(c=(s.flags&128)!==0,w=m.rendering,w===null)if(c)wa(m,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=tu(n),w!==null){for(s.flags|=128,wa(m,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)m=a,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Xe(rt,rt.current&1|2),s.child}n=n.sibling}m.tail!==null&&Ye()>io&&(s.flags|=128,c=!0,wa(m,!1),s.lanes=4194304)}else{if(!c)if(n=tu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),wa(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!nt)return Lt(s),null}else 2*Ye()-m.renderingStartTime>io&&a!==1073741824&&(s.flags|=128,c=!0,wa(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(a=m.last,a!==null?a.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Ye(),s.sibling=null,a=rt.current,Xe(rt,c?a&1|2:a&1),s):(Lt(s),null);case 22:case 23:return eh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(dn&1073741824)!==0&&(Lt(s),s.subtreeFlags&6&&(s.flags|=8192)):Lt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function tw(n,s){switch(ud(s),s.tag){case 1:return Jt(s.type)&&ql(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return to(),Ze(Xt),Ze(Mt),xd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return wd(s),null;case 13:if(Ze(rt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Xi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ze(rt),null;case 4:return to(),null;case 10:return md(s.type._context),null;case 22:case 23:return eh(),null;case 24:return null;default:return null}}var cu=!1,jt=!1,nw=typeof WeakSet=="function"?WeakSet:Set,ue=null;function ro(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ot(n,s,c)}else a.current=null}function Bd(n,s,a){try{a()}catch(c){ot(n,s,c)}}var Vm=!1;function rw(n,s){if(ed=Kr,n=hp(),Wc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,S=-1,D=-1,q=0,Y=0,Z=n,G=null;t:for(;;){for(var ae;Z!==a||h!==0&&Z.nodeType!==3||(S=w+h),Z!==m||c!==0&&Z.nodeType!==3||(D=w+c),Z.nodeType===3&&(w+=Z.nodeValue.length),(ae=Z.firstChild)!==null;)G=Z,Z=ae;for(;;){if(Z===n)break t;if(G===a&&++q===h&&(S=w),G===m&&++Y===c&&(D=w),(ae=Z.nextSibling)!==null)break;Z=G,G=Z.parentNode}Z=ae}a=S===-1||D===-1?null:{start:S,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(td={focusedElem:n,selectionRange:a},Kr=!1,ue=s;ue!==null;)if(s=ue,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ue=n;else for(;ue!==null;){s=ue;try{var de=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var he=de.memoizedProps,lt=de.memoizedState,U=s.stateNode,M=U.getSnapshotBeforeUpdate(s.elementType===s.type?he:Ln(s.type,he),lt);U.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){ot(s,s.return,ne)}if(n=s.sibling,n!==null){n.return=s.return,ue=n;break}ue=s.return}return de=Vm,Vm=!1,de}function Ea(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&n)===n){var m=h.destroy;h.destroy=void 0,m!==void 0&&Bd(s,a,m)}h=h.next}while(h!==c)}}function du(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function $d(n){var s=n.ref;if(s!==null){var a=n.stateNode;n.tag,n=a,typeof s=="function"?s(n):s.current=n}}function Mm(n){var s=n.alternate;s!==null&&(n.alternate=null,Mm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Xn],delete s[ca],delete s[id],delete s[F0],delete s[U0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Om(n){return n.tag===5||n.tag===3||n.tag===4}function Lm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Om(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qd(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Bl));else if(c!==4&&(n=n.child,n!==null))for(qd(n,s,a),n=n.sibling;n!==null;)qd(n,s,a),n=n.sibling}function Hd(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Hd(n,s,a),n=n.sibling;n!==null;)Hd(n,s,a),n=n.sibling}var Ct=null,jn=!1;function ns(n,s,a){for(a=a.child;a!==null;)jm(n,s,a),a=a.sibling}function jm(n,s,a){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Vs,a)}catch{}switch(a.tag){case 5:jt||ro(a,s);case 6:var c=Ct,h=jn;Ct=null,ns(n,s,a),Ct=c,jn=h,Ct!==null&&(jn?(n=Ct,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ct.removeChild(a.stateNode));break;case 18:Ct!==null&&(jn?(n=Ct,a=a.stateNode,n.nodeType===8?sd(n.parentNode,a):n.nodeType===1&&sd(n,a),Dn(n)):sd(Ct,a.stateNode));break;case 4:c=Ct,h=jn,Ct=a.stateNode.containerInfo,jn=!0,ns(n,s,a),Ct=c,jn=h;break;case 0:case 11:case 14:case 15:if(!jt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var m=h,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&Bd(a,s,w),h=h.next}while(h!==c)}ns(n,s,a);break;case 1:if(!jt&&(ro(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){ot(a,s,S)}ns(n,s,a);break;case 21:ns(n,s,a);break;case 22:a.mode&1?(jt=(c=jt)||a.memoizedState!==null,ns(n,s,a),jt=c):ns(n,s,a);break;default:ns(n,s,a)}}function Fm(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new nw),s.forEach(function(c){var h=hw.bind(null,n,c);a.has(c)||(a.add(c),c.then(h,h))})}}function Fn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var m=n,w=s,S=w;e:for(;S!==null;){switch(S.tag){case 5:Ct=S.stateNode,jn=!1;break e;case 3:Ct=S.stateNode.containerInfo,jn=!0;break e;case 4:Ct=S.stateNode.containerInfo,jn=!0;break e}S=S.return}if(Ct===null)throw Error(t(160));jm(m,w,h),Ct=null,jn=!1;var D=h.alternate;D!==null&&(D.return=null),h.return=null}catch(q){ot(h,s,q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Um(s,n),s=s.sibling}function Um(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Fn(s,n),er(n),c&4){try{Ea(3,n,n.return),du(3,n)}catch(he){ot(n,n.return,he)}try{Ea(5,n,n.return)}catch(he){ot(n,n.return,he)}}break;case 1:Fn(s,n),er(n),c&512&&a!==null&&ro(a,a.return);break;case 5:if(Fn(s,n),er(n),c&512&&a!==null&&ro(a,a.return),n.flags&32){var h=n.stateNode;try{Fr(h,"")}catch(he){ot(n,n.return,he)}}if(c&4&&(h=n.stateNode,h!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,S=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{S==="input"&&m.type==="radio"&&m.name!=null&&No(h,m),zo(S,w);var q=zo(S,m);for(w=0;w<D.length;w+=2){var Y=D[w],Z=D[w+1];Y==="style"?jo(h,Z):Y==="dangerouslySetInnerHTML"?Oo(h,Z):Y==="children"?Fr(h,Z):J(h,Y,Z,q)}switch(S){case"input":Do(h,m);break;case"textarea":vi(h,m);break;case"select":var G=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!m.multiple;var ae=m.value;ae!=null?cr(h,!!m.multiple,ae,!1):G!==!!m.multiple&&(m.defaultValue!=null?cr(h,!!m.multiple,m.defaultValue,!0):cr(h,!!m.multiple,m.multiple?[]:"",!1))}h[ca]=m}catch(he){ot(n,n.return,he)}}break;case 6:if(Fn(s,n),er(n),c&4){if(n.stateNode===null)throw Error(t(162));h=n.stateNode,m=n.memoizedProps;try{h.nodeValue=m}catch(he){ot(n,n.return,he)}}break;case 3:if(Fn(s,n),er(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Dn(s.containerInfo)}catch(he){ot(n,n.return,he)}break;case 4:Fn(s,n),er(n);break;case 13:Fn(s,n),er(n),h=n.child,h.flags&8192&&(m=h.memoizedState!==null,h.stateNode.isHidden=m,!m||h.alternate!==null&&h.alternate.memoizedState!==null||(Gd=Ye())),c&4&&Fm(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(jt=(q=jt)||Y,Fn(s,n),jt=q):Fn(s,n),er(n),c&8192){if(q=n.memoizedState!==null,(n.stateNode.isHidden=q)&&!Y&&(n.mode&1)!==0)for(ue=n,Y=n.child;Y!==null;){for(Z=ue=Y;ue!==null;){switch(G=ue,ae=G.child,G.tag){case 0:case 11:case 14:case 15:Ea(4,G,G.return);break;case 1:ro(G,G.return);var de=G.stateNode;if(typeof de.componentWillUnmount=="function"){c=G,a=G.return;try{s=c,de.props=s.memoizedProps,de.state=s.memoizedState,de.componentWillUnmount()}catch(he){ot(c,a,he)}}break;case 5:ro(G,G.return);break;case 22:if(G.memoizedState!==null){$m(Z);continue}}ae!==null?(ae.return=G,ue=ae):$m(Z)}Y=Y.sibling}e:for(Y=null,Z=n;;){if(Z.tag===5){if(Y===null){Y=Z;try{h=Z.stateNode,q?(m=h.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(S=Z.stateNode,D=Z.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,S.style.display=Lo("display",w))}catch(he){ot(n,n.return,he)}}}else if(Z.tag===6){if(Y===null)try{Z.stateNode.nodeValue=q?"":Z.memoizedProps}catch(he){ot(n,n.return,he)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;Y===Z&&(Y=null),Z=Z.return}Y===Z&&(Y=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Fn(s,n),er(n),c&4&&Fm(n);break;case 21:break;default:Fn(s,n),er(n)}}function er(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Om(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(Fr(h,""),c.flags&=-33);var m=Lm(n);Hd(n,m,h);break;case 3:case 4:var w=c.stateNode.containerInfo,S=Lm(n);qd(n,S,w);break;default:throw Error(t(161))}}catch(D){ot(n,n.return,D)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function sw(n,s,a){ue=n,zm(n)}function zm(n,s,a){for(var c=(n.mode&1)!==0;ue!==null;){var h=ue,m=h.child;if(h.tag===22&&c){var w=h.memoizedState!==null||cu;if(!w){var S=h.alternate,D=S!==null&&S.memoizedState!==null||jt;S=cu;var q=jt;if(cu=w,(jt=D)&&!q)for(ue=h;ue!==null;)w=ue,D=w.child,w.tag===22&&w.memoizedState!==null?qm(h):D!==null?(D.return=w,ue=D):qm(h);for(;m!==null;)ue=m,zm(m),m=m.sibling;ue=h,cu=S,jt=q}Bm(n)}else(h.subtreeFlags&8772)!==0&&m!==null?(m.return=h,ue=m):Bm(n)}}function Bm(n){for(;ue!==null;){var s=ue;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:jt||du(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!jt)if(a===null)c.componentDidMount();else{var h=s.elementType===s.type?a.memoizedProps:Ln(s.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&$p(s,m,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}$p(s,w,a)}break;case 5:var S=s.stateNode;if(a===null&&s.flags&4){a=S;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var q=s.alternate;if(q!==null){var Y=q.memoizedState;if(Y!==null){var Z=Y.dehydrated;Z!==null&&Dn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jt||s.flags&512&&$d(s)}catch(G){ot(s,s.return,G)}}if(s===n){ue=null;break}if(a=s.sibling,a!==null){a.return=s.return,ue=a;break}ue=s.return}}function $m(n){for(;ue!==null;){var s=ue;if(s===n){ue=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ue=a;break}ue=s.return}}function qm(n){for(;ue!==null;){var s=ue;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{du(4,s)}catch(D){ot(s,a,D)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var h=s.return;try{c.componentDidMount()}catch(D){ot(s,h,D)}}var m=s.return;try{$d(s)}catch(D){ot(s,m,D)}break;case 5:var w=s.return;try{$d(s)}catch(D){ot(s,w,D)}}}catch(D){ot(s,s.return,D)}if(s===n){ue=null;break}var S=s.sibling;if(S!==null){S.return=s.return,ue=S;break}ue=s.return}}var iw=Math.ceil,hu=oe.ReactCurrentDispatcher,Wd=oe.ReactCurrentOwner,xn=oe.ReactCurrentBatchConfig,Ue=0,Tt=null,dt=null,Rt=0,dn=0,so=Xr(0),_t=0,xa=null,Gs=0,fu=0,Kd=0,Ta=null,en=null,Gd=0,io=1/0,Sr=null,pu=!1,Qd=null,rs=null,mu=!1,ss=null,gu=0,Ia=0,Yd=null,yu=-1,_u=0;function Wt(){return(Ue&6)!==0?Ye():yu!==-1?yu:yu=Ye()}function is(n){return(n.mode&1)===0?1:(Ue&2)!==0&&Rt!==0?Rt&-Rt:B0.transition!==null?(_u===0&&(_u=Os()),_u):(n=Me,n!==0||(n=window.event,n=n===void 0?16:Jo(n.type)),n)}function Un(n,s,a,c){if(50<Ia)throw Ia=0,Yd=null,Error(t(185));$r(n,a,c),((Ue&2)===0||n!==Tt)&&(n===Tt&&((Ue&2)===0&&(fu|=a),_t===4&&os(n,Rt)),tn(n,c),a===1&&Ue===0&&(s.mode&1)===0&&(io=Ye()+500,Wl&&Zr()))}function tn(n,s){var a=n.callbackNode;fr(n,s);var c=Ms(n,n===Tt?Rt:0);if(c===0)a!==null&&Ko(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Ko(a),s===1)n.tag===0?z0(Wm.bind(null,n)):bp(Wm.bind(null,n)),L0(function(){(Ue&6)===0&&Zr()}),a=null;else{switch(Hr(c)){case 1:a=Ds;break;case 4:a=Ur;break;case 16:a=mn;break;case 536870912:a=_l;break;default:a=mn}a=eg(a,Hm.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Hm(n,s){if(yu=-1,_u=0,(Ue&6)!==0)throw Error(t(327));var a=n.callbackNode;if(oo()&&n.callbackNode!==a)return null;var c=Ms(n,n===Tt?Rt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=vu(n,c);else{s=c;var h=Ue;Ue|=2;var m=Gm();(Tt!==n||Rt!==s)&&(Sr=null,io=Ye()+500,Ys(n,s));do try{lw();break}catch(S){Km(n,S)}while(!0);pd(),hu.current=m,Ue=h,dt!==null?s=0:(Tt=null,Rt=0,s=_t)}if(s!==0){if(s===2&&(h=on(n),h!==0&&(c=h,s=Xd(n,h))),s===1)throw a=xa,Ys(n,0),os(n,c),tn(n,Ye()),a;if(s===6)os(n,c);else{if(h=n.current.alternate,(c&30)===0&&!ow(h)&&(s=vu(n,c),s===2&&(m=on(n),m!==0&&(c=m,s=Xd(n,m))),s===1))throw a=xa,Ys(n,0),os(n,c),tn(n,Ye()),a;switch(n.finishedWork=h,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:Xs(n,en,Sr);break;case 3:if(os(n,c),(c&130023424)===c&&(s=Gd+500-Ye(),10<s)){if(Ms(n,0)!==0)break;if(h=n.suspendedLanes,(h&c)!==c){Wt(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=rd(Xs.bind(null,n,en,Sr),s);break}Xs(n,en,Sr);break;case 4:if(os(n,c),(c&4194240)===c)break;for(s=n.eventTimes,h=-1;0<c;){var w=31-$t(c);m=1<<w,w=s[w],w>h&&(h=w),c&=~m}if(c=h,c=Ye()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*iw(c/1960))-c,10<c){n.timeoutHandle=rd(Xs.bind(null,n,en,Sr),c);break}Xs(n,en,Sr);break;case 5:Xs(n,en,Sr);break;default:throw Error(t(329))}}}return tn(n,Ye()),n.callbackNode===a?Hm.bind(null,n):null}function Xd(n,s){var a=Ta;return n.current.memoizedState.isDehydrated&&(Ys(n,s).flags|=256),n=vu(n,s),n!==2&&(s=en,en=a,s!==null&&Jd(s)),n}function Jd(n){en===null?en=n:en.push.apply(en,n)}function ow(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],m=h.getSnapshot;h=h.value;try{if(!Mn(m(),h))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function os(n,s){for(s&=~Kd,s&=~fu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-$t(s),c=1<<a;n[a]=-1,s&=~c}}function Wm(n){if((Ue&6)!==0)throw Error(t(327));oo();var s=Ms(n,0);if((s&1)===0)return tn(n,Ye()),null;var a=vu(n,s);if(n.tag!==0&&a===2){var c=on(n);c!==0&&(s=c,a=Xd(n,c))}if(a===1)throw a=xa,Ys(n,0),os(n,s),tn(n,Ye()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Xs(n,en,Sr),tn(n,Ye()),null}function Zd(n,s){var a=Ue;Ue|=1;try{return n(s)}finally{Ue=a,Ue===0&&(io=Ye()+500,Wl&&Zr())}}function Qs(n){ss!==null&&ss.tag===0&&(Ue&6)===0&&oo();var s=Ue;Ue|=1;var a=xn.transition,c=Me;try{if(xn.transition=null,Me=1,n)return n()}finally{Me=c,xn.transition=a,Ue=s,(Ue&6)===0&&Zr()}}function eh(){dn=so.current,Ze(so)}function Ys(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,O0(a)),dt!==null)for(a=dt.return;a!==null;){var c=a;switch(ud(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ql();break;case 3:to(),Ze(Xt),Ze(Mt),xd();break;case 5:wd(c);break;case 4:to();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:md(c.type._context);break;case 22:case 23:eh()}a=a.return}if(Tt=n,dt=n=as(n.current,null),Rt=dn=s,_t=0,xa=null,Kd=fu=Gs=0,en=Ta=null,Hs!==null){for(s=0;s<Hs.length;s++)if(a=Hs[s],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=h,c.next=w}a.pending=c}Hs=null}return n}function Km(n,s){do{var a=dt;try{if(pd(),nu.current=ou,ru){for(var c=st.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}ru=!1}if(Ks=0,xt=yt=st=null,ga=!1,ya=0,Wd.current=null,a===null||a.return===null){_t=1,xa=s,dt=null;break}e:{var m=n,w=a.return,S=a,D=s;if(s=Rt,S.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var q=D,Y=S,Z=Y.tag;if((Y.mode&1)===0&&(Z===0||Z===11||Z===15)){var G=Y.alternate;G?(Y.updateQueue=G.updateQueue,Y.memoizedState=G.memoizedState,Y.lanes=G.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ae=_m(w);if(ae!==null){ae.flags&=-257,vm(ae,w,S,m,s),ae.mode&1&&ym(m,q,s),s=ae,D=q;var de=s.updateQueue;if(de===null){var he=new Set;he.add(D),s.updateQueue=he}else de.add(D);break e}else{if((s&1)===0){ym(m,q,s),th();break e}D=Error(t(426))}}else if(nt&&S.mode&1){var lt=_m(w);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),vm(lt,w,S,m,s),hd(no(D,S));break e}}m=D=no(D,S),_t!==4&&(_t=2),Ta===null?Ta=[m]:Ta.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var U=mm(m,D,s);Bp(m,U);break e;case 1:S=D;var M=m.type,B=m.stateNode;if((m.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(rs===null||!rs.has(B)))){m.flags|=65536,s&=-s,m.lanes|=s;var ne=gm(m,S,s);Bp(m,ne);break e}}m=m.return}while(m!==null)}Ym(a)}catch(me){s=me,dt===a&&a!==null&&(dt=a=a.return);continue}break}while(!0)}function Gm(){var n=hu.current;return hu.current=ou,n===null?ou:n}function th(){(_t===0||_t===3||_t===2)&&(_t=4),Tt===null||(Gs&268435455)===0&&(fu&268435455)===0||os(Tt,Rt)}function vu(n,s){var a=Ue;Ue|=2;var c=Gm();(Tt!==n||Rt!==s)&&(Sr=null,Ys(n,s));do try{aw();break}catch(h){Km(n,h)}while(!0);if(pd(),Ue=a,hu.current=c,dt!==null)throw Error(t(261));return Tt=null,Rt=0,_t}function aw(){for(;dt!==null;)Qm(dt)}function lw(){for(;dt!==null&&!gl();)Qm(dt)}function Qm(n){var s=Zm(n.alternate,n,dn);n.memoizedProps=n.pendingProps,s===null?Ym(n):dt=s,Wd.current=null}function Ym(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=ew(a,s,dn),a!==null){dt=a;return}}else{if(a=tw(a,s),a!==null){a.flags&=32767,dt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_t=6,dt=null;return}}if(s=s.sibling,s!==null){dt=s;return}dt=s=n}while(s!==null);_t===0&&(_t=5)}function Xs(n,s,a){var c=Me,h=xn.transition;try{xn.transition=null,Me=1,uw(n,s,a,c)}finally{xn.transition=h,Me=c}return null}function uw(n,s,a,c){do oo();while(ss!==null);if((Ue&6)!==0)throw Error(t(327));a=n.finishedWork;var h=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(Ge(n,m),n===Tt&&(dt=Tt=null,Rt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||mu||(mu=!0,eg(mn,function(){return oo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=xn.transition,xn.transition=null;var w=Me;Me=1;var S=Ue;Ue|=4,Wd.current=null,rw(n,a),Um(a,n),C0(td),Kr=!!ed,td=ed=null,n.current=a,sw(a),jc(),Ue=S,Me=w,xn.transition=m}else n.current=a;if(mu&&(mu=!1,ss=n,gu=h),m=n.pendingLanes,m===0&&(rs=null),vl(a.stateNode),tn(n,Ye()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)h=s[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(pu)throw pu=!1,n=Qd,Qd=null,n;return(gu&1)!==0&&n.tag!==0&&oo(),m=n.pendingLanes,(m&1)!==0?n===Yd?Ia++:(Ia=0,Yd=n):Ia=0,Zr(),null}function oo(){if(ss!==null){var n=Hr(gu),s=xn.transition,a=Me;try{if(xn.transition=null,Me=16>n?16:n,ss===null)var c=!1;else{if(n=ss,ss=null,gu=0,(Ue&6)!==0)throw Error(t(331));var h=Ue;for(Ue|=4,ue=n.current;ue!==null;){var m=ue,w=m.child;if((ue.flags&16)!==0){var S=m.deletions;if(S!==null){for(var D=0;D<S.length;D++){var q=S[D];for(ue=q;ue!==null;){var Y=ue;switch(Y.tag){case 0:case 11:case 15:Ea(8,Y,m)}var Z=Y.child;if(Z!==null)Z.return=Y,ue=Z;else for(;ue!==null;){Y=ue;var G=Y.sibling,ae=Y.return;if(Mm(Y),Y===q){ue=null;break}if(G!==null){G.return=ae,ue=G;break}ue=ae}}}var de=m.alternate;if(de!==null){var he=de.child;if(he!==null){de.child=null;do{var lt=he.sibling;he.sibling=null,he=lt}while(he!==null)}}ue=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,ue=w;else e:for(;ue!==null;){if(m=ue,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Ea(9,m,m.return)}var U=m.sibling;if(U!==null){U.return=m.return,ue=U;break e}ue=m.return}}var M=n.current;for(ue=M;ue!==null;){w=ue;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,ue=B;else e:for(w=M;ue!==null;){if(S=ue,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:du(9,S)}}catch(me){ot(S,S.return,me)}if(S===w){ue=null;break e}var ne=S.sibling;if(ne!==null){ne.return=S.return,ue=ne;break e}ue=S.return}}if(Ue=h,Zr(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Vs,n)}catch{}c=!0}return c}finally{Me=a,xn.transition=s}}return!1}function Xm(n,s,a){s=no(a,s),s=mm(n,s,1),n=ts(n,s,1),s=Wt(),n!==null&&($r(n,1,s),tn(n,s))}function ot(n,s,a){if(n.tag===3)Xm(n,n,a);else for(;s!==null;){if(s.tag===3){Xm(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(rs===null||!rs.has(c))){n=no(a,n),n=gm(s,n,1),s=ts(s,n,1),n=Wt(),s!==null&&($r(s,1,n),tn(s,n));break}}s=s.return}}function cw(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=Wt(),n.pingedLanes|=n.suspendedLanes&a,Tt===n&&(Rt&a)===a&&(_t===4||_t===3&&(Rt&130023424)===Rt&&500>Ye()-Gd?Ys(n,0):Kd|=a),tn(n,s)}function Jm(n,s){s===0&&((n.mode&1)===0?s=1:(s=Ci,Ci<<=1,(Ci&130023424)===0&&(Ci=4194304)));var a=Wt();n=xr(n,s),n!==null&&($r(n,s,a),tn(n,a))}function dw(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Jm(n,a)}function hw(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Jm(n,a)}var Zm;Zm=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Xt.current)Zt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Zt=!1,Z0(n,s,a);Zt=(n.flags&131072)!==0}else Zt=!1,nt&&(s.flags&1048576)!==0&&Np(s,Gl,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;uu(n,s),n=s.pendingProps;var h=Gi(s,Mt.current);eo(s,a),h=Sd(null,s,c,n,h,a);var m=kd();return s.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Jt(c)?(m=!0,Hl(s)):m=!1,s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,_d(s),h.updater=au,s.stateNode=h,h._reactInternals=s,Nd(s,c,n,a),s=Od(null,s,c,!0,m,a)):(s.tag=0,nt&&m&&ld(s),Ht(null,s,h,a),s=s.child),s;case 16:c=s.elementType;e:{switch(uu(n,s),n=s.pendingProps,h=c._init,c=h(c._payload),s.type=c,h=s.tag=pw(c),n=Ln(c,n),h){case 0:s=Md(null,s,c,n,a);break e;case 1:s=Sm(null,s,c,n,a);break e;case 11:s=wm(null,s,c,n,a);break e;case 14:s=Em(null,s,c,Ln(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:Ln(c,h),Md(n,s,c,h,a);case 1:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:Ln(c,h),Sm(n,s,c,h,a);case 3:e:{if(km(s),n===null)throw Error(t(387));c=s.pendingProps,m=s.memoizedState,h=m.element,zp(n,s),eu(s,c,null,a);var w=s.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){h=no(Error(t(423)),s),s=Am(n,s,c,a,h);break e}else if(c!==h){h=no(Error(t(424)),s),s=Am(n,s,c,a,h);break e}else for(cn=Yr(s.stateNode.containerInfo.firstChild),un=s,nt=!0,On=null,a=Fp(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Xi(),c===h){s=Ir(n,s,a);break e}Ht(n,s,c,a)}s=s.child}return s;case 5:return qp(s),n===null&&dd(s),c=s.type,h=s.pendingProps,m=n!==null?n.memoizedProps:null,w=h.children,nd(c,h)?w=null:m!==null&&nd(c,m)&&(s.flags|=32),Im(n,s),Ht(n,s,w,a),s.child;case 6:return n===null&&dd(s),null;case 13:return Pm(n,s,a);case 4:return vd(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Ji(s,null,c,a):Ht(n,s,c,a),s.child;case 11:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:Ln(c,h),wm(n,s,c,h,a);case 7:return Ht(n,s,s.pendingProps,a),s.child;case 8:return Ht(n,s,s.pendingProps.children,a),s.child;case 12:return Ht(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,h=s.pendingProps,m=s.memoizedProps,w=h.value,Xe(Xl,c._currentValue),c._currentValue=w,m!==null)if(Mn(m.value,w)){if(m.children===h.children&&!Xt.current){s=Ir(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var S=m.dependencies;if(S!==null){w=m.child;for(var D=S.firstContext;D!==null;){if(D.context===c){if(m.tag===1){D=Tr(-1,a&-a),D.tag=2;var q=m.updateQueue;if(q!==null){q=q.shared;var Y=q.pending;Y===null?D.next=D:(D.next=Y.next,Y.next=D),q.pending=D}}m.lanes|=a,D=m.alternate,D!==null&&(D.lanes|=a),gd(m.return,a,s),S.lanes|=a;break}D=D.next}}else if(m.tag===10)w=m.type===s.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,S=w.alternate,S!==null&&(S.lanes|=a),gd(w,a,s),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}Ht(n,s,h.children,a),s=s.child}return s;case 9:return h=s.type,c=s.pendingProps.children,eo(s,a),h=wn(h),c=c(h),s.flags|=1,Ht(n,s,c,a),s.child;case 14:return c=s.type,h=Ln(c,s.pendingProps),h=Ln(c.type,h),Em(n,s,c,h,a);case 15:return xm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:Ln(c,h),uu(n,s),s.tag=1,Jt(c)?(n=!0,Hl(s)):n=!1,eo(s,a),fm(s,c,h),Nd(s,c,h,a),Od(null,s,c,!0,n,a);case 19:return Rm(n,s,a);case 22:return Tm(n,s,a)}throw Error(t(156,s.tag))};function eg(n,s){return Ai(n,s)}function fw(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(n,s,a,c){return new fw(n,s,a,c)}function nh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function pw(n){if(typeof n=="function")return nh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===ze)return 14}return 2}function as(n,s){var a=n.alternate;return a===null?(a=Tn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function wu(n,s,a,c,h,m){var w=2;if(c=n,typeof n=="function")nh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case R:return Js(a.children,h,m,s);case x:w=8,h|=8;break;case I:return n=Tn(12,a,s,h|2),n.elementType=I,n.lanes=m,n;case k:return n=Tn(13,a,s,h),n.elementType=k,n.lanes=m,n;case Ne:return n=Tn(19,a,s,h),n.elementType=Ne,n.lanes=m,n;case ge:return Eu(a,h,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:w=10;break e;case b:w=9;break e;case V:w=11;break e;case ze:w=14;break e;case qe:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Tn(w,a,s,h),s.elementType=n,s.type=c,s.lanes=m,s}function Js(n,s,a,c){return n=Tn(7,n,c,s),n.lanes=a,n}function Eu(n,s,a,c){return n=Tn(22,n,c,s),n.elementType=ge,n.lanes=a,n.stateNode={isHidden:!1},n}function rh(n,s,a){return n=Tn(6,n,null,s),n.lanes=a,n}function sh(n,s,a){return s=Tn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function mw(n,s,a,c,h){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Br(0),this.expirationTimes=Br(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Br(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function ih(n,s,a,c,h,m,w,S,D){return n=new mw(n,s,a,S,D),s===1?(s=1,m===!0&&(s|=8)):s=0,m=Tn(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},_d(m),n}function gw(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function tg(n){if(!n)return Jr;n=n._reactInternals;e:{if(Pn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Jt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Jt(a))return Cp(n,a,s)}return s}function ng(n,s,a,c,h,m,w,S,D){return n=ih(a,c,!0,n,h,m,w,S,D),n.context=tg(null),a=n.current,c=Wt(),h=is(a),m=Tr(c,h),m.callback=s??null,ts(a,m,h),n.current.lanes=h,$r(n,h,c),tn(n,c),n}function xu(n,s,a,c){var h=s.current,m=Wt(),w=is(h);return a=tg(a),s.context===null?s.context=a:s.pendingContext=a,s=Tr(m,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=ts(h,s,w),n!==null&&(Un(n,h,w,m),Zl(n,h,w)),w}function Tu(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function rg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function oh(n,s){rg(n,s),(n=n.alternate)&&rg(n,s)}function yw(){return null}var sg=typeof reportError=="function"?reportError:function(n){console.error(n)};function ah(n){this._internalRoot=n}Iu.prototype.render=ah.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));xu(n,s,null,null)},Iu.prototype.unmount=ah.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Qs(function(){xu(null,n,null,null)}),s[_r]=null}};function Iu(n){this._internalRoot=n}Iu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Il();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Kn.length&&s!==0&&s<Kn[a].priority;a++);Kn.splice(a,0,n),a===0&&Al(n)}};function lh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Su(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ig(){}function _w(n,s,a,c,h){if(h){if(typeof c=="function"){var m=c;c=function(){var q=Tu(w);m.call(q)}}var w=ng(s,c,n,0,null,!1,!1,"",ig);return n._reactRootContainer=w,n[_r]=w.current,la(n.nodeType===8?n.parentNode:n),Qs(),w}for(;h=n.lastChild;)n.removeChild(h);if(typeof c=="function"){var S=c;c=function(){var q=Tu(D);S.call(q)}}var D=ih(n,0,!1,null,null,!1,!1,"",ig);return n._reactRootContainer=D,n[_r]=D.current,la(n.nodeType===8?n.parentNode:n),Qs(function(){xu(s,D,a,c)}),D}function ku(n,s,a,c,h){var m=a._reactRootContainer;if(m){var w=m;if(typeof h=="function"){var S=h;h=function(){var D=Tu(w);S.call(D)}}xu(s,w,n,h)}else w=_w(a,s,n,h,c);return Tu(w)}xl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=zr(s.pendingLanes);a!==0&&(qr(s,a|1),tn(s,Ye()),(Ue&6)===0&&(io=Ye()+500,Zr()))}break;case 13:Qs(function(){var c=xr(n,1);if(c!==null){var h=Wt();Un(c,n,1,h)}}),oh(n,1)}},Ri=function(n){if(n.tag===13){var s=xr(n,134217728);if(s!==null){var a=Wt();Un(s,n,134217728,a)}oh(n,134217728)}},Tl=function(n){if(n.tag===13){var s=is(n),a=xr(n,s);if(a!==null){var c=Wt();Un(a,n,s,c)}oh(n,s)}},Il=function(){return Me},Sl=function(n,s){var a=Me;try{return Me=n,s()}finally{Me=a}},Ei=function(n,s,a){switch(s){case"input":if(Do(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var h=$l(c);if(!h)throw Error(t(90));mi(c),Do(c,h)}}}break;case"textarea":vi(n,a);break;case"select":s=a.value,s!=null&&cr(n,!!a.multiple,s,!1)}},Cs=Zd,$o=Qs;var vw={usingClientEntryPoint:!1,Events:[da,Wi,$l,Hn,Bo,Zd]},Sa={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ww={bundleType:Sa.bundleType,version:Sa.version,rendererPackageName:Sa.rendererPackageName,rendererConfig:Sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Wo(n),n===null?null:n.stateNode},findFiberByHostInstance:Sa.findFiberByHostInstance||yw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Au.isDisabled&&Au.supportsFiber)try{Vs=Au.inject(ww),sn=Au}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vw,nn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lh(s))throw Error(t(200));return gw(n,s,null,a)},nn.createRoot=function(n,s){if(!lh(n))throw Error(t(299));var a=!1,c="",h=sg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),s=ih(n,1,!1,null,null,a,!1,c,h),n[_r]=s.current,la(n.nodeType===8?n.parentNode:n),new ah(s)},nn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Wo(s),n=n===null?null:n.stateNode,n},nn.flushSync=function(n){return Qs(n)},nn.hydrate=function(n,s,a){if(!Su(s))throw Error(t(200));return ku(null,n,s,!0,a)},nn.hydrateRoot=function(n,s,a){if(!lh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,h=!1,m="",w=sg;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=ng(s,null,n,1,a??null,h,!1,m,w),n[_r]=s.current,la(n),c)for(n=0;n<c.length;n++)a=c[n],h=a._getVersion,h=h(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,h]:s.mutableSourceEagerHydrationData.push(a,h);return new Iu(s)},nn.render=function(n,s,a){if(!Su(s))throw Error(t(200));return ku(null,n,s,!1,a)},nn.unmountComponentAtNode=function(n){if(!Su(n))throw Error(t(40));return n._reactRootContainer?(Qs(function(){ku(null,null,n,!1,function(){n._reactRootContainer=null,n[_r]=null})}),!0):!1},nn.unstable_batchedUpdates=Zd,nn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Su(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return ku(n,s,a,!1,c)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var fg;function Pw(){if(fg)return dh.exports;fg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dh.exports=Aw(),dh.exports}var pg;function Cw(){if(pg)return Pu;pg=1;var r=Pw();return Pu.createRoot=r.createRoot,Pu.hydrateRoot=r.hydrateRoot,Pu}var Rw=Cw();const bw=$y(Rw);var mg={};const qy=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Nw=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],d=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],d=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},Hy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],d=o+1<r.length,f=d?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,E=l>>2,A=(l&3)<<4|f>>4;let C=(f&15)<<2|v>>6,O=v&63;g||(O=64,d||(C=64)),i.push(t[E],t[A],t[C],t[O])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(qy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Nw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const A=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||v==null||A==null)throw new Dw;const C=l<<2|f>>4;if(i.push(C),v!==64){const O=f<<4&240|v>>2;if(i.push(O),A!==64){const L=v<<6&192|A;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Dw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vw=function(r){const e=qy(r);return Hy.encodeByteArray(e,!0)},Qu=function(r){return Vw(r).replace(/\./g,"")},Wy=function(r){try{return Hy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Mw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ow=()=>Mw().__FIREBASE_DEFAULTS__,Lw=()=>{if(typeof process>"u"||typeof mg>"u")return;const r=mg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},jw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Wy(r[1]);return e&&JSON.parse(e)},mc=()=>{try{return Ow()||Lw()||jw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Ky=r=>{var e,t;return(t=(e=mc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Fw=r=>{const e=Ky(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Gy=()=>{var r;return(r=mc())===null||r===void 0?void 0:r.config},Qy=r=>{var e;return(e=mc())===null||e===void 0?void 0:e[`_${r}`]};class Uw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function zw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Qu(JSON.stringify(t)),Qu(JSON.stringify(d)),""].join(".")}function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function $w(){var r;const e=(r=mc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Hw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Ww(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kw(){const r=Bt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Gw(){return!$w()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qw(){try{return typeof indexedDB=="object"}catch{return!1}}function Yw(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}const Xw="FirebaseError";class Or extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Xw,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,el.prototype.create)}}class el{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?Jw(l,i):"Error",f=`${this.serviceName}: ${d} (${o}).`;return new Or(o,f,i)}}function Jw(r,e){return r.replace(Zw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Zw=/\{\$([^}]+)}/g;function e1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Yu(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],d=e[o];if(gg(l)&&gg(d)){if(!Yu(l,d))return!1}else if(l!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function gg(r){return r!==null&&typeof r=="object"}function tl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Pa(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Ca(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function t1(r,e){const t=new n1(r,e);return t.subscribe.bind(t)}class n1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");r1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=ph),o.error===void 0&&(o.error=ph),o.complete===void 0&&(o.complete=ph);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function r1(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function ph(){}function kt(r){return r&&r._delegate?r._delegate:r}class ai{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zs="[DEFAULT]";class s1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Uw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(o1(e))try{this.getOrInitializeService({instanceIdentifier:Zs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zs){return this.instances.has(e)}getOptions(e=Zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&d.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const d=this.instances.get(o);return d&&e(d,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:i1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Zs){return this.component?this.component.multipleInstances?e:Zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i1(r){return r===Zs?void 0:r}function o1(r){return r.instantiationMode==="EAGER"}class a1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Oe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Oe||(Oe={}));const l1={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},u1=Oe.INFO,c1={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},d1=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=c1[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nf{constructor(e){this.name=e,this._logLevel=u1,this._logHandler=d1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?l1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const h1=(r,e)=>e.some(t=>r instanceof t);let yg,_g;function f1(){return yg||(yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p1(){return _g||(_g=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yy=new WeakMap,kh=new WeakMap,Xy=new WeakMap,mh=new WeakMap,rf=new WeakMap;function m1(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",d)},l=()=>{t(ms(r.result)),o()},d=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Yy.set(t,r)}).catch(()=>{}),rf.set(e,r),e}function g1(r){if(kh.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",d),r.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",d),r.addEventListener("abort",d)});kh.set(r,e)}let Ah={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return kh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Xy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ms(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function y1(r){Ah=r(Ah)}function _1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(gh(this),e,...t);return Xy.set(i,e.sort?e.sort():[e]),ms(i)}:p1().includes(r)?function(...e){return r.apply(gh(this),e),ms(Yy.get(this))}:function(...e){return ms(r.apply(gh(this),e))}}function v1(r){return typeof r=="function"?_1(r):(r instanceof IDBTransaction&&g1(r),h1(r,f1())?new Proxy(r,Ah):r)}function ms(r){if(r instanceof IDBRequest)return m1(r);if(mh.has(r))return mh.get(r);const e=v1(r);return e!==r&&(mh.set(r,e),rf.set(e,r)),e}const gh=r=>rf.get(r);function w1(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const d=indexedDB.open(r,e),f=ms(d);return i&&d.addEventListener("upgradeneeded",g=>{i(ms(d.result),g.oldVersion,g.newVersion,ms(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const E1=["get","getKey","getAll","getAllKeys","count"],x1=["put","add","delete","clear"],yh=new Map;function vg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(yh.get(e))return yh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=x1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||E1.includes(t)))return;const l=async function(d,...f){const g=this.transaction(d,o?"readwrite":"readonly");let v=g.store;return i&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),o&&g.done]))[0]};return yh.set(e,l),l}y1(r=>({...r,get:(e,t,i)=>vg(e,t)||r.get(e,t,i),has:(e,t)=>!!vg(e,t)||r.has(e,t)}));class T1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(I1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function I1(r){const e=r.getComponent();return e?.type==="VERSION"}const Ph="@firebase/app",wg="0.10.13";const br=new nf("@firebase/app"),S1="@firebase/app-compat",k1="@firebase/analytics-compat",A1="@firebase/analytics",P1="@firebase/app-check-compat",C1="@firebase/app-check",R1="@firebase/auth",b1="@firebase/auth-compat",N1="@firebase/database",D1="@firebase/data-connect",V1="@firebase/database-compat",M1="@firebase/functions",O1="@firebase/functions-compat",L1="@firebase/installations",j1="@firebase/installations-compat",F1="@firebase/messaging",U1="@firebase/messaging-compat",z1="@firebase/performance",B1="@firebase/performance-compat",$1="@firebase/remote-config",q1="@firebase/remote-config-compat",H1="@firebase/storage",W1="@firebase/storage-compat",K1="@firebase/firestore",G1="@firebase/vertexai-preview",Q1="@firebase/firestore-compat",Y1="firebase",X1="10.14.1";const Ch="[DEFAULT]",J1={[Ph]:"fire-core",[S1]:"fire-core-compat",[A1]:"fire-analytics",[k1]:"fire-analytics-compat",[C1]:"fire-app-check",[P1]:"fire-app-check-compat",[R1]:"fire-auth",[b1]:"fire-auth-compat",[N1]:"fire-rtdb",[D1]:"fire-data-connect",[V1]:"fire-rtdb-compat",[M1]:"fire-fn",[O1]:"fire-fn-compat",[L1]:"fire-iid",[j1]:"fire-iid-compat",[F1]:"fire-fcm",[U1]:"fire-fcm-compat",[z1]:"fire-perf",[B1]:"fire-perf-compat",[$1]:"fire-rc",[q1]:"fire-rc-compat",[H1]:"fire-gcs",[W1]:"fire-gcs-compat",[K1]:"fire-fst",[Q1]:"fire-fst-compat",[G1]:"fire-vertex","fire-js":"fire-js",[Y1]:"fire-js-all"};const Xu=new Map,Z1=new Map,Rh=new Map;function Eg(r,e){try{r.container.addComponent(e)}catch(t){br.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function go(r){const e=r.name;if(Rh.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;Rh.set(e,r);for(const t of Xu.values())Eg(t,r);for(const t of Z1.values())Eg(t,r);return!0}function sf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function In(r){return r.settings!==void 0}const eE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new el("app","Firebase",eE);class tE{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}const Io=X1;function Jy(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Ch,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw gs.create("bad-app-name",{appName:String(o)});if(t||(t=Gy()),!t)throw gs.create("no-options");const l=Xu.get(o);if(l){if(Yu(t,l.options)&&Yu(i,l.config))return l;throw gs.create("duplicate-app",{appName:o})}const d=new a1(o);for(const g of Rh.values())d.addComponent(g);const f=new tE(t,i,d);return Xu.set(o,f),f}function Zy(r=Ch){const e=Xu.get(r);if(!e&&r===Ch&&Gy())return Jy();if(!e)throw gs.create("no-app",{appName:r});return e}function ys(r,e,t){var i;let o=(i=J1[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(f.join(" "));return}go(new ai(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const nE="firebase-heartbeat-database",rE=1,za="firebase-heartbeat-store";let _h=null;function e_(){return _h||(_h=w1(nE,rE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(za)}catch(t){console.warn(t)}}}}).catch(r=>{throw gs.create("idb-open",{originalErrorMessage:r.message})})),_h}async function sE(r){try{const t=(await e_()).transaction(za),i=await t.objectStore(za).get(t_(r));return await t.done,i}catch(e){if(e instanceof Or)br.warn(e.message);else{const t=gs.create("idb-get",{originalErrorMessage:e?.message});br.warn(t.message)}}}async function xg(r,e){try{const i=(await e_()).transaction(za,"readwrite");await i.objectStore(za).put(e,t_(r)),await i.done}catch(t){if(t instanceof Or)br.warn(t.message);else{const i=gs.create("idb-set",{originalErrorMessage:t?.message});br.warn(i.message)}}}function t_(r){return`${r.name}!${r.options.appId}`}const iE=1024,oE=720*60*60*1e3;class aE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Tg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const f=new Date(d.date).valueOf();return Date.now()-f<=oE}),this._storage.overwrite(this._heartbeatsCache))}catch(i){br.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Tg(),{heartbeatsToSend:i,unsentEntries:o}=lE(this._heartbeatsCache.heartbeats),l=Qu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return br.warn(t),""}}}function Tg(){return new Date().toISOString().substring(0,10)}function lE(r,e=iE){const t=[];let i=r.slice();for(const o of r){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),Ig(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ig(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class uE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qw()?Yw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return xg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return xg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Ig(r){return Qu(JSON.stringify({version:2,heartbeats:r})).length}function cE(r){go(new ai("platform-logger",e=>new T1(e),"PRIVATE")),go(new ai("heartbeat",e=>new aE(e),"PRIVATE")),ys(Ph,wg,r),ys(Ph,wg,"esm2017"),ys("fire-js","")}cE("");function of(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function n_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dE=n_,r_=new el("auth","Firebase",n_());const Ju=new nf("@firebase/auth");function hE(r,...e){Ju.logLevel<=Oe.WARN&&Ju.warn(`Auth (${Io}): ${r}`,...e)}function Fu(r,...e){Ju.logLevel<=Oe.ERROR&&Ju.error(`Auth (${Io}): ${r}`,...e)}function Sn(r,...e){throw lf(r,...e)}function zn(r,...e){return lf(r,...e)}function af(r,e,t){const i=Object.assign(Object.assign({},dE()),{[e]:t});return new el("auth","Firebase",i).create(e,{appName:r.name})}function nr(r){return af(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fE(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Sn(r,"argument-error"),af(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return r_.create(r,...e)}function xe(r,e,...t){if(!r)throw lf(e,...t)}function Ar(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Fu(e),new Error(e)}function Nr(r,e){r||Ar(e)}function bh(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function pE(){return Sg()==="http:"||Sg()==="https:"}function Sg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}function mE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pE()||Hw()||"connection"in navigator)?navigator.onLine:!0}function gE(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class nl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Nr(t>e,"Short delay should be less than long delay!"),this.isMobile=Bw()||Ww()}get(){return mE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function uf(r,e){Nr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class s_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const _E=new nl(3e4,6e4);function xs(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ts(r,e,t,i,o={}){return i_(r,o,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const f=tl(Object.assign({key:r.config.apiKey},d)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:g},l);return qw()||(v.referrerPolicy="no-referrer"),s_.fetch()(o_(r,r.config.apiHost,t,f),v)})}async function i_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},yE),e);try{const o=new wE(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Cu(r,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const f=l.ok?d.errorMessage:d.error.message,[g,v]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cu(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Cu(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Cu(r,"user-disabled",d);const E=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw af(r,E,v);Sn(r,E)}}catch(o){if(o instanceof Or)throw o;Sn(r,"network-request-failed",{message:String(o)})}}async function rl(r,e,t,i,o={}){const l=await Ts(r,e,t,i,o);return"mfaPendingCredential"in l&&Sn(r,"multi-factor-auth-required",{_serverResponse:l}),l}function o_(r,e,t,i){const o=`${e}${t}?${i}`;return r.config.emulator?uf(r.config,o):`${r.config.apiScheme}://${o}`}function vE(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(zn(this.auth,"network-request-failed")),_E.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=zn(r,e,i);return o.customData._tokenResponse=t,o}function kg(r){return r!==void 0&&r.enterprise!==void 0}class EE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vE(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function xE(r,e){return Ts(r,"GET","/v2/recaptchaConfig",xs(r,e))}async function TE(r,e){return Ts(r,"POST","/v1/accounts:delete",e)}async function a_(r,e){return Ts(r,"POST","/v1/accounts:lookup",e)}function Va(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function IE(r,e=!1){const t=kt(r),i=await t.getIdToken(e),o=cf(i);xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l?.sign_in_provider;return{claims:o,token:i,authTime:Va(vh(o.auth_time)),issuedAtTime:Va(vh(o.iat)),expirationTime:Va(vh(o.exp)),signInProvider:d||null,signInSecondFactor:l?.sign_in_second_factor||null}}function vh(r){return Number(r)*1e3}function cf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Fu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Wy(t);return o?JSON.parse(o):(Fu("Failed to decode base64 JWT payload"),null)}catch(o){return Fu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Ag(r){const e=cf(r);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ba(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Or&&SE(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function SE({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class kE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Nh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Va(this.lastLoginAt),this.creationTime=Va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Zu(r){var e;const t=r.auth,i=await r.getIdToken(),o=await Ba(r,a_(t,{idToken:i}));xe(o?.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const d=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?l_(l.providerUserInfo):[],f=PE(r.providerData,d),g=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!f?.length,E=g?v:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Nh(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,A)}async function AE(r){const e=kt(r);await Zu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PE(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function l_(r){return r.map(e=>{var{providerId:t}=e,i=of(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function CE(r,e){const t=await i_(r,{},async()=>{const i=tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,d=o_(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",s_.fetch()(d,{method:"POST",headers:f,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RE(r,e){return Ts(r,"POST","/v2/accounts:revokeToken",xs(r,e))}class co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ag(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=Ag(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await CE(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,d=new co;return i&&(xe(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(xe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(xe(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new co,this.toJSON())}_performRefresh(){return Ar("not implemented")}}function us(r,e){xe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Pr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=of(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Nh(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ba(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return IE(this,e)}reload(){return AE(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Pr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Zu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(nr(this.auth));const e=await this.getIdToken();return await Ba(this,TE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,d,f,g,v,E;const A=(i=t.displayName)!==null&&i!==void 0?i:void 0,C=(o=t.email)!==null&&o!==void 0?o:void 0,O=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,L=(d=t.photoURL)!==null&&d!==void 0?d:void 0,z=(f=t.tenantId)!==null&&f!==void 0?f:void 0,$=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,Q=(v=t.createdAt)!==null&&v!==void 0?v:void 0,te=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:J,emailVerified:oe,isAnonymous:Se,providerData:ye,stsTokenManager:R}=t;xe(J&&R,e,"internal-error");const x=co.fromJSON(this.name,R);xe(typeof J=="string",e,"internal-error"),us(A,e.name),us(C,e.name),xe(typeof oe=="boolean",e,"internal-error"),xe(typeof Se=="boolean",e,"internal-error"),us(O,e.name),us(L,e.name),us(z,e.name),us($,e.name),us(Q,e.name),us(te,e.name);const I=new Pr({uid:J,auth:e,email:C,emailVerified:oe,displayName:A,isAnonymous:Se,photoURL:L,phoneNumber:O,tenantId:z,stsTokenManager:x,createdAt:Q,lastLoginAt:te});return ye&&Array.isArray(ye)&&(I.providerData=ye.map(P=>Object.assign({},P))),$&&(I._redirectEventId=$),I}static async _fromIdTokenResponse(e,t,i=!1){const o=new co;o.updateFromServerResponse(t);const l=new Pr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Zu(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];xe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?l_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!l?.length,f=new co;f.updateFromIdToken(i);const g=new Pr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Nh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,v),g}}const Pg=new Map;function Cr(r){Nr(r instanceof Function,"Expected a class definition");let e=Pg.get(r);return e?(Nr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Pg.set(r,e),e)}class u_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}u_.type="NONE";const Cg=u_;function Uu(r,e,t){return`firebase:${r}:${e}:${t}`}class ho{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Uu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Uu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Pr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ho(Cr(Cg),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Cr(Cg);const d=Uu(i,e.config.apiKey,e.name);let f=null;for(const v of t)try{const E=await v._get(d);if(E){const A=Pr._fromJSON(e,E);v!==l&&(f=A),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new ho(l,e,i):(l=g[0],f&&await l._set(d,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(d)}catch{}})),new ho(l,e,i))}}function Rg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(f_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m_(e))return"Blackberry";if(g_(e))return"Webos";if(d_(e))return"Safari";if((e.includes("chrome/")||h_(e))&&!e.includes("edge/"))return"Chrome";if(p_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function c_(r=Bt()){return/firefox\//i.test(r)}function d_(r=Bt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h_(r=Bt()){return/crios\//i.test(r)}function f_(r=Bt()){return/iemobile/i.test(r)}function p_(r=Bt()){return/android/i.test(r)}function m_(r=Bt()){return/blackberry/i.test(r)}function g_(r=Bt()){return/webos/i.test(r)}function df(r=Bt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function bE(r=Bt()){var e;return df(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NE(){return Kw()&&document.documentMode===10}function y_(r=Bt()){return df(r)||p_(r)||g_(r)||m_(r)||/windows phone/i.test(r)||f_(r)}function __(r,e=[]){let t;switch(r){case"Browser":t=Rg(Bt());break;case"Worker":t=`${Rg(Bt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Io}/${i}`}class DE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,f)=>{try{const g=e(l);d(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function VE(r,e={}){return Ts(r,"GET","/v2/passwordPolicy",xs(r,e))}const ME=6;class OE{constructor(e){var t,i,o,l;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:ME,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,d,f;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(f=g.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),g}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class LE{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bg(this),this.idTokenSubscription=new bg(this),this.beforeStateQueue=new DE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=r_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await a_(this,{idToken:e}),i=await Pr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(In(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===f)&&g?.user&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(nr(this));const t=e?kt(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VE(this),t=new OE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new el("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await RE(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cr(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[Cr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(f,this,"internal-error"),f.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=__(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&hE(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Lr(r){return kt(r)}class bg{constructor(e){this.auth=e,this.observer=null,this.addObserver=t1(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let gc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jE(r){gc=r}function v_(r){return gc.loadJS(r)}function FE(){return gc.recaptchaEnterpriseScript}function UE(){return gc.gapiScript}function zE(r){return`__${r}${Math.floor(Math.random()*1e6)}`}const BE="recaptcha-enterprise",$E="NO_RECAPTCHA";class qE{constructor(e){this.type=BE,this.auth=Lr(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,f)=>{xE(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new EE(g);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,d(v.siteKey)}}).catch(g=>{f(g)})})}function o(l,d,f){const g=window.grecaptcha;kg(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(v=>{d(v)}).catch(()=>{d($E)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,d)=>{i(this.auth).then(f=>{if(!t&&kg(window.grecaptcha))o(f,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=FE();g.length!==0&&(g+=f),v_(g).then(()=>{o(f,l,d)}).catch(v=>{d(v)})}}).catch(f=>{d(f)})})}}async function Ng(r,e,t,i=!1){const o=new qE(r);let l;try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const d=Object.assign({},e);return i?Object.assign(d,{captchaResp:l}):Object.assign(d,{captchaResponse:l}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Dh(r,e,t,i){var o;if(!((o=r._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Ng(r,e,t,t==="getOobCode");return i(r,l)}else return i(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Ng(r,e,t,t==="getOobCode");return i(r,d)}else return Promise.reject(l)})}function HE(r,e){const t=sf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Yu(l,e??{}))return o;Sn(o,"already-initialized")}return t.initialize({options:e})}function WE(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Cr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function KE(r,e,t){const i=Lr(r);xe(i._canInitEmulator,i,"emulator-config-failed"),xe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=w_(e),{host:d,port:f}=GE(e),g=f===null?"":`:${f}`;i.config.emulator={url:`${l}//${d}${g}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:d,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),QE()}function w_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function GE(r){const e=w_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Dg(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:Dg(d)}}}function Dg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function QE(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class hf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,t){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}async function YE(r,e){return Ts(r,"POST","/v1/accounts:signUp",e)}async function XE(r,e){return rl(r,"POST","/v1/accounts:signInWithPassword",xs(r,e))}async function JE(r,e){return rl(r,"POST","/v1/accounts:signInWithEmailLink",xs(r,e))}async function ZE(r,e){return rl(r,"POST","/v1/accounts:signInWithEmailLink",xs(r,e))}class $a extends hf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new $a(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new $a(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dh(e,t,"signInWithPassword",XE);case"emailLink":return JE(e,{email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dh(e,i,"signUpPassword",YE);case"emailLink":return ZE(e,{idToken:t,email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function fo(r,e){return rl(r,"POST","/v1/accounts:signInWithIdp",xs(r,e))}const ex="http://localhost";class li extends hf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new li(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=of(t,["providerId","signInMethod"]);if(!i||!o)return null;const d=new li(i,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return fo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,fo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fo(e,t)}buildRequest(){const e={requestUri:ex,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tl(t)}return e}}function tx(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nx(r){const e=Pa(Ca(r)).link,t=e?Pa(Ca(e)).deep_link_id:null,i=Pa(Ca(r)).deep_link_id;return(i?Pa(Ca(i)).link:null)||i||t||e||r}class ff{constructor(e){var t,i,o,l,d,f;const g=Pa(Ca(e)),v=(t=g.apiKey)!==null&&t!==void 0?t:null,E=(i=g.oobCode)!==null&&i!==void 0?i:null,A=tx((o=g.mode)!==null&&o!==void 0?o:null);xe(v&&E&&A,"argument-error"),this.apiKey=v,this.operation=A,this.code=E,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(d=g.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(f=g.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=nx(e);try{return new ff(t)}catch{return null}}}class So{constructor(){this.providerId=So.PROVIDER_ID}static credential(e,t){return $a._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=ff.parseLink(t);return xe(i,"argument-error"),$a._fromEmailAndCode(e,i.code,i.tenantId)}}So.PROVIDER_ID="password";So.EMAIL_PASSWORD_SIGN_IN_METHOD="password";So.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class pf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class sl extends pf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cs extends sl{constructor(){super("facebook.com")}static credential(e){return li._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";class kr extends sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return li._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return kr.credential(t,i)}catch{return null}}}kr.GOOGLE_SIGN_IN_METHOD="google.com";kr.PROVIDER_ID="google.com";class ds extends sl{constructor(){super("github.com")}static credential(e){return li._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";class hs extends sl{constructor(){super("twitter.com")}static credential(e,t){return li._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return hs.credential(t,i)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";async function E_(r,e){return rl(r,"POST","/v1/accounts:signUp",xs(r,e))}class Dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Pr._fromIdTokenResponse(e,i,o),d=Vg(i);return new Dr({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Vg(i);return new Dr({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Vg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function rx(r){var e;if(In(r.app))return Promise.reject(nr(r));const t=Lr(r);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Dr({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await E_(t,{returnSecureToken:!0}),o=await Dr._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(o.user),o}class ec extends Or{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,ec.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new ec(e,t,i,o)}}function x_(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ec._fromErrorAndOperation(r,l,e,i):l})}async function sx(r,e,t=!1){const i=await Ba(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Dr._forOperation(r,"link",i)}async function ix(r,e,t=!1){const{auth:i}=r;if(In(i.app))return Promise.reject(nr(i));const o="reauthenticate";try{const l=await Ba(r,x_(i,o,e,r),t);xe(l.idToken,i,"internal-error");const d=cf(l.idToken);xe(d,i,"internal-error");const{sub:f}=d;return xe(r.uid===f,i,"user-mismatch"),Dr._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Sn(i,"user-mismatch"),l}}async function T_(r,e,t=!1){if(In(r.app))return Promise.reject(nr(r));const i="signIn",o=await x_(r,i,e),l=await Dr._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function ox(r,e){return T_(Lr(r),e)}async function I_(r){const e=Lr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ax(r,e,t){if(In(r.app))return Promise.reject(nr(r));const i=Lr(r),d=await Dh(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",E_).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&I_(r),g}),f=await Dr._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(f.user),f}function lx(r,e,t){return In(r.app)?Promise.reject(nr(r)):ox(kt(r),So.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&I_(r),i})}function ux(r,e,t,i){return kt(r).onIdTokenChanged(e,t,i)}function cx(r,e,t){return kt(r).beforeAuthStateChanged(e,t)}function dx(r,e,t,i){return kt(r).onAuthStateChanged(e,t,i)}function Mg(r){return kt(r).signOut()}const tc="__sak";class S_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tc,"1"),this.storage.removeItem(tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hx=1e3,fx=10;class k_ extends S_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);NE()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,fx):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},hx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}k_.type="LOCAL";const px=k_;class A_ extends S_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}A_.type="SESSION";const P_=A_;function mx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class yc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new yc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(d).map(async v=>v(t.origin,l)),g=await mx(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yc.receivers=[];function mf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class gx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((f,g)=>{const v=mf("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(A){const C=A;if(C.data.eventId===v)switch(C.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(C.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function rr(){return window}function yx(r){rr().location.href=r}function C_(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function _x(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vx(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function wx(){return C_()?self:null}const R_="firebaseLocalStorageDb",Ex=1,nc="firebaseLocalStorage",b_="fbase_key";class il{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function _c(r,e){return r.transaction([nc],e?"readwrite":"readonly").objectStore(nc)}function xx(){const r=indexedDB.deleteDatabase(R_);return new il(r).toPromise()}function Vh(){const r=indexedDB.open(R_,Ex);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(nc,{keyPath:b_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(nc)?e(i):(i.close(),await xx(),e(await Vh()))})})}async function Og(r,e,t){const i=_c(r,!0).put({[b_]:e,value:t});return new il(i).toPromise()}async function Tx(r,e){const t=_c(r,!1).get(e),i=await new il(t).toPromise();return i===void 0?null:i.value}function Lg(r,e){const t=_c(r,!0).delete(e);return new il(t).toPromise()}const Ix=800,Sx=3;class N_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Sx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return C_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yc._getInstance(wx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _x(),!this.activeServiceWorker)return;this.sender=new gx(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vh();return await Og(e,tc,"1"),await Lg(e,tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Og(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Tx(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Lg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=_c(o,!1).getAll();return new il(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ix)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}N_.type="LOCAL";const kx=N_;new nl(3e4,6e4);function D_(r,e){return e?Cr(e):(xe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class gf extends hf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ax(r){return T_(r.auth,new gf(r),r.bypassAuthState)}function Px(r){const{auth:e,user:t}=r;return xe(t,e,"internal-error"),ix(t,new gf(r),r.bypassAuthState)}async function Cx(r){const{auth:e,user:t}=r;return xe(t,e,"internal-error"),sx(t,new gf(r),r.bypassAuthState)}class V_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:d,type:f}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ax;case"linkViaPopup":case"linkViaRedirect":return Cx;case"reauthViaPopup":case"reauthViaRedirect":return Px;default:Sn(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rx=new nl(2e3,1e4);async function bx(r,e,t){if(In(r.app))return Promise.reject(zn(r,"operation-not-supported-in-this-environment"));const i=Lr(r);fE(r,e,pf);const o=D_(i,t);return new ei(i,"signInViaPopup",e,o).executeNotNull()}class ei extends V_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ei.currentPopupAction&&ei.currentPopupAction.cancel(),ei.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=mf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ei.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Rx.get())};e()}}ei.currentPopupAction=null;const Nx="pendingRedirect",zu=new Map;class Dx extends V_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=zu.get(this.auth._key());if(!e){try{const i=await Vx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}zu.set(this.auth._key(),e)}return this.bypassAuthState||zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vx(r,e){const t=Lx(e),i=Ox(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Mx(r,e){zu.set(r._key(),e)}function Ox(r){return Cr(r._redirectPersistence)}function Lx(r){return Uu(Nx,r.config.apiKey,r.name)}async function jx(r,e,t=!1){if(In(r.app))return Promise.reject(nr(r));const i=Lr(r),o=D_(i,e),d=await new Dx(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}const Fx=600*1e3;class Ux{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!M_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(zn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Fx&&this.cachedEventUids.clear(),this.cachedEventUids.has(jg(e))}saveEventToCache(e){this.cachedEventUids.add(jg(e)),this.lastProcessedEventTime=Date.now()}}function jg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function M_({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function zx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M_(r);default:return!1}}async function Bx(r,e={}){return Ts(r,"GET","/v1/projects",e)}const $x=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qx=/^https?/;async function Hx(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Bx(r);for(const t of e)try{if(Wx(t))return}catch{}Sn(r,"unauthorized-domain")}function Wx(r){const e=bh(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!qx.test(t))return!1;if($x.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const Kx=new nl(3e4,6e4);function Fg(){const r=rr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Gx(r){return new Promise((e,t)=>{var i,o,l;function d(){Fg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fg(),t(zn(r,"network-request-failed"))},timeout:Kx.get()})}if(!((o=(i=rr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=rr().gapi)===null||l===void 0)&&l.load)d();else{const f=zE("iframefcb");return rr()[f]=()=>{gapi.load?d():t(zn(r,"network-request-failed"))},v_(`${UE()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Bu=null,e})}let Bu=null;function Qx(r){return Bu=Bu||Gx(r),Bu}const Yx=new nl(5e3,15e3),Xx="__/auth/iframe",Jx="emulator/auth/iframe",Zx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tT(r){const e=r.config;xe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?uf(e,Jx):`https://${r.config.authDomain}/${Xx}`,i={apiKey:e.apiKey,appName:r.name,v:Io},o=eT.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${tl(i).slice(1)}`}async function nT(r){const e=await Qx(r),t=rr().gapi;return xe(t,r,"internal-error"),e.open({where:document.body,url:tT(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zx,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const d=zn(r,"network-request-failed"),f=rr().setTimeout(()=>{l(d)},Yx.get());function g(){rr().clearTimeout(f),o(i)}i.ping(g).then(g,()=>{l(d)})}))}const rT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sT=500,iT=600,oT="_blank",aT="http://localhost";class Ug{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lT(r,e,t,i=sT,o=iT){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g=Object.assign(Object.assign({},rT),{width:i.toString(),height:o.toString(),top:l,left:d}),v=Bt().toLowerCase();t&&(f=h_(v)?oT:t),c_(v)&&(e=e||aT,g.scrollbars="yes");const E=Object.entries(g).reduce((C,[O,L])=>`${C}${O}=${L},`,"");if(bE(v)&&f!=="_self")return uT(e||"",f),new Ug(null);const A=window.open(e||"",f,E);xe(A,r,"popup-blocked");try{A.focus()}catch{}return new Ug(A)}function uT(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const cT="__/auth/handler",dT="emulator/auth/handler",hT=encodeURIComponent("fac");async function zg(r,e,t,i,o,l){xe(r.config.authDomain,r,"auth-domain-config-required"),xe(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Io,eventId:o};if(e instanceof pf){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",e1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,A]of Object.entries({}))d[E]=A}if(e instanceof sl){const E=e.getScopes().filter(A=>A!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const f=d;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const g=await r._getAppCheckToken(),v=g?`#${hT}=${encodeURIComponent(g)}`:"";return`${fT(r)}?${tl(f).slice(1)}${v}`}function fT({config:r}){return r.emulator?uf(r,dT):`https://${r.authDomain}/${cT}`}const wh="webStorageSupport";class pT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=P_,this._completeRedirectFn=jx,this._overrideRedirectResult=Mx}async _openPopup(e,t,i,o){var l;Nr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const d=await zg(e,t,i,bh(),o);return lT(e,d,mf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await zg(e,t,i,bh(),o);return yx(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Nr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await nT(e),i=new Ux(e);return t.register("authEvent",o=>(xe(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wh,{type:wh},o=>{var l;const d=(l=o?.[0])===null||l===void 0?void 0:l[wh];d!==void 0&&t(!!d),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Hx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return y_()||d_()||df()}}const mT=pT;var Bg="@firebase/auth",$g="1.7.9";class gT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function yT(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _T(r){go(new ai("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=i.options;xe(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:__(r)},v=new LE(i,o,l,g);return WE(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),go(new ai("auth-internal",e=>{const t=Lr(e.getProvider("auth").getImmediate());return(i=>new gT(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(Bg,$g,yT(r)),ys(Bg,$g,"esm2017")}const vT=300,wT=Qy("authIdTokenMaxAge")||vT;let qg=null;const ET=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>wT)return;const o=t?.token;qg!==o&&(qg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function xT(r=Zy()){const e=sf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=HE(r,{popupRedirectResolver:mT,persistence:[kx,px,P_]}),i=Qy("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=ET(l.toString());cx(t,d,()=>d(t.currentUser)),ux(t,f=>d(f))}}const o=Ky("auth");return o&&KE(t,`http://${o}`),t}function TT(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}jE({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=zn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",TT().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_T("Browser");var IT="firebase",ST="10.14.1";ys(IT,ST,"app");var Hg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ni,O_;(function(){var r;function e(R,x){function I(){}I.prototype=x.prototype,R.D=x.prototype,R.prototype=new I,R.prototype.constructor=R,R.C=function(P,b,V){for(var k=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)k[Ne-2]=arguments[Ne];return x.prototype[b].apply(P,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,x,I){I||(I=0);var P=Array(16);if(typeof x=="string")for(var b=0;16>b;++b)P[b]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(b=0;16>b;++b)P[b]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=R.g[0],I=R.g[1],b=R.g[2];var V=R.g[3],k=x+(V^I&(b^V))+P[0]+3614090360&4294967295;x=I+(k<<7&4294967295|k>>>25),k=V+(b^x&(I^b))+P[1]+3905402710&4294967295,V=x+(k<<12&4294967295|k>>>20),k=b+(I^V&(x^I))+P[2]+606105819&4294967295,b=V+(k<<17&4294967295|k>>>15),k=I+(x^b&(V^x))+P[3]+3250441966&4294967295,I=b+(k<<22&4294967295|k>>>10),k=x+(V^I&(b^V))+P[4]+4118548399&4294967295,x=I+(k<<7&4294967295|k>>>25),k=V+(b^x&(I^b))+P[5]+1200080426&4294967295,V=x+(k<<12&4294967295|k>>>20),k=b+(I^V&(x^I))+P[6]+2821735955&4294967295,b=V+(k<<17&4294967295|k>>>15),k=I+(x^b&(V^x))+P[7]+4249261313&4294967295,I=b+(k<<22&4294967295|k>>>10),k=x+(V^I&(b^V))+P[8]+1770035416&4294967295,x=I+(k<<7&4294967295|k>>>25),k=V+(b^x&(I^b))+P[9]+2336552879&4294967295,V=x+(k<<12&4294967295|k>>>20),k=b+(I^V&(x^I))+P[10]+4294925233&4294967295,b=V+(k<<17&4294967295|k>>>15),k=I+(x^b&(V^x))+P[11]+2304563134&4294967295,I=b+(k<<22&4294967295|k>>>10),k=x+(V^I&(b^V))+P[12]+1804603682&4294967295,x=I+(k<<7&4294967295|k>>>25),k=V+(b^x&(I^b))+P[13]+4254626195&4294967295,V=x+(k<<12&4294967295|k>>>20),k=b+(I^V&(x^I))+P[14]+2792965006&4294967295,b=V+(k<<17&4294967295|k>>>15),k=I+(x^b&(V^x))+P[15]+1236535329&4294967295,I=b+(k<<22&4294967295|k>>>10),k=x+(b^V&(I^b))+P[1]+4129170786&4294967295,x=I+(k<<5&4294967295|k>>>27),k=V+(I^b&(x^I))+P[6]+3225465664&4294967295,V=x+(k<<9&4294967295|k>>>23),k=b+(x^I&(V^x))+P[11]+643717713&4294967295,b=V+(k<<14&4294967295|k>>>18),k=I+(V^x&(b^V))+P[0]+3921069994&4294967295,I=b+(k<<20&4294967295|k>>>12),k=x+(b^V&(I^b))+P[5]+3593408605&4294967295,x=I+(k<<5&4294967295|k>>>27),k=V+(I^b&(x^I))+P[10]+38016083&4294967295,V=x+(k<<9&4294967295|k>>>23),k=b+(x^I&(V^x))+P[15]+3634488961&4294967295,b=V+(k<<14&4294967295|k>>>18),k=I+(V^x&(b^V))+P[4]+3889429448&4294967295,I=b+(k<<20&4294967295|k>>>12),k=x+(b^V&(I^b))+P[9]+568446438&4294967295,x=I+(k<<5&4294967295|k>>>27),k=V+(I^b&(x^I))+P[14]+3275163606&4294967295,V=x+(k<<9&4294967295|k>>>23),k=b+(x^I&(V^x))+P[3]+4107603335&4294967295,b=V+(k<<14&4294967295|k>>>18),k=I+(V^x&(b^V))+P[8]+1163531501&4294967295,I=b+(k<<20&4294967295|k>>>12),k=x+(b^V&(I^b))+P[13]+2850285829&4294967295,x=I+(k<<5&4294967295|k>>>27),k=V+(I^b&(x^I))+P[2]+4243563512&4294967295,V=x+(k<<9&4294967295|k>>>23),k=b+(x^I&(V^x))+P[7]+1735328473&4294967295,b=V+(k<<14&4294967295|k>>>18),k=I+(V^x&(b^V))+P[12]+2368359562&4294967295,I=b+(k<<20&4294967295|k>>>12),k=x+(I^b^V)+P[5]+4294588738&4294967295,x=I+(k<<4&4294967295|k>>>28),k=V+(x^I^b)+P[8]+2272392833&4294967295,V=x+(k<<11&4294967295|k>>>21),k=b+(V^x^I)+P[11]+1839030562&4294967295,b=V+(k<<16&4294967295|k>>>16),k=I+(b^V^x)+P[14]+4259657740&4294967295,I=b+(k<<23&4294967295|k>>>9),k=x+(I^b^V)+P[1]+2763975236&4294967295,x=I+(k<<4&4294967295|k>>>28),k=V+(x^I^b)+P[4]+1272893353&4294967295,V=x+(k<<11&4294967295|k>>>21),k=b+(V^x^I)+P[7]+4139469664&4294967295,b=V+(k<<16&4294967295|k>>>16),k=I+(b^V^x)+P[10]+3200236656&4294967295,I=b+(k<<23&4294967295|k>>>9),k=x+(I^b^V)+P[13]+681279174&4294967295,x=I+(k<<4&4294967295|k>>>28),k=V+(x^I^b)+P[0]+3936430074&4294967295,V=x+(k<<11&4294967295|k>>>21),k=b+(V^x^I)+P[3]+3572445317&4294967295,b=V+(k<<16&4294967295|k>>>16),k=I+(b^V^x)+P[6]+76029189&4294967295,I=b+(k<<23&4294967295|k>>>9),k=x+(I^b^V)+P[9]+3654602809&4294967295,x=I+(k<<4&4294967295|k>>>28),k=V+(x^I^b)+P[12]+3873151461&4294967295,V=x+(k<<11&4294967295|k>>>21),k=b+(V^x^I)+P[15]+530742520&4294967295,b=V+(k<<16&4294967295|k>>>16),k=I+(b^V^x)+P[2]+3299628645&4294967295,I=b+(k<<23&4294967295|k>>>9),k=x+(b^(I|~V))+P[0]+4096336452&4294967295,x=I+(k<<6&4294967295|k>>>26),k=V+(I^(x|~b))+P[7]+1126891415&4294967295,V=x+(k<<10&4294967295|k>>>22),k=b+(x^(V|~I))+P[14]+2878612391&4294967295,b=V+(k<<15&4294967295|k>>>17),k=I+(V^(b|~x))+P[5]+4237533241&4294967295,I=b+(k<<21&4294967295|k>>>11),k=x+(b^(I|~V))+P[12]+1700485571&4294967295,x=I+(k<<6&4294967295|k>>>26),k=V+(I^(x|~b))+P[3]+2399980690&4294967295,V=x+(k<<10&4294967295|k>>>22),k=b+(x^(V|~I))+P[10]+4293915773&4294967295,b=V+(k<<15&4294967295|k>>>17),k=I+(V^(b|~x))+P[1]+2240044497&4294967295,I=b+(k<<21&4294967295|k>>>11),k=x+(b^(I|~V))+P[8]+1873313359&4294967295,x=I+(k<<6&4294967295|k>>>26),k=V+(I^(x|~b))+P[15]+4264355552&4294967295,V=x+(k<<10&4294967295|k>>>22),k=b+(x^(V|~I))+P[6]+2734768916&4294967295,b=V+(k<<15&4294967295|k>>>17),k=I+(V^(b|~x))+P[13]+1309151649&4294967295,I=b+(k<<21&4294967295|k>>>11),k=x+(b^(I|~V))+P[4]+4149444226&4294967295,x=I+(k<<6&4294967295|k>>>26),k=V+(I^(x|~b))+P[11]+3174756917&4294967295,V=x+(k<<10&4294967295|k>>>22),k=b+(x^(V|~I))+P[2]+718787259&4294967295,b=V+(k<<15&4294967295|k>>>17),k=I+(V^(b|~x))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+x&4294967295,R.g[1]=R.g[1]+(b+(k<<21&4294967295|k>>>11))&4294967295,R.g[2]=R.g[2]+b&4294967295,R.g[3]=R.g[3]+V&4294967295}i.prototype.u=function(R,x){x===void 0&&(x=R.length);for(var I=x-this.blockSize,P=this.B,b=this.h,V=0;V<x;){if(b==0)for(;V<=I;)o(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<x;)if(P[b++]=R.charCodeAt(V++),b==this.blockSize){o(this,P),b=0;break}}else for(;V<x;)if(P[b++]=R[V++],b==this.blockSize){o(this,P),b=0;break}}this.h=b,this.o+=x},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var x=1;x<R.length-8;++x)R[x]=0;var I=8*this.o;for(x=R.length-8;x<R.length;++x)R[x]=I&255,I/=256;for(this.u(R),R=Array(16),x=I=0;4>x;++x)for(var P=0;32>P;P+=8)R[I++]=this.g[x]>>>P&255;return R};function l(R,x){var I=f;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=x(R)}function d(R,x){this.h=x;for(var I=[],P=!0,b=R.length-1;0<=b;b--){var V=R[b]|0;P&&V==x||(I[b]=V,P=!1)}this.g=I}var f={};function g(R){return-128<=R&&128>R?l(R,function(x){return new d([x|0],0>x?-1:0)}):new d([R|0],0>R?-1:0)}function v(R){if(isNaN(R)||!isFinite(R))return A;if(0>R)return $(v(-R));for(var x=[],I=1,P=0;R>=I;P++)x[P]=R/I|0,I*=4294967296;return new d(x,0)}function E(R,x){if(R.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(R.charAt(0)=="-")return $(E(R.substring(1),x));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=v(Math.pow(x,8)),P=A,b=0;b<R.length;b+=8){var V=Math.min(8,R.length-b),k=parseInt(R.substring(b,b+V),x);8>V?(V=v(Math.pow(x,V)),P=P.j(V).add(v(k))):(P=P.j(I),P=P.add(v(k)))}return P}var A=g(0),C=g(1),O=g(16777216);r=d.prototype,r.m=function(){if(z(this))return-$(this).m();for(var R=0,x=1,I=0;I<this.g.length;I++){var P=this.i(I);R+=(0<=P?P:4294967296+P)*x,x*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(L(this))return"0";if(z(this))return"-"+$(this).toString(R);for(var x=v(Math.pow(R,6)),I=this,P="";;){var b=oe(I,x).g;I=Q(I,b.j(x));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(R);if(I=b,L(I))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function L(R){if(R.h!=0)return!1;for(var x=0;x<R.g.length;x++)if(R.g[x]!=0)return!1;return!0}function z(R){return R.h==-1}r.l=function(R){return R=Q(this,R),z(R)?-1:L(R)?0:1};function $(R){for(var x=R.g.length,I=[],P=0;P<x;P++)I[P]=~R.g[P];return new d(I,~R.h).add(C)}r.abs=function(){return z(this)?$(this):this},r.add=function(R){for(var x=Math.max(this.g.length,R.g.length),I=[],P=0,b=0;b<=x;b++){var V=P+(this.i(b)&65535)+(R.i(b)&65535),k=(V>>>16)+(this.i(b)>>>16)+(R.i(b)>>>16);P=k>>>16,V&=65535,k&=65535,I[b]=k<<16|V}return new d(I,I[I.length-1]&-2147483648?-1:0)};function Q(R,x){return R.add($(x))}r.j=function(R){if(L(this)||L(R))return A;if(z(this))return z(R)?$(this).j($(R)):$($(this).j(R));if(z(R))return $(this.j($(R)));if(0>this.l(O)&&0>R.l(O))return v(this.m()*R.m());for(var x=this.g.length+R.g.length,I=[],P=0;P<2*x;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var b=0;b<R.g.length;b++){var V=this.i(P)>>>16,k=this.i(P)&65535,Ne=R.i(b)>>>16,ze=R.i(b)&65535;I[2*P+2*b]+=k*ze,te(I,2*P+2*b),I[2*P+2*b+1]+=V*ze,te(I,2*P+2*b+1),I[2*P+2*b+1]+=k*Ne,te(I,2*P+2*b+1),I[2*P+2*b+2]+=V*Ne,te(I,2*P+2*b+2)}for(P=0;P<x;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=x;P<2*x;P++)I[P]=0;return new d(I,0)};function te(R,x){for(;(R[x]&65535)!=R[x];)R[x+1]+=R[x]>>>16,R[x]&=65535,x++}function J(R,x){this.g=R,this.h=x}function oe(R,x){if(L(x))throw Error("division by zero");if(L(R))return new J(A,A);if(z(R))return x=oe($(R),x),new J($(x.g),$(x.h));if(z(x))return x=oe(R,$(x)),new J($(x.g),x.h);if(30<R.g.length){if(z(R)||z(x))throw Error("slowDivide_ only works with positive integers.");for(var I=C,P=x;0>=P.l(R);)I=Se(I),P=Se(P);var b=ye(I,1),V=ye(P,1);for(P=ye(P,2),I=ye(I,2);!L(P);){var k=V.add(P);0>=k.l(R)&&(b=b.add(I),V=k),P=ye(P,1),I=ye(I,1)}return x=Q(R,b.j(x)),new J(b,x)}for(b=A;0<=R.l(x);){for(I=Math.max(1,Math.floor(R.m()/x.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=v(I),k=V.j(x);z(k)||0<k.l(R);)I-=P,V=v(I),k=V.j(x);L(V)&&(V=C),b=b.add(V),R=Q(R,k)}return new J(b,R)}r.A=function(R){return oe(this,R).h},r.and=function(R){for(var x=Math.max(this.g.length,R.g.length),I=[],P=0;P<x;P++)I[P]=this.i(P)&R.i(P);return new d(I,this.h&R.h)},r.or=function(R){for(var x=Math.max(this.g.length,R.g.length),I=[],P=0;P<x;P++)I[P]=this.i(P)|R.i(P);return new d(I,this.h|R.h)},r.xor=function(R){for(var x=Math.max(this.g.length,R.g.length),I=[],P=0;P<x;P++)I[P]=this.i(P)^R.i(P);return new d(I,this.h^R.h)};function Se(R){for(var x=R.g.length+1,I=[],P=0;P<x;P++)I[P]=R.i(P)<<1|R.i(P-1)>>>31;return new d(I,R.h)}function ye(R,x){var I=x>>5;x%=32;for(var P=R.g.length-I,b=[],V=0;V<P;V++)b[V]=0<x?R.i(V+I)>>>x|R.i(V+I+1)<<32-x:R.i(V+I);return new d(b,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,O_=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=E,ni=d}).apply(typeof Hg<"u"?Hg:typeof self<"u"?self:typeof window<"u"?window:{});var Ru=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var L_,Ra,j_,$u,Mh,F_,U_,z_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ru=="object"&&Ru];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],p=p(T),p!=T&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var _=0,T=!1,F={next:function(){if(!T&&_<u.length){var H=_++;return{value:p(H,u[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,_){return _})}});var d=d||{},f=this||self;function g(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function v(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function E(u,p,_){return u.call.apply(u.bind,arguments)}function A(u,p,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function C(u,p,_){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,C.apply(null,arguments)}function O(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function L(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,F,H){for(var re=Array(arguments.length-2),He=2;He<arguments.length;He++)re[He-2]=arguments[He];return p.prototype[F].apply(T,re)}}function z(u){const p=u.length;if(0<p){const _=Array(p);for(let T=0;T<p;T++)_[T]=u[T];return _}return[]}function $(u,p){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(g(T)){const F=u.length||0,H=T.length||0;u.length=F+H;for(let re=0;re<H;re++)u[F+re]=T[re]}else u.push(T)}}class Q{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function te(u){return/^[\s\xa0]*$/.test(u)}function J(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function oe(u){return oe[" "](u),u}oe[" "]=function(){};var Se=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function ye(u,p,_){for(const T in u)p.call(_,u[T],T,u)}function R(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function x(u){const p={};for(const _ in u)p[_]=u[_];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,p){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let H=0;H<I.length;H++)_=I[H],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function b(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function V(u){f.setTimeout(()=>{throw u},0)}function k(){var u=ce;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Ne{constructor(){this.h=this.g=null}add(p,_){const T=ze.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var ze=new Q(()=>new qe,u=>u.reset());class qe{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,ee=!1,ce=new Ne,j=()=>{const u=f.Promise.resolve(void 0);ge=()=>{u.then(N)}};var N=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(_){V(_)}var p=ze;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}ee=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,p),f.removeEventListener("test",_,p)}catch{}return u})();function pe(u,p){if(ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Se){e:{try{oe(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ce[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&pe.aa.h.call(this)}}L(pe,ie);var Ce={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Qe(u,p,_,T,F){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=F,this.key=++Fe,this.da=this.fa=!1}function wt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function lr(u){this.src=u,this.g={},this.h=0}lr.prototype.add=function(u,p,_,T,F){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var re=jr(u,p,T,F);return-1<re?(p=u[re],_||(p.fa=!1)):(p=new Qe(p,this.src,H,!!T,F),p.fa=_,u.push(p)),p};function mi(u,p){var _=p.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,p,void 0),H;(H=0<=F)&&Array.prototype.splice.call(T,F,1),H&&(wt(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function jr(u,p,_,T){for(var F=0;F<u.length;++F){var H=u[F];if(!H.da&&H.listener==p&&H.capture==!!_&&H.ha==T)return F}return-1}var Ss="closure_lm_"+(1e6*Math.random()|0),gi={};function No(u,p,_,T,F){if(Array.isArray(p)){for(var H=0;H<p.length;H++)No(u,p[H],_,T,F);return null}return _=Mo(_),u&&u[De]?u.K(p,_,v(T)?!!T.capture:!1,F):Do(u,p,_,!1,T,F)}function Do(u,p,_,T,F,H){if(!p)throw Error("Invalid event type");var re=v(F)?!!F.capture:!!F,He=_i(u);if(He||(u[Ss]=He=new lr(u)),_=He.add(p,_,T,re,H),_.proxy)return _;if(T=fl(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)_e||(F=re),F===void 0&&(F=!1),u.addEventListener(p.toString(),T,F);else if(u.attachEvent)u.attachEvent(cr(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function fl(){function u(_){return p.call(u.src,u.listener,_)}const p=Vo;return u}function yi(u,p,_,T,F){if(Array.isArray(p))for(var H=0;H<p.length;H++)yi(u,p[H],_,T,F);else T=v(T)?!!T.capture:!!T,_=Mo(_),u&&u[De]?(u=u.i,p=String(p).toString(),p in u.g&&(H=u.g[p],_=jr(H,_,T,F),-1<_&&(wt(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete u.g[p],u.h--)))):u&&(u=_i(u))&&(p=u.g[p.toString()],u=-1,p&&(u=jr(p,_,T,F)),(_=-1<u?p[u]:null)&&ur(_))}function ur(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[De])mi(p.i,u);else{var _=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(_,T,u.capture):p.detachEvent?p.detachEvent(cr(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=_i(p))?(mi(_,u),_.h==0&&(_.src=null,p[Ss]=null)):wt(u)}}}function cr(u){return u in gi?gi[u]:gi[u]="on"+u}function Vo(u,p){if(u.da)u=!0;else{p=new pe(p,this);var _=u.listener,T=u.ha||u.src;u.fa&&ur(u),u=_.call(T,p)}return u}function _i(u){return u=u[Ss],u instanceof lr?u:null}var vi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mo(u){return typeof u=="function"?u:(u[vi]||(u[vi]=function(p){return u.handleEvent(p)}),u[vi])}function pt(){W.call(this),this.i=new lr(this),this.M=this,this.F=null}L(pt,W),pt.prototype[De]=!0,pt.prototype.removeEventListener=function(u,p,_,T){yi(this,u,p,_,T)};function mt(u,p){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new ie(p,u);else if(p instanceof ie)p.target=p.target||u;else{var F=p;p=new ie(T,u),P(p,F)}if(F=!0,_)for(var H=_.length-1;0<=H;H--){var re=p.g=_[H];F=dr(re,T,!0,p)&&F}if(re=p.g=u,F=dr(re,T,!0,p)&&F,F=dr(re,T,!1,p)&&F,_)for(H=0;H<_.length;H++)re=p.g=_[H],F=dr(re,T,!1,p)&&F}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],T=0;T<_.length;T++)wt(_[T]);delete u.g[p],u.h--}}this.F=null},pt.prototype.K=function(u,p,_,T){return this.i.add(String(u),p,!1,_,T)},pt.prototype.L=function(u,p,_,T){return this.i.add(String(u),p,!0,_,T)};function dr(u,p,_,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,H=0;H<p.length;++H){var re=p[H];if(re&&!re.da&&re.capture==_){var He=re.listener,gt=re.ha||re.src;re.fa&&mi(u.i,re),F=He.call(gt,T)!==!1&&F}}return F&&!T.defaultPrevented}function Oo(u,p,_){if(typeof u=="function")_&&(u=C(u,_));else if(u&&typeof u.handleEvent=="function")u=C(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function Fr(u){u.g=Oo(()=>{u.g=null,u.i&&(u.i=!1,Fr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class ks extends W{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function As(u){W.call(this),this.h=u,this.g={}}L(As,W);var Lo=[];function jo(u){ye(u.g,function(p,_){this.g.hasOwnProperty(_)&&ur(p)},u),u.g={}}As.prototype.N=function(){As.aa.N.call(this),jo(this)},As.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fo=f.JSON.stringify,Uo=f.JSON.parse,zo=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Ps(){}Ps.prototype.h=null;function wi(u){return u.h||(u.h=u.i())}function Ei(){}var pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qn(){ie.call(this,"d")}L(qn,ie);function xi(){ie.call(this,"c")}L(xi,ie);var Hn={},Bo=null;function Cs(){return Bo=Bo||new pt}Hn.La="serverreachability";function $o(u){ie.call(this,Hn.La,u)}L($o,ie);function hr(u){const p=Cs();mt(p,new $o(p))}Hn.STAT_EVENT="statevent";function qo(u,p){ie.call(this,Hn.STAT_EVENT,u),this.stat=p}L(qo,ie);function at(u){const p=Cs();mt(p,new qo(p,u))}Hn.Ma="timingevent";function Ti(u,p){ie.call(this,Hn.Ma,u),this.size=p}L(Ti,ie);function kn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function bs(u,p,_,T,F,H){u.info(function(){if(u.g)if(H)for(var re="",He=H.split("&"),gt=0;gt<He.length;gt++){var Le=He[gt].split("=");if(1<Le.length){var Et=Le[0];Le=Le[1];var ct=Et.split("_");re=2<=ct.length&&ct[1]=="type"?re+(Et+"="+Le+"&"):re+(Et+"=redacted&")}}else re=null;else re=H;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+p+`
`+_+`
`+re})}function Ii(u,p,_,T,F,H,re){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+p+`
`+_+`
`+H+" "+re})}function An(u,p,_,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Lc(u,_)+(T?" "+T:"")})}function Ho(u,p){u.info(function(){return"TIMEOUT: "+p})}Rs.prototype.info=function(){};function Lc(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var H=F[0];if(H!="noop"&&H!="stop"&&H!="close")for(var re=1;re<F.length;re++)F[re]=""}}}}return Fo(_)}catch{return p}}var Si={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pn;function Ns(){}L(Ns,Ps),Ns.prototype.g=function(){return new XMLHttpRequest},Ns.prototype.i=function(){return{}},Pn=new Ns;function Cn(u,p,_,T){this.j=u,this.i=p,this.l=_,this.R=T||1,this.U=new As(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ml}function ml(){this.i=null,this.g="",this.h=!1}var Wo={},ki={};function Ai(u,p,_){u.L=1,u.v=qr(on(p)),u.m=_,u.P=!0,Ko(u,null)}function Ko(u,p){u.F=Date.now(),Ye(u),u.A=on(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Wr(_.i,"t",T),u.C=0,_=u.j.J,u.h=new ml,u.g=Dl(u.j,_?p:null,!u.m),0<u.O&&(u.M=new ks(C(u.Y,u,u.g),u.O)),p=u.U,_=u.g,T=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(Lo[0]=F.toString()),F=Lo);for(var H=0;H<F.length;H++){var re=No(_,F[H],T||p.handleEvent,!1,p.h||p);if(!re)break;p.g[re.key]=re}p=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),hr(),bs(u.i,u.u,u.A,u.l,u.R,u.m)}Cn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Yt(u)==3?p.j():this.Y(u)},Cn.prototype.Y=function(u){try{if(u==this.g)e:{const ct=Yt(this.g);var p=this.g.Ba();const yn=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||Zo(this.g)))){this.J||ct!=4||p==7||(p==8||0>=yn?hr(3):hr(2)),Ds(this);var _=this.g.Z();this.X=_;t:if(gl(this)){var T=Zo(this.g);u="";var F=T.length,H=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),Ur(this);var re="";break t}this.h.i=new f.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(H&&p==F-1)});T.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=_==200,Ii(this.i,this.u,this.A,this.l,this.R,ct,_),this.o){if(this.T&&!this.K){t:{if(this.g){var He,gt=this.g;if((He=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(He)){var Le=He;break t}}Le=null}if(_=Le)An(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Go(this,_);else{this.o=!1,this.s=3,at(12),mn(this),Ur(this);break e}}if(this.P){_=!0;let ln;for(;!this.J&&this.C<re.length;)if(ln=jc(this,re),ln==ki){ct==4&&(this.s=4,at(14),_=!1),An(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Wo){this.s=4,at(15),An(this.i,this.l,re,"[Invalid Chunk]"),_=!1;break}else An(this.i,this.l,ln,null),Go(this,ln);if(gl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||re.length!=0||this.h.h||(this.s=1,at(16),_=!1),this.o=this.o&&_,!_)An(this.i,this.l,re,"[Invalid Chunked Response]"),mn(this),Ur(this);else if(0<re.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),ta(Et),Et.M=!0,at(11))}}else An(this.i,this.l,re,null),Go(this,re);ct==4&&mn(this),this.o&&!this.J&&(ct==4?ji(this.j,this):(this.o=!1,Ye(this)))}else Di(this.g),_==400&&0<re.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),mn(this),Ur(this)}}}catch{}};function gl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function jc(u,p){var _=u.C,T=p.indexOf(`
`,_);return T==-1?ki:(_=Number(p.substring(_,T)),isNaN(_)?Wo:(T+=1,T+_>p.length?ki:(p=p.slice(T,T+_),u.C=T+_,p)))}Cn.prototype.cancel=function(){this.J=!0,mn(this)};function Ye(u){u.S=Date.now()+u.I,yl(u,u.I)}function yl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=kn(C(u.ba,u),p)}function Ds(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Cn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ho(this.i,this.A),this.L!=2&&(hr(),at(17)),mn(this),this.s=2,Ur(this)):yl(this,this.S-u)};function Ur(u){u.j.G==0||u.J||ji(u.j,u)}function mn(u){Ds(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,jo(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Go(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||$t(_.h,u))){if(!u.K&&$t(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Li(_),Vn(_);else break e;Oi(_),at(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=kn(C(_.Za,_),6e3));if(1>=vl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else yr(_,11)}else if((u.K||_.g==u)&&Li(_),!te(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let Le=F[p];if(_.T=Le[0],Le=Le[1],_.G==2)if(Le[0]=="c"){_.K=Le[1],_.ia=Le[2];const Et=Le[3];Et!=null&&(_.la=Et,_.j.info("VER="+_.la));const ct=Le[4];ct!=null&&(_.Aa=ct,_.j.info("SVER="+_.Aa));const yn=Le[5];yn!=null&&typeof yn=="number"&&0<yn&&(T=1.5*yn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const ln=u.g;if(ln){const Us=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Us){var H=T.h;H.g||Us.indexOf("spdy")==-1&&Us.indexOf("quic")==-1&&Us.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Qo(H,H.h),H.h=null))}if(T.D){const Ui=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Ui&&(T.ya=Ui,Ge(T.I,T.D,Ui))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var re=u;if(T.qa=Nl(T,T.J?T.ia:null,T.W),re.K){wl(T.h,re);var He=re,gt=T.L;gt&&(He.I=gt),He.B&&(Ds(He),Ye(He)),T.g=re}else Fs(T);0<_.i.length&&Qn(_)}else Le[0]!="stop"&&Le[0]!="close"||yr(_,7);else _.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?yr(_,7):Pt(_):Le[0]!="noop"&&_.l&&_.l.ta(Le),_.v=0)}}hr(4)}catch{}}var _l=class{constructor(u,p){this.g=u,this.map=p}};function Vs(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function vl(u){return u.h?1:u.g?u.g.size:0}function $t(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Qo(u,p){u.g?u.g.add(p):u.h=p}function wl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Vs.prototype.cancel=function(){if(this.i=El(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function El(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return z(u.i)}function Pi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var p=[],_=u.length,T=0;T<_;T++)p.push(u[T]);return p}p=[],_=0;for(T in u)p[_++]=u[T];return p}function Ci(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const T in u)p[_++]=T;return p}}}function zr(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=Ci(u),T=Pi(u),F=T.length,H=0;H<F;H++)p.call(void 0,T[H],_&&_[H],u)}var Ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fc(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),F=null;if(0<=T){var H=u[_].substring(0,T);F=u[_].substring(T+1)}else H=u[_];p(H,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function fr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fr){this.h=u.h,Os(this,u.j),this.o=u.o,this.g=u.g,Br(this,u.s),this.l=u.l;var p=u.i,_=new Wn;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),$r(this,_),this.m=u.m}else u&&(p=String(u).match(Ms))?(this.h=!1,Os(this,p[1]||"",!0),this.o=Me(p[2]||""),this.g=Me(p[3]||"",!0),Br(this,p[4]),this.l=Me(p[5]||"",!0),$r(this,p[6]||"",!0),this.m=Me(p[7]||"")):(this.h=!1,this.i=new Wn(null,this.h))}fr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Hr(p,Ri,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Hr(p,Ri,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Hr(_,_.charAt(0)=="/"?Il:Tl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Hr(_,Yo)),u.join("")};function on(u){return new fr(u)}function Os(u,p,_){u.j=_?Me(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Br(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function $r(u,p,_){p instanceof Wn?(u.i=p,Kn(u.i,u.h)):(_||(p=Hr(p,Sl)),u.i=new Wn(p,u.h))}function Ge(u,p,_){u.i.set(p,_)}function qr(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Me(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Hr(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,xl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function xl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ri=/[#\/\?@]/g,Tl=/[#\?:]/g,Il=/[#\?]/g,Sl=/[#\?@]/g,Yo=/#/g;function Wn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function At(u){u.g||(u.g=new Map,u.h=0,u.i&&Fc(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=Wn.prototype,r.add=function(u,p){At(this),this.i=null,u=gn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Rn(u,p){At(u),p=gn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function bn(u,p){return At(u),p=gn(u,p),u.g.has(p)}r.forEach=function(u,p){At(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(p,F,T,this)},this)},this)},r.na=function(){At(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let T=0;T<p.length;T++){const F=u[T];for(let H=0;H<F.length;H++)_.push(p[T])}return _},r.V=function(u){At(this);let p=[];if(typeof u=="string")bn(this,u)&&(p=p.concat(this.g.get(gn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},r.set=function(u,p){return At(this),this.i=null,u=gn(this,u),bn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Wr(u,p,_){Rn(u,p),0<_.length&&(u.i=null,u.g.set(gn(u,p),z(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var T=p[_];const H=encodeURIComponent(String(T)),re=this.V(T);for(T=0;T<re.length;T++){var F=H;re[T]!==""&&(F+="="+encodeURIComponent(String(re[T]))),u.push(F)}}return this.i=u.join("&")};function gn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Kn(u,p){p&&!u.j&&(At(u),u.i=null,u.g.forEach(function(_,T){var F=T.toLowerCase();T!=F&&(Rn(this,T),Wr(this,F,_))},u)),u.j=p}function Uc(u,p){const _=new Rs;if(f.Image){const T=new Image;T.onload=O(Qt,_,"TestLoadImage: loaded",!0,p,T),T.onerror=O(Qt,_,"TestLoadImage: error",!1,p,T),T.onabort=O(Qt,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=O(Qt,_,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function kl(u,p){const _=new Rs,T=new AbortController,F=setTimeout(()=>{T.abort(),Qt(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(H=>{clearTimeout(F),H.ok?Qt(_,"TestPingServer: ok",!0,p):Qt(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Qt(_,"TestPingServer: error",!1,p)})}function Qt(u,p,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function zc(){this.g=new zo}function Al(u,p,_){const T=_||"";try{zr(u,function(F,H){let re=F;v(F)&&(re=Fo(F)),p.push(T+H+"="+encodeURIComponent(re))})}catch(F){throw p.push(T+"type="+encodeURIComponent("_badmap")),F}}function pr(u){this.l=u.Ub||null,this.j=u.eb||!1}L(pr,Ps),pr.prototype.g=function(){return new Ls(this.l,this.j)},pr.prototype.i=(function(u){return function(){return u}})({});function Ls(u,p){pt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Ls,pt),r=Ls.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Dn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Dn(this)),this.g&&(this.readyState=3,Dn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Nn(this):Dn(this),this.readyState==3&&Pl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Nn(this))},r.Qa=function(u){this.g&&(this.response=u,Nn(this))},r.ga=function(){this.g&&Nn(this)};function Nn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Dn(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Dn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function mr(u){let p="";return ye(u,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function Kr(u,p,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=mr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ge(u,p,_))}function tt(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(tt,pt);var Bc=/^https?$/i,Xo=["POST","PUT"];r=tt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pn.g(),this.v=this.o?wi(this.o):wi(Pn),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(H){js(this,H);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())_.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Xo,p,void 0))||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,re]of _)this.g.setRequestHeader(H,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ni(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){js(this,H)}};function js(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,bi(u),an(u)}function bi(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),an(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),an(this,!0)),tt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Jo(this):this.bb())},r.bb=function(){Jo(this)};function Jo(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Yt(u)!=4||u.Z()!=2)){if(u.u&&Yt(u)==4)Oo(u.Ea,0,u);else if(mt(u,"readystatechange"),Yt(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var T;if(T=re===0){var F=String(u.D).match(Ms)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),T=!Bc.test(F?F.toLowerCase():"")}_=T}if(_)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var H=2<Yt(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",bi(u)}}finally{an(u)}}}}function an(u,p){if(u.g){Ni(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||mt(u,"ready");try{_.onreadystatechange=T}catch{}}}function Ni(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Yt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Uo(p)}};function Zo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Di(u){const p={};u=(u.g&&2<=Yt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(te(u[T]))continue;var _=b(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=p[F]||[];p[F]=H,H.push(_)}R(p,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gn(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function ea(u){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gn("baseRetryDelayMs",5e3,u),this.cb=Gn("retryDelaySeedMs",1e4,u),this.Wa=Gn("forwardChannelMaxRetries",2,u),this.wa=Gn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Vs(u&&u.concurrentRequestLimit),this.Da=new zc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ea.prototype,r.la=8,r.G=1,r.connect=function(u,p,_,T){at(0),this.W=u,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Nl(this,null,this.W),Qn(this)};function Pt(u){if(Vi(u),u.G==3){var p=u.U++,_=on(u.I);if(Ge(_,"SID",u.K),Ge(_,"RID",p),Ge(_,"TYPE","terminate"),gr(u,_),p=new Cn(u,u.j,p),p.L=2,p.v=qr(on(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=p.v,_=!0),_||(p.g=Dl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ye(p)}bl(u)}function Vn(u){u.g&&(ta(u),u.g.cancel(),u.g=null)}function Vi(u){Vn(u),u.u&&(f.clearTimeout(u.u),u.u=null),Li(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Qn(u){if(!sn(u.h)&&!u.s){u.s=!0;var p=u.Ga;ge||j(),ee||(ge(),ee=!0),ce.add(p,u),u.B=0}}function $c(u,p){return vl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=kn(C(u.Ga,u,p),Rl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Cn(this,this.j,u);let H=this.o;if(this.S&&(H?(H=x(H),P(H,this.S)):H=this.S),this.m!==null||this.O||(F.H=H,H=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Gr(this,F,p),_=on(this.I),Ge(_,"RID",u),Ge(_,"CVER",22),this.D&&Ge(_,"X-HTTP-Session-Id",this.D),gr(this,_),H&&(this.O?p="headers="+encodeURIComponent(String(mr(H)))+"&"+p:this.m&&Kr(_,this.m,H)),Qo(this.h,F),this.Ua&&Ge(_,"TYPE","init"),this.P?(Ge(_,"$req",p),Ge(_,"SID","null"),F.T=!0,Ai(F,_,null)):Ai(F,_,p),this.G=2}}else this.G==3&&(u?Mi(this,u):this.i.length==0||sn(this.h)||Mi(this))};function Mi(u,p){var _;p?_=p.l:_=u.U++;const T=on(u.I);Ge(T,"SID",u.K),Ge(T,"RID",_),Ge(T,"AID",u.T),gr(u,T),u.m&&u.o&&Kr(T,u.m,u.o),_=new Cn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Gr(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Qo(u.h,_),Ai(_,T,p)}function gr(u,p){u.H&&ye(u.H,function(_,T){Ge(p,T,_)}),u.l&&zr({},function(_,T){Ge(p,T,_)})}function Gr(u,p,_){_=Math.min(u.i.length,_);var T=u.l?C(u.l.Na,u.l,u):null;e:{var F=u.i;let H=-1;for(;;){const re=["count="+_];H==-1?0<_?(H=F[0].g,re.push("ofs="+H)):H=0:re.push("ofs="+H);let He=!0;for(let gt=0;gt<_;gt++){let Le=F[gt].g;const Et=F[gt].map;if(Le-=H,0>Le)H=Math.max(0,F[gt].g-100),He=!1;else try{Al(Et,re,"req"+Le+"_")}catch{T&&T(Et)}}if(He){T=re.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,T}function Fs(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ge||j(),ee||(ge(),ee=!0),ce.add(p,u),u.v=0}}function Oi(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=kn(C(u.Fa,u),Rl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Cl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=kn(C(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Vn(this),Cl(this))};function ta(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Cl(u){u.g=new Cn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=on(u.qa);Ge(p,"RID","rpc"),Ge(p,"SID",u.K),Ge(p,"AID",u.T),Ge(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(p,"TO",u.ja),Ge(p,"TYPE","xmlhttp"),gr(u,p),u.m&&u.o&&Kr(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=qr(on(p)),_.m=null,_.P=!0,Ko(_,u)}r.Za=function(){this.C!=null&&(this.C=null,Vn(this),Oi(this),at(19))};function Li(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function ji(u,p){var _=null;if(u.g==p){Li(u),ta(u),u.g=null;var T=2}else if($t(u.h,p))_=p.D,wl(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;T=Cs(),mt(T,new Ti(T,_)),Qn(u)}else Fs(u);else if(F=p.s,F==3||F==0&&0<p.X||!(T==1&&$c(u,p)||T==2&&Oi(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),F){case 1:yr(u,5);break;case 4:yr(u,10);break;case 3:yr(u,6);break;default:yr(u,2)}}}function Rl(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function yr(u,p){if(u.j.info("Error code "+p),p==2){var _=C(u.fb,u),T=u.Xa;const F=!T;T=new fr(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Os(T,"https"),qr(T),F?Uc(T.toString(),_):kl(T.toString(),_)}else at(2);u.G=0,u.l&&u.l.sa(p),bl(u),Vi(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function bl(u){if(u.G=0,u.ka=[],u.l){const p=El(u.h);(p.length!=0||u.i.length!=0)&&($(u.ka,p),$(u.ka,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.ra()}}function Nl(u,p,_){var T=_ instanceof fr?on(_):new fr(_);if(T.g!="")p&&(T.g=p+"."+T.g),Br(T,T.s);else{var F=f.location;T=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var H=new fr(null);T&&Os(H,T),p&&(H.g=p),F&&Br(H,F),_&&(H.l=_),T=H}return _=u.D,p=u.ya,_&&p&&Ge(T,_,p),Ge(T,"VER",u.la),gr(u,T),T}function Dl(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new tt(new pr({eb:_})):new tt(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function na(){}r=na.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Fi(){}Fi.prototype.g=function(u,p){return new qt(u,p)};function qt(u,p){pt.call(this),this.g=new ea(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!te(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!te(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Yn(this)}L(qt,pt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Pt(this.g)},qt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Fo(u),u=_);p.i.push(new _l(p.Ya++,u)),p.G==3&&Qn(p)},qt.prototype.N=function(){this.g.l=null,delete this.j,Pt(this.g),delete this.g,qt.aa.N.call(this)};function Vl(u){qn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}L(Vl,qn);function Ml(){xi.call(this),this.status=1}L(Ml,xi);function Yn(u){this.g=u}L(Yn,na),Yn.prototype.ua=function(){mt(this.g,"a")},Yn.prototype.ta=function(u){mt(this.g,new Vl(u))},Yn.prototype.sa=function(u){mt(this.g,new Ml)},Yn.prototype.ra=function(){mt(this.g,"b")},Fi.prototype.createWebChannel=Fi.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,z_=function(){return new Fi},U_=function(){return Cs()},F_=Hn,Mh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Si.NO_ERROR=0,Si.TIMEOUT=8,Si.HTTP_ERROR=6,$u=Si,pl.COMPLETE="complete",j_=pl,Ei.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Ra=Ei,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,L_=tt}).apply(typeof Ru<"u"?Ru:typeof self<"u"?self:typeof window<"u"?window:{});const Wg="@firebase/firestore";let Ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");let ko="10.14.0";const ui=new nf("@firebase/firestore");function Aa(){return ui.logLevel}function fe(r,...e){if(ui.logLevel<=Oe.DEBUG){const t=e.map(yf);ui.debug(`Firestore (${ko}): ${r}`,...t)}}function Vr(r,...e){if(ui.logLevel<=Oe.ERROR){const t=e.map(yf);ui.error(`Firestore (${ko}): ${r}`,...t)}}function yo(r,...e){if(ui.logLevel<=Oe.WARN){const t=e.map(yf);ui.warn(`Firestore (${ko}): ${r}`,...t)}}function yf(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Ie(r="Unexpected state"){const e=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: `+r;throw Vr(e),new Error(e)}function We(r,e){r||Ie()}function Ae(r,e){return r}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Or{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class B_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ut.UNAUTHENTICATED)))}shutdown(){}}class AT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class PT{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Rr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Rr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string"),new B_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new Ut(e)}}class CT{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class RT{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new CT(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ut.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){We(this.o===void 0);const i=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.R;return this.R=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string"),this.R=t.token,new bT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function DT(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}class $_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=DT(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function $e(r,e){return r<e?-1:r>e?1:0}function _o(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}class vt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new vt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new vt(0,0))}static max(){return new ke(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qa{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(),i===void 0?i=e.length-t:i>e.length-t&&Ie(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return qa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qa?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=e.get(o),d=t.get(o);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class et extends qa{construct(e,t,i){return new et(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const VT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends qa{construct(e,t,i){return new Nt(e,t,i)}static isValidIdentifier(e){return VT.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new le(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new le(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else f==="`"?(d=!d,o++):f!=="."||d?(i+=f,o++):(l(),o++)}if(l(),d)throw new le(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(t)}static emptyPath(){return new Nt([])}}class ve{constructor(e){this.path=e}static fromPath(e){return new ve(et.fromString(e))}static fromName(e){return new ve(et.fromString(e).popFirst(5))}static empty(){return new ve(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new et(e.slice()))}}function MT(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(i===1e9?new vt(t+1,0):new vt(t,i));return new vs(o,ve.empty(),e)}function OT(r){return new vs(r.readTime,r.key,-1)}class vs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new vs(ke.min(),ve.empty(),-1)}static max(){return new vs(ke.max(),ve.empty(),-1)}}function LT(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(r.documentKey,e.documentKey),t!==0?t:$e(r.largestBatchId,e.largestBatchId))}const jT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ol(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==jT)throw r;fe("LocalStore","Unexpectedly lost primary lease")}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,i)=>{t(e)}))}static reject(e){return new X(((t,i)=>{i(e)}))}static waitFor(e){return new X(((t,i)=>{let o=0,l=0,d=!1;e.forEach((f=>{++o,f.next((()=>{++l,d&&l===o&&t()}),(g=>i(g)))})),d=!0,l===o&&t()}))}static or(e){let t=X.resolve(!1);for(const i of e)t=t.next((o=>o?X.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new X(((i,o)=>{const l=e.length,d=new Array(l);let f=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next((E=>{d[v]=E,++f,f===l&&i(d)}),(E=>o(E)))}}))}static doWhile(e,t){return new X(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function UT(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function al(r){return r.name==="IndexedDbTransactionError"}class _f{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_f.oe=-1;function vc(r){return r==null}function rc(r){return r===0&&1/r==-1/0}function zT(r){return typeof r=="number"&&Number.isInteger(r)&&!rc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Kg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function hi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function q_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class it{constructor(e,t){this.comparator=e,this.root=t||bt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bu(this.root,e,this.comparator,!1)}getReverseIterator(){return new bu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bu(this.root,e,this.comparator,!0)}}class bu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??bt.RED,this.left=o??bt.EMPTY,this.right=l??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new bt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return bt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,t,i,o,l){return this}insert(e,t,i){return new bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gg(this.data.getIterator())}getIteratorFrom(e){return new Gg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class Gg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class hn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new hn([])}unionWith(e){let t=new Dt(Nt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _o(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class H_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new H_("Invalid base64 string: "+l):l}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const BT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(r){if(We(!!r),typeof r=="string"){let e=0;const t=BT.exec(r);if(We(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(r.seconds),nanos:ut(r.nanos)}}function ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ci(r){return typeof r=="string"?Vt.fromBase64String(r):Vt.fromUint8Array(r)}function vf(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function wf(r){const e=r.mapValue.fields.__previous_value__;return vf(e)?wf(e):e}function Ha(r){const e=ws(r.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}class $T{constructor(e,t,i,o,l,d,f,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=v}}class Wa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}const Nu={mapValue:{}};function di(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?vf(r)?4:HT(r)?9007199254740991:qT(r)?10:11:Ie()}function or(r,e){if(r===e)return!0;const t=di(r);if(t!==di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ha(r).isEqual(Ha(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=ws(o.timestampValue),f=ws(l.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return ci(o.bytesValue).isEqual(ci(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=ut(o.doubleValue),f=ut(l.doubleValue);return d===f?rc(d)===rc(f):isNaN(d)&&isNaN(f)}return!1})(r,e);case 9:return _o(r.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Kg(d)!==Kg(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(f[g]===void 0||!or(d[g],f[g])))return!1;return!0})(r,e);default:return Ie()}}function Ka(r,e){return(r.values||[]).find((t=>or(t,e)))!==void 0}function vo(r,e){if(r===e)return 0;const t=di(r),i=di(e);if(t!==i)return $e(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(r.booleanValue,e.booleanValue);case 2:return(function(l,d){const f=ut(l.integerValue||l.doubleValue),g=ut(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return Qg(r.timestampValue,e.timestampValue);case 4:return Qg(Ha(r),Ha(e));case 5:return $e(r.stringValue,e.stringValue);case 6:return(function(l,d){const f=ci(l),g=ci(d);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,d){const f=l.split("/"),g=d.split("/");for(let v=0;v<f.length&&v<g.length;v++){const E=$e(f[v],g[v]);if(E!==0)return E}return $e(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,d){const f=$e(ut(l.latitude),ut(d.latitude));return f!==0?f:$e(ut(l.longitude),ut(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Yg(r.arrayValue,e.arrayValue);case 10:return(function(l,d){var f,g,v,E;const A=l.fields||{},C=d.fields||{},O=(f=A.value)===null||f===void 0?void 0:f.arrayValue,L=(g=C.value)===null||g===void 0?void 0:g.arrayValue,z=$e(((v=O?.values)===null||v===void 0?void 0:v.length)||0,((E=L?.values)===null||E===void 0?void 0:E.length)||0);return z!==0?z:Yg(O,L)})(r.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Nu.mapValue&&d===Nu.mapValue)return 0;if(l===Nu.mapValue)return 1;if(d===Nu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),v=d.fields||{},E=Object.keys(v);g.sort(),E.sort();for(let A=0;A<g.length&&A<E.length;++A){const C=$e(g[A],E[A]);if(C!==0)return C;const O=vo(f[g[A]],v[E[A]]);if(O!==0)return O}return $e(g.length,E.length)})(r.mapValue,e.mapValue);default:throw Ie()}}function Qg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return $e(r,e);const t=ws(r),i=ws(e),o=$e(t.seconds,i.seconds);return o!==0?o:$e(t.nanos,i.nanos)}function Yg(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=vo(t[o],i[o]);if(l)return l}return $e(t.length,i.length)}function wo(r){return Oh(r)}function Oh(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=ws(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ci(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ve.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Oh(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of i)l?l=!1:o+=",",o+=`${d}:${Oh(t.fields[d])}`;return o+"}"})(r.mapValue):Ie()}function Xg(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Lh(r){return!!r&&"integerValue"in r}function Ef(r){return!!r&&"arrayValue"in r}function Jg(r){return!!r&&"nullValue"in r}function Zg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function qu(r){return!!r&&"mapValue"in r}function qT(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ma(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return hi(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ma(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ma(r.arrayValue.values[t]);return e}return Object.assign({},r)}function HT(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!qu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ma(t)}setAll(e){let t=Nt.emptyPath(),i={},o=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=f.popLast()}d?i[f.lastSegment()]=Ma(d):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];qu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){hi(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new rn(Ma(this.value))}}function W_(r){const e=[];return hi(r.fields,((t,i)=>{const o=new Nt([t]);if(qu(i)){const l=W_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new hn(e)}class zt{constructor(e,t,i,o,l,d,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=d,this.documentState=f}static newInvalidDocument(e){return new zt(e,0,ke.min(),ke.min(),ke.min(),rn.empty(),0)}static newFoundDocument(e,t,i,o){return new zt(e,1,t,ke.min(),i,o,0)}static newNoDocument(e,t){return new zt(e,2,t,ke.min(),ke.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new zt(e,3,t,ke.min(),ke.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sc{constructor(e,t){this.position=e,this.inclusive=t}}function ey(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],d=r.position[o];if(l.field.isKeyField()?i=ve.comparator(ve.fromName(d.referenceValue),t.key):i=vo(d,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function ty(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!or(r.position[t],e.position[t]))return!1;return!0}class Ga{constructor(e,t="asc"){this.field=e,this.dir=t}}function WT(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}let K_=class{};class ft extends K_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new GT(e,t,i):t==="array-contains"?new XT(e,i):t==="in"?new JT(e,i):t==="not-in"?new ZT(e,i):t==="array-contains-any"?new eI(e,i):new ft(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new QT(e,i):new YT(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(vo(t,this.value)):t!==null&&di(this.value)===di(t)&&this.matchesComparison(vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends K_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new $n(e,t)}matches(e){return G_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function G_(r){return r.op==="and"}function Q_(r){return KT(r)&&G_(r)}function KT(r){for(const e of r.filters)if(e instanceof $n)return!1;return!0}function jh(r){if(r instanceof ft)return r.field.canonicalString()+r.op.toString()+wo(r.value);if(Q_(r))return r.filters.map((e=>jh(e))).join(",");{const e=r.filters.map((t=>jh(t))).join(",");return`${r.op}(${e})`}}function Y_(r,e){return r instanceof ft?(function(i,o){return o instanceof ft&&i.op===o.op&&i.field.isEqual(o.field)&&or(i.value,o.value)})(r,e):r instanceof $n?(function(i,o){return o instanceof $n&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,d,f)=>l&&Y_(d,o.filters[f])),!0):!1})(r,e):void Ie()}function X_(r){return r instanceof ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${wo(t.value)}`})(r):r instanceof $n?(function(t){return t.op.toString()+" {"+t.getFilters().map(X_).join(" ,")+"}"})(r):"Filter"}class GT extends ft{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class QT extends ft{constructor(e,t){super(e,"in",t),this.keys=J_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class YT extends ft{constructor(e,t){super(e,"not-in",t),this.keys=J_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function J_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class XT extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ef(t)&&Ka(t.arrayValue,this.value)}}class JT extends ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ka(this.value.arrayValue,t)}}class ZT extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ka(this.value.arrayValue,t)}}class eI extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ef(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ka(this.value.arrayValue,i)))}}class tI{constructor(e,t=null,i=[],o=[],l=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=d,this.endAt=f,this.ue=null}}function ny(r,e=null,t=[],i=[],o=null,l=null,d=null){return new tI(r,e,t,i,o,l,d)}function xf(r){const e=Ae(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>jh(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),vc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>wo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>wo(i))).join(",")),e.ue=t}return e.ue}function Tf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!WT(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Y_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!ty(r.startAt,e.startAt)&&ty(r.endAt,e.endAt)}function Fh(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Ao{constructor(e,t=null,i=[],o=[],l=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function nI(r,e,t,i,o,l,d,f){return new Ao(r,e,t,i,o,l,d,f)}function If(r){return new Ao(r)}function ry(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Z_(r){return r.collectionGroup!==null}function Oa(r){const e=Ae(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Dt(Nt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(f=f.add(v.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Ga(l,i))})),t.has(Nt.keyField().canonicalString())||e.ce.push(new Ga(Nt.keyField(),i))}return e.ce}function sr(r){const e=Ae(r);return e.le||(e.le=rI(e,Oa(r))),e.le}function rI(r,e){if(r.limitType==="F")return ny(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Ga(o.field,l)}));const t=r.endAt?new sc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new sc(r.startAt.position,r.startAt.inclusive):null;return ny(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Uh(r,e){const t=r.filters.concat([e]);return new Ao(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function zh(r,e,t){return new Ao(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function wc(r,e){return Tf(sr(r),sr(e))&&r.limitType===e.limitType}function ev(r){return`${xf(sr(r))}|lt:${r.limitType}`}function ao(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>X_(o))).join(", ")}]`),vc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>wo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>wo(o))).join(",")),`Target(${i})`})(sr(r))}; limitType=${r.limitType})`}function Ec(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ve.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Oa(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(d,f,g){const v=ey(d,f,g);return d.inclusive?v<=0:v<0})(i.startAt,Oa(i),o)||i.endAt&&!(function(d,f,g){const v=ey(d,f,g);return d.inclusive?v>=0:v>0})(i.endAt,Oa(i),o))})(r,e)}function sI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function tv(r){return(e,t)=>{let i=!1;for(const o of Oa(r)){const l=iI(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function iI(r,e,t){const i=r.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,d,f){const g=d.data.field(l),v=f.data.field(l);return g!==null&&v!==null?vo(g,v):Ie()})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ie()}}class Po{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return q_(this.inner)}size(){return this.innerSize}}const oI=new it(ve.comparator);function Mr(){return oI}const nv=new it(ve.comparator);function ba(...r){let e=nv;for(const t of r)e=e.insert(t.key,t);return e}function rv(r){let e=nv;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ti(){return La()}function sv(){return La()}function La(){return new Po((r=>r.toString()),((r,e)=>r.isEqual(e)))}const aI=new it(ve.comparator),lI=new Dt(ve.comparator);function Ve(...r){let e=lI;for(const t of r)e=e.add(t);return e}const uI=new Dt($e);function cI(){return uI}function Sf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function iv(r){return{integerValue:""+r}}function dI(r,e){return zT(e)?iv(e):Sf(r,e)}class xc{constructor(){this._=void 0}}function hI(r,e,t){return r instanceof Qa?(function(o,l){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&vf(l)&&(l=wf(l)),l&&(d.fields.__previous_value__=l),{mapValue:d}})(t,e):r instanceof Ya?av(r,e):r instanceof Xa?lv(r,e):(function(o,l){const d=ov(o,l),f=sy(d)+sy(o.Pe);return Lh(d)&&Lh(o.Pe)?iv(f):Sf(o.serializer,f)})(r,e)}function fI(r,e,t){return r instanceof Ya?av(r,e):r instanceof Xa?lv(r,e):t}function ov(r,e){return r instanceof ic?(function(i){return Lh(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Qa extends xc{}class Ya extends xc{constructor(e){super(),this.elements=e}}function av(r,e){const t=uv(e);for(const i of r.elements)t.some((o=>or(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Xa extends xc{constructor(e){super(),this.elements=e}}function lv(r,e){let t=uv(e);for(const i of r.elements)t=t.filter((o=>!or(o,i)));return{arrayValue:{values:t}}}class ic extends xc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function sy(r){return ut(r.integerValue||r.doubleValue)}function uv(r){return Ef(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class pI{constructor(e,t){this.field=e,this.transform=t}}function mI(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof Ya&&o instanceof Ya||i instanceof Xa&&o instanceof Xa?_o(i.elements,o.elements,or):i instanceof ic&&o instanceof ic?or(i.Pe,o.Pe):i instanceof Qa&&o instanceof Qa})(r.transform,e.transform)}class gI{constructor(e,t){this.version=e,this.transformResults=t}}class Bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Tc{}function cv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new kf(r.key,Bn.none()):new ll(r.key,r.data,Bn.none());{const t=r.data,i=rn.empty();let o=new Dt(Nt.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?i.delete(l):i.set(l,d),o=o.add(l)}return new Is(r.key,i,new hn(o.toArray()),Bn.none())}}function yI(r,e,t){r instanceof ll?(function(o,l,d){const f=o.value.clone(),g=oy(o.fieldTransforms,l,d.transformResults);f.setAll(g),l.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Is?(function(o,l,d){if(!Hu(o.precondition,l))return void l.convertToUnknownDocument(d.version);const f=oy(o.fieldTransforms,l,d.transformResults),g=l.data;g.setAll(dv(o)),g.setAll(f),l.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function ja(r,e,t,i){return r instanceof ll?(function(l,d,f,g){if(!Hu(l.precondition,d))return f;const v=l.value.clone(),E=ay(l.fieldTransforms,g,d);return v.setAll(E),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof Is?(function(l,d,f,g){if(!Hu(l.precondition,d))return f;const v=ay(l.fieldTransforms,g,d),E=d.data;return E.setAll(dv(l)),E.setAll(v),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((A=>A.field)))})(r,e,t,i):(function(l,d,f){return Hu(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(r,e,t)}function _I(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=ov(i.transform,o||null);l!=null&&(t===null&&(t=rn.empty()),t.set(i.field,l))}return t||null}function iy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&_o(i,o,((l,d)=>mI(l,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ll extends Tc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Is extends Tc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function dv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function oy(r,e,t){const i=new Map;We(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],d=l.transform,f=e.data.field(l.field);i.set(l.field,fI(d,f,t[o]))}return i}function ay(r,e,t){const i=new Map;for(const o of r){const l=o.transform,d=t.data.field(o.field);i.set(o.field,hI(l,d,e))}return i}class kf extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vI extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wI{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&yI(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ja(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ja(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=sv();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let f=this.applyToLocalView(d,l.mutatedFields);f=t.has(o.key)?null:f;const g=cv(d,f);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&_o(this.mutations,e.mutations,((t,i)=>iy(t,i)))&&_o(this.baseMutations,e.baseMutations,((t,i)=>iy(t,i)))}}class Af{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){We(e.mutations.length===i.length);let o=(function(){return aI})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,i[d].version);return new Af(e,t,i,o)}}class EI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class xI{constructor(e,t){this.count=e,this.unchangedNames=t}}var ht,je;function TI(r){switch(r){default:return Ie();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function hv(r){if(r===void 0)return Vr("GRPC error has no .code"),K.UNKNOWN;switch(r){case ht.OK:return K.OK;case ht.CANCELLED:return K.CANCELLED;case ht.UNKNOWN:return K.UNKNOWN;case ht.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ht.INTERNAL:return K.INTERNAL;case ht.UNAVAILABLE:return K.UNAVAILABLE;case ht.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ht.NOT_FOUND:return K.NOT_FOUND;case ht.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ht.ABORTED:return K.ABORTED;case ht.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ht.DATA_LOSS:return K.DATA_LOSS;default:return Ie()}}(je=ht||(ht={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";function II(){return new TextEncoder}const SI=new ni([4294967295,4294967295],0);function ly(r){const e=II().encode(r),t=new O_;return t.update(e),new Uint8Array(t.digest())}function uy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ni([t,i],0),new ni([o,l],0)]}class Pf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Na(`Invalid padding: ${t}`);if(i<0)throw new Na(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Na(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Na(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ni.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(ni.fromNumber(i)));return o.compare(SI)===1&&(o=new ni([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=ly(e),[i,o]=uy(t);for(let l=0;l<this.hashCount;l++){const d=this.Ee(i,o,l);if(!this.de(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new Pf(l,o,t);return i.forEach((f=>d.insert(f))),d}insert(e){if(this.Ie===0)return;const t=ly(e),[i,o]=uy(t);for(let l=0;l<this.hashCount;l++){const d=this.Ee(i,o,l);this.Ae(d)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ic{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,ul.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ic(ke.min(),o,new it($e),Mr(),Ve())}}class ul{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ul(i,t,Ve(),Ve(),Ve())}}class Wu{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class fv{constructor(e,t){this.targetId=e,this.me=t}}class pv{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class cy{constructor(){this.fe=0,this.ge=hy(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ve(),t=Ve(),i=Ve();return this.ge.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie()}})),new ul(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=hy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kI{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mr(),this.qe=dy(),this.Qe=new it($e)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ie()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const l=o.target;if(Fh(l))if(i===0){const d=new ve(l.path);this.Ue(t,d,zt.newNoDocument(d,ke.min()))}else We(i===1);else{const d=this.Ye(t);if(d!==i){const f=this.Ze(e),g=f?this.Xe(f,e,d):1;if(g!==0){this.je(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,v)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let d,f;try{d=ci(i).toUint8Array()}catch(g){if(g instanceof H_)return yo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Pf(d,o,l)}catch(g){return yo(g instanceof Na?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.Ie===0?null:f}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const d=this.Le.tt(),f=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Ue(t,l,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((l,d)=>{const f=this.Je(d);if(f){if(l.current&&Fh(f.target)){const g=new ve(f.target.path);this.ke.get(g)!==null||this.it(d,g)||this.Ue(d,g,zt.newNoDocument(g,e))}l.be&&(t.set(d,l.ve()),l.Ce())}}));let i=Ve();this.qe.forEach(((l,d)=>{let f=!0;d.forEachWhile((g=>{const v=this.Je(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.ke.forEach(((l,d)=>d.setReadTime(e)));const o=new Ic(e,t,this.Qe,this.ke,i);return this.ke=Mr(),this.qe=dy(),this.Qe=new it($e),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new cy,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Dt($e),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cy),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function dy(){return new it(ve.comparator)}function hy(){return new it(ve.comparator)}const AI={asc:"ASCENDING",desc:"DESCENDING"},PI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CI={and:"AND",or:"OR"};class RI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bh(r,e){return r.useProto3Json||vc(e)?e:{value:e}}function oc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function bI(r,e){return oc(r,e.toTimestamp())}function ir(r){return We(!!r),ke.fromTimestamp((function(t){const i=ws(t);return new vt(i.seconds,i.nanos)})(r))}function Cf(r,e){return $h(r,e).canonicalString()}function $h(r,e){const t=(function(o){return new et(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function gv(r){const e=et.fromString(r);return We(Ev(e)),e}function qh(r,e){return Cf(r.databaseId,e.path)}function Eh(r,e){const t=gv(e);if(t.get(1)!==r.databaseId.projectId)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ve(_v(t))}function yv(r,e){return Cf(r.databaseId,e)}function NI(r){const e=gv(r);return e.length===4?et.emptyPath():_v(e)}function Hh(r){return new et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function _v(r){return We(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function fy(r,e,t){return{name:qh(r,e),fields:t.value.mapValue.fields}}function DI(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ie()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,E){return v.useProto3Json?(We(E===void 0||typeof E=="string"),Vt.fromBase64String(E||"")):(We(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Vt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(v){const E=v.code===void 0?K.UNKNOWN:hv(v.code);return new le(E,v.message||"")})(d);t=new pv(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Eh(r,i.document.name),l=ir(i.document.updateTime),d=i.document.createTime?ir(i.document.createTime):ke.min(),f=new rn({mapValue:{fields:i.document.fields}}),g=zt.newFoundDocument(o,l,d,f),v=i.targetIds||[],E=i.removedTargetIds||[];t=new Wu(v,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Eh(r,i.document),l=i.readTime?ir(i.readTime):ke.min(),d=zt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Wu([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Eh(r,i.document),l=i.removedTargetIds||[];t=new Wu([],l,o,null)}else{if(!("filter"in e))return Ie();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,d=new xI(o,l),f=i.targetId;t=new fv(f,d)}}return t}function VI(r,e){let t;if(e instanceof ll)t={update:fy(r,e.key,e.value)};else if(e instanceof kf)t={delete:qh(r,e.key)};else if(e instanceof Is)t={update:fy(r,e.key,e.data),updateMask:$I(e.fieldMask)};else{if(!(e instanceof vI))return Ie();t={verify:qh(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,d){const f=d.transform;if(f instanceof Qa)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ya)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Xa)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ic)return{fieldPath:d.field.canonicalString(),increment:f.Pe};throw Ie()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:bI(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie()})(r,e.precondition)),t}function MI(r,e){return r&&r.length>0?(We(e!==void 0),r.map((t=>(function(o,l){let d=o.updateTime?ir(o.updateTime):ir(l);return d.isEqual(ke.min())&&(d=ir(l)),new gI(d,o.transformResults||[])})(t,e)))):[]}function OI(r,e){return{documents:[yv(r,e.path)]}}function LI(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=yv(r,o);const l=(function(v){if(v.length!==0)return wv($n.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(v){if(v.length!==0)return v.map((E=>(function(C){return{field:lo(C.field),direction:UI(C.dir)}})(E)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=Bh(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{_t:t,parent:o}}function jI(r){let e=NI(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){We(i===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(A){const C=vv(A);return C instanceof $n&&Q_(C)?C.getFilters():[C]})(t.where));let d=[];t.orderBy&&(d=(function(A){return A.map((C=>(function(L){return new Ga(uo(L.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(C)))})(t.orderBy));let f=null;t.limit&&(f=(function(A){let C;return C=typeof A=="object"?A.value:A,vc(C)?null:C})(t.limit));let g=null;t.startAt&&(g=(function(A){const C=!!A.before,O=A.values||[];return new sc(O,C)})(t.startAt));let v=null;return t.endAt&&(v=(function(A){const C=!A.before,O=A.values||[];return new sc(O,C)})(t.endAt)),nI(e,o,d,l,f,"F",g,v)}function FI(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vv(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=uo(t.unaryFilter.field);return ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=uo(t.unaryFilter.field);return ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=uo(t.unaryFilter.field);return ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=uo(t.unaryFilter.field);return ft.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}})(r):r.fieldFilter!==void 0?(function(t){return ft.create(uo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return $n.create(t.compositeFilter.filters.map((i=>vv(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie()}})(t.compositeFilter.op))})(r):Ie()}function UI(r){return AI[r]}function zI(r){return PI[r]}function BI(r){return CI[r]}function lo(r){return{fieldPath:r.canonicalString()}}function uo(r){return Nt.fromServerFormat(r.fieldPath)}function wv(r){return r instanceof ft?(function(t){if(t.op==="=="){if(Zg(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NAN"}};if(Jg(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Zg(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NOT_NAN"}};if(Jg(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(t.field),op:zI(t.op),value:t.value}}})(r):r instanceof $n?(function(t){const i=t.getFilters().map((o=>wv(o)));return i.length===1?i[0]:{compositeFilter:{op:BI(t.op),filters:i}}})(r):Ie()}function $I(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Ev(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class fs{constructor(e,t,i,o,l=ke.min(),d=ke.min(),f=Vt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qI{constructor(e){this.ct=e}}function HI(r){const e=jI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?zh(e,e.limit,"L"):e}class WI{constructor(){this.un=new KI}addToCollectionParentIndex(e,t){return this.un.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(vs.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class KI{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Dt(et.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Dt(et.comparator)).toArray()}}class Eo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Eo(0)}static kn(){return new Eo(-1)}}class GI{constructor(){this.changes=new Po((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class YI{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ja(i.mutation,o,hn.empty(),vt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ve()){const o=ti();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let d=ba();return l.forEach(((f,g)=>{d=d.insert(f,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=ti();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ve())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,i,o){let l=Mr();const d=La(),f=(function(){return La()})();return t.forEach(((g,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Is)?l=l.insert(v.key,v):E!==void 0?(d.set(v.key,E.mutation.getFieldMask()),ja(E.mutation,v,E.mutation.getFieldMask(),vt.now())):d.set(v.key,hn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((v,E)=>d.set(v,E))),t.forEach(((v,E)=>{var A;return f.set(v,new QI(E,(A=d.get(v))!==null&&A!==void 0?A:null))})),f)))}recalculateAndSaveOverlays(e,t){const i=La();let o=new it(((d,f)=>d-f)),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((g=>{const v=t.get(g);if(v===null)return;let E=i.get(g)||hn.empty();E=f.applyToLocalView(v,E),i.set(g,E);const A=(o.get(f.batchId)||Ve()).add(g);o=o.insert(f.batchId,A)}))})).next((()=>{const d=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),v=g.key,E=g.value,A=sv();E.forEach((C=>{if(!l.has(C)){const O=cv(t.get(C),i.get(C));O!==null&&A.set(C,O),l=l.add(C)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,A))}return X.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Z_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):X.resolve(ti());let f=-1,g=l;return d.next((v=>X.forEach(v,((E,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),l.get(E)?X.resolve():this.remoteDocumentCache.getEntry(e,E).next((C=>{g=g.insert(E,C)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,g,v,Ve()))).next((E=>({batchId:f,changes:rv(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((i=>{let o=ba();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let d=ba();return this.indexManager.getCollectionParents(e,l).next((f=>X.forEach(f,(g=>{const v=(function(A,C){return new Ao(C,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((E=>{E.forEach(((A,C)=>{d=d.insert(A,C)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((d=>{l.forEach(((g,v)=>{const E=v.getKey();d.get(E)===null&&(d=d.insert(E,zt.newInvalidDocument(E)))}));let f=ba();return d.forEach(((g,v)=>{const E=l.get(g);E!==void 0&&ja(E.mutation,v,hn.empty(),vt.now()),Ec(t,v)&&(f=f.insert(g,v))})),f}))}}class XI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return X.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ir(o.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:HI(o.bundledQuery),readTime:ir(o.readTime)}})(t)),X.resolve()}}class JI{constructor(){this.overlays=new it(ve.comparator),this.Ir=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ti();return X.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.ht(e,t,l)})),X.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){const o=ti(),l=t.length+1,d=new ve(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new it(((v,E)=>v-E));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=ti(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const f=ti(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,E)=>f.set(v,E))),!(f.size()>=o)););return X.resolve(f)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new EI(t,i));let l=this.Ir.get(t);l===void 0&&(l=Ve(),this.Ir.set(t,l)),this.Ir.set(t,l.add(i.key))}}class ZI{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}class Rf{constructor(){this.Tr=new Dt(St.Er),this.dr=new Dt(St.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new St(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new St(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new ve(new et([])),i=new St(t,e),o=new St(t,e+1),l=[];return this.dr.forEachInRange([i,o],(d=>{this.Vr(d),l.push(d.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ve(new et([])),i=new St(t,e),o=new St(t,e+1);let l=Ve();return this.dr.forEachInRange([i,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new St(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ve.comparator(e.key,t.key)||$e(e.wr,t.wr)}static Ar(e,t){return $e(e.wr,t.wr)||ve.comparator(e.key,t.key)}}class e2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Dt(St.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new wI(l,t,i,o);this.mutationQueue.push(d);for(const f of o)this.br=this.br.add(new St(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return X.resolve(d)}lookupMutationBatch(e,t){return X.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new St(t,0),o=new St(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,o],(d=>{const f=this.Dr(d.wr);l.push(f)})),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Dt($e);return t.forEach((o=>{const l=new St(o,0),d=new St(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,d],(f=>{i=i.add(f.wr)}))})),X.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ve.isDocumentKey(l)||(l=l.child(""));const d=new St(new ve(l),0);let f=new Dt($e);return this.br.forEachWhile((g=>{const v=g.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(f=f.add(g.wr)),!0)}),d),X.resolve(this.Cr(f))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return X.forEach(t.mutations,(o=>{const l=new St(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new St(t,0),o=this.br.firstAfterOrEqual(i);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class t2{constructor(e){this.Mr=e,this.docs=(function(){return new it(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,d=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():zt.newInvalidDocument(t))}getEntries(e,t){let i=Mr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():zt.newInvalidDocument(o))})),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Mr();const d=t.path,f=new ve(d.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:v,value:{document:E}}=g.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||LT(OT(E),i)<=0||(o.has(E.key)||Ec(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ie()}Or(e,t){return X.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new n2(this)}getSize(e){return X.resolve(this.size)}}class n2 extends GI{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),X.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class r2{constructor(e){this.persistence=e,this.Nr=new Po((t=>xf(t)),Tf),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rf,this.targetCount=0,this.kr=Eo.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),X.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Eo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Kn(t),X.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Nr.forEach(((d,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.Nr.delete(d),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),X.waitFor(l).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),X.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this.Br.containsKey(t))}}class s2{constructor(e,t){this.qr={},this.overlays={},this.Qr=new _f(0),this.Kr=!1,this.Kr=!0,this.$r=new ZI,this.referenceDelegate=e(this),this.Ur=new r2(this),this.indexManager=new WI,this.remoteDocumentCache=(function(o){return new t2(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new qI(t),this.Gr=new XI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new e2(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const o=new i2(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((l=>this.referenceDelegate.jr(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Hr(e,t){return X.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class i2 extends FT{constructor(e){super(),this.currentSequenceNumber=e}}class bf{constructor(e){this.persistence=e,this.Jr=new Rf,this.Yr=null}static Zr(e){return new bf(e)}get Xr(){if(this.Yr)return this.Yr;throw Ie()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),X.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.Xr.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,(i=>{const o=ve.fromPath(i);return this.ei(e,o).next((l=>{l||t.removeEntry(o,ke.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return X.or([()=>X.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Nf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Ve(),o=Ve();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Nf(e,t.fromCache,i,o)}}class o2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class a2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Gw()?8:UT(Bt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Yi(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.Zi(e,t,o,i).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new o2;return this.Xi(e,t,d).next((f=>{if(l.result=f,this.zi)return this.es(e,t,d,f.size)}))})).next((()=>l.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(Aa()<=Oe.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(Aa()<=Oe.DEBUG&&fe("QueryEngine","Query:",ao(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Aa()<=Oe.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(t))):X.resolve())}Yi(e,t){if(ry(t))return X.resolve(null);let i=sr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=zh(t,null,"F"),i=sr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const d=Ve(...l);return this.Ji.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const v=this.ts(t,f);return this.ns(t,v,d,g.readTime)?this.Yi(e,zh(t,null,"F")):this.rs(e,v,t,g)}))))})))))}Zi(e,t,i,o){return ry(t)||o.isEqual(ke.min())?X.resolve(null):this.Ji.getDocuments(e,i).next((l=>{const d=this.ts(t,l);return this.ns(t,d,i,o)?X.resolve(null):(Aa()<=Oe.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ao(t)),this.rs(e,d,t,MT(o,-1)).next((f=>f)))}))}ts(e,t){let i=new Dt(tv(e));return t.forEach(((o,l)=>{Ec(e,l)&&(i=i.add(l))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,t,i){return Aa()<=Oe.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",ao(t)),this.Ji.getDocumentsMatchingQuery(e,t,vs.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}class l2{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new it($e),this._s=new Po((l=>xf(l)),Tf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function u2(r,e,t,i){return new l2(r,e,t,i)}async function xv(r,e){const t=Ae(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const d=[],f=[];let g=Ve();for(const v of o){d.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}for(const v of l){f.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(i,g).next((v=>({hs:v,removedBatchIds:d,addedBatchIds:f})))}))}))}function c2(r,e){const t=Ae(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return(function(f,g,v,E){const A=v.batch,C=A.keys();let O=X.resolve();return C.forEach((L=>{O=O.next((()=>E.getEntry(g,L))).next((z=>{const $=v.docVersions.get(L);We($!==null),z.version.compareTo($)<0&&(A.applyToRemoteDocument(z,v),z.isValidDocument()&&(z.setReadTime(v.commitVersion),E.addEntry(z)))}))})),O.next((()=>f.mutationQueue.removeMutationBatch(g,A)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=Ve();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(g=g.add(f.batch.mutations[v].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Tv(r){const e=Ae(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function d2(r,e){const t=Ae(r),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const f=[];e.targetChanges.forEach(((E,A)=>{const C=o.get(A);if(!C)return;f.push(t.Ur.removeMatchingKeys(l,E.removedDocuments,A).next((()=>t.Ur.addMatchingKeys(l,E.addedDocuments,A))));let O=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(A)!==null?O=O.withResumeToken(Vt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,i)),o=o.insert(A,O),(function(z,$,Q){return z.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(C,O,E)&&f.push(t.Ur.updateTargetData(l,O))}));let g=Mr(),v=Ve();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),f.push(h2(l,d,e.documentUpdates).next((E=>{g=E.Ps,v=E.Is}))),!i.isEqual(ke.min())){const E=t.Ur.getLastRemoteSnapshotVersion(l).next((A=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(E)}return X.waitFor(f).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,v))).next((()=>g))})).then((l=>(t.os=o,l)))}function h2(r,e,t){let i=Ve(),o=Ve();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let d=Mr();return t.forEach(((f,g)=>{const v=l.get(f);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(ke.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):fe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",g.version)})),{Ps:d,Is:o}}))}function f2(r,e){const t=Ae(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function p2(r,e){const t=Ae(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((l=>l?(o=l,X.resolve(o)):t.Ur.allocateTargetId(i).next((d=>(o=new fs(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function Wh(r,e,t){const i=Ae(r),o=i.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!al(d))throw d;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function py(r,e,t){const i=Ae(r);let o=ke.min(),l=Ve();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,v,E){const A=Ae(g),C=A._s.get(E);return C!==void 0?X.resolve(A.os.get(C)):A.Ur.getTargetData(v,E)})(i,d,sr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(d,f.targetId).next((g=>{l=g}))})).next((()=>i.ss.getDocumentsMatchingQuery(d,e,t?o:ke.min(),t?l:Ve()))).next((f=>(m2(i,sI(e),f),{documents:f,Ts:l})))))}function m2(r,e,t){let i=r.us.get(e)||ke.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.us.set(e,i)}class my{constructor(){this.activeTargetIds=cI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g2{constructor(){this.so=new my,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new my,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class y2{_o(e){}shutdown(){}}class gy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Du=null;function xh(){return Du===null?Du=(function(){return 268435456+Math.round(2147483648*Math.random())})():Du++,"0x"+Du.toString(16)}const _2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class v2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ft="WebChannelConnection";class w2 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(t,i,o,l,d){const f=xh(),g=this.xo(t,i.toUriEncodedString());fe("RestConnection",`Sending RPC '${t}' ${f}:`,g,o);const v={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(v,l,d),this.No(t,g,v,o).then((E=>(fe("RestConnection",`Received RPC '${t}' ${f}: `,E),E)),(E=>{throw yo("RestConnection",`RPC '${t}' ${f} failed with error: `,E,"url: ",g,"request:",o),E}))}Lo(t,i,o,l,d,f){return this.Mo(t,i,o,l,d)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ko})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,d)=>t[d]=l)),o&&o.headers.forEach(((l,d)=>t[d]=l))}xo(t,i){const o=_2[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const l=xh();return new Promise(((d,f)=>{const g=new L_;g.setWithCredentials(!0),g.listenOnce(j_.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case $u.NO_ERROR:const E=g.getResponseJson();fe(Ft,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),d(E);break;case $u.TIMEOUT:fe(Ft,`RPC '${e}' ${l} timed out`),f(new le(K.DEADLINE_EXCEEDED,"Request time out"));break;case $u.HTTP_ERROR:const A=g.getStatus();if(fe(Ft,`RPC '${e}' ${l} failed with status:`,A,"response text:",g.getResponseText()),A>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const O=C?.error;if(O&&O.status&&O.message){const L=(function($){const Q=$.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(Q)>=0?Q:K.UNKNOWN})(O.status);f(new le(L,O.message))}else f(new le(K.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new le(K.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{fe(Ft,`RPC '${e}' ${l} completed.`)}}));const v=JSON.stringify(o);fe(Ft,`RPC '${e}' ${l} sending request:`,o),g.send(t,"POST",v,i,15)}))}Bo(e,t,i){const o=xh(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=z_(),f=U_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const E=l.join("");fe(Ft,`Creating RPC '${e}' stream ${o}: ${E}`,g);const A=d.createWebChannel(E,g);let C=!1,O=!1;const L=new v2({Io:$=>{O?fe(Ft,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(C||(fe(Ft,`Opening RPC '${e}' stream ${o} transport.`),A.open(),C=!0),fe(Ft,`RPC '${e}' stream ${o} sending:`,$),A.send($))},To:()=>A.close()}),z=($,Q,te)=>{$.listen(Q,(J=>{try{te(J)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return z(A,Ra.EventType.OPEN,(()=>{O||(fe(Ft,`RPC '${e}' stream ${o} transport opened.`),L.yo())})),z(A,Ra.EventType.CLOSE,(()=>{O||(O=!0,fe(Ft,`RPC '${e}' stream ${o} transport closed`),L.So())})),z(A,Ra.EventType.ERROR,($=>{O||(O=!0,yo(Ft,`RPC '${e}' stream ${o} transport errored:`,$),L.So(new le(K.UNAVAILABLE,"The operation could not be completed")))})),z(A,Ra.EventType.MESSAGE,($=>{var Q;if(!O){const te=$.data[0];We(!!te);const J=te,oe=J.error||((Q=J[0])===null||Q===void 0?void 0:Q.error);if(oe){fe(Ft,`RPC '${e}' stream ${o} received error:`,oe);const Se=oe.status;let ye=(function(I){const P=ht[I];if(P!==void 0)return hv(P)})(Se),R=oe.message;ye===void 0&&(ye=K.INTERNAL,R="Unknown error status: "+Se+" with message "+oe.message),O=!0,L.So(new le(ye,R)),A.close()}else fe(Ft,`RPC '${e}' stream ${o} received:`,te),L.bo(te)}})),z(f,F_.STAT_EVENT,($=>{$.stat===Mh.PROXY?fe(Ft,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===Mh.NOPROXY&&fe(Ft,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.wo()}),0),L}}function Th(){return typeof document<"u"?document:null}function Sc(r){return new RI(r,!0)}class Iv{constructor(e,t,i=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Sv{constructor(e,t,i,o,l,d,f,g){this.ui=e,this.Ho=i,this.Jo=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Iv(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new le(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class E2 extends Sv{constructor(e,t,i,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=DI(this.serializer,e),i=(function(l){if(!("targetChange"in l))return ke.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?ke.min():d.readTime?ir(d.readTime):ke.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=Hh(this.serializer),t.addTarget=(function(l,d){let f;const g=d.target;if(f=Fh(g)?{documents:OI(l,g)}:{query:LI(l,g)._t},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=mv(l,d.resumeToken);const v=Bh(l,d.expectedCount);v!==null&&(f.expectedCount=v)}else if(d.snapshotVersion.compareTo(ke.min())>0){f.readTime=oc(l,d.snapshotVersion.toTimestamp());const v=Bh(l,d.expectedCount);v!==null&&(f.expectedCount=v)}return f})(this.serializer,e);const i=FI(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=Hh(this.serializer),t.removeTarget=e,this.a_(t)}}class x2 extends Sv{constructor(e,t,i,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=MI(e.writeResults,e.commitTime),i=ir(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=Hh(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>VI(this.serializer,i)))};this.a_(t)}}class T2 extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Mo(e,$h(t,i),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(K.UNKNOWN,l.toString())}))}Lo(e,t,i,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Lo(e,$h(t,i),o,d,f,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new le(K.UNKNOWN,d.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class I2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vr(t),this.D_=!1):fe("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class S2{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((d=>{i.enqueueAndForget((async()=>{fi(this)&&(fe("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const v=Ae(g);v.L_.add(4),await cl(v),v.q_.set("Unknown"),v.L_.delete(4),await kc(v)})(this))}))})),this.q_=new I2(i,o)}}async function kc(r){if(fi(r))for(const e of r.B_)await e(!0)}async function cl(r){for(const e of r.B_)await e(!1)}function kv(r,e){const t=Ae(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Of(t)?Mf(t):Co(t).r_()&&Vf(t,e))}function Df(r,e){const t=Ae(r),i=Co(t);t.N_.delete(e),i.r_()&&Av(t,e),t.N_.size===0&&(i.r_()?i.o_():fi(t)&&t.q_.set("Unknown"))}function Vf(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Co(r).A_(e)}function Av(r,e){r.Q_.xe(e),Co(r).R_(e)}function Mf(r){r.Q_=new kI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Co(r).start(),r.q_.v_()}function Of(r){return fi(r)&&!Co(r).n_()&&r.N_.size>0}function fi(r){return Ae(r).L_.size===0}function Pv(r){r.Q_=void 0}async function k2(r){r.q_.set("Online")}async function A2(r){r.N_.forEach(((e,t)=>{Vf(r,e)}))}async function P2(r,e){Pv(r),Of(r)?(r.q_.M_(e),Mf(r)):r.q_.set("Unknown")}async function C2(r,e,t){if(r.q_.set("Online"),e instanceof pv&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const f of l.targetIds)o.N_.has(f)&&(await o.remoteSyncer.rejectListen(f,d),o.N_.delete(f),o.Q_.removeTarget(f))})(r,e)}catch(i){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ac(r,i)}else if(e instanceof Wu?r.Q_.Ke(e):e instanceof fv?r.Q_.He(e):r.Q_.We(e),!t.isEqual(ke.min()))try{const i=await Tv(r.localStore);t.compareTo(i)>=0&&await(function(l,d){const f=l.Q_.rt(d);return f.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.N_.get(v);E&&l.N_.set(v,E.withResumeToken(g.resumeToken,d))}})),f.targetMismatches.forEach(((g,v)=>{const E=l.N_.get(g);if(!E)return;l.N_.set(g,E.withResumeToken(Vt.EMPTY_BYTE_STRING,E.snapshotVersion)),Av(l,g);const A=new fs(E.target,g,v,E.sequenceNumber);Vf(l,A)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){fe("RemoteStore","Failed to raise snapshot:",i),await ac(r,i)}}async function ac(r,e,t){if(!al(e))throw e;r.L_.add(1),await cl(r),r.q_.set("Offline"),t||(t=()=>Tv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{fe("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await kc(r)}))}function Cv(r,e){return e().catch((t=>ac(r,t,e)))}async function Ac(r){const e=Ae(r),t=Es(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;R2(e);)try{const o=await f2(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,b2(e,o)}catch(o){await ac(e,o)}Rv(e)&&bv(e)}function R2(r){return fi(r)&&r.O_.length<10}function b2(r,e){r.O_.push(e);const t=Es(r);t.r_()&&t.V_&&t.m_(e.mutations)}function Rv(r){return fi(r)&&!Es(r).n_()&&r.O_.length>0}function bv(r){Es(r).start()}async function N2(r){Es(r).p_()}async function D2(r){const e=Es(r);for(const t of r.O_)e.m_(t.mutations)}async function V2(r,e,t){const i=r.O_.shift(),o=Af.from(i,e,t);await Cv(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Ac(r)}async function M2(r,e){e&&Es(r).V_&&await(async function(i,o){if((function(d){return TI(d)&&d!==K.ABORTED})(o.code)){const l=i.O_.shift();Es(i).s_(),await Cv(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Ac(i)}})(r,e),Rv(r)&&bv(r)}async function yy(r,e){const t=Ae(r);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const i=fi(t);t.L_.add(3),await cl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await kc(t)}async function O2(r,e){const t=Ae(r);e?(t.L_.delete(2),await kc(t)):e||(t.L_.add(2),await cl(t),t.q_.set("Unknown"))}function Co(r){return r.K_||(r.K_=(function(t,i,o){const l=Ae(t);return l.w_(),new E2(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Eo:k2.bind(null,r),Ro:A2.bind(null,r),mo:P2.bind(null,r),d_:C2.bind(null,r)}),r.B_.push((async e=>{e?(r.K_.s_(),Of(r)?Mf(r):r.q_.set("Unknown")):(await r.K_.stop(),Pv(r))}))),r.K_}function Es(r){return r.U_||(r.U_=(function(t,i,o){const l=Ae(t);return l.w_(),new x2(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:N2.bind(null,r),mo:M2.bind(null,r),f_:D2.bind(null,r),g_:V2.bind(null,r)}),r.B_.push((async e=>{e?(r.U_.s_(),await Ac(r)):(await r.U_.stop(),r.O_.length>0&&(fe("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}class Lf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const d=Date.now()+i,f=new Lf(e,t,d,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jf(r,e){if(Vr("AsyncQueue",`${e}: ${r}`),al(r))return new le(K.UNAVAILABLE,`${e}: ${r}`);throw r}class po{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=ba(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new po(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new po;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class _y{constructor(){this.W_=new it(ve.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ie():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class xo{constructor(e,t,i,o,l,d,f,g,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new xo(e,t,po.emptySet(t),d,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class L2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class j2{constructor(){this.queries=vy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Ae(t),l=o.queries;o.queries=vy(),l.forEach(((d,f)=>{for(const g of f.j_)g.onError(i)}))})(this,new le(K.ABORTED,"Firestore shutting down"))}}function vy(){return new Po((r=>ev(r)),wc)}async function Nv(r,e){const t=Ae(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.H_()&&e.J_()&&(i=2):(l=new L2,i=e.J_()?0:1);try{switch(i){case 0:l.z_=await t.onListen(o,!0);break;case 1:l.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const f=jf(d,`Initialization of query '${ao(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&Ff(t)}async function Dv(r,e){const t=Ae(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const d=l.j_.indexOf(e);d>=0&&(l.j_.splice(d,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function F2(r,e){const t=Ae(r);let i=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const f of d.j_)f.X_(o)&&(i=!0);d.z_=o}}i&&Ff(t)}function U2(r,e,t){const i=Ae(r),o=i.queries.get(e);if(o)for(const l of o.j_)l.onError(t);i.queries.delete(e)}function Ff(r){r.Y_.forEach((e=>{e.next()}))}var Kh,wy;(wy=Kh||(Kh={})).ea="default",wy.Cache="cache";class Vv{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new xo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Kh.Cache}}class Mv{constructor(e){this.key=e}}class Ov{constructor(e){this.key=e}}class z2{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ve(),this.mutatedKeys=Ve(),this.Aa=tv(e),this.Ra=new po(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new _y,o=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,A)=>{const C=o.get(E),O=Ec(this.query,A)?A:null,L=!!C&&this.mutatedKeys.has(C.key),z=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let $=!1;C&&O?C.data.isEqual(O.data)?L!==z&&(i.track({type:3,doc:O}),$=!0):this.ga(C,O)||(i.track({type:2,doc:O}),$=!0,(g&&this.Aa(O,g)>0||v&&this.Aa(O,v)<0)&&(f=!0)):!C&&O?(i.track({type:0,doc:O}),$=!0):C&&!O&&(i.track({type:1,doc:C}),$=!0,(g||v)&&(f=!0)),$&&(O?(d=d.add(O),l=z?l.add(E):l.delete(E)):(d=d.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{Ra:d,fa:i,ns:f,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const d=e.fa.G_();d.sort(((E,A)=>(function(O,L){const z=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return z(O)-z(L)})(E.type,A.type)||this.Aa(E.doc,A.doc))),this.pa(i),o=o!=null&&o;const f=t&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,v=g!==this.Ea;return this.Ea=g,d.length!==0||v?{snapshot:new xo(this.query,e.Ra,l,d,e.mutatedKeys,g===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _y,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ve(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new Ov(i))})),this.da.forEach((i=>{e.has(i)||t.push(new Mv(i))})),t}ba(e){this.Ta=e.Ts,this.da=Ve();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return xo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class B2{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class $2{constructor(e){this.key=e,this.va=!1}}class q2{constructor(e,t,i,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Ca={},this.Fa=new Po((f=>ev(f)),wc),this.Ma=new Map,this.xa=new Set,this.Oa=new it(ve.comparator),this.Na=new Map,this.La=new Rf,this.Ba={},this.ka=new Map,this.qa=Eo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function H2(r,e,t=!0){const i=Bv(r);let o;const l=i.Fa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await Lv(i,e,t,!0),o}async function W2(r,e){const t=Bv(r);await Lv(t,e,!0,!1)}async function Lv(r,e,t,i){const o=await p2(r.localStore,sr(e)),l=o.targetId,d=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await K2(r,e,l,d==="current",o.resumeToken)),r.isPrimaryClient&&t&&kv(r.remoteStore,o),f}async function K2(r,e,t,i,o){r.Ka=(A,C,O)=>(async function(z,$,Q,te){let J=$.view.ma(Q);J.ns&&(J=await py(z.localStore,$.query,!1).then((({documents:R})=>$.view.ma(R,J))));const oe=te&&te.targetChanges.get($.targetId),Se=te&&te.targetMismatches.get($.targetId)!=null,ye=$.view.applyChanges(J,z.isPrimaryClient,oe,Se);return xy(z,$.targetId,ye.wa),ye.snapshot})(r,A,C,O);const l=await py(r.localStore,e,!0),d=new z2(e,l.Ts),f=d.ma(l.documents),g=ul.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=d.applyChanges(f,r.isPrimaryClient,g);xy(r,t,v.wa);const E=new B2(e,t,d);return r.Fa.set(e,E),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),v.snapshot}async function G2(r,e,t){const i=Ae(r),o=i.Fa.get(e),l=i.Ma.get(o.targetId);if(l.length>1)return i.Ma.set(o.targetId,l.filter((d=>!wc(d,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Wh(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Df(i.remoteStore,o.targetId),Gh(i,o.targetId)})).catch(ol)):(Gh(i,o.targetId),await Wh(i.localStore,o.targetId,!0))}async function Q2(r,e){const t=Ae(r),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Df(t.remoteStore,i.targetId))}async function Y2(r,e,t){const i=rS(r);try{const o=await(function(d,f){const g=Ae(d),v=vt.now(),E=f.reduce(((O,L)=>O.add(L.key)),Ve());let A,C;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let L=Mr(),z=Ve();return g.cs.getEntries(O,E).next(($=>{L=$,L.forEach(((Q,te)=>{te.isValidDocument()||(z=z.add(Q))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,L))).next(($=>{A=$;const Q=[];for(const te of f){const J=_I(te,A.get(te.key).overlayedDocument);J!=null&&Q.push(new Is(te.key,J,W_(J.value.mapValue),Bn.exists(!0)))}return g.mutationQueue.addMutationBatch(O,v,Q,f)})).next(($=>{C=$;const Q=$.applyToLocalDocumentSet(A,z);return g.documentOverlayCache.saveOverlays(O,$.batchId,Q)}))})).then((()=>({batchId:C.batchId,changes:rv(A)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,f,g){let v=d.Ba[d.currentUser.toKey()];v||(v=new it($e)),v=v.insert(f,g),d.Ba[d.currentUser.toKey()]=v})(i,o.batchId,t),await dl(i,o.changes),await Ac(i.remoteStore)}catch(o){const l=jf(o,"Failed to persist write");t.reject(l)}}async function jv(r,e){const t=Ae(r);try{const i=await d2(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Na.get(l);d&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.va=!0:o.modifiedDocuments.size>0?We(d.va):o.removedDocuments.size>0&&(We(d.va),d.va=!1))})),await dl(t,i,e)}catch(i){await ol(i)}}function Ey(r,e,t){const i=Ae(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((l,d)=>{const f=d.view.Z_(e);f.snapshot&&o.push(f.snapshot)})),(function(d,f){const g=Ae(d);g.onlineState=f;let v=!1;g.queries.forEach(((E,A)=>{for(const C of A.j_)C.Z_(f)&&(v=!0)})),v&&Ff(g)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function X2(r,e,t){const i=Ae(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),l=o&&o.key;if(l){let d=new it(ve.comparator);d=d.insert(l,zt.newNoDocument(l,ke.min()));const f=Ve().add(l),g=new Ic(ke.min(),new Map,new it($e),d,f);await jv(i,g),i.Oa=i.Oa.remove(l),i.Na.delete(e),Uf(i)}else await Wh(i.localStore,e,!1).then((()=>Gh(i,e,t))).catch(ol)}async function J2(r,e){const t=Ae(r),i=e.batch.batchId;try{const o=await c2(t.localStore,e);Uv(t,i,null),Fv(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await dl(t,o)}catch(o){await ol(o)}}async function Z2(r,e,t){const i=Ae(r);try{const o=await(function(d,f){const g=Ae(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return g.mutationQueue.lookupMutationBatch(v,f).next((A=>(We(A!==null),E=A.keys(),g.mutationQueue.removeMutationBatch(v,A)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,E,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>g.localDocuments.getDocuments(v,E)))}))})(i.localStore,e);Uv(i,e,t),Fv(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await dl(i,o)}catch(o){await ol(o)}}function Fv(r,e){(r.ka.get(e)||[]).forEach((t=>{t.resolve()})),r.ka.delete(e)}function Uv(r,e,t){const i=Ae(r);let o=i.Ba[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Gh(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Ma.get(e))r.Fa.delete(i),t&&r.Ca.$a(i,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach((i=>{r.La.containsKey(i)||zv(r,i)}))}function zv(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(Df(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),Uf(r))}function xy(r,e,t){for(const i of t)i instanceof Mv?(r.La.addReference(i.key,e),eS(r,i)):i instanceof Ov?(fe("SyncEngine","Document no longer in limbo: "+i.key),r.La.removeReference(i.key,e),r.La.containsKey(i.key)||zv(r,i.key)):Ie()}function eS(r,e){const t=e.key,i=t.path.canonicalString();r.Oa.get(t)||r.xa.has(i)||(fe("SyncEngine","New document in limbo: "+t),r.xa.add(i),Uf(r))}function Uf(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new ve(et.fromString(e)),i=r.qa.next();r.Na.set(i,new $2(t)),r.Oa=r.Oa.insert(t,i),kv(r.remoteStore,new fs(sr(If(t.path)),i,"TargetPurposeLimboResolution",_f.oe))}}async function dl(r,e,t){const i=Ae(r),o=[],l=[],d=[];i.Fa.isEmpty()||(i.Fa.forEach(((f,g)=>{d.push(i.Ka(g,e,t).then((v=>{var E;if((v||t)&&i.isPrimaryClient){const A=v?!v.fromCache:(E=t?.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(v){o.push(v);const A=Nf.Wi(g.targetId,v);l.push(A)}})))})),await Promise.all(d),i.Ca.d_(o),await(async function(g,v){const E=Ae(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>X.forEach(v,(C=>X.forEach(C.$i,(O=>E.persistence.referenceDelegate.addReference(A,C.targetId,O))).next((()=>X.forEach(C.Ui,(O=>E.persistence.referenceDelegate.removeReference(A,C.targetId,O)))))))))}catch(A){if(!al(A))throw A;fe("LocalStore","Failed to update sequence numbers: "+A)}for(const A of v){const C=A.targetId;if(!A.fromCache){const O=E.os.get(C),L=O.snapshotVersion,z=O.withLastLimboFreeSnapshotVersion(L);E.os=E.os.insert(C,z)}}})(i.localStore,l))}async function tS(r,e){const t=Ae(r);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const i=await xv(t.localStore,e);t.currentUser=e,(function(l,d){l.ka.forEach((f=>{f.forEach((g=>{g.reject(new le(K.CANCELLED,d))}))})),l.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await dl(t,i.hs)}}function nS(r,e){const t=Ae(r),i=t.Na.get(e);if(i&&i.va)return Ve().add(i.key);{let o=Ve();const l=t.Ma.get(e);if(!l)return o;for(const d of l){const f=t.Fa.get(d);o=o.unionWith(f.view.Va)}return o}}function Bv(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=jv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=X2.bind(null,e),e.Ca.d_=F2.bind(null,e.eventManager),e.Ca.$a=U2.bind(null,e.eventManager),e}function rS(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=J2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z2.bind(null,e),e}class lc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return u2(this.persistence,new a2,e.initialUser,this.serializer)}Ga(e){return new s2(bf.Zr,this.serializer)}Wa(e){return new g2}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lc.provider={build:()=>new lc};class Qh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ey(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tS.bind(null,this.syncEngine),await O2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new j2})()}createDatastore(e){const t=Sc(e.databaseInfo.databaseId),i=(function(l){return new w2(l)})(e.databaseInfo);return(function(l,d,f,g){return new T2(l,d,f,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,d,f){return new S2(i,o,l,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ey(this.syncEngine,t,0)),(function(){return gy.D()?new gy:new y2})())}createSyncEngine(e,t){return(function(o,l,d,f,g,v,E){const A=new q2(o,l,d,f,g,v);return E&&(A.Qa=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ae(o);fe("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await cl(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Qh.provider={build:()=>new Qh};class $v{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class sS{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Ut.UNAUTHENTICATED,this.clientId=$_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async d=>{fe("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(fe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=jf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ih(r,e){r.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await xv(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Ty(r,e){r.asyncQueue.verifyOperationInProgress();const t=await iS(r);fe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>yy(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>yy(e.remoteStore,o))),r._onlineComponents=e}async function iS(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ih(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;yo("Error using user provided cache. Falling back to memory cache: "+t),await Ih(r,new lc)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),await Ih(r,new lc);return r._offlineComponents}async function qv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),await Ty(r,r._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),await Ty(r,new Qh))),r._onlineComponents}function oS(r){return qv(r).then((e=>e.syncEngine))}async function Hv(r){const e=await qv(r),t=e.eventManager;return t.onListen=H2.bind(null,e.syncEngine),t.onUnlisten=G2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=W2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Q2.bind(null,e.syncEngine),t}function aS(r,e,t={}){const i=new Rr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,f,g,v){const E=new $v({next:C=>{E.Za(),d.enqueueAndForget((()=>Dv(l,A)));const O=C.docs.has(f);!O&&C.fromCache?v.reject(new le(K.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&C.fromCache&&g&&g.source==="server"?v.reject(new le(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(C)},error:C=>v.reject(C)}),A=new Vv(If(f.path),E,{includeMetadataChanges:!0,_a:!0});return Nv(l,A)})(await Hv(r),r.asyncQueue,e,t,i))),i.promise}function lS(r,e,t={}){const i=new Rr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,d,f,g,v){const E=new $v({next:C=>{E.Za(),d.enqueueAndForget((()=>Dv(l,A))),C.fromCache&&g.source==="server"?v.reject(new le(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(C)},error:C=>v.reject(C)}),A=new Vv(f,E,{includeMetadataChanges:!0,_a:!0});return Nv(l,A)})(await Hv(r),r.asyncQueue,e,t,i))),i.promise}function Wv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Iy=new Map;function Kv(r,e,t){if(!t)throw new le(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function uS(r,e,t,i){if(e===!0&&i===!0)throw new le(K.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Sy(r){if(!ve.isDocumentKey(r))throw new le(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ky(r){if(ve.isDocumentKey(r))throw new le(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Pc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ie()}function ar(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new le(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pc(r);throw new le(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}class Ay{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new le(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wv((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ay({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ay(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new kT;switch(i.type){case"firstParty":return new RT(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Iy.get(t);i&&(fe("ComponentProvider","Removing Datastore"),Iy.delete(t),i.terminate())})(this),Promise.resolve()}}function cS(r,e,t,i={}){var o;const l=(r=ar(r,Cc))._getSettings(),d=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==d&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:d,ssl:!1})),i.mockUserToken){let f,g;if(typeof i.mockUserToken=="string")f=i.mockUserToken,g=Ut.MOCK_USER;else{f=zw(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new le(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ut(v)}r._authCredentials=new AT(new B_(f,g))}}class pi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new pi(this.firestore,e,this._query)}}class Gt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}}class _s extends pi{constructor(e,t,i){super(e,t,If(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ve(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function dS(r,e,...t){if(r=kt(r),Kv("collection","path",e),r instanceof Cc){const i=et.fromString(e,...t);return ky(i),new _s(r,null,i)}{if(!(r instanceof Gt||r instanceof _s))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(et.fromString(e,...t));return ky(i),new _s(r.firestore,null,i)}}function mo(r,e,...t){if(r=kt(r),arguments.length===1&&(e=$_.newId()),Kv("doc","path",e),r instanceof Cc){const i=et.fromString(e,...t);return Sy(i),new Gt(r,null,new ve(i))}{if(!(r instanceof Gt||r instanceof _s))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(et.fromString(e,...t));return Sy(i),new Gt(r.firestore,r instanceof _s?r.converter:null,new ve(i))}}class Py{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Iv(this,"async_queue_retry"),this.Vu=()=>{const i=Th();i&&fe("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=Th();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Th();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Rr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!al(e))throw e;fe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(d){let f=d.message||"";return d.stack&&(f=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),f})(i);throw Vr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Lf.createAndSchedule(this,e,t,i,(l=>this.yu(l)));return this.Tu.push(o),o}fu(){this.Eu&&Ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Ro extends Cc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Py,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Py(e),this._firestoreClient=void 0,await e}}}function hS(r,e){const t=typeof r=="object"?r:Zy(),i=typeof r=="string"?r:"(default)",o=sf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Fw("firestore");l&&cS(o,...l)}return o}function zf(r){if(r._terminated)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||fS(r),r._firestoreClient}function fS(r){var e,t,i;const o=r._freezeSettings(),l=(function(f,g,v,E){return new $T(f,g,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Wv(E.experimentalLongPollingOptions),E.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new sS(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(f){const g=f?._online.build();return{_offline:f?._offline.build(g),_online:g}})(r._componentsProvider))}class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(Vt.fromBase64String(e))}catch(t){throw new le(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new To(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Rc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bc{constructor(e){this._methodName=e}}class Bf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}class $f{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}}const pS=/^__.*__$/;class mS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,t,this.fieldTransforms):new ll(e,this.data,t,this.fieldTransforms)}}class Gv{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Is(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class qf{constructor(e,t,i,o,l,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Qv(this.Cu)&&pS.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class gS{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Sc(e)}Qu(e,t,i,o=!1){return new qf({Cu:e,methodName:t,qu:i,path:Nt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hf(r){const e=r._freezeSettings(),t=Sc(r._databaseId);return new gS(r._databaseId,!!e.ignoreUndefinedProperties,t)}function yS(r,e,t,i,o,l={}){const d=r.Qu(l.merge||l.mergeFields?2:0,e,t,o);Kf("Data must be an object, but it was:",d,i);const f=Yv(i,d);let g,v;if(l.merge)g=new hn(d.fieldMask),v=d.fieldTransforms;else if(l.mergeFields){const E=[];for(const A of l.mergeFields){const C=Yh(e,A,t);if(!d.contains(C))throw new le(K.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);Jv(E,C)||E.push(C)}g=new hn(E),v=d.fieldTransforms.filter((A=>g.covers(A.field)))}else g=null,v=d.fieldTransforms;return new mS(new rn(f),g,v)}class Nc extends bc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nc}}class Wf extends bc{_toFieldTransform(e){return new pI(e.path,new Qa)}isEqual(e){return e instanceof Wf}}function _S(r,e,t,i){const o=r.Qu(1,e,t);Kf("Data must be an object, but it was:",o,i);const l=[],d=rn.empty();hi(i,((g,v)=>{const E=Gf(e,g,t);v=kt(v);const A=o.Nu(E);if(v instanceof Nc)l.push(E);else{const C=hl(v,A);C!=null&&(l.push(E),d.set(E,C))}}));const f=new hn(l);return new Gv(d,f,o.fieldTransforms)}function vS(r,e,t,i,o,l){const d=r.Qu(1,e,t),f=[Yh(e,i,t)],g=[o];if(l.length%2!=0)throw new le(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<l.length;C+=2)f.push(Yh(e,l[C])),g.push(l[C+1]);const v=[],E=rn.empty();for(let C=f.length-1;C>=0;--C)if(!Jv(v,f[C])){const O=f[C];let L=g[C];L=kt(L);const z=d.Nu(O);if(L instanceof Nc)v.push(O);else{const $=hl(L,z);$!=null&&(v.push(O),E.set(O,$))}}const A=new hn(v);return new Gv(E,A,d.fieldTransforms)}function wS(r,e,t,i=!1){return hl(t,r.Qu(i?4:3,e))}function hl(r,e){if(Xv(r=kt(r)))return Kf("Unsupported field value:",e,r),Yv(r,e);if(r instanceof bc)return(function(i,o){if(!Qv(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const l=[];let d=0;for(const f of i){let g=hl(f,o.Lu(d));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),d++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dI(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=vt.fromDate(i);return{timestampValue:oc(o.serializer,l)}}if(i instanceof vt){const l=new vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:oc(o.serializer,l)}}if(i instanceof Bf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof To)return{bytesValue:mv(o.serializer,i._byteString)};if(i instanceof Gt){const l=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(l))throw o.Bu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Cf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof $f)return(function(d,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw f.Bu("VectorValues must only contain numeric values.");return Sf(f.serializer,g)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${Pc(i)}`)})(r,e)}function Yv(r,e){const t={};return q_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(r,((i,o)=>{const l=hl(o,e.Mu(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Xv(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof vt||r instanceof Bf||r instanceof To||r instanceof Gt||r instanceof bc||r instanceof $f)}function Kf(r,e,t){if(!Xv(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=Pc(t);throw i==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+i)}}function Yh(r,e,t){if((e=kt(e))instanceof Rc)return e._internalPath;if(typeof e=="string")return Gf(r,e);throw uc("Field path arguments must be of type string or ",r,!1,void 0,t)}const ES=new RegExp("[~\\*/\\[\\]]");function Gf(r,e,t){if(e.search(ES)>=0)throw uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Rc(...e.split("."))._internalPath}catch{throw uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function uc(r,e,t,i,o){const l=i&&!i.isEmpty(),d=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||d)&&(g+=" (found",l&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new le(K.INVALID_ARGUMENT,f+r+g)}function Jv(r,e){return r.some((t=>t.isEqual(e)))}class Zv{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xS extends Zv{data(){return super.data()}}function Dc(r,e){return typeof e=="string"?Gf(r,e):e instanceof Rc?e._internalPath:e._delegate._internalPath}function TS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new le(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qf{}class e0 extends Qf{}function Cy(r,e,...t){let i=[];e instanceof Qf&&i.push(e),i=i.concat(t),(function(l){const d=l.filter((g=>g instanceof Yf)).length,f=l.filter((g=>g instanceof Vc)).length;if(d>1||d>0&&f>0)throw new le(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Vc extends e0{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Vc(e,t,i)}_apply(e){const t=this._parse(e);return t0(e._query,t),new pi(e.firestore,e.converter,Uh(e._query,t))}_parse(e){const t=Hf(e.firestore);return(function(l,d,f,g,v,E,A){let C;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new le(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Ny(A,E);const O=[];for(const L of A)O.push(by(g,l,L));C={arrayValue:{values:O}}}else C=by(g,l,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Ny(A,E),C=wS(f,d,A,E==="in"||E==="not-in");return ft.create(v,E,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function IS(r,e,t){const i=e,o=Dc("where",r);return Vc._create(o,i,t)}class Yf extends Qf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Yf(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:$n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let d=o;const f=l.getFlattenedFilters();for(const g of f)t0(d,g),d=Uh(d,g)})(e._query,t),new pi(e.firestore,e.converter,Uh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xf extends e0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Xf(e,t)}_apply(e){const t=(function(o,l,d){if(o.startAt!==null)throw new le(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new le(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ga(l,d)})(e._query,this._field,this._direction);return new pi(e.firestore,e.converter,(function(o,l){const d=o.explicitOrderBy.concat([l]);return new Ao(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Ry(r,e="asc"){const t=e,i=Dc("orderBy",r);return Xf._create(i,t)}function by(r,e,t){if(typeof(t=kt(t))=="string"){if(t==="")throw new le(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z_(e)&&t.indexOf("/")!==-1)throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(et.fromString(t));if(!ve.isDocumentKey(i))throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Xg(r,new ve(i))}if(t instanceof Gt)return Xg(r,t._key);throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pc(t)}.`)}function Ny(r,e){if(!Array.isArray(r)||r.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function t0(r,e){const t=(function(o,l){for(const d of o)for(const f of d.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class SS{convertValue(e,t="none"){switch(di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return hi(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((d=>ut(d.doubleValue)));return new $f(l)}convertGeoPoint(e){return new Bf(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=wf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ha(e));default:return null}}convertTimestamp(e){const t=ws(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=et.fromString(e);We(Ev(i));const o=new Wa(i.get(1),i.get(3)),l=new ve(i.popFirst(5));return o.isEqual(t)||Vr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function kS(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class Da{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class n0 extends Zv{constructor(e,t,i,o,l,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Dc("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Ku extends n0{data(e={}){return super.data(e)}}class AS{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Da(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Ku(this._firestore,this._userDataWriter,i.key,i,new Da(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((f=>{const g=new Ku(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Da(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Ku(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Da(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return f.type!==0&&(v=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),E=d.indexOf(f.doc.key)),{type:PS(f.type),doc:g,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function PS(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}function CS(r){r=ar(r,Gt);const e=ar(r.firestore,Ro);return aS(zf(e),r._key).then((t=>NS(e,r,t)))}class r0 extends SS{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function RS(r){r=ar(r,pi);const e=ar(r.firestore,Ro),t=zf(e),i=new r0(e);return TS(r._query),lS(t,r._query).then((o=>new AS(e,i,r,o)))}function s0(r,e,t){r=ar(r,Gt);const i=ar(r.firestore,Ro),o=kS(r.converter,e,t);return Jf(i,[yS(Hf(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Bn.none())])}function bS(r,e,t,...i){r=ar(r,Gt);const o=ar(r.firestore,Ro),l=Hf(o);let d;return d=typeof(e=kt(e))=="string"||e instanceof Rc?vS(l,"updateDoc",r._key,e,t,i):_S(l,"updateDoc",r._key,e),Jf(o,[d.toMutation(r._key,Bn.exists(!0))])}function i0(r){return Jf(ar(r.firestore,Ro),[new kf(r._key,Bn.none())])}function Jf(r,e){return(function(i,o){const l=new Rr;return i.asyncQueue.enqueueAndForget((async()=>Y2(await oS(i),o,l))),l.promise})(zf(r),e)}function NS(r,e,t){const i=t.docs.get(e._key),o=new r0(r);return new n0(r,o,e._key,i,new Da(t.hasPendingWrites,t.fromCache),e.converter)}function cc(){return new Wf("serverTimestamp")}(function(e,t=!0){(function(o){ko=o})(Io),go(new ai("firestore",((i,{instanceIdentifier:o,options:l})=>{const d=i.getProvider("app").getImmediate(),f=new Ro(new PT(i.getProvider("auth-internal")),new NT(i.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new le(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(v.options.projectId,E)})(d,o),d);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),ys(Wg,"4.7.3",e),ys(Wg,"4.7.3","esm2017")})();const DS={apiKey:"AIzaSyB1UL7Ji4gqaJ2EX_r1UoZzmZYl-succf4",authDomain:"lastz-power.firebaseapp.com",projectId:"lastz-power",storageBucket:"lastz-power.firebasestorage.app",messagingSenderId:"158054571749",appId:"1:158054571749:web:e223407cf48ec8cb93be0c"},o0=Jy(DS),ri=xT(o0),si=hS(o0),VS=async(r,e)=>{try{let t=e.gameId.trim();if(t=t.replace(/\//g,"_"),!t)throw new Error("Game ID ");const i=mo(si,"users",t),o={gameId:e.gameId.trim(),alliance:e.alliance.trim(),team1Power:Number(e.team1Power),team2Power:Number(e.team2Power),team3Power:Number(e.team3Power),updatedAt:cc(),submittedAt:cc()};return await s0(i,o,{merge:!0}),{success:!0}}catch(t){return console.error(":",t),{success:!1,error:t.message}}},MS=async r=>{try{const e=mo(si,"admins",r),t=await CS(e);return t.exists()&&t.data().isActive?{success:!0,isAdmin:!0,adminData:t.data()}:{success:!0,isAdmin:!1}}catch(e){return console.error(":",e),{success:!1,error:e.message}}},a0=()=>{const[r,e]=se.useState(null),[t,i]=se.useState(!1),[o,l]=se.useState(null),[d,f]=se.useState(!0);return se.useEffect(()=>{const g=dx(ri,async v=>{if(e(v),v){const E=await MS(v.uid);i(E.isAdmin||!1),l(E.isAdmin?E.adminData:null)}else i(!1),l(null);f(!1)});return()=>g()},[]),{user:r,isAdmin:t,adminData:o,loading:d}},OS={zh:{title:"",subtitle:" V2",guest_mode:"",admin_tag:"",logout:"",personal_entry:"",all_management:"",footer_text:" 2026 ",admin_login_gate:"",status_operational:"",duel_calculator:"",tuesday_calculator:"",tue_title:"",tue_desc:"",total_est_score:"",reset_data:"",score_base_settings:"",base_points_desc:"",save_and_apply:"",power_increase:"",power_start:"",power_end:"",power_diff:"",est_score:"",speedup_title:"",bounty_title:"",refine_title:"",pulse_title:"",sur_orange:"",sur_purple:"",sur_blue:"",diamond_gift:"1",unit_min:"",unit_hour:"",unit_day:"",unit_count:"",unit_item:"",unit_person:"",tips_title:"",tips_desc:"",dev_in_progress:"",calc_dev_desc:"...",monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:"",speedup_1min:"1",power_10:"10",bounty_orange:"",refine_stone:"1",pulse_module:"",survivor_orange:"",survivor_purple:"",survivor_blue:"",diamond_1:"1",loading_system:"...",preparing_env:"...",back_to_guest:" ",login_success:"",register_success:"",op_failed:"",email_in_use:" Email ",invalid_email:"Email ",weak_password:"6",auth_failed:"Email ",google_failed:"Google ",system_name:"",login:"",register:"",password_label:"",processing:"...",or_text:"",google_login:" Google ",form_title:"",form_desc:"",save_success:" ",save_failed:"",error_occurred:"",game_id:" ID",alliance:"",game_id_placeholder:": KingArthas",alliance_placeholder:": LastHope",team1:" (M)",team2:" (M)",team3:" (M)",save_data:"",saving:"...",combat_details:"",current_total:"",data_preview:"",sync_notice:"",last_updated:"",id_required:" ID ",alliance_required:"",admin_title:"",admin_desc:"",refresh:"",export_csv:"",preparing_export:" CSV...",stats_overview:"",display_count:"",avg_s1:"S1 ",avg_s2:"S2 ",avg_s3:"S3 ",search_placeholder:"  ID  ...",filter_options:"",member_id:" ID",alliance_label:"",s1_power:"S1 (M)",s2_power:"S2 (M)",s3_power:"S3 (M)",total_eval:"",update_record:"",actions:"",delete_confirm:"  {id} ",delete_success:"",edit:"",edit_record:"",update_success:"",cancel:"",confirm_save:"",no_data:"",no_results:"",intel_v2:" V2.0 ",data_count:"",loading_data:"...",alliance_total_power:"",alliance_avg_power:"",view_members:"",view_alliances:"",view_planner:"SVS",total_member:""},en:{title:"Combat Tracker",subtitle:"Alliance Intel V2",guest_mode:"Guest Mode",admin_tag:"ADMIN",logout:"Logout",personal_entry:"Entry Form",all_management:"Dashboard",footer_text:" 2026 Combat Tracker",admin_login_gate:"Admin Server Entrance",status_operational:"Operational",duel_calculator:"Duel Calculator",tuesday_calculator:"Tuesday: Base Building",tue_title:"Base Building Score Predictor",tue_desc:"Adjust data to estimate your duel points instantly",total_est_score:"Total Estimated Score",reset_data:"Reset Data",score_base_settings:"Score Base Settings",base_points_desc:"Adjust base points for each item based on your tech level",save_and_apply:"Save & Apply",power_increase:"Building Power Increase",power_start:"Initial Power",power_end:"Target Power",power_diff:"Diff",est_score:"Est. Score",speedup_title:"Construction Speedup",bounty_title:"Orange Bounty",refine_title:"Forging Stone",pulse_title:"Pulse Modules",sur_orange:"Orange Refugee",sur_purple:"Purple Refugee",sur_blue:"Blue Refugee",diamond_gift:"1-Diamond Pack",unit_min:"min",unit_hour:"hr",unit_day:"day",unit_count:"times",unit_item:"pcs",unit_person:"px",tips_title:"Pro Tips",tips_desc:"Click the settings button in the top right to customize your base points. Settings will be saved automatically.",dev_in_progress:"Dev in progress",calc_dev_desc:"Building calculation logic for other days...",monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",speedup_1min:"1-min Construction Speedup",power_10:"10 Building Power Increase",bounty_orange:"Orange Bounty Task",refine_stone:"Forging Stone",pulse_module:"Pulse Module",survivor_orange:"Orange Refugee",survivor_purple:"Purple Refugee",survivor_blue:"Blue Refugee",diamond_1:"1-Diamond Pack",loading_system:"Initializing Combat System...",preparing_env:"Preparing Combat Environment...",back_to_guest:" Back to Guest Mode",login_success:"Login successful!",register_success:"Registration successful!",op_failed:"Operation failed, please try again later",email_in_use:"This Email is already in use",invalid_email:"Invalid Email format",weak_password:"Password too weak (at least 6 characters)",auth_failed:"Invalid Email or password",google_failed:"Google login failed, please try again",system_name:"Game Power Tracker",login:"Login",register:"Register",password_label:"Password",processing:"Processing...",or_text:"Or",google_login:"Sign in with Google",form_title:"Power Data Entry",form_desc:"Enter your latest hero power info to keep allies updated",save_success:" Data saved successfully!",save_failed:"Save failed: ",error_occurred:"Error occurred: ",game_id:"Game ID",alliance:"Alliance",game_id_placeholder:"e.g., KingArthas",alliance_placeholder:"e.g., LastHope",team1:"Team 1 Power (M)",team2:"Team 2 Power (M)",team3:"Team 3 Power (M)",save_data:"Save Data",saving:"Saving...",combat_details:"Team Power Details",current_total:"Total Combat Power",data_preview:"Data Preview",sync_notice:"Data will be synced to Alliance database",last_updated:"Last updated",id_required:"Game ID is required",alliance_required:"Alliance name is required",admin_title:"Alliance Intel Center",admin_desc:"Monitor and analyze member power distribution",refresh:"Refresh",export_csv:"Export CSV",preparing_export:"Preparing CSV download...",stats_overview:"Statistics",display_count:"Members",avg_s1:"S1 Avg",avg_s2:"S2 Avg",avg_s3:"S3 Avg",search_placeholder:"Search Game ID or Alliance...",filter_options:"Filters",member_id:"Member ID",alliance_label:"Alliance",s1_power:"S1 Power(M)",s2_power:"S2 Power(M)",s3_power:"S3 Power(M)",total_eval:"Total Eval",update_record:"Update Record",actions:"Action",delete_confirm:" Are you sure you want to delete {id}? This cannot be undone.",delete_success:"Deleted successfully",edit:"Edit",edit_record:"Edit Member Record",update_success:"Update successful",cancel:"Cancel",confirm_save:"Save Changes",no_data:"No data submitted yet",no_results:"No matching records found",intel_v2:"Alliance Intel V2.0 Stable",data_count:"Total Records",loading_data:"Loading Big Data...",alliance_total_power:"Total Alliance Power",alliance_avg_power:"Avg Member Power",view_members:"Members",view_alliances:"Alliances",view_planner:"SVS Strategy",total_member:"Total Members"}},l0=se.createContext(),LS=({children:r})=>{const[e,t]=se.useState(localStorage.getItem("preferred_lang")||"zh"),i=l=>OS[e][l]||l,o=()=>{const l=e==="zh"?"en":"zh";t(l),localStorage.setItem("preferred_lang",l)};return y.jsx(l0.Provider,{value:{lang:e,t:i,toggleLang:o},children:r})},bo=()=>se.useContext(l0);function u0(r){var e,t,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var o=r.length;for(e=0;e<o;e++)r[e]&&(t=u0(r[e]))&&(i&&(i+=" "),i+=t)}else for(t in r)r[t]&&(i&&(i+=" "),i+=t);return i}function ps(){for(var r,e,t=0,i="",o=arguments.length;t<o;t++)(r=arguments[t])&&(e=u0(r))&&(i&&(i+=" "),i+=e);return i}const Ja=r=>typeof r=="number"&&!isNaN(r),ii=r=>typeof r=="string",fn=r=>typeof r=="function",Gu=r=>ii(r)||fn(r)?r:null,Xh=r=>se.isValidElement(r)||ii(r)||fn(r)||Ja(r);function jS(r,e,t){t===void 0&&(t=300);const{scrollHeight:i,style:o}=r;requestAnimationFrame(()=>{o.minHeight="initial",o.height=i+"px",o.transition=`all ${t}ms`,requestAnimationFrame(()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(e,t)})})}function Mc(r){let{enter:e,exit:t,appendPosition:i=!1,collapse:o=!0,collapseDuration:l=300}=r;return function(d){let{children:f,position:g,preventExitTransition:v,done:E,nodeRef:A,isIn:C,playToast:O}=d;const L=i?`${e}--${g}`:e,z=i?`${t}--${g}`:t,$=se.useRef(0);return se.useLayoutEffect(()=>{const Q=A.current,te=L.split(" "),J=oe=>{oe.target===A.current&&(O(),Q.removeEventListener("animationend",J),Q.removeEventListener("animationcancel",J),$.current===0&&oe.type!=="animationcancel"&&Q.classList.remove(...te))};Q.classList.add(...te),Q.addEventListener("animationend",J),Q.addEventListener("animationcancel",J)},[]),se.useEffect(()=>{const Q=A.current,te=()=>{Q.removeEventListener("animationend",te),o?jS(Q,E,l):E()};C||(v?te():($.current=1,Q.className+=` ${z}`,Q.addEventListener("animationend",te)))},[C]),Ke.createElement(Ke.Fragment,null,f)}}function Dy(r,e){return r!=null?{content:r.content,containerId:r.props.containerId,id:r.props.toastId,theme:r.props.theme,type:r.props.type,data:r.props.data||{},isLoading:r.props.isLoading,icon:r.props.icon,status:e}:{}}const Kt=new Map;let Za=[];const Jh=new Set,FS=r=>Jh.forEach(e=>e(r)),c0=()=>Kt.size>0;function d0(r,e){var t;if(e)return!((t=Kt.get(e))==null||!t.isToastActive(r));let i=!1;return Kt.forEach(o=>{o.isToastActive(r)&&(i=!0)}),i}function h0(r,e){Xh(r)&&(c0()||Za.push({content:r,options:e}),Kt.forEach(t=>{t.buildToast(r,e)}))}function Vy(r,e){Kt.forEach(t=>{e!=null&&e!=null&&e.containerId?e?.containerId===t.id&&t.toggle(r,e?.id):t.toggle(r,e?.id)})}function US(r){const{subscribe:e,getSnapshot:t,setProps:i}=se.useRef((function(l){const d=l.containerId||1;return{subscribe(f){const g=(function(E,A,C){let O=1,L=0,z=[],$=[],Q=[],te=A;const J=new Map,oe=new Set,Se=()=>{Q=Array.from(J.values()),oe.forEach(x=>x())},ye=x=>{$=x==null?[]:$.filter(I=>I!==x),Se()},R=x=>{const{toastId:I,onOpen:P,updateId:b,children:V}=x.props,k=b==null;x.staleId&&J.delete(x.staleId),J.set(I,x),$=[...$,x.props.toastId].filter(Ne=>Ne!==x.staleId),Se(),C(Dy(x,k?"added":"updated")),k&&fn(P)&&P(se.isValidElement(V)&&V.props)};return{id:E,props:te,observe:x=>(oe.add(x),()=>oe.delete(x)),toggle:(x,I)=>{J.forEach(P=>{I!=null&&I!==P.props.toastId||fn(P.toggle)&&P.toggle(x)})},removeToast:ye,toasts:J,clearQueue:()=>{L-=z.length,z=[]},buildToast:(x,I)=>{if((W=>{let{containerId:ie,toastId:_e,updateId:pe}=W;const Ce=ie?ie!==E:E!==1,De=J.has(_e)&&pe==null;return Ce||De})(I))return;const{toastId:P,updateId:b,data:V,staleId:k,delay:Ne}=I,ze=()=>{ye(P)},qe=b==null;qe&&L++;const ge={...te,style:te.toastStyle,key:O++,...Object.fromEntries(Object.entries(I).filter(W=>{let[ie,_e]=W;return _e!=null})),toastId:P,updateId:b,data:V,closeToast:ze,isIn:!1,className:Gu(I.className||te.toastClassName),bodyClassName:Gu(I.bodyClassName||te.bodyClassName),progressClassName:Gu(I.progressClassName||te.progressClassName),autoClose:!I.isLoading&&(ee=I.autoClose,ce=te.autoClose,ee===!1||Ja(ee)&&ee>0?ee:ce),deleteToast(){const W=J.get(P),{onClose:ie,children:_e}=W.props;fn(ie)&&ie(se.isValidElement(_e)&&_e.props),C(Dy(W,"removed")),J.delete(P),L--,L<0&&(L=0),z.length>0?R(z.shift()):Se()}};var ee,ce;ge.closeButton=te.closeButton,I.closeButton===!1||Xh(I.closeButton)?ge.closeButton=I.closeButton:I.closeButton===!0&&(ge.closeButton=!Xh(te.closeButton)||te.closeButton);let j=x;se.isValidElement(x)&&!ii(x.type)?j=se.cloneElement(x,{closeToast:ze,toastProps:ge,data:V}):fn(x)&&(j=x({closeToast:ze,toastProps:ge,data:V}));const N={content:j,props:ge,staleId:k};te.limit&&te.limit>0&&L>te.limit&&qe?z.push(N):Ja(Ne)?setTimeout(()=>{R(N)},Ne):R(N)},setProps(x){te=x},setToggle:(x,I)=>{J.get(x).toggle=I},isToastActive:x=>$.some(I=>I===x),getSnapshot:()=>Q}})(d,l,FS);Kt.set(d,g);const v=g.observe(f);return Za.forEach(E=>h0(E.content,E.options)),Za=[],()=>{v(),Kt.delete(d)}},setProps(f){var g;(g=Kt.get(d))==null||g.setProps(f)},getSnapshot(){var f;return(f=Kt.get(d))==null?void 0:f.getSnapshot()}}})(r)).current;i(r);const o=se.useSyncExternalStore(e,t,t);return{getToastToRender:function(l){if(!o)return[];const d=new Map;return r.newestOnTop&&o.reverse(),o.forEach(f=>{const{position:g}=f.props;d.has(g)||d.set(g,[]),d.get(g).push(f)}),Array.from(d,f=>l(f[0],f[1]))},isToastActive:d0,count:o?.length}}function zS(r){const[e,t]=se.useState(!1),[i,o]=se.useState(!1),l=se.useRef(null),d=se.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:f,pauseOnHover:g,closeToast:v,onClick:E,closeOnClick:A}=r;var C,O;function L(){t(!0)}function z(){t(!1)}function $(J){const oe=l.current;d.canDrag&&oe&&(d.didMove=!0,e&&z(),d.delta=r.draggableDirection==="x"?J.clientX-d.start:J.clientY-d.start,d.start!==J.clientX&&(d.canCloseOnClick=!1),oe.style.transform=`translate3d(${r.draggableDirection==="x"?`${d.delta}px, var(--y)`:`0, calc(${d.delta}px + var(--y))`},0)`,oe.style.opacity=""+(1-Math.abs(d.delta/d.removalDistance)))}function Q(){document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",Q);const J=l.current;if(d.canDrag&&d.didMove&&J){if(d.canDrag=!1,Math.abs(d.delta)>d.removalDistance)return o(!0),r.closeToast(),void r.collapseAll();J.style.transition="transform 0.2s, opacity 0.2s",J.style.removeProperty("transform"),J.style.removeProperty("opacity")}}(O=Kt.get((C={id:r.toastId,containerId:r.containerId,fn:t}).containerId||1))==null||O.setToggle(C.id,C.fn),se.useEffect(()=>{if(r.pauseOnFocusLoss)return document.hasFocus()||z(),window.addEventListener("focus",L),window.addEventListener("blur",z),()=>{window.removeEventListener("focus",L),window.removeEventListener("blur",z)}},[r.pauseOnFocusLoss]);const te={onPointerDown:function(J){if(r.draggable===!0||r.draggable===J.pointerType){d.didMove=!1,document.addEventListener("pointermove",$),document.addEventListener("pointerup",Q);const oe=l.current;d.canCloseOnClick=!0,d.canDrag=!0,oe.style.transition="none",r.draggableDirection==="x"?(d.start=J.clientX,d.removalDistance=oe.offsetWidth*(r.draggablePercent/100)):(d.start=J.clientY,d.removalDistance=oe.offsetHeight*(r.draggablePercent===80?1.5*r.draggablePercent:r.draggablePercent)/100)}},onPointerUp:function(J){const{top:oe,bottom:Se,left:ye,right:R}=l.current.getBoundingClientRect();J.nativeEvent.type!=="touchend"&&r.pauseOnHover&&J.clientX>=ye&&J.clientX<=R&&J.clientY>=oe&&J.clientY<=Se?z():L()}};return f&&g&&(te.onMouseEnter=z,r.stacked||(te.onMouseLeave=L)),A&&(te.onClick=J=>{E&&E(J),d.canCloseOnClick&&v()}),{playToast:L,pauseToast:z,isRunning:e,preventExitTransition:i,toastRef:l,eventHandlers:te}}function BS(r){let{delay:e,isRunning:t,closeToast:i,type:o="default",hide:l,className:d,style:f,controlledProgress:g,progress:v,rtl:E,isIn:A,theme:C}=r;const O=l||g&&v===0,L={...f,animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};g&&(L.transform=`scaleX(${v})`);const z=ps("Toastify__progress-bar",g?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${C}`,`Toastify__progress-bar--${o}`,{"Toastify__progress-bar--rtl":E}),$=fn(d)?d({rtl:E,type:o,defaultClassName:z}):ps(z,d),Q={[g&&v>=1?"onTransitionEnd":"onAnimationEnd"]:g&&v<1?null:()=>{A&&i()}};return Ke.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":O},Ke.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${C} Toastify__progress-bar--${o}`}),Ke.createElement("div",{role:"progressbar","aria-hidden":O?"true":"false","aria-label":"notification timer",className:$,style:L,...Q}))}let $S=1;const f0=()=>""+$S++;function qS(r){return r&&(ii(r.toastId)||Ja(r.toastId))?r.toastId:f0()}function Fa(r,e){return h0(r,e),e.toastId}function dc(r,e){return{...e,type:e&&e.type||r,toastId:qS(e)}}function Vu(r){return(e,t)=>Fa(e,dc(r,t))}function Re(r,e){return Fa(r,dc("default",e))}Re.loading=(r,e)=>Fa(r,dc("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Re.promise=function(r,e,t){let i,{pending:o,error:l,success:d}=e;o&&(i=ii(o)?Re.loading(o,t):Re.loading(o.render,{...t,...o}));const f={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},g=(E,A,C)=>{if(A==null)return void Re.dismiss(i);const O={type:E,...f,...t,data:C},L=ii(A)?{render:A}:A;return i?Re.update(i,{...O,...L}):Re(L.render,{...O,...L}),C},v=fn(r)?r():r;return v.then(E=>g("success",d,E)).catch(E=>g("error",l,E)),v},Re.success=Vu("success"),Re.info=Vu("info"),Re.error=Vu("error"),Re.warning=Vu("warning"),Re.warn=Re.warning,Re.dark=(r,e)=>Fa(r,dc("default",{theme:"dark",...e})),Re.dismiss=function(r){(function(e){var t;if(c0()){if(e==null||ii(t=e)||Ja(t))Kt.forEach(i=>{i.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const i=Kt.get(e.containerId);i?i.removeToast(e.id):Kt.forEach(o=>{o.removeToast(e.id)})}}else Za=Za.filter(i=>e!=null&&i.options.toastId!==e)})(r)},Re.clearWaitingQueue=function(r){r===void 0&&(r={}),Kt.forEach(e=>{!e.props.limit||r.containerId&&e.id!==r.containerId||e.clearQueue()})},Re.isActive=d0,Re.update=function(r,e){e===void 0&&(e={});const t=((i,o)=>{var l;let{containerId:d}=o;return(l=Kt.get(d||1))==null?void 0:l.toasts.get(i)})(r,e);if(t){const{props:i,content:o}=t,l={delay:100,...i,...e,toastId:e.toastId||r,updateId:f0()};l.toastId!==r&&(l.staleId=r);const d=l.render||o;delete l.render,Fa(d,l)}},Re.done=r=>{Re.update(r,{progress:1})},Re.onChange=function(r){return Jh.add(r),()=>{Jh.delete(r)}},Re.play=r=>Vy(!0,r),Re.pause=r=>Vy(!1,r);const HS=typeof window<"u"?se.useLayoutEffect:se.useEffect,Mu=r=>{let{theme:e,type:t,isLoading:i,...o}=r;return Ke.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...o})},Sh={info:function(r){return Ke.createElement(Mu,{...r},Ke.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(r){return Ke.createElement(Mu,{...r},Ke.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(r){return Ke.createElement(Mu,{...r},Ke.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(r){return Ke.createElement(Mu,{...r},Ke.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Ke.createElement("div",{className:"Toastify__spinner"})}},WS=r=>{const{isRunning:e,preventExitTransition:t,toastRef:i,eventHandlers:o,playToast:l}=zS(r),{closeButton:d,children:f,autoClose:g,onClick:v,type:E,hideProgressBar:A,closeToast:C,transition:O,position:L,className:z,style:$,bodyClassName:Q,bodyStyle:te,progressClassName:J,progressStyle:oe,updateId:Se,role:ye,progress:R,rtl:x,toastId:I,deleteToast:P,isIn:b,isLoading:V,closeOnClick:k,theme:Ne}=r,ze=ps("Toastify__toast",`Toastify__toast-theme--${Ne}`,`Toastify__toast--${E}`,{"Toastify__toast--rtl":x},{"Toastify__toast--close-on-click":k}),qe=fn(z)?z({rtl:x,position:L,type:E,defaultClassName:ze}):ps(ze,z),ge=(function(N){let{theme:W,type:ie,isLoading:_e,icon:pe}=N,Ce=null;const De={theme:W,type:ie};return pe===!1||(fn(pe)?Ce=pe({...De,isLoading:_e}):se.isValidElement(pe)?Ce=se.cloneElement(pe,De):_e?Ce=Sh.spinner():(Fe=>Fe in Sh)(ie)&&(Ce=Sh[ie](De))),Ce})(r),ee=!!R||!g,ce={closeToast:C,type:E,theme:Ne};let j=null;return d===!1||(j=fn(d)?d(ce):se.isValidElement(d)?se.cloneElement(d,ce):(function(N){let{closeToast:W,theme:ie,ariaLabel:_e="close"}=N;return Ke.createElement("button",{className:`Toastify__close-button Toastify__close-button--${ie}`,type:"button",onClick:pe=>{pe.stopPropagation(),W(pe)},"aria-label":_e},Ke.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ke.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))})(ce)),Ke.createElement(O,{isIn:b,done:P,position:L,preventExitTransition:t,nodeRef:i,playToast:l},Ke.createElement("div",{id:I,onClick:v,"data-in":b,className:qe,...o,style:$,ref:i},Ke.createElement("div",{...b&&{role:ye},className:fn(Q)?Q({type:E}):ps("Toastify__toast-body",Q),style:te},ge!=null&&Ke.createElement("div",{className:ps("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!V})},ge),Ke.createElement("div",null,f)),j,Ke.createElement(BS,{...Se&&!ee?{key:`pb-${Se}`}:{},rtl:x,theme:Ne,delay:g,isRunning:e,isIn:b,closeToast:C,hide:A,type:E,style:oe,className:J,controlledProgress:ee,progress:R||0})))},Oc=function(r,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${r}-enter`,exit:`Toastify--animate Toastify__${r}-exit`,appendPosition:e}},KS=Mc(Oc("bounce",!0));Mc(Oc("slide",!0));Mc(Oc("zoom"));Mc(Oc("flip"));const GS={position:"top-right",transition:KS,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function QS(r){let e={...GS,...r};const t=r.stacked,[i,o]=se.useState(!0),l=se.useRef(null),{getToastToRender:d,isToastActive:f,count:g}=US(e),{className:v,style:E,rtl:A,containerId:C}=e;function O(z){const $=ps("Toastify__toast-container",`Toastify__toast-container--${z}`,{"Toastify__toast-container--rtl":A});return fn(v)?v({position:z,rtl:A,defaultClassName:$}):ps($,Gu(v))}function L(){t&&(o(!0),Re.play())}return HS(()=>{if(t){var z;const $=l.current.querySelectorAll('[data-in="true"]'),Q=12,te=(z=e.position)==null?void 0:z.includes("top");let J=0,oe=0;Array.from($).reverse().forEach((Se,ye)=>{const R=Se;R.classList.add("Toastify__toast--stacked"),ye>0&&(R.dataset.collapsed=`${i}`),R.dataset.pos||(R.dataset.pos=te?"top":"bot");const x=J*(i?.2:1)+(i?0:Q*ye);R.style.setProperty("--y",`${te?x:-1*x}px`),R.style.setProperty("--g",`${Q}`),R.style.setProperty("--s",""+(1-(i?oe:0))),J+=R.offsetHeight,oe+=.025})}},[i,g,t]),Ke.createElement("div",{ref:l,className:"Toastify",id:C,onMouseEnter:()=>{t&&(o(!1),Re.pause())},onMouseLeave:L},d((z,$)=>{const Q=$.length?{...E}:{...E,pointerEvents:"none"};return Ke.createElement("div",{className:O(z),style:Q,key:`container-${z}`},$.map(te=>{let{content:J,props:oe}=te;return Ke.createElement(WS,{...oe,stacked:t,collapseAll:L,isIn:f(oe.toastId,oe.containerId),style:oe.style,key:`toast-${oe.key}`},J)}))}))}function YS(){const{t:r}=bo(),[e,t]=se.useState(!0),[i,o]=se.useState(""),[l,d]=se.useState(""),[f,g]=se.useState(!1),v=async A=>{A.preventDefault(),g(!0);try{e?(await lx(ri,i,l),Re.success(r("login_success"))):(await ax(ri,i,l),Re.success(r("register_success")))}catch(C){console.error("Authentication error:",C);let O=r("op_failed");C.code==="auth/email-already-in-use"?O=r("email_in_use"):C.code==="auth/invalid-email"?O=r("invalid_email"):C.code==="auth/weak-password"?O=r("weak_password"):(C.code==="auth/user-not-found"||C.code==="auth/wrong-password"||C.code==="auth/invalid-credential")&&(O=r("auth_failed")),Re.error(O)}finally{g(!1)}},E=async()=>{g(!0);const A=new kr;try{await bx(ri,A),Re.success(r("login_success"))}catch(C){console.error("Google sign in error:",C),Re.error(r("google_failed"))}finally{g(!1)}};return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-transparent px-4",children:y.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md border border-gray-100 animate-in fade-in zoom-in duration-500",children:[y.jsx("h1",{className:"text-3xl font-black text-center text-gray-900 mb-8 tracking-tighter uppercase",children:r("system_name")}),y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"flex p-1 bg-gray-50 rounded-xl border border-gray-100",children:[y.jsx("button",{className:`flex-1 py-2.5 text-center text-sm font-black rounded-lg transition-all duration-300 ${e?"bg-white text-indigo-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,onClick:()=>t(!0),children:r("login")}),y.jsx("button",{className:`flex-1 py-2.5 text-center text-sm font-black rounded-lg transition-all duration-300 ${e?"text-gray-400 hover:text-gray-600":"bg-white text-indigo-600 shadow-sm"}`,onClick:()=>t(!1),children:r("register")})]})}),y.jsxs("form",{onSubmit:v,className:"space-y-5",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Email"}),y.jsx("input",{type:"email",value:i,onChange:A=>o(A.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold",placeholder:"commander@alliance.com"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:r("password_label")}),y.jsx("input",{type:"password",value:l,onChange:A=>d(A.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 border border-gray-200 rounded-xl outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold",placeholder:""})]}),y.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-indigo-600 to-blue-600 text-white py-4 rounded-xl font-black uppercase tracking-widest text-xs hover:from-indigo-700 hover:to-blue-700 transition-all shadow-lg shadow-indigo-100 disabled:from-gray-300 disabled:to-gray-400 disabled:shadow-none transform active:scale-[0.98]",children:r(f?"processing":e?"login":"register")})]}),y.jsxs("div",{className:"relative my-8",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-gray-100"})}),y.jsx("div",{className:"relative flex justify-center text-[10px] font-black uppercase tracking-[0.3em]",children:y.jsx("span",{className:"px-3 bg-white text-gray-300",children:r("or_text")})})]}),y.jsxs("button",{onClick:E,disabled:f,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-200 text-gray-600 py-3.5 rounded-xl text-xs font-black uppercase tracking-widest hover:bg-gray-50 hover:border-gray-300 transition-all shadow-sm disabled:opacity-50",children:[y.jsxs("svg",{className:"w-5 h-5 translate-y-[-1px]",viewBox:"0 0 24 24",children:[y.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"}),y.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),y.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),y.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"})]}),r("google_login")]})]})})}var XS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const JS=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pe=(r,e)=>{const t=se.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:f="",children:g,...v},E)=>se.createElement("svg",{ref:E,...XS,width:o,height:o,stroke:i,strokeWidth:d?Number(l)*24/Number(o):l,className:["lucide",`lucide-${JS(r)}`,f].join(" "),...v},[...e.map(([A,C])=>se.createElement(A,C)),...Array.isArray(g)?g:[g]]));return t.displayName=`${r}`,t};const My=Pe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const ZS=Pe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const ek=Pe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const hc=Pe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const tk=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const nk=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const rk=Pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const sk=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const ik=Pe("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const p0=Pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const ok=Pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const ak=Pe("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);const lk=Pe("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]);const m0=Pe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const uk=Pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const ck=Pe("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);const Oy=Pe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const dk=Pe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const hk=Pe("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);const fk=Pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const pk=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const mk=Pe("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);const gk=Pe("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);const yk=Pe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);const Ly=Pe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const _k=Pe("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);const Ou=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const vk=Pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Zf=Pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const jy=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Fy=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const wk=Pe("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const fc=Pe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const Ua=Pe("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);const g0=Pe("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);const Zh=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Ek=Pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const y0=Pe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);const _0=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const oi=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const xk=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Tk=Pe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);const Ik=Pe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Lu=r=>r==null||r===""?"0":Number(r).toLocaleString("en-US",{maximumFractionDigits:2}),Sk=r=>r?new Date(r).toLocaleString("zh-TW"):"",kk=({user:r})=>{const{t:e}=bo(),[t,i]=se.useState({gameId:"",alliance:"",team1Power:"",team2Power:"",team3Power:""}),[o,l]=se.useState({}),[d,f]=se.useState(!1),[g,v]=se.useState(null);se.useEffect(()=>{const L=localStorage.getItem("game_power_last_entry"),z=localStorage.getItem("game_power_last_time");L&&i(JSON.parse(L)),z&&v(z)},[]);const E=L=>{const{name:z,value:$}=L.target;i(Q=>({...Q,[z]:$})),o[z]&&l(Q=>({...Q,[z]:""}))},A=L=>{const z={};return L.gameId?.trim()||(z.gameId=e("id_required")),L.alliance?.trim()||(z.alliance=e("alliance_required")),{valid:Object.keys(z).length===0,errors:z}},C=async L=>{L.preventDefault();const z=A(t);if(!z.valid){l(z.errors);return}f(!0);try{const $={gameId:t.gameId,alliance:t.alliance,team1Power:Number(t.team1Power||0),team2Power:Number(t.team2Power||0),team3Power:Number(t.team3Power||0)},Q=await VS(r.uid,$);if(Q.success){const te=new Date().toISOString();Re.success(e("save_success")),v(te),localStorage.setItem("game_power_last_entry",JSON.stringify(t)),localStorage.setItem("game_power_last_time",te)}else Re.error(e("save_failed")+Q.error),l({submit:e("save_failed")+Q.error})}catch($){Re.error(e("error_occurred")+$.message),l({submit:e("error_occurred")+$.message})}finally{f(!1)}},O=Number(t.team1Power||0)+Number(t.team2Power||0)+Number(t.team3Power||0);return y.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[y.jsxs("div",{className:"text-center space-y-2",children:[y.jsxs("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight flex items-center justify-center gap-2",children:[y.jsx(y0,{className:"text-yellow-500"})," ",e("form_title")]}),y.jsx("p",{className:"text-gray-500",children:e("form_desc")})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[y.jsx("form",{onSubmit:C,className:"lg:col-span-3 space-y-6",children:y.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-gray-200/50 border border-gray-100 p-8 space-y-6",children:[o.submit&&y.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 text-red-700 text-sm rounded-r-lg animate-pulse",children:o.submit}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[y.jsx(_0,{size:16,className:"text-blue-500"})," ",e("game_id")," *"]}),y.jsx("input",{type:"text",name:"gameId",value:t.gameId,onChange:E,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 outline-none focus:ring-2 ${o.gameId?"border-red-300 ring-red-100 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-100 hover:border-gray-300"}`,placeholder:e("game_id_placeholder")}),o.gameId&&y.jsx("p",{className:"text-xs text-red-500 mt-1",children:o.gameId})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[y.jsx(oi,{size:16,className:"text-green-500"})," ",e("alliance")," *"]}),y.jsx("input",{type:"text",name:"alliance",value:t.alliance,onChange:E,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 outline-none focus:ring-2 ${o.alliance?"border-red-300 ring-red-100 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-100 hover:border-gray-300"}`,placeholder:e("alliance_placeholder")}),o.alliance&&y.jsx("p",{className:"text-xs text-red-500 mt-1",children:o.alliance})]})]}),y.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"}),y.jsxs("div",{className:"space-y-5",children:[y.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-bold mb-2 text-sm uppercase tracking-wide",children:[y.jsx(g0,{className:"text-red-500",size:18})," ",e("combat_details")]}),y.jsx("div",{className:"grid grid-cols-1 gap-4",children:[{name:"team1Power",label:e("team1"),color:"blue"},{name:"team2Power",label:e("team2"),color:"indigo"},{name:"team3Power",label:e("team3"),color:"purple"}].map(L=>y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"flex justify-between items-center mb-1",children:y.jsxs("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-1",children:[y.jsx(fc,{size:12})," ",L.label]})}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"number",step:"any",name:L.name,value:t[L.name],onChange:E,className:"w-full px-4 py-3 pl-10 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all hover:border-gray-300 font-mono text-lg",placeholder:"0"}),y.jsxs("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-bold italic group-hover:text-indigo-400 transition-colors",children:["S",L.name.charAt(4)]})]})]},L.name))})]}),y.jsx("button",{type:"submit",disabled:d,className:"w-full py-4 mt-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 transition-all duration-300 disabled:from-gray-300 disabled:to-gray-400 disabled:shadow-none transform active:scale-[0.98] flex items-center justify-center gap-2",children:d?y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e("saving")]}):y.jsxs(y.Fragment,{children:[y.jsx(Zf,{size:18})," ",e("save_data")]})})]})}),y.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[y.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-blue-700 rounded-2xl p-6 text-white shadow-xl shadow-indigo-100 flex flex-col justify-between h-[180px] relative overflow-hidden",children:[y.jsxs("div",{className:"relative z-10",children:[y.jsx("p",{className:"text-indigo-100 text-[10px] font-black uppercase tracking-widest opacity-80",children:e("current_total")}),y.jsx("h3",{className:"text-4xl font-black mt-2 tracking-tighter tabular-nums leading-none",children:Lu(O)})]}),y.jsxs("div",{className:"relative z-10 flex justify-between items-end",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("p",{className:"text-[10px] text-indigo-100/60 uppercase font-bold tracking-wider",children:e("game_id")}),y.jsx("p",{className:"font-bold truncate max-w-[120px] text-sm tabular-nums",children:t.gameId||"---"})]}),y.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-lg p-2.5 flex items-center gap-2 border border-white/20",children:[y.jsx(Oy,{size:14}),y.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest leading-none",children:"STATUS OK"})]})]}),y.jsx("div",{className:"absolute -right-4 -top-4 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),y.jsx("div",{className:"absolute -left-4 -bottom-4 w-24 h-24 bg-indigo-400/20 rounded-full blur-xl"})]}),y.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-gray-200/50 border border-gray-100 p-6 space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 pb-3",children:[y.jsxs("h4",{className:"font-black text-gray-800 flex items-center gap-2 text-[10px] uppercase tracking-widest",children:[y.jsx(Oy,{size:14,className:"text-gray-400"})," ",e("data_preview")]}),g&&y.jsxs("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-tighter",children:[e("last_updated")," ",Sk(g).split(" ")[1]]})]}),y.jsx("div",{className:"space-y-4",children:[{label:e("game_id"),value:t.gameId},{label:e("alliance"),value:t.alliance},{label:e("team1"),value:Lu(t.team1Power),emphasize:!0},{label:e("team2"),value:Lu(t.team2Power),emphasize:!0},{label:e("team3"),value:Lu(t.team3Power),emphasize:!0}].map((L,z)=>y.jsxs("div",{className:"flex justify-between items-center text-xs group",children:[y.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-wider group-hover:text-gray-600 transition-colors",children:L.label}),y.jsx("span",{className:`font-black ${L.emphasize?"text-gray-700 font-mono text-sm":"text-gray-800"}`,children:L.value||(z<2?"---":"0")})]},z))}),y.jsx("div",{className:"pt-4 mt-2 border-t border-dashed border-gray-200",children:y.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold text-[10px] p-3 bg-blue-50/50 rounded-xl border border-blue-100/50 uppercase tracking-tight",children:[y.jsx(fc,{size:14}),y.jsx("span",{children:e("sync_notice")})]})})]})]})]})]})},Ak=async(r=[])=>{try{const e=dS(si,"users");let t;!r||r.length===0||r.includes("*")?t=Cy(e,Ry("updatedAt","desc")):t=Cy(e,IS("alliance","in",r),Ry("updatedAt","desc"));const i=await RS(t),o=[];return i.forEach(l=>{o.push({id:l.id,...l.data()})}),o}catch(e){throw console.error(":",e),new Error(e.message||"")}},Pk=async r=>{try{return await i0(mo(si,"users",r)),{success:!0}}catch(e){throw console.error(":",e),new Error("")}},Ck=async(r,e)=>{try{const{id:t,...i}=e;let o=e.gameId.trim().replace(/\//g,"_");if(o!==r){const l=mo(si,"users",o),d=mo(si,"users",r);await s0(l,{...i,updatedAt:cc()}),await i0(d)}else{const l=mo(si,"users",r);await bS(l,{...i,updatedAt:cc()})}return{success:!0}}catch(t){throw console.error(":",t),new Error(t.message||"")}},Rk=r=>{if(!r||r.length===0)return{totalUsers:0,averageTeam1Power:0,averageTeam2Power:0,averageTeam3Power:0,averageTotalPower:0,maxTotalPower:0,minTotalPower:0};const e=r.map(f=>{const g=Number(f.team1Power)||0,v=Number(f.team2Power)||0,E=Number(f.team3Power)||0;return{team1:g,team2:v,team3:E,total:g+v+E}}),t=e.reduce((f,g)=>f+g.team1,0),i=e.reduce((f,g)=>f+g.team2,0),o=e.reduce((f,g)=>f+g.team3,0),l=e.reduce((f,g)=>f+g.total,0),d=e.map(f=>f.total);return{totalUsers:r.length,averageTeam1Power:Math.round(t/r.length),averageTeam2Power:Math.round(i/r.length),averageTeam3Power:Math.round(o/r.length),averageTotalPower:Math.round(l/r.length),maxTotalPower:Math.max(...d),minTotalPower:Math.min(...d)}},bk=r=>{if(!r||r.length===0)return[];const e={};return r.forEach(t=>{const i=t.alliance||"";e[i]||(e[i]={name:i,memberCount:0,totalPower:0,avgPower:0,team1Power:0,team2Power:0,team3Power:0,lastUpdated:null});const o=Number(t.team1Power)||0,l=Number(t.team2Power)||0,d=Number(t.team3Power)||0,f=o+l+d,g=t.submittedAt?.toDate?.()||new Date(t.submittedAt);e[i].memberCount++,e[i].totalPower+=f,e[i].team1Power+=o,e[i].team2Power+=l,e[i].team3Power+=d,(!e[i].lastUpdated||g>e[i].lastUpdated)&&(e[i].lastUpdated=g)}),Object.values(e).map(t=>({...t,avgPower:Math.round(t.totalPower/t.memberCount),avgTeam1Power:Math.round(t.team1Power/t.memberCount),avgTeam2Power:Math.round(t.team2Power/t.memberCount),avgTeam3Power:Math.round(t.team3Power/t.memberCount)})).sort((t,i)=>i.totalPower-t.totalPower)},Nk=r=>r==null||r===""?"0":Number(r).toLocaleString("en-US",{maximumFractionDigits:2}),Uy=r=>{if(!r)return"";const e=r.toDate?r.toDate():new Date(r),t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),d=String(e.getMinutes()).padStart(2,"0");return`${t}-${i}-${o} ${l}:${d}`},tr=r=>Nk(r),pc=25,ef=17,zy=35,Dk=55,Vk=[{q:0,r:0},{q:1,r:-1},{q:1,r:0},{q:0,r:1},{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],Mk=[{q:0,r:0},{q:0,r:-1},{q:0,r:1}],Ok=()=>{const r=[];for(let e=-3;e<=3;e++)for(let t=-3;t<=3;t++){const i=-e-t;Math.abs(e)<=3&&Math.abs(t)<=3&&Math.abs(i)<=3&&r.push({q:e,r:t})}return r},Lk=Ok(),jk=()=>{const[r,e]=se.useState({}),[t,i]=se.useState("brush"),[o,l]=se.useState("#3b82f6"),[d,f]=se.useState(.8),[g,v]=se.useState({x:300,y:300}),[E,A]=se.useState(!0),[C,O]=se.useState({w:800,h:600}),L=se.useRef(null),z=se.useRef(!1),$=se.useRef({x:0,y:0}),Q=()=>{const x={};[{id:"1",name:"1",center:{q:-16,r:16},label:"1"},{id:"2",name:"2",center:{q:0,r:-16},label:"2"},{id:"3",name:"3",center:{q:16,r:0},label:"3"}].forEach(P=>{const b=`battery_${P.id}`;Lk.forEach(V=>{const k=P.center.q+V.q,Ne=P.center.r+V.r;x[`${k},${Ne}`]={type:"battery",color:"rgba(153, 27, 27, 0.7)",parent:b,isCenter:V.q===0&&V.r===0,label:V.q===0&&V.r===0?P.label:null}})}),e(x)};se.useEffect(()=>{Object.keys(r).length===0&&Q()},[]);const te=()=>{window.confirm("")&&Q()};se.useEffect(()=>{const x=L.current;if(!x)return;const I=P=>{P.preventDefault();const b=P.deltaY>0?-.05:.05;f(V=>Math.min(3,Math.max(.2,V+b)))};return x.addEventListener("wheel",I,{passive:!1}),()=>x.removeEventListener("wheel",I)},[]);const J=(x,I)=>{const P=pc*(Math.sqrt(3)*x+Math.sqrt(3)/2*I),b=pc*(3/2)*I;return{x:P,y:b}};se.useEffect(()=>{const x=()=>{L.current&&O({w:L.current.clientWidth,h:L.current.clientHeight})};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const oe=x=>{(x.button===1||x.button===0&&x.altKey)&&(z.current=!0,$.current={x:x.clientX,y:x.clientY},x.preventDefault())},Se=x=>{if(z.current){const I=x.clientX-$.current.x,P=x.clientY-$.current.y;v(b=>({x:b.x+I,y:b.y+P})),$.current={x:x.clientX,y:x.clientY}}},ye=(x,I)=>{e(P=>{const b=`${x},${I}`;let V={...P};if(t==="brush")V[b]={type:"color",color:o};else if(t==="eraser"){const k=V[b];if(k?.parent){const Ne=k.parent;Object.keys(V).forEach(ze=>{V[ze].parent===Ne&&delete V[ze]})}else delete V[b]}else if(t==="hq"||t==="cannon"){const k=t==="hq"?Vk:Mk;if(k.some(qe=>{const ge=x+qe.q,ee=I+qe.r,ce=`${ge},${ee}`,j=V[ce];return!!(j&&j.type!=="color"||Math.max(Math.abs(ge),Math.abs(ee),Math.abs(-ge-ee))<=ef)}))return P;const ze=b;k.forEach(qe=>{const ge=x+qe.q,ee=I+qe.r;V[`${ge},${ee}`]={type:t,color:o,parent:ze,isCenter:qe.q===0&&qe.r===0}})}return V})},R=se.useMemo(()=>{const x=[],I=Dk;for(let P=-I;P<=I;P++)for(let b=-I;b<=I;b++){const V=-P-b;Math.abs(V)<=I&&x.push(y.jsx(Fk,{q:P,r:b,cell:r[`${P},${b}`],showCoords:E,applyAction:ye,hexToPixel:J},`${P},${b}`))}return x},[r,E]);return y.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] bg-slate-900 rounded-2xl overflow-hidden border border-slate-700 shadow-2xl relative",children:[y.jsxs("div",{className:"p-4 bg-slate-900/80 backdrop-blur-md border-b border-slate-800 flex items-center justify-between z-10",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("div",{className:"flex bg-slate-800 rounded-lg p-1",children:[y.jsx(ju,{active:t==="brush",onClick:()=>i("brush"),icon:y.jsx(gk,{size:18}),label:""}),y.jsx(ju,{active:t==="hq",onClick:()=>i("hq"),icon:y.jsx(m0,{size:18}),label:""}),y.jsx(ju,{active:t==="cannon",onClick:()=>i("cannon"),icon:y.jsx(Ua,{size:18}),label:"/"}),y.jsx(ju,{active:t==="eraser",onClick:()=>i("eraser"),icon:y.jsx(Zh,{size:18}),label:""})]}),y.jsx("div",{className:"h-6 w-[1px] bg-slate-700"}),y.jsx("div",{className:"flex gap-2",children:["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6"].map(x=>y.jsx("button",{className:`w-8 h-8 rounded-full border-2 transition-transform ${o===x?"border-white scale-110":"border-transparent opacity-60 hover:opacity-100"}`,style:{backgroundColor:x},onClick:()=>l(x)},x))})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("button",{onClick:()=>A(!E),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${E?"bg-blue-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[y.jsx(yk,{size:14})," "]}),y.jsx("div",{className:"h-6 w-[1px] bg-slate-700"}),y.jsxs("div",{className:"flex items-center gap-3 bg-slate-800/50 px-3 py-1.5 rounded-xl border border-slate-700/50",children:[y.jsx("button",{onClick:()=>f(x=>Math.max(.1,x-.1)),className:"text-slate-400 hover:text-white transition-colors",children:y.jsx(Ik,{size:16})}),y.jsx("input",{type:"range",min:"0.1",max:"2.5",step:"0.05",value:d,onChange:x=>f(parseFloat(x.target.value)),className:"w-24 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),y.jsx("button",{onClick:()=>f(x=>Math.min(2.5,x+.1)),className:"text-slate-400 hover:text-white transition-colors",children:y.jsx(Tk,{size:16})}),y.jsxs("span",{className:"text-[10px] font-mono text-blue-400 w-10 text-center",children:[Math.round(d*100),"%"]})]}),y.jsxs("button",{onClick:te,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 text-slate-400 rounded-lg text-xs font-medium hover:bg-red-900/40 hover:text-red-400 transition-all border border-slate-700",children:[y.jsx(Zh,{size:14})," "]}),y.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-blue-900/20 hover:from-blue-500 transition-all",children:[y.jsx(p0,{size:16})," "]})]})]}),y.jsxs("div",{ref:L,className:"flex-1 overflow-hidden cursor-move relative",onMouseDown:oe,onMouseMove:Se,onMouseUp:()=>z.current=!1,onMouseLeave:()=>z.current=!1,children:[y.jsx("svg",{width:"100%",height:"100%",className:"absolute inset-0",children:y.jsx("g",{transform:`translate(${g.x}, ${g.y}) scale(${d})`,children:R})}),y.jsxs("div",{className:"absolute bottom-6 right-6 bg-slate-900/60 backdrop-blur border border-slate-700 p-4 rounded-xl pointer-events-none",children:[y.jsx("h4",{className:"text-blue-400 font-bold text-xs mb-2 uppercase tracking-widest",children:""}),y.jsxs("ul",{className:"text-[10px] text-slate-400 space-y-1",children:[y.jsxs("li",{children:[" ",y.jsx("b",{children:""}),": "]}),y.jsxs("li",{children:[" ",y.jsx("b",{children:""}),": "]}),y.jsxs("li",{children:[" ",y.jsx("b",{children:"Alt + "}),": "]}),y.jsxs("li",{children:[" ",y.jsx("b",{children:""}),": "]})]})]})]})]})},Fk=se.memo(({q:r,r:e,cell:t,showCoords:i,applyAction:o,hexToPixel:l})=>{const{x:d,y:f}=l(r,e),g=Math.max(Math.abs(r),Math.abs(e),Math.abs(-r-e)),v=g<=ef,E=g===ef,A=g<=zy,C=g===zy,O=se.useMemo(()=>{const $=[];for(let Q=0;Q<6;Q++){const te=Math.PI/180*(60*Q+30);$.push(`${d+pc*Math.cos(te)},${f+pc*Math.sin(te)}`)}return $.join(" ")},[d,f]);let L="rgba(248, 250, 252, 0.3)",z="rgba(186, 230, 253, 0.2)";return v?(L="rgba(30, 58, 138, 0.6)",z="rgba(59, 130, 246, 0.3)"):A&&(L="rgba(120, 113, 108, 0.4)",z="rgba(168, 162, 158, 0.2)"),y.jsxs("g",{className:"group/hex transition-all duration-200",children:[y.jsx("polygon",{points:O,onClick:()=>o(r,e),fill:t?.color||L,fillOpacity:t?.type==="color"?.4:1,stroke:E?"#06b6d4":C?"#d97706":t?"rgba(255,255,255,0.8)":z,strokeWidth:E||C?3:t?.isCenter?2.5:.8,className:"cursor-pointer transition-all duration-300 hover:fill-slate-400/30"}),i&&r%4===0&&e%4===0&&!t?.label&&y.jsxs("text",{x:d,y:f,fontSize:"5",textAnchor:"middle",fill:v?"rgba(147, 197, 253, 0.3)":A?"rgba(68, 64, 60, 0.4)":"rgba(14, 165, 233, 0.3)",className:"pointer-events-none select-none font-mono",children:[r,",",e]}),t?.label&&y.jsx("text",{x:d,y:f+5,fontSize:"14",fontWeight:"bold",textAnchor:"middle",fill:"white",className:"pointer-events-none select-none drop-shadow-md",children:t.label}),t?.isCenter&&y.jsx("g",{transform:`translate(${d-8}, ${f-8})`,className:"pointer-events-none",children:t.type==="hq"?y.jsx(m0,{size:16,className:"text-white drop-shadow-[0_0_10px_rgba(255,255,255,0.8)]"}):y.jsx(Ua,{size:16,className:"text-white animate-pulse"})})]})}),ju=({active:r,onClick:e,icon:t,label:i})=>y.jsx("button",{onClick:e,title:i,className:`p-2.5 rounded-md flex flex-col items-center gap-1 transition-all ${r?"bg-blue-600 text-white shadow-inner":"text-slate-400 hover:bg-slate-700 hover:text-slate-200"}`,children:t}),By=({forcePlanner:r=!1})=>{const{t:e}=bo(),{adminData:t}=a0(),[i,o]=se.useState([]),[l,d]=se.useState(!0),[f,g]=se.useState(""),[v,E]=se.useState(null),[A,C]=se.useState([]),[O,L]=se.useState(r?"planner":"members"),[z,$]=se.useState(""),[Q,te]=se.useState({key:"submittedAt",direction:"desc"}),[J,oe]=se.useState(null),[Se,ye]=se.useState(!1),[R,x]=se.useState({gameId:"",alliance:"",team1Power:"",team2Power:"",team3Power:""}),[I,P]=se.useState(!1);se.useEffect(()=>{t&&b()},[t]);const b=async()=>{d(!0),g("");try{const j=await Ak(t?.allowedAlliances||[]);Array.isArray(j)&&(o(j),E(Rk(j)),C(bk(j)))}catch(j){g(e("error_occurred")+j.message),Re.error(e("error_occurred"))}finally{d(!1)}},V=j=>{let N="desc";Q.key===j&&Q.direction==="desc"&&(N="asc"),te({key:j,direction:N})},k=async(j,N)=>{if(window.confirm(e("delete_confirm").replace("{id}",N)))try{const W=await Pk(j);W.success?(Re.success(e("delete_success")),b()):Re.error(e("error_occurred")+W.error)}catch(W){Re.error(e("error_occurred")+W.message)}},Ne=j=>{oe(j),x({gameId:j.gameId||"",alliance:j.alliance||"",team1Power:j.team1Power||0,team2Power:j.team2Power||0,team3Power:j.team3Power||0}),ye(!0)},ze=j=>{const{name:N,value:W}=j.target;x(ie=>({...ie,[N]:W}))},qe=async j=>{if(j.preventDefault(),!!J){P(!0);try{const N={...J,gameId:R.gameId,alliance:R.alliance,team1Power:Number(R.team1Power||0),team2Power:Number(R.team2Power||0),team3Power:Number(R.team3Power||0)};(await Ck(J.id,N)).success&&(Re.success(e("update_success")),ye(!1),oe(null),b())}catch(N){Re.error(e("error_occurred")+N.message)}finally{P(!1)}}},ge=i.filter(j=>j.gameId?.toLowerCase().includes(z.toLowerCase())||j.alliance?.toLowerCase().includes(z.toLowerCase())).sort((j,N)=>{let W,ie;return Q.key==="totalPower"?(W=(j.team1Power||0)+(j.team2Power||0)+(j.team3Power||0),ie=(N.team1Power||0)+(N.team2Power||0)+(N.team3Power||0)):(W=j[Q.key],ie=N[Q.key]),W<ie?Q.direction==="asc"?-1:1:W>ie?Q.direction==="asc"?1:-1:0});ge.length,ge.length>0&&Math.round(ge.reduce((j,N)=>j+(N.team1Power||0),0)/ge.length),ge.length>0&&Math.round(ge.reduce((j,N)=>j+(N.team2Power||0),0)/ge.length),ge.length>0&&Math.round(ge.reduce((j,N)=>j+(N.team3Power||0),0)/ge.length);const ee=()=>{const j=[e("member_id"),e("alliance_label"),e("team1"),e("team2"),e("team3"),e("total_eval"),e("update_record")],N=ge.map(pe=>[pe.gameId,pe.alliance,pe.team1Power,pe.team2Power,pe.team3Power,(pe.team1Power||0)+(pe.team2Power||0)+(pe.team3Power||0),Uy(pe.submittedAt)]),W=[j.join(","),...N.map(pe=>pe.join(","))].join(`
`),ie=new Blob(["\uFEFF"+W],{type:"text/csv;charset=utf-8;"}),_e=document.createElement("a");_e.href=URL.createObjectURL(ie),_e.download=`_${new Date().toISOString().split("T")[0]}.csv`,_e.click(),Re.info(e("preparing_export"))},ce=j=>Q.key!==j?y.jsx(Ou,{size:12,className:"opacity-20 translate-y-[2px]"}):Q.direction==="asc"?y.jsx(rk,{size:14,className:"text-blue-500"}):y.jsx(tk,{size:14,className:"text-blue-500"});return l?y.jsxs("div",{className:"flex flex-col items-center justify-center p-20 space-y-4 text-center animate-in fade-in transition-all duration-700",children:[y.jsx(Ou,{className:"w-10 h-10 text-blue-500 animate-spin"}),y.jsx("p",{className:"text-gray-400 font-black tracking-widest uppercase text-[10px]",children:e("loading_data")})]}):y.jsxs("div",{className:"space-y-8 animate-in fade-in duration-700 relative",children:[Se&&y.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[y.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>ye(!1)}),y.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg relative z-10 overflow-hidden animate-in zoom-in duration-300 border border-gray-100",children:[y.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 p-6 text-white flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-md border border-white/20",children:y.jsx(Ly,{size:20})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-black text-lg tracking-tight",children:e("edit_record")}),y.jsx("p",{className:"text-xs text-indigo-100 font-bold opacity-80 uppercase tracking-widest",children:J?.gameId})]})]}),y.jsx("button",{onClick:()=>ye(!1),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:y.jsx(xk,{size:20})})]}),y.jsxs("form",{onSubmit:qe,className:"p-8 space-y-6",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1 flex items-center gap-1.5",children:[y.jsx(_0,{size:12,className:"text-blue-500"})," ",e("game_id")]}),y.jsx("input",{type:"text",name:"gameId",value:R.gameId,onChange:ze,className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1 flex items-center gap-1.5",children:[y.jsx(fc,{size:12,className:"text-green-500"})," ",e("alliance_label")]}),y.jsx("input",{type:"text",name:"alliance",value:R.alliance,onChange:ze,className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold"})]})]}),y.jsx("div",{className:"h-px bg-gray-100 italic flex items-center justify-center",children:y.jsx("span",{className:"bg-white px-3 text-[9px] font-black text-gray-300 uppercase tracking-[0.3em]",children:e("combat_details")})}),y.jsx("div",{className:"space-y-4",children:[{name:"team1Power",label:e("s1_power")},{name:"team2Power",label:e("s2_power")},{name:"team3Power",label:e("s3_power")}].map(j=>y.jsxs("div",{className:"flex items-center gap-4 group",children:[y.jsx("label",{className:"w-24 text-[10px] font-black text-gray-400 uppercase tracking-widest group-hover:text-indigo-500 transition-colors",children:j.label}),y.jsxs("div",{className:"flex-grow relative",children:[y.jsx("input",{type:"number",name:j.name,value:R[j.name],onChange:ze,className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 transition-all text-sm font-mono font-bold"}),y.jsx(g0,{size:14,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300 group-focus-within:text-indigo-400 transition-colors"})]})]},j.name))}),y.jsxs("div",{className:"pt-6 flex gap-4",children:[y.jsx("button",{type:"button",onClick:()=>ye(!1),className:"flex-1 py-3 px-6 rounded-xl border border-gray-200 text-gray-400 text-xs font-black uppercase tracking-widest hover:bg-gray-50 transition-all",children:e("cancel")}),y.jsxs("button",{type:"submit",disabled:I,className:"flex-[2] py-3 px-6 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100 flex items-center justify-center gap-2 cursor-pointer disabled:opacity-50",children:[I?y.jsx(Ou,{size:14,className:"animate-spin"}):y.jsx(Zf,{size:14}),y.jsx("span",{children:e("confirm_save")})]})]})]})]})]}),!r&&y.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsxs("h2",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-2 uppercase",children:[y.jsx(My,{className:"text-indigo-600"})," ",e("admin_title")]}),y.jsx("p",{className:"text-sm text-gray-500",children:e("admin_desc")})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("div",{className:"bg-white border border-gray-100 p-1 rounded-xl flex shadow-sm mr-2",children:[y.jsxs("button",{onClick:()=>L("members"),className:`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-tight flex items-center gap-1.5 transition-all ${O==="members"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:bg-gray-50"}`,children:[y.jsx(oi,{size:14})," ",e("view_members")]}),y.jsxs("button",{onClick:()=>L("alliances"),className:`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-tight flex items-center gap-1.5 transition-all ${O==="alliances"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:bg-gray-50"}`,children:[y.jsx(dk,{size:14})," ",e("view_alliances")]})]}),y.jsxs("button",{onClick:b,className:"p-2.5 bg-white border border-gray-200 text-gray-600 rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-all shadow-sm flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[y.jsx(Ou,{size:14})," ",y.jsx("span",{className:"hidden sm:inline",children:e("refresh")})]}),y.jsxs("button",{onClick:ee,className:"p-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all shadow-md shadow-indigo-100 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[y.jsx(p0,{size:14})," ",e("export_csv")]})]})]}),v&&!r&&y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:e("total_member"),value:i.length,icon:y.jsx(oi,{}),color:"blue"},{label:e("alliance_total_power"),value:tr(i.reduce((j,N)=>j+(N.team1Power||0)+(N.team2Power||0)+(N.team3Power||0),0)),icon:y.jsx(_k,{}),color:"green"},{label:e("alliance_avg_power"),value:tr(i.length>0?Math.round(i.reduce((j,N)=>j+(N.team1Power||0)+(N.team2Power||0)+(N.team3Power||0),0)/i.length):0),icon:y.jsx(Ek,{}),color:"indigo"},{label:e("data_count"),value:i.length,icon:y.jsx(My,{}),color:"purple"}].map((j,N)=>y.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm flex items-center gap-4 group hover:shadow-md transition-shadow",children:[y.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-50 flex items-center justify-center group-hover:bg-indigo-50 transition-colors",children:y.jsx("div",{className:"text-indigo-600 group-hover:scale-110 transition-transform",children:j.icon})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:j.label}),y.jsx("p",{className:"text-xl font-black text-gray-800 tracking-tighter tabular-nums leading-none mt-1",children:j.value})]})]},N))}),y.jsxs("div",{className:r?"":"bg-white rounded-2xl border border-gray-100 shadow-xl shadow-gray-200/40 relative overflow-hidden",children:[O!=="planner"&&!r&&y.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50/30 flex flex-col sm:flex-row gap-4",children:[y.jsxs("div",{className:"relative flex-grow",children:[y.jsx(jy,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),y.jsx("input",{type:"text",placeholder:e("search_placeholder"),value:z,onChange:j=>$(j.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 outline-none transition-all text-xs font-bold"})]}),y.jsxs("button",{className:"px-4 py-2.5 bg-white border border-gray-200 text-gray-400 rounded-xl hover:bg-gray-50 transition-all text-[10px] font-black uppercase tracking-widest flex items-center gap-2",children:[y.jsx(ok,{size:14})," ",e("filter_options")]})]}),y.jsx("div",{className:r?"":"overflow-x-auto",children:O==="planner"?y.jsx("div",{className:r?"":"p-4 bg-slate-950",children:y.jsx(jk,{})}):O==="alliances"?y.jsxs("table",{className:"w-full text-left border-collapse",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-gray-50/50",children:[y.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("alliance_label")}),y.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("total_member")}),y.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-indigo-600 bg-indigo-50/10 uppercase tracking-widest",children:e("avg_s1")}),y.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-indigo-600 bg-indigo-50/10 uppercase tracking-widest",children:e("avg_s2")}),y.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-indigo-600 bg-indigo-50/10 uppercase tracking-widest",children:e("avg_s3")}),y.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("alliance_avg_power")}),y.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("last_updated")})]})}),y.jsx("tbody",{className:"divide-y divide-gray-100",children:A.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:"7",className:"px-6 py-20 text-center text-gray-400 font-bold uppercase text-xs tracking-widest opacity-20",children:e("no_data")})}):A.filter(j=>j.name.toLowerCase().includes(z.toLowerCase())).map(j=>y.jsxs("tr",{className:"group hover:bg-indigo-50/20 transition-colors",children:[y.jsx("td",{className:"px-6 py-5",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-[10px] font-black text-indigo-500 border border-indigo-200",children:y.jsx(fc,{size:14})}),y.jsx("span",{className:"font-bold text-gray-800 tracking-tight",children:j.name})]})}),y.jsx("td",{className:"px-6 py-5",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(oi,{size:14,className:"text-gray-300"}),y.jsx("span",{className:"font-bold text-gray-600 tabular-nums",children:j.memberCount})]})}),y.jsx("td",{className:"px-6 py-5",children:y.jsx("span",{className:"font-black text-indigo-600 font-mono text-sm tabular-nums tracking-tighter",children:tr(j.avgTeam1Power)})}),y.jsx("td",{className:"px-6 py-5",children:y.jsx("span",{className:"font-black text-indigo-600 font-mono text-sm tabular-nums tracking-tighter",children:tr(j.avgTeam2Power)})}),y.jsx("td",{className:"px-6 py-5",children:y.jsx("span",{className:"font-black text-indigo-600 font-mono text-sm tabular-nums tracking-tighter",children:tr(j.avgTeam3Power)})}),y.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:tr(j.avgPower)}),y.jsx("td",{className:"px-6 py-5",children:y.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400 text-[10px] font-bold uppercase tabular-nums",children:[y.jsx(hc,{size:12}),j.lastUpdated?j.lastUpdated.toLocaleString("zh-TW").split(" ")[0]:"---"]})})]},j.name))})]}):y.jsxs("table",{className:"w-full text-left border-collapse",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-gray-50/50",children:[[{key:"gameId",label:e("member_id")},{key:"alliance",label:e("alliance_label")},{key:"team1Power",label:e("s1_power")},{key:"team2Power",label:e("s2_power")},{key:"team3Power",label:e("s3_power")},{key:"totalPower",label:e("total_eval"),focus:!0},{key:"submittedAt",label:e("update_record")}].map(j=>y.jsx("th",{onClick:()=>V(j.key),className:`px-6 py-4 text-[10px] font-black uppercase tracking-widest cursor-pointer hover:bg-gray-100/50 transition-colors select-none ${j.focus?"text-indigo-600 bg-indigo-50/10":"text-gray-400"}`,children:y.jsxs("div",{className:"flex items-center justify-between gap-1",children:[j.label,ce(j.key)]})},j.key)),y.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:e("actions")})]})}),y.jsx("tbody",{className:"divide-y divide-gray-100",children:ge.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:"8",className:"px-6 py-20 text-center",children:y.jsxs("div",{className:"flex flex-col items-center space-y-4 opacity-20",children:[y.jsx(jy,{size:48}),y.jsx("p",{className:"font-bold uppercase text-xs tracking-widest",children:e(z?"no_results":"no_data")})]})})}):ge.map(j=>{const N=(j.team1Power||0)+(j.team2Power||0)+(j.team3Power||0);return y.jsxs("tr",{className:"group hover:bg-indigo-50/20 transition-colors",children:[y.jsx("td",{className:"px-6 py-5",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-[10px] font-black text-gray-500 border border-gray-200",children:j.gameId?.substring(0,2).toUpperCase()}),y.jsx("span",{className:"font-bold text-gray-800 tracking-tight",children:j.gameId})]})}),y.jsx("td",{className:"px-6 py-5 text-xs font-bold text-gray-500 tracking-tighter",children:j.alliance}),y.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:tr(j.team1Power)}),y.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:tr(j.team2Power)}),y.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:tr(j.team3Power)}),y.jsx("td",{className:"px-6 py-5",children:y.jsx("span",{className:"font-black text-indigo-600 font-mono text-base tabular-nums tracking-tighter",children:tr(N)})}),y.jsx("td",{className:"px-6 py-5",children:y.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400 text-[10px] font-bold uppercase tabular-nums",children:[y.jsx(hc,{size:12}),Uy(j.submittedAt).split(" ")[0]]})}),y.jsx("td",{className:"px-6 py-5 text-center",children:y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("button",{onClick:()=>Ne(j),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",title:e("edit"),children:y.jsx(Ly,{size:16})}),y.jsx("button",{onClick:()=>k(j.id,j.gameId),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",title:e("delete"),children:y.jsx(Zh,{size:16})})]})})]},j.id)})})]})}),y.jsxs("div",{className:"p-4 bg-gray-50/50 border-t border-gray-100 text-[9px] font-black text-gray-300 uppercase tracking-[0.2em] flex justify-between items-center",children:[y.jsx("span",{children:e("intel_v2")}),y.jsxs("span",{className:"bg-white px-2 py-0.5 rounded border border-gray-200 text-gray-400",children:[e(O==="alliances"?"alliance_label":"data_count"),": ",O==="alliances"?A.length:ge.length]})]})]})]})},Uk=()=>{const{t:r}=bo(),[e,t]=se.useState({speedup_1min:164,power_10:5,bounty_orange:246800,refine_stone:16400,pulse_module:411300,survivor_orange:164500,survivor_purple:41100,survivor_blue:8200,diamond_1:30}),[i,o]=se.useState({speedup_d:"",speedup_h:"",speedup_m:"",power_start:"",power_end:"",bounty_count:"",refine_count:"",pulse_count:"",sur_orange_count:"",sur_purple_count:"",sur_blue_count:"",diamond_count:""}),[l,d]=se.useState(!1);se.useEffect(()=>{const L=localStorage.getItem("duel_tue_base_values");if(L)try{t(JSON.parse(L))}catch(z){console.error("Failed to load base values",z)}},[]);const f=L=>{const{name:z,value:$}=L.target;($===""||/^\d+$/.test($))&&o(Q=>({...Q,[z]:$}))},g=(L,z)=>{(z===""||/^\d+(\.\d+)?$/.test(z))&&t($=>({...$,[L]:Number(z)||0}))},v=()=>{localStorage.setItem("duel_tue_base_values",JSON.stringify(e)),d(!1)},E=()=>{o({speedup_d:"",speedup_h:"",speedup_m:"",power_start:"",power_end:"",bounty_count:"",refine_count:"",pulse_count:"",sur_orange_count:"",sur_purple_count:"",sur_blue_count:"",diamond_count:""})},A=se.useMemo(()=>{const L=(Number(i.speedup_d)||0)*1440+(Number(i.speedup_h)||0)*60+(Number(i.speedup_m)||0),z=L*e.speedup_1min,Q=Math.max(0,(Number(i.power_end)||0)-(Number(i.power_start)||0))/10*e.power_10,te=(Number(i.bounty_count)||0)*e.bounty_orange,J=(Number(i.refine_count)||0)*e.refine_stone,oe=(Number(i.pulse_count)||0)*e.pulse_module,Se=(Number(i.sur_orange_count)||0)*e.survivor_orange,ye=(Number(i.sur_purple_count)||0)*e.survivor_purple,R=(Number(i.sur_blue_count)||0)*e.survivor_blue,x=(Number(i.diamond_count)||0)*e.diamond_1,I=z+Q+te+J+oe+Se+ye+R+x;return{speedup:z,power:Q,bounty:te,refine:J,pulse:oe,surOrange:Se,surPurple:ye,surBlue:R,diamond:x,total:I,totalMinutes:L}},[i,e]),C=L=>new Intl.NumberFormat("en-US").format(Math.floor(L)),O=({icon:L,title:z,name:$,value:Q,placeholder:te,unit:J,pts:oe,colorClass:Se})=>y.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:`p-2 rounded-lg ${Se} bg-opacity-10`,children:y.jsx(L,{size:18,className:Se.replace("bg-","text-")})}),y.jsx("span",{className:"font-bold text-gray-700 text-sm",children:z})]}),y.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[oe," pts / ",J]})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",name:$,value:Q,onChange:f,placeholder:te||r("search_placeholder").replace("...",""),className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all"}),y.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md",children:J})]}),y.jsx("div",{className:"mt-2 flex justify-end",children:y.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[r("est_score"),": ",y.jsx("span",{className:"text-blue-600 font-black",children:C(A[$.split("_")[0]])})]})})]});return y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[y.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-blue-900 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"}),y.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-500/10 rounded-full translate-y-1/3 -translate-x-1/4 blur-2xl"}),y.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"px-3 py-1 bg-blue-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-blue-400/30",children:"Alliance Duel"}),y.jsx("div",{className:"px-3 py-1 bg-orange-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-orange-400/30",children:r("tuesday")})]}),y.jsx("h2",{className:"text-3xl font-black tracking-tight",children:r("tue_title")}),y.jsx("p",{className:"text-blue-200/60 text-sm font-medium",children:r("tue_desc")})]}),y.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[y.jsx("div",{className:"text-blue-200 text-[10px] font-black uppercase tracking-widest mb-1",children:r("total_est_score")}),y.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-blue-100 to-indigo-100",children:C(A.total)}),y.jsxs("div",{className:"mt-4 flex gap-2",children:[y.jsxs("button",{onClick:E,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[y.jsx(vk,{size:14})," ",r("reset_data")]}),y.jsx("button",{onClick:()=>d(!l),className:`p-2 rounded-xl transition-all border ${l?"bg-white text-blue-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:y.jsx(Fy,{size:18})})]})]})]})]}),l&&y.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl border border-blue-100 animate-in slide-in-from-top-4 duration-300",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[y.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-200",children:y.jsx(Fy,{className:"text-white",size:20})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-black text-gray-900",children:r("score_base_settings")}),y.jsx("p",{className:"text-xs text-gray-500",children:r("base_points_desc")})]})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:Object.keys(e).map(L=>y.jsxs("div",{className:"space-y-1.5",children:[y.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest px-1",children:r(L)}),y.jsx("input",{type:"text",value:e[L],onChange:z=>g(L,z.target.value),className:"w-full bg-gray-50 border border-gray-100 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"})]},L))}),y.jsxs("button",{onClick:v,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[y.jsx(Zf,{size:18})," ",r("save_and_apply")]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[y.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-blue-100 border-l-4 border-l-blue-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"p-2 rounded-lg bg-blue-500 bg-opacity-10",children:y.jsx(sk,{size:18,className:"text-blue-500"})}),y.jsx("span",{className:"font-bold text-gray-700 text-sm",children:r("speedup_title")})]}),y.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.speedup_1min," pts / ",r("unit_min")]})]}),y.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("unit_day")}),y.jsx("input",{type:"text",name:"speedup_d",value:i.speedup_d,onChange:f,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all text-sm"})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("unit_hour")}),y.jsx("input",{type:"text",name:"speedup_h",value:i.speedup_h,onChange:f,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all text-sm"})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("unit_min")}),y.jsx("input",{type:"text",name:"speedup_m",value:i.speedup_m,onChange:f,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all text-sm"})]})]}),y.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[y.jsxs("span",{className:"text-gray-400 px-1",children:[r("current_total"),": ",y.jsxs("span",{className:"text-blue-600",children:[C(A.totalMinutes)," ",r("unit_min")]})]}),y.jsxs("span",{className:"text-gray-400",children:[r("est_score"),": ",y.jsx("span",{className:"text-blue-600 font-black",children:C(A.speedup)})]})]})]}),y.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-orange-100 border-l-4 border-l-orange-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"p-2 rounded-lg bg-orange-500 bg-opacity-10",children:y.jsx(ZS,{size:18,className:"text-orange-500"})}),y.jsx("span",{className:"font-bold text-gray-700 text-sm",children:r("power_increase")})]}),y.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.power_10," pts / 10 Power"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("power_start")}),y.jsx("input",{type:"text",name:"power_start",value:i.power_start,onChange:f,placeholder:"1000",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-orange-500/20 transition-all text-sm"})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:r("power_end")}),y.jsx("input",{type:"text",name:"power_end",value:i.power_end,onChange:f,placeholder:"2000",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-orange-500/20 transition-all text-sm"})]})]}),y.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[y.jsxs("span",{className:"text-gray-400 px-1",children:[r("power_diff"),": ",y.jsx("span",{className:"text-orange-600",children:C(Math.max(0,(Number(i.power_end)||0)-(Number(i.power_start)||0)))})]}),y.jsxs("span",{className:"text-gray-400",children:[r("est_score"),": ",y.jsx("span",{className:"text-orange-600 font-black",children:C(A.power)})]})]})]}),y.jsx(O,{icon:y0,title:r("bounty_title"),name:"bounty_count",value:i.bounty_count,unit:r("unit_count"),pts:C(e.bounty_orange),colorClass:"bg-yellow-500"}),y.jsx(O,{icon:lk,title:r("refine_title"),name:"refine_count",value:i.refine_count,unit:r("unit_item"),pts:C(e.refine_stone),colorClass:"bg-red-500"}),y.jsx(O,{icon:ik,title:r("pulse_title"),name:"pulse_count",value:i.pulse_count,unit:r("unit_item"),pts:C(e.pulse_module),colorClass:"bg-purple-500"}),y.jsx(O,{icon:oi,title:r("sur_orange"),name:"sur_orange_count",value:i.sur_orange_count,unit:r("unit_person"),pts:C(e.survivor_orange),colorClass:"bg-orange-600"}),y.jsx(O,{icon:oi,title:r("sur_purple"),name:"sur_purple_count",value:i.sur_purple_count,unit:r("unit_person"),pts:C(e.survivor_purple),colorClass:"bg-purple-400"}),y.jsx(O,{icon:oi,title:r("sur_blue"),name:"sur_blue_count",value:i.sur_blue_count,unit:r("unit_person"),pts:C(e.survivor_blue),colorClass:"bg-blue-400"}),y.jsx(O,{icon:ak,title:r("diamond_gift"),name:"diamond_count",value:i.diamond_count,unit:r("unit_item"),pts:e.diamond_1,colorClass:"bg-cyan-500"})]}),y.jsxs("div",{className:"bg-blue-50/50 rounded-2xl p-6 border border-blue-100 flex gap-4",children:[y.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:y.jsx(uk,{size:16,className:"text-blue-600"})}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("p",{className:"text-xs font-bold text-blue-900 underline decoration-blue-200 decoration-2 underline-offset-2",children:r("tips_title")}),y.jsx("p",{className:"text-xs text-blue-700 leading-relaxed font-medium",children:r("tips_desc")})]})]})]})},zk=()=>{const{t:r}=bo(),[e,t]=se.useState(2),i=["monday","tuesday","wednesday","thursday","friday","saturday"];return y.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-black text-gray-900 tracking-tight",children:r("duel_calculator")}),y.jsx("p",{className:"text-gray-500 text-sm font-medium",children:r("tue_desc")})]}),y.jsx("div",{className:"flex bg-white p-1.5 rounded-2xl shadow-sm border border-gray-100 overflow-x-auto max-w-full",children:[1,2,3,4,5,6].map(o=>y.jsxs("button",{onClick:()=>t(o),disabled:o!==2,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all whitespace-nowrap ${e===o?"bg-gray-900 text-white shadow-lg shadow-gray-200":o===2?"text-gray-400 hover:text-gray-600 hover:bg-gray-50":"text-gray-200 cursor-not-allowed"}`,children:[y.jsx(hc,{size:14}),r(i[o-1]),o!==2&&y.jsxs("span",{className:"text-[8px] opacity-40 ml-1",children:["(",r("dev_in_progress"),")"]})]},o))})]}),e===2?y.jsx(Uk,{}):y.jsxs("div",{className:"bg-white rounded-[2rem] p-12 text-center border-2 border-dashed border-gray-100",children:[y.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-2xl flex items-center justify-center mx-auto mb-4",children:y.jsx(hc,{className:"text-gray-200",size:32})}),y.jsxs("h3",{className:"text-lg font-black text-gray-900 mb-2",children:[r(i[e-1])," ",r("duel_calculator")," ",r("dev_in_progress")]}),y.jsx("p",{className:"text-gray-400 text-sm font-medium",children:r("calc_dev_desc")})]})]})};function Bk(){const[r,e]=se.useState("form"),[t,i]=se.useState(!1),{user:o,isAdmin:l,loading:d}=a0(),{lang:f,t:g,toggleLang:v}=bo();se.useEffect(()=>{const O=localStorage.getItem("isLoginMode")==="true";!d&&!o&&!t&&!O&&rx(ri).catch(L=>{console.error(":",L)}),!o&&O&&i(!0)},[o,d,t]),se.useEffect(()=>{o&&(localStorage.removeItem("isLoginMode"),i(!1))},[o]);const E=async()=>{try{localStorage.removeItem("isLoginMode"),i(!1),await Mg(ri)}catch(O){console.error(":",O)}},A=async()=>{localStorage.setItem("isLoginMode","true"),i(!0),await Mg(ri)},C=()=>{localStorage.removeItem("isLoginMode"),i(!1)};return d?y.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 space-y-4",children:[y.jsx(fk,{className:"w-10 h-10 text-blue-600 animate-spin"}),y.jsx("p",{className:"text-gray-500 font-medium animate-pulse",children:g("loading_system")})]}):t&&!o?y.jsx("div",{className:"min-h-screen bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-blue-100 via-white to-indigo-100 flex flex-col items-center justify-center p-4",children:y.jsxs("div",{className:"w-full max-w-md animate-in fade-in zoom-in duration-500",children:[y.jsx(YS,{}),y.jsx("button",{onClick:C,className:"w-full mt-6 py-3 text-gray-400 hover:text-gray-600 text-sm font-bold flex items-center justify-center gap-2 transition-colors border border-transparent hover:border-gray-200 rounded-xl",children:g("back_to_guest")})]})}):o?y.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] flex flex-col font-sans selection:bg-indigo-100 selection:text-indigo-900",children:[y.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-gray-100 shadow-sm",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-18 flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-3 group cursor-default",children:[y.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-200 group-hover:rotate-12 transition-transform duration-300",children:y.jsx(Ua,{className:"text-white w-6 h-6"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-black text-gray-900 tracking-tight leading-none",children:g("title")}),y.jsx("p",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-[0.2em] mt-1 opacity-80",children:g("subtitle")})]})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-3 py-1.5 rounded-full border border-gray-100 bg-gray-50 text-xs font-bold text-gray-600 hover:bg-gray-100 transition-all",children:[y.jsx(ck,{size:14,className:"text-blue-500"}),f==="zh"?"English":""]}),y.jsxs("div",{className:"hidden md:flex items-center gap-4 py-1.5 px-3 bg-gray-50 rounded-full border border-gray-100",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:`w-2 h-2 rounded-full ${o.isAnonymous?"bg-orange-400 animate-pulse":"bg-green-500"}`}),y.jsx("span",{className:"text-xs font-bold text-gray-600 tracking-wide",children:o.isAnonymous?g("guest_mode"):o.email?.split("@")[0]})]}),l&&y.jsx("span",{className:"bg-indigo-600 text-[10px] text-white px-2 py-0.5 rounded-full font-black uppercase tracking-wider shadow-sm",children:g("admin_tag")})]}),!o.isAnonymous&&y.jsx("button",{onClick:E,className:"group flex items-center gap-2 text-gray-400 hover:text-red-500 transition-colors p-2 rounded-lg hover:bg-red-50",title:g("logout"),children:y.jsx(pk,{size:20,className:"group-hover:-translate-x-0.5 transition-transform"})})]})]})}),y.jsx("main",{className:"flex-grow",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12",children:[y.jsxs("div",{className:"inline-flex p-1 bg-white border border-gray-200 rounded-2xl mb-10 shadow-sm overflow-x-auto max-w-full",children:[y.jsxs("button",{onClick:()=>e("form"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 whitespace-nowrap ${r==="form"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[y.jsx(hk,{size:18})," ",g("personal_entry")]}),y.jsxs("button",{onClick:()=>e("calculator"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 whitespace-nowrap ${r==="calculator"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[y.jsx(ek,{size:18})," ",g("duel_calculator")]}),l&&y.jsxs(y.Fragment,{children:[y.jsxs("button",{onClick:()=>e("admin"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 whitespace-nowrap ${r==="admin"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[y.jsx(wk,{size:18})," ",g("all_management")]}),y.jsxs("button",{onClick:()=>e("planner"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 whitespace-nowrap ${r==="planner"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[y.jsx(mk,{size:18})," ",g("view_planner")]})]})]}),y.jsxs("div",{className:"relative",children:[r==="admin"&&l&&y.jsx(By,{}),r==="planner"&&l&&y.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:y.jsx(By,{forcePlanner:!0})}),r==="form"&&y.jsx(kk,{user:o}),r==="calculator"&&y.jsx(zk,{})]})]})}),y.jsx("footer",{className:"bg-white border-t border-gray-100 py-12 px-4",children:y.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-8",children:[y.jsxs("div",{className:"flex flex-col items-center md:items-start gap-2",children:[y.jsxs("div",{className:"flex items-center gap-2 opacity-30 grayscale",children:[y.jsx(Ua,{size:20}),y.jsx("span",{className:"font-black text-lg tracking-tighter uppercase whitespace-nowrap",children:g("title")})]}),y.jsx("p",{className:"text-gray-400 text-xs font-medium",children:g("footer_text")})]}),y.jsxs("div",{className:"flex items-center gap-8",children:[y.jsxs("div",{className:"text-[10px] font-black text-gray-300 uppercase tracking-[0.3em] hidden sm:block",children:["Intel Status: ",y.jsx("span",{className:"text-green-500",children:g("status_operational")})]}),o.isAnonymous&&y.jsxs("button",{onClick:A,className:"group flex items-center gap-2 py-2 px-4 rounded-full border border-gray-200 text-[11px] font-black text-gray-500 hover:bg-gray-900 hover:text-white hover:border-gray-900 transition-all shadow-sm",children:[g("admin_login_gate")," ",y.jsx(nk,{size:14,className:"group-hover:translate-x-0.5 transition-transform"})]})]})]})}),y.jsx(QS,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!1,theme:"light"})]}):y.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 space-y-4",children:[y.jsx(Ua,{className:"w-12 h-12 text-blue-600 animate-bounce"}),y.jsx("div",{className:"text-gray-600 font-black tracking-widest uppercase text-xs",children:g("preparing_env")})]})}bw.createRoot(document.getElementById("root")).render(y.jsx(Ke.StrictMode,{children:y.jsx(LS,{children:y.jsx(Bk,{})})}));
