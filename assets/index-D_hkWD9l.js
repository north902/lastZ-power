(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function ly(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Th={exports:{}},La={},Nh={exports:{}},De={};var Eg;function Gx(){if(Eg)return De;Eg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),k=Symbol.iterator;function A(R){return R===null||typeof R!="object"?null:(R=k&&R[k]||R["@@iterator"],typeof R=="function"?R:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,q={};function V(R,Y,de){this.props=R,this.context=Y,this.refs=q,this.updater=de||O}V.prototype.isReactComponent={},V.prototype.setState=function(R,Y){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,Y,"setState")},V.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function J(){}J.prototype=V.prototype;function F(R,Y,de){this.props=R,this.context=Y,this.refs=q,this.updater=de||O}var D=F.prototype=new J;D.constructor=F,$(D,V.prototype),D.isPureReactComponent=!0;var G=Array.isArray,ie=Object.prototype.hasOwnProperty,ce={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function b(R,Y,de){var Ee,we={},Pe=null,Me=null;if(Y!=null)for(Ee in Y.ref!==void 0&&(Me=Y.ref),Y.key!==void 0&&(Pe=""+Y.key),Y)ie.call(Y,Ee)&&!j.hasOwnProperty(Ee)&&(we[Ee]=Y[Ee]);var ze=arguments.length-2;if(ze===1)we.children=de;else if(1<ze){for(var Qe=Array(ze),xt=0;xt<ze;xt++)Qe[xt]=arguments[xt+2];we.children=Qe}if(R&&R.defaultProps)for(Ee in ze=R.defaultProps,ze)we[Ee]===void 0&&(we[Ee]=ze[Ee]);return{$$typeof:n,type:R,key:Pe,ref:Me,props:we,_owner:ce.current}}function N(R,Y){return{$$typeof:n,type:R.type,key:Y,ref:R.ref,props:R.props,_owner:R._owner}}function I(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function P(R){var Y={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(de){return Y[de]})}var C=/\/+/g;function T(R,Y){return typeof R=="object"&&R!==null&&R.key!=null?P(""+R.key):Y.toString(36)}function K(R,Y,de,Ee,we){var Pe=typeof R;(Pe==="undefined"||Pe==="boolean")&&(R=null);var Me=!1;if(R===null)Me=!0;else switch(Pe){case"string":case"number":Me=!0;break;case"object":switch(R.$$typeof){case n:case e:Me=!0}}if(Me)return Me=R,we=we(Me),R=Ee===""?"."+T(Me,0):Ee,G(we)?(de="",R!=null&&(de=R.replace(C,"$&/")+"/"),K(we,Y,de,"",function(xt){return xt})):we!=null&&(I(we)&&(we=N(we,de+(!we.key||Me&&Me.key===we.key?"":(""+we.key).replace(C,"$&/")+"/")+R)),Y.push(we)),1;if(Me=0,Ee=Ee===""?".":Ee+":",G(R))for(var ze=0;ze<R.length;ze++){Pe=R[ze];var Qe=Ee+T(Pe,ze);Me+=K(Pe,Y,de,Qe,we)}else if(Qe=A(R),typeof Qe=="function")for(R=Qe.call(R),ze=0;!(Pe=R.next()).done;)Pe=Pe.value,Qe=Ee+T(Pe,ze++),Me+=K(Pe,Y,de,Qe,we);else if(Pe==="object")throw Y=String(R),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Me}function oe(R,Y,de){if(R==null)return R;var Ee=[],we=0;return K(R,Ee,"","",function(Pe){return Y.call(de,Pe,we++)}),Ee}function ge(R){if(R._status===-1){var Y=R._result;Y=Y(),Y.then(function(de){(R._status===0||R._status===-1)&&(R._status=1,R._result=de)},function(de){(R._status===0||R._status===-1)&&(R._status=2,R._result=de)}),R._status===-1&&(R._status=0,R._result=Y)}if(R._status===1)return R._result.default;throw R._result}var ue={current:null},ee={transition:null},pe={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:ee,ReactCurrentOwner:ce};function U(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:oe,forEach:function(R,Y,de){oe(R,function(){Y.apply(this,arguments)},de)},count:function(R){var Y=0;return oe(R,function(){Y++}),Y},toArray:function(R){return oe(R,function(Y){return Y})||[]},only:function(R){if(!I(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},De.Component=V,De.Fragment=t,De.Profiler=o,De.PureComponent=F,De.StrictMode=i,De.Suspense=m,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,De.act=U,De.cloneElement=function(R,Y,de){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var Ee=$({},R.props),we=R.key,Pe=R.ref,Me=R._owner;if(Y!=null){if(Y.ref!==void 0&&(Pe=Y.ref,Me=ce.current),Y.key!==void 0&&(we=""+Y.key),R.type&&R.type.defaultProps)var ze=R.type.defaultProps;for(Qe in Y)ie.call(Y,Qe)&&!j.hasOwnProperty(Qe)&&(Ee[Qe]=Y[Qe]===void 0&&ze!==void 0?ze[Qe]:Y[Qe])}var Qe=arguments.length-2;if(Qe===1)Ee.children=de;else if(1<Qe){ze=Array(Qe);for(var xt=0;xt<Qe;xt++)ze[xt]=arguments[xt+2];Ee.children=ze}return{$$typeof:n,type:R.type,key:we,ref:Pe,props:Ee,_owner:Me}},De.createContext=function(R){return R={$$typeof:h,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:l,_context:R},R.Consumer=R},De.createElement=b,De.createFactory=function(R){var Y=b.bind(null,R);return Y.type=R,Y},De.createRef=function(){return{current:null}},De.forwardRef=function(R){return{$$typeof:p,render:R}},De.isValidElement=I,De.lazy=function(R){return{$$typeof:w,_payload:{_status:-1,_result:R},_init:ge}},De.memo=function(R,Y){return{$$typeof:v,type:R,compare:Y===void 0?null:Y}},De.startTransition=function(R){var Y=ee.transition;ee.transition={};try{R()}finally{ee.transition=Y}},De.unstable_act=U,De.useCallback=function(R,Y){return ue.current.useCallback(R,Y)},De.useContext=function(R){return ue.current.useContext(R)},De.useDebugValue=function(){},De.useDeferredValue=function(R){return ue.current.useDeferredValue(R)},De.useEffect=function(R,Y){return ue.current.useEffect(R,Y)},De.useId=function(){return ue.current.useId()},De.useImperativeHandle=function(R,Y,de){return ue.current.useImperativeHandle(R,Y,de)},De.useInsertionEffect=function(R,Y){return ue.current.useInsertionEffect(R,Y)},De.useLayoutEffect=function(R,Y){return ue.current.useLayoutEffect(R,Y)},De.useMemo=function(R,Y){return ue.current.useMemo(R,Y)},De.useReducer=function(R,Y,de){return ue.current.useReducer(R,Y,de)},De.useRef=function(R){return ue.current.useRef(R)},De.useState=function(R){return ue.current.useState(R)},De.useSyncExternalStore=function(R,Y,de){return ue.current.useSyncExternalStore(R,Y,de)},De.useTransition=function(){return ue.current.useTransition()},De.version="18.3.1",De}var Tg;function vf(){return Tg||(Tg=1,Nh.exports=Gx()),Nh.exports}var Ng;function Qx(){if(Ng)return La;Ng=1;var n=vf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,v){var w,k={},A=null,O=null;v!==void 0&&(A=""+v),m.key!==void 0&&(A=""+m.key),m.ref!==void 0&&(O=m.ref);for(w in m)i.call(m,w)&&!l.hasOwnProperty(w)&&(k[w]=m[w]);if(p&&p.defaultProps)for(w in m=p.defaultProps,m)k[w]===void 0&&(k[w]=m[w]);return{$$typeof:e,type:p,key:A,ref:O,props:k,_owner:o.current}}return La.Fragment=t,La.jsx=h,La.jsxs=h,La}var kg;function Yx(){return kg||(kg=1,Th.exports=Qx()),Th.exports}var c=Yx(),X=vf();const Ke=ly(X);var Vc={},kh={exports:{}},rn={},Ih={exports:{}},Sh={};var Ig;function Xx(){return Ig||(Ig=1,(function(n){function e(ee,pe){var U=ee.length;ee.push(pe);e:for(;0<U;){var R=U-1>>>1,Y=ee[R];if(0<o(Y,pe))ee[R]=pe,ee[U]=Y,U=R;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var pe=ee[0],U=ee.pop();if(U!==pe){ee[0]=U;e:for(var R=0,Y=ee.length,de=Y>>>1;R<de;){var Ee=2*(R+1)-1,we=ee[Ee],Pe=Ee+1,Me=ee[Pe];if(0>o(we,U))Pe<Y&&0>o(Me,we)?(ee[R]=Me,ee[Pe]=U,R=Pe):(ee[R]=we,ee[Ee]=U,R=Ee);else if(Pe<Y&&0>o(Me,U))ee[R]=Me,ee[Pe]=U,R=Pe;else break e}}return pe}function o(ee,pe){var U=ee.sortIndex-pe.sortIndex;return U!==0?U:ee.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();n.unstable_now=function(){return h.now()-p}}var m=[],v=[],w=1,k=null,A=3,O=!1,$=!1,q=!1,V=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(ee){for(var pe=t(v);pe!==null;){if(pe.callback===null)i(v);else if(pe.startTime<=ee)i(v),pe.sortIndex=pe.expirationTime,e(m,pe);else break;pe=t(v)}}function G(ee){if(q=!1,D(ee),!$)if(t(m)!==null)$=!0,ge(ie);else{var pe=t(v);pe!==null&&ue(G,pe.startTime-ee)}}function ie(ee,pe){$=!1,q&&(q=!1,J(b),b=-1),O=!0;var U=A;try{for(D(pe),k=t(m);k!==null&&(!(k.expirationTime>pe)||ee&&!P());){var R=k.callback;if(typeof R=="function"){k.callback=null,A=k.priorityLevel;var Y=R(k.expirationTime<=pe);pe=n.unstable_now(),typeof Y=="function"?k.callback=Y:k===t(m)&&i(m),D(pe)}else i(m);k=t(m)}if(k!==null)var de=!0;else{var Ee=t(v);Ee!==null&&ue(G,Ee.startTime-pe),de=!1}return de}finally{k=null,A=U,O=!1}}var ce=!1,j=null,b=-1,N=5,I=-1;function P(){return!(n.unstable_now()-I<N)}function C(){if(j!==null){var ee=n.unstable_now();I=ee;var pe=!0;try{pe=j(!0,ee)}finally{pe?T():(ce=!1,j=null)}}else ce=!1}var T;if(typeof F=="function")T=function(){F(C)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,oe=K.port2;K.port1.onmessage=C,T=function(){oe.postMessage(null)}}else T=function(){V(C,0)};function ge(ee){j=ee,ce||(ce=!0,T())}function ue(ee,pe){b=V(function(){ee(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){$||O||($=!0,ge(ie))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(ee){switch(A){case 1:case 2:case 3:var pe=3;break;default:pe=A}var U=A;A=pe;try{return ee()}finally{A=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,pe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var U=A;A=ee;try{return pe()}finally{A=U}},n.unstable_scheduleCallback=function(ee,pe,U){var R=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?R+U:R):U=R,ee){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=U+Y,ee={id:w++,callback:pe,priorityLevel:ee,startTime:U,expirationTime:Y,sortIndex:-1},U>R?(ee.sortIndex=U,e(v,ee),t(m)===null&&ee===t(v)&&(q?(J(b),b=-1):q=!0,ue(G,U-R))):(ee.sortIndex=Y,e(m,ee),$||O||($=!0,ge(ie))),ee},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(ee){var pe=A;return function(){var U=A;A=pe;try{return ee.apply(this,arguments)}finally{A=U}}}})(Sh)),Sh}var Sg;function Jx(){return Sg||(Sg=1,Ih.exports=Xx()),Ih.exports}var Cg;function Zx(){if(Cg)return rn;Cg=1;var n=vf(),e=Jx();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){h(r,s),h(r+"Capture",s)}function h(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},k={};function A(r){return m.call(k,r)?!0:m.call(w,r)?!1:v.test(r)?k[r]=!0:(w[r]=!0,!1)}function O(r,s,a,d){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function $(r,s,a,d){if(s===null||typeof s>"u"||O(r,s,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function q(r,s,a,d,f,y,x){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=y,this.removeEmptyString=x}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){V[r]=new q(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];V[s]=new q(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){V[r]=new q(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){V[r]=new q(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){V[r]=new q(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){V[r]=new q(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){V[r]=new q(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){V[r]=new q(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){V[r]=new q(r,5,!1,r.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function F(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(J,F);V[s]=new q(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(J,F);V[s]=new q(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(J,F);V[s]=new q(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){V[r]=new q(r,1,!1,r.toLowerCase(),null,!1,!1)}),V.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){V[r]=new q(r,1,!1,r.toLowerCase(),null,!0,!0)});function D(r,s,a,d){var f=V.hasOwnProperty(s)?V[s]:null;(f!==null?f.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&($(s,a,f,d)&&(a=null),d||f===null?A(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,d=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?r.setAttributeNS(d,s,a):r.setAttribute(s,a))))}var G=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),ce=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),P=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),ee=Symbol.iterator;function pe(r){return r===null||typeof r!="object"?null:(r=ee&&r[ee]||r["@@iterator"],typeof r=="function"?r:null)}var U=Object.assign,R;function Y(r){if(R===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);R=s&&s[1]||""}return`
`+R+r}var de=!1;function Ee(r,s){if(!r||de)return"";de=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(W){var d=W}Reflect.construct(r,[],s)}else{try{s.call()}catch(W){d=W}r.call(s.prototype)}else{try{throw Error()}catch(W){d=W}r()}}catch(W){if(W&&d&&typeof W.stack=="string"){for(var f=W.stack.split(`
`),y=d.stack.split(`
`),x=f.length-1,S=y.length-1;1<=x&&0<=S&&f[x]!==y[S];)S--;for(;1<=x&&0<=S;x--,S--)if(f[x]!==y[S]){if(x!==1||S!==1)do if(x--,S--,0>S||f[x]!==y[S]){var M=`
`+f[x].replace(" at new "," at ");return r.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",r.displayName)),M}while(1<=x&&0<=S);break}}}finally{de=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?Y(r):""}function we(r){switch(r.tag){case 5:return Y(r.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return r=Ee(r.type,!1),r;case 11:return r=Ee(r.type.render,!1),r;case 1:return r=Ee(r.type,!0),r;default:return""}}function Pe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case j:return"Fragment";case ce:return"Portal";case N:return"Profiler";case b:return"StrictMode";case T:return"Suspense";case K:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case P:return(r.displayName||"Context")+".Consumer";case I:return(r._context.displayName||"Context")+".Provider";case C:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case oe:return s=r.displayName||null,s!==null?s:Pe(r.type)||"Memo";case ge:s=r._payload,r=r._init;try{return Pe(r(s))}catch{}}return null}function Me(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(s);case 8:return s===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ze(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Qe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function xt(r){var s=Qe(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),d=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,y=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(x){d=""+x,y.call(this,x)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function fr(r){r._valueTracker||(r._valueTracker=xt(r))}function wi(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),d="";return r&&(d=Qe(r)?r.checked?"true":"false":r.value),r=d,r!==a?(s.setValue(r),!0):!1}function $r(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function js(r,s){var a=s.checked;return U({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function bi(r,s){var a=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;a=ze(s.value!=null?s.value:a),r._wrapperState={initialChecked:d,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Bo(r,s){s=s.checked,s!=null&&D(r,"checked",s,!1)}function $o(r,s){Bo(r,s);var a=ze(s.value),d=s.type;if(a!=null)d==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(d==="submit"||d==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Ei(r,s.type,a):s.hasOwnProperty("defaultValue")&&Ei(r,s.type,ze(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function El(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Ei(r,s,a){(s!=="number"||$r(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var pr=Array.isArray;function mr(r,s,a,d){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&d&&(r[a].defaultSelected=!0)}else{for(a=""+ze(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,d&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function qo(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return U({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ti(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(pr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:ze(a)}}function Ni(r,s){var a=ze(s.value),d=ze(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),d!=null&&(r.defaultValue=""+d)}function Ho(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function pt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?pt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var gr,Wo=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,d,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,d,f)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(gr=gr||document.createElement("div"),gr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=gr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function qr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rs=["Webkit","ms","Moz","O"];Object.keys(Ps).forEach(function(r){Rs.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Ps[s]=Ps[r]})});function Ko(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Ps.hasOwnProperty(r)&&Ps[r]?(""+s).trim():s+"px"}function Go(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=Ko(a,s[a],d);a==="float"&&(a="cssFloat"),d?r.setProperty(a,f):r[a]=f}}var Qo=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yo(r,s){if(s){if(Qo[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Xo(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ds=null;function ki(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ii=null,mn=null,Kn=null;function Si(r){if(r=wa(r)){if(typeof Ii!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Zl(s),Ii(r.stateNode,r.type,s))}}function Gn(r){mn?Kn?Kn.push(r):Kn=[r]:mn=r}function Jo(){if(mn){var r=mn,s=Kn;if(Kn=mn=null,Si(r),s)for(r=0;r<s.length;r++)Si(s[r])}}function Ms(r,s){return r(s)}function Zo(){}var yr=!1;function ea(r,s,a){if(yr)return r(s,a);yr=!0;try{return Ms(r,s,a)}finally{yr=!1,(mn!==null||Kn!==null)&&(Zo(),Jo())}}function at(r,s){var a=r.stateNode;if(a===null)return null;var d=Zl(a);if(d===null)return null;a=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ci=!1;if(p)try{var In={};Object.defineProperty(In,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",In,In),window.removeEventListener("test",In,In)}catch{Ci=!1}function Ls(r,s,a,d,f,y,x,S,M){var W=Array.prototype.slice.call(arguments,3);try{s.apply(a,W)}catch(ne){this.onError(ne)}}var Os=!1,Ai=null,Sn=!1,ta=null,Ju={onError:function(r){Os=!0,Ai=r}};function ji(r,s,a,d,f,y,x,S,M){Os=!1,Ai=null,Ls.apply(Ju,arguments)}function Tl(r,s,a,d,f,y,x,S,M){if(ji.apply(this,arguments),Os){if(Os){var W=Ai;Os=!1,Ai=null}else throw Error(t(198));Sn||(Sn=!0,ta=W)}}function Cn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function Vs(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function An(r){if(Cn(r)!==r)throw Error(t(188))}function Nl(r){var s=r.alternate;if(!s){if(s=Cn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,d=s;;){var f=a.return;if(f===null)break;var y=f.alternate;if(y===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===a)return An(f),r;if(y===d)return An(f),s;y=y.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=y;else{for(var x=!1,S=f.child;S;){if(S===a){x=!0,a=f,d=y;break}if(S===d){x=!0,d=f,a=y;break}S=S.sibling}if(!x){for(S=y.child;S;){if(S===a){x=!0,a=y,d=f;break}if(S===d){x=!0,d=y,a=f;break}S=S.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function na(r){return r=Nl(r),r!==null?Pi(r):null}function Pi(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Pi(r);if(s!==null)return s;r=r.sibling}return null}var Ri=e.unstable_scheduleCallback,ra=e.unstable_cancelCallback,kl=e.unstable_shouldYield,Zu=e.unstable_requestPaint,Ye=e.unstable_now,Il=e.unstable_getCurrentPriorityLevel,Fs=e.unstable_ImmediatePriority,Hr=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,sa=e.unstable_LowPriority,Sl=e.unstable_IdlePriority,Us=null,on=null;function Cl(r){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Us,r,void 0,(r.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:jl,ia=Math.log,Al=Math.LN2;function jl(r){return r>>>=0,r===0?32:31-(ia(r)/Al|0)|0}var Di=64,Mi=4194304;function Wr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function zs(r,s){var a=r.pendingLanes;if(a===0)return 0;var d=0,f=r.suspendedLanes,y=r.pingedLanes,x=a&268435455;if(x!==0){var S=x&~f;S!==0?d=Wr(S):(y&=x,y!==0&&(d=Wr(y)))}else x=a&~f,x!==0?d=Wr(x):y!==0&&(d=Wr(y));if(d===0)return 0;if(s!==0&&s!==d&&(s&f)===0&&(f=d&-d,y=s&-s,f>=y||f===16&&(y&4194240)!==0))return s;if((d&4)!==0&&(d|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=d;0<s;)a=31-qt(s),f=1<<a,d|=r[a],s&=~f;return d}function ed(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _r(r,s){for(var a=r.suspendedLanes,d=r.pingedLanes,f=r.expirationTimes,y=r.pendingLanes;0<y;){var x=31-qt(y),S=1<<x,M=f[x];M===-1?((S&a)===0||(S&d)!==0)&&(f[x]=ed(S,s)):M<=s&&(r.expiredLanes|=S),y&=~S}}function an(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Bs(){var r=Di;return Di<<=1,(Di&4194240)===0&&(Di=64),r}function Kr(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Gr(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-qt(s),r[s]=a}function Ge(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-qt(a),y=1<<f;s[f]=0,d[f]=-1,r[f]=-1,a&=~y}}function Qr(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var d=31-qt(a),f=1<<d;f&s|r[d]&s&&(r[d]|=s),a&=~f}}var Oe=0;function Yr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Pl,Li,Rl,Dl,Ml,oa=!1,Qn=[],St=null,jn=null,Pn=null,Xr=new Map,yn=new Map,Yn=[],td="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ll(r,s){switch(r){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":Xr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(s.pointerId)}}function Yt(r,s,a,d,f,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:a,eventSystemFlags:d,nativeEvent:y,targetContainers:[f]},s!==null&&(s=wa(s),s!==null&&Li(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function nd(r,s,a,d,f){switch(s){case"focusin":return St=Yt(St,r,s,a,d,f),!0;case"dragenter":return jn=Yt(jn,r,s,a,d,f),!0;case"mouseover":return Pn=Yt(Pn,r,s,a,d,f),!0;case"pointerover":var y=f.pointerId;return Xr.set(y,Yt(Xr.get(y)||null,r,s,a,d,f)),!0;case"gotpointercapture":return y=f.pointerId,yn.set(y,Yt(yn.get(y)||null,r,s,a,d,f)),!0}return!1}function Ol(r){var s=Ks(r.target);if(s!==null){var a=Cn(s);if(a!==null){if(s=a.tag,s===13){if(s=Vs(a),s!==null){r.blockedOn=s,Ml(r.priority,function(){Rl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function vr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Oi(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var d=new a.constructor(a.type,a);Ds=d,a.target.dispatchEvent(d),Ds=null}else return s=wa(a),s!==null&&Li(s),r.blockedOn=a,!1;s.shift()}return!0}function $s(r,s,a){vr(r)&&a.delete(s)}function Vl(){oa=!1,St!==null&&vr(St)&&(St=null),jn!==null&&vr(jn)&&(jn=null),Pn!==null&&vr(Pn)&&(Pn=null),Xr.forEach($s),yn.forEach($s)}function Rn(r,s){r.blockedOn===s&&(r.blockedOn=null,oa||(oa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vl)))}function Dn(r){function s(f){return Rn(f,r)}if(0<Qn.length){Rn(Qn[0],r);for(var a=1;a<Qn.length;a++){var d=Qn[a];d.blockedOn===r&&(d.blockedOn=null)}}for(St!==null&&Rn(St,r),jn!==null&&Rn(jn,r),Pn!==null&&Rn(Pn,r),Xr.forEach(s),yn.forEach(s),a=0;a<Yn.length;a++)d=Yn[a],d.blockedOn===r&&(d.blockedOn=null);for(;0<Yn.length&&(a=Yn[0],a.blockedOn===null);)Ol(a),a.blockedOn===null&&Yn.shift()}var xr=G.ReactCurrentBatchConfig,Jr=!0;function tt(r,s,a,d){var f=Oe,y=xr.transition;xr.transition=null;try{Oe=1,aa(r,s,a,d)}finally{Oe=f,xr.transition=y}}function rd(r,s,a,d){var f=Oe,y=xr.transition;xr.transition=null;try{Oe=4,aa(r,s,a,d)}finally{Oe=f,xr.transition=y}}function aa(r,s,a,d){if(Jr){var f=Oi(r,s,a,d);if(f===null)pd(r,s,d,qs,a),Ll(r,d);else if(nd(f,r,s,a,d))d.stopPropagation();else if(Ll(r,d),s&4&&-1<td.indexOf(r)){for(;f!==null;){var y=wa(f);if(y!==null&&Pl(y),y=Oi(r,s,a,d),y===null&&pd(r,s,d,qs,a),y===f)break;f=y}f!==null&&d.stopPropagation()}else pd(r,s,d,null,a)}}var qs=null;function Oi(r,s,a,d){if(qs=null,r=ki(d),r=Ks(r),r!==null)if(s=Cn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=Vs(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return qs=r,null}function la(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Il()){case Fs:return 1;case Hr:return 4;case gn:case sa:return 16;case Sl:return 536870912;default:return 16}default:return 16}}var ln=null,Vi=null,Xt=null;function ca(){if(Xt)return Xt;var r,s=Vi,a=s.length,d,f="value"in ln?ln.value:ln.textContent,y=f.length;for(r=0;r<a&&s[r]===f[r];r++);var x=a-r;for(d=1;d<=x&&s[a-d]===f[y-d];d++);return Xt=f.slice(r,1<d?1-d:void 0)}function Fi(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Xn(){return!0}function ua(){return!1}function Ct(r){function s(a,d,f,y,x){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(a=r[S],this[S]=a?a(y):y[S]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Xn:ua,this.isPropagationStopped=ua,this}return U(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),s}var Mn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=Ct(Mn),Jn=U({},Mn,{view:0,detail:0}),sd=Ct(Jn),zi,wr,Zr,Hs=U({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Zr&&(Zr&&r.type==="mousemove"?(zi=r.screenX-Zr.screenX,wr=r.screenY-Zr.screenY):wr=zi=0,Zr=r),zi)},movementY:function(r){return"movementY"in r?r.movementY:wr}}),Bi=Ct(Hs),da=U({},Hs,{dataTransfer:0}),Fl=Ct(da),$i=U({},Jn,{relatedTarget:0}),qi=Ct($i),Ul=U({},Mn,{animationName:0,elapsedTime:0,pseudoElement:0}),br=Ct(Ul),zl=U({},Mn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Bl=Ct(zl),$l=U({},Mn,{data:0}),ha=Ct($l),Hi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ht={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=ql[r])?!!s[r]:!1}function Zn(){return Hl}var u=U({},Jn,{key:function(r){if(r.key){var s=Hi[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Fi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ht[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(r){return r.type==="keypress"?Fi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Fi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),g=Ct(u),_=U({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Ct(_),z=U({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn}),Q=Ct(z),le=U({},Mn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Ct(le),gt=U({},Hs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Ct(gt),wt=[9,13,27,32],ut=p&&"CompositionEvent"in window,_n=null;p&&"documentMode"in document&&(_n=document.documentMode);var cn=p&&"TextEvent"in window&&!_n,Ws=p&&(!ut||_n&&8<_n&&11>=_n),Wi=" ",yp=!1;function _p(r,s){switch(r){case"keyup":return wt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ki=!1;function Hv(r,s){switch(r){case"compositionend":return vp(s);case"keypress":return s.which!==32?null:(yp=!0,Wi);case"textInput":return r=s.data,r===Wi&&yp?null:r;default:return null}}function Wv(r,s){if(Ki)return r==="compositionend"||!ut&&_p(r,s)?(r=ca(),Xt=Vi=ln=null,Ki=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ws&&s.locale!=="ko"?null:s.data;default:return null}}var Kv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Kv[r.type]:s==="textarea"}function wp(r,s,a,d){Gn(d),s=Yl(s,"onChange"),0<s.length&&(a=new Ui("onChange","change",null,a,d),r.push({event:a,listeners:s}))}var fa=null,pa=null;function Gv(r){Fp(r,0)}function Wl(r){var s=Ji(r);if(wi(s))return r}function Qv(r,s){if(r==="change")return s}var bp=!1;if(p){var id;if(p){var od="oninput"in document;if(!od){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),od=typeof Ep.oninput=="function"}id=od}else id=!1;bp=id&&(!document.documentMode||9<document.documentMode)}function Tp(){fa&&(fa.detachEvent("onpropertychange",Np),pa=fa=null)}function Np(r){if(r.propertyName==="value"&&Wl(pa)){var s=[];wp(s,pa,r,ki(r)),ea(Gv,s)}}function Yv(r,s,a){r==="focusin"?(Tp(),fa=s,pa=a,fa.attachEvent("onpropertychange",Np)):r==="focusout"&&Tp()}function Xv(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Wl(pa)}function Jv(r,s){if(r==="click")return Wl(s)}function Zv(r,s){if(r==="input"||r==="change")return Wl(s)}function ex(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Ln=typeof Object.is=="function"?Object.is:ex;function ma(r,s){if(Ln(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),d=Object.keys(s);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!m.call(s,f)||!Ln(r[f],s[f]))return!1}return!0}function kp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ip(r,s){var a=kp(r);r=0;for(var d;a;){if(a.nodeType===3){if(d=r+a.textContent.length,r<=s&&d>=s)return{node:a,offset:s-r};r=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=kp(a)}}function Sp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Sp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Cp(){for(var r=window,s=$r();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=$r(r.document)}return s}function ad(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function tx(r){var s=Cp(),a=r.focusedElem,d=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&Sp(a.ownerDocument.documentElement,a)){if(d!==null&&ad(a)){if(s=d.start,r=d.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,y=Math.min(d.start,f);d=d.end===void 0?y:Math.min(d.end,f),!r.extend&&y>d&&(f=d,d=y,y=f),f=Ip(a,y);var x=Ip(a,d);f&&x&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==x.node||r.focusOffset!==x.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),y>d?(r.addRange(s),r.extend(x.node,x.offset)):(s.setEnd(x.node,x.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var nx=p&&"documentMode"in document&&11>=document.documentMode,Gi=null,ld=null,ga=null,cd=!1;function Ap(r,s,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cd||Gi==null||Gi!==$r(d)||(d=Gi,"selectionStart"in d&&ad(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ga&&ma(ga,d)||(ga=d,d=Yl(ld,"onSelect"),0<d.length&&(s=new Ui("onSelect","select",null,s,a),r.push({event:s,listeners:d}),s.target=Gi)))}function Kl(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Qi={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},ud={},jp={};p&&(jp=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Gl(r){if(ud[r])return ud[r];if(!Qi[r])return r;var s=Qi[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in jp)return ud[r]=s[a];return r}var Pp=Gl("animationend"),Rp=Gl("animationiteration"),Dp=Gl("animationstart"),Mp=Gl("transitionend"),Lp=new Map,Op="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(r,s){Lp.set(r,s),l(s,[r])}for(var dd=0;dd<Op.length;dd++){var hd=Op[dd],rx=hd.toLowerCase(),sx=hd[0].toUpperCase()+hd.slice(1);es(rx,"on"+sx)}es(Pp,"onAnimationEnd"),es(Rp,"onAnimationIteration"),es(Dp,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(Mp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ix=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function Vp(r,s,a){var d=r.type||"unknown-event";r.currentTarget=a,Tl(d,s,void 0,r),r.currentTarget=null}function Fp(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var d=r[a],f=d.event;d=d.listeners;e:{var y=void 0;if(s)for(var x=d.length-1;0<=x;x--){var S=d[x],M=S.instance,W=S.currentTarget;if(S=S.listener,M!==y&&f.isPropagationStopped())break e;Vp(f,S,W),y=M}else for(x=0;x<d.length;x++){if(S=d[x],M=S.instance,W=S.currentTarget,S=S.listener,M!==y&&f.isPropagationStopped())break e;Vp(f,S,W),y=M}}}if(Sn)throw r=ta,Sn=!1,ta=null,r}function Je(r,s){var a=s[xd];a===void 0&&(a=s[xd]=new Set);var d=r+"__bubble";a.has(d)||(Up(s,r,2,!1),a.add(d))}function fd(r,s,a){var d=0;s&&(d|=4),Up(a,r,d,s)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function _a(r){if(!r[Ql]){r[Ql]=!0,i.forEach(function(a){a!=="selectionchange"&&(ix.has(a)||fd(a,!1,r),fd(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Ql]||(s[Ql]=!0,fd("selectionchange",!1,s))}}function Up(r,s,a,d){switch(la(s)){case 1:var f=tt;break;case 4:f=rd;break;default:f=aa}a=f.bind(null,s,a,r),f=void 0,!Ci||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),d?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function pd(r,s,a,d,f){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var S=d.stateNode.containerInfo;if(S===f||S.nodeType===8&&S.parentNode===f)break;if(x===4)for(x=d.return;x!==null;){var M=x.tag;if((M===3||M===4)&&(M=x.stateNode.containerInfo,M===f||M.nodeType===8&&M.parentNode===f))return;x=x.return}for(;S!==null;){if(x=Ks(S),x===null)return;if(M=x.tag,M===5||M===6){d=y=x;continue e}S=S.parentNode}}d=d.return}ea(function(){var W=y,ne=ki(a),se=[];e:{var te=Lp.get(r);if(te!==void 0){var he=Ui,ye=r;switch(r){case"keypress":if(Fi(a)===0)break e;case"keydown":case"keyup":he=g;break;case"focusin":ye="focus",he=qi;break;case"focusout":ye="blur",he=qi;break;case"beforeblur":case"afterblur":he=qi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Bi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Q;break;case Pp:case Rp:case Dp:he=br;break;case Mp:he=He;break;case"scroll":he=sd;break;case"wheel":he=Fe;break;case"copy":case"cut":case"paste":he=Bl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=E}var _e=(s&4)!==0,lt=!_e&&r==="scroll",B=_e?te!==null?te+"Capture":null:te;_e=[];for(var L=W,H;L!==null;){H=L;var ae=H.stateNode;if(H.tag===5&&ae!==null&&(H=ae,B!==null&&(ae=at(L,B),ae!=null&&_e.push(va(L,ae,H)))),lt)break;L=L.return}0<_e.length&&(te=new he(te,ye,null,a,ne),se.push({event:te,listeners:_e}))}}if((s&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",he=r==="mouseout"||r==="pointerout",te&&a!==Ds&&(ye=a.relatedTarget||a.fromElement)&&(Ks(ye)||ye[Er]))break e;if((he||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,he?(ye=a.relatedTarget||a.toElement,he=W,ye=ye?Ks(ye):null,ye!==null&&(lt=Cn(ye),ye!==lt||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(he=null,ye=W),he!==ye)){if(_e=Bi,ae="onMouseLeave",B="onMouseEnter",L="mouse",(r==="pointerout"||r==="pointerover")&&(_e=E,ae="onPointerLeave",B="onPointerEnter",L="pointer"),lt=he==null?te:Ji(he),H=ye==null?te:Ji(ye),te=new _e(ae,L+"leave",he,a,ne),te.target=lt,te.relatedTarget=H,ae=null,Ks(ne)===W&&(_e=new _e(B,L+"enter",ye,a,ne),_e.target=H,_e.relatedTarget=lt,ae=_e),lt=ae,he&&ye)t:{for(_e=he,B=ye,L=0,H=_e;H;H=Yi(H))L++;for(H=0,ae=B;ae;ae=Yi(ae))H++;for(;0<L-H;)_e=Yi(_e),L--;for(;0<H-L;)B=Yi(B),H--;for(;L--;){if(_e===B||B!==null&&_e===B.alternate)break t;_e=Yi(_e),B=Yi(B)}_e=null}else _e=null;he!==null&&zp(se,te,he,_e,!1),ye!==null&&lt!==null&&zp(se,lt,ye,_e,!0)}}e:{if(te=W?Ji(W):window,he=te.nodeName&&te.nodeName.toLowerCase(),he==="select"||he==="input"&&te.type==="file")var be=Qv;else if(xp(te))if(bp)be=Zv;else{be=Xv;var Ne=Yv}else(he=te.nodeName)&&he.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(be=Jv);if(be&&(be=be(r,W))){wp(se,be,a,ne);break e}Ne&&Ne(r,te,W),r==="focusout"&&(Ne=te._wrapperState)&&Ne.controlled&&te.type==="number"&&Ei(te,"number",te.value)}switch(Ne=W?Ji(W):window,r){case"focusin":(xp(Ne)||Ne.contentEditable==="true")&&(Gi=Ne,ld=W,ga=null);break;case"focusout":ga=ld=Gi=null;break;case"mousedown":cd=!0;break;case"contextmenu":case"mouseup":case"dragend":cd=!1,Ap(se,a,ne);break;case"selectionchange":if(nx)break;case"keydown":case"keyup":Ap(se,a,ne)}var ke;if(ut)e:{switch(r){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Ki?_p(r,a)&&(Se="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(Ws&&a.locale!=="ko"&&(Ki||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Ki&&(ke=ca()):(ln=ne,Vi="value"in ln?ln.value:ln.textContent,Ki=!0)),Ne=Yl(W,Se),0<Ne.length&&(Se=new ha(Se,r,null,a,ne),se.push({event:Se,listeners:Ne}),ke?Se.data=ke:(ke=vp(a),ke!==null&&(Se.data=ke)))),(ke=cn?Hv(r,a):Wv(r,a))&&(W=Yl(W,"onBeforeInput"),0<W.length&&(ne=new ha("onBeforeInput","beforeinput",null,a,ne),se.push({event:ne,listeners:W}),ne.data=ke))}Fp(se,s)})}function va(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Yl(r,s){for(var a=s+"Capture",d=[];r!==null;){var f=r,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=at(r,a),y!=null&&d.unshift(va(r,y,f)),y=at(r,s),y!=null&&d.push(va(r,y,f))),r=r.return}return d}function Yi(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function zp(r,s,a,d,f){for(var y=s._reactName,x=[];a!==null&&a!==d;){var S=a,M=S.alternate,W=S.stateNode;if(M!==null&&M===d)break;S.tag===5&&W!==null&&(S=W,f?(M=at(a,y),M!=null&&x.unshift(va(a,M,S))):f||(M=at(a,y),M!=null&&x.push(va(a,M,S)))),a=a.return}x.length!==0&&r.push({event:s,listeners:x})}var ox=/\r\n?/g,ax=/\u0000|\uFFFD/g;function Bp(r){return(typeof r=="string"?r:""+r).replace(ox,`
`).replace(ax,"")}function Xl(r,s,a){if(s=Bp(s),Bp(r)!==s&&a)throw Error(t(425))}function Jl(){}var md=null,gd=null;function yd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var _d=typeof setTimeout=="function"?setTimeout:void 0,lx=typeof clearTimeout=="function"?clearTimeout:void 0,$p=typeof Promise=="function"?Promise:void 0,cx=typeof queueMicrotask=="function"?queueMicrotask:typeof $p<"u"?function(r){return $p.resolve(null).then(r).catch(ux)}:_d;function ux(r){setTimeout(function(){throw r})}function vd(r,s){var a=s,d=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){r.removeChild(f),Dn(s);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);Dn(s)}function ts(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function qp(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),er="__reactFiber$"+Xi,xa="__reactProps$"+Xi,Er="__reactContainer$"+Xi,xd="__reactEvents$"+Xi,dx="__reactListeners$"+Xi,hx="__reactHandles$"+Xi;function Ks(r){var s=r[er];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Er]||a[er]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=qp(r);r!==null;){if(a=r[er])return a;r=qp(r)}return s}r=a,a=r.parentNode}return null}function wa(r){return r=r[er]||r[Er],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ji(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Zl(r){return r[xa]||null}var wd=[],Zi=-1;function ns(r){return{current:r}}function Ze(r){0>Zi||(r.current=wd[Zi],wd[Zi]=null,Zi--)}function Xe(r,s){Zi++,wd[Zi]=r.current,r.current=s}var rs={},Lt=ns(rs),Jt=ns(!1),Gs=rs;function eo(r,s){var a=r.type.contextTypes;if(!a)return rs;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in a)f[y]=s[y];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function Zt(r){return r=r.childContextTypes,r!=null}function ec(){Ze(Jt),Ze(Lt)}function Hp(r,s,a){if(Lt.current!==rs)throw Error(t(168));Xe(Lt,s),Xe(Jt,a)}function Wp(r,s,a){var d=r.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in s))throw Error(t(108,Me(r)||"Unknown",f));return U({},a,d)}function tc(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||rs,Gs=Lt.current,Xe(Lt,r),Xe(Jt,Jt.current),!0}function Kp(r,s,a){var d=r.stateNode;if(!d)throw Error(t(169));a?(r=Wp(r,s,Gs),d.__reactInternalMemoizedMergedChildContext=r,Ze(Jt),Ze(Lt),Xe(Lt,r)):Ze(Jt),Xe(Jt,a)}var Tr=null,nc=!1,bd=!1;function Gp(r){Tr===null?Tr=[r]:Tr.push(r)}function fx(r){nc=!0,Gp(r)}function ss(){if(!bd&&Tr!==null){bd=!0;var r=0,s=Oe;try{var a=Tr;for(Oe=1;r<a.length;r++){var d=a[r];do d=d(!0);while(d!==null)}Tr=null,nc=!1}catch(f){throw Tr!==null&&(Tr=Tr.slice(r+1)),Ri(Fs,ss),f}finally{Oe=s,bd=!1}}return null}var to=[],no=0,rc=null,sc=0,vn=[],xn=0,Qs=null,Nr=1,kr="";function Ys(r,s){to[no++]=sc,to[no++]=rc,rc=r,sc=s}function Qp(r,s,a){vn[xn++]=Nr,vn[xn++]=kr,vn[xn++]=Qs,Qs=r;var d=Nr;r=kr;var f=32-qt(d)-1;d&=~(1<<f),a+=1;var y=32-qt(s)+f;if(30<y){var x=f-f%5;y=(d&(1<<x)-1).toString(32),d>>=x,f-=x,Nr=1<<32-qt(s)+f|a<<f|d,kr=y+r}else Nr=1<<y|a<<f|d,kr=r}function Ed(r){r.return!==null&&(Ys(r,1),Qp(r,1,0))}function Td(r){for(;r===rc;)rc=to[--no],to[no]=null,sc=to[--no],to[no]=null;for(;r===Qs;)Qs=vn[--xn],vn[xn]=null,kr=vn[--xn],vn[xn]=null,Nr=vn[--xn],vn[xn]=null}var un=null,dn=null,nt=!1,On=null;function Yp(r,s){var a=Tn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Xp(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,un=r,dn=ts(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,un=r,dn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Qs!==null?{id:Nr,overflow:kr}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Tn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,un=r,dn=null,!0):!1;default:return!1}}function Nd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function kd(r){if(nt){var s=dn;if(s){var a=s;if(!Xp(r,s)){if(Nd(r))throw Error(t(418));s=ts(a.nextSibling);var d=un;s&&Xp(r,s)?Yp(d,a):(r.flags=r.flags&-4097|2,nt=!1,un=r)}}else{if(Nd(r))throw Error(t(418));r.flags=r.flags&-4097|2,nt=!1,un=r}}}function Jp(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;un=r}function ic(r){if(r!==un)return!1;if(!nt)return Jp(r),nt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!yd(r.type,r.memoizedProps)),s&&(s=dn)){if(Nd(r))throw Zp(),Error(t(418));for(;s;)Yp(r,s),s=ts(s.nextSibling)}if(Jp(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){dn=ts(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}dn=null}}else dn=un?ts(r.stateNode.nextSibling):null;return!0}function Zp(){for(var r=dn;r;)r=ts(r.nextSibling)}function ro(){dn=un=null,nt=!1}function Id(r){On===null?On=[r]:On.push(r)}var px=G.ReactCurrentBatchConfig;function ba(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,r));var f=d,y=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(x){var S=f.refs;x===null?delete S[y]:S[y]=x},s._stringRef=y,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function oc(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function em(r){var s=r._init;return s(r._payload)}function tm(r){function s(B,L){if(r){var H=B.deletions;H===null?(B.deletions=[L],B.flags|=16):H.push(L)}}function a(B,L){if(!r)return null;for(;L!==null;)s(B,L),L=L.sibling;return null}function d(B,L){for(B=new Map;L!==null;)L.key!==null?B.set(L.key,L):B.set(L.index,L),L=L.sibling;return B}function f(B,L){return B=hs(B,L),B.index=0,B.sibling=null,B}function y(B,L,H){return B.index=H,r?(H=B.alternate,H!==null?(H=H.index,H<L?(B.flags|=2,L):H):(B.flags|=2,L)):(B.flags|=1048576,L)}function x(B){return r&&B.alternate===null&&(B.flags|=2),B}function S(B,L,H,ae){return L===null||L.tag!==6?(L=_h(H,B.mode,ae),L.return=B,L):(L=f(L,H),L.return=B,L)}function M(B,L,H,ae){var be=H.type;return be===j?ne(B,L,H.props.children,ae,H.key):L!==null&&(L.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===ge&&em(be)===L.type)?(ae=f(L,H.props),ae.ref=ba(B,L,H),ae.return=B,ae):(ae=Ac(H.type,H.key,H.props,null,B.mode,ae),ae.ref=ba(B,L,H),ae.return=B,ae)}function W(B,L,H,ae){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=vh(H,B.mode,ae),L.return=B,L):(L=f(L,H.children||[]),L.return=B,L)}function ne(B,L,H,ae,be){return L===null||L.tag!==7?(L=si(H,B.mode,ae,be),L.return=B,L):(L=f(L,H),L.return=B,L)}function se(B,L,H){if(typeof L=="string"&&L!==""||typeof L=="number")return L=_h(""+L,B.mode,H),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ie:return H=Ac(L.type,L.key,L.props,null,B.mode,H),H.ref=ba(B,null,L),H.return=B,H;case ce:return L=vh(L,B.mode,H),L.return=B,L;case ge:var ae=L._init;return se(B,ae(L._payload),H)}if(pr(L)||pe(L))return L=si(L,B.mode,H,null),L.return=B,L;oc(B,L)}return null}function te(B,L,H,ae){var be=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return be!==null?null:S(B,L,""+H,ae);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case ie:return H.key===be?M(B,L,H,ae):null;case ce:return H.key===be?W(B,L,H,ae):null;case ge:return be=H._init,te(B,L,be(H._payload),ae)}if(pr(H)||pe(H))return be!==null?null:ne(B,L,H,ae,null);oc(B,H)}return null}function he(B,L,H,ae,be){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return B=B.get(H)||null,S(L,B,""+ae,be);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case ie:return B=B.get(ae.key===null?H:ae.key)||null,M(L,B,ae,be);case ce:return B=B.get(ae.key===null?H:ae.key)||null,W(L,B,ae,be);case ge:var Ne=ae._init;return he(B,L,H,Ne(ae._payload),be)}if(pr(ae)||pe(ae))return B=B.get(H)||null,ne(L,B,ae,be,null);oc(L,ae)}return null}function ye(B,L,H,ae){for(var be=null,Ne=null,ke=L,Se=L=0,Tt=null;ke!==null&&Se<H.length;Se++){ke.index>Se?(Tt=ke,ke=null):Tt=ke.sibling;var $e=te(B,ke,H[Se],ae);if($e===null){ke===null&&(ke=Tt);break}r&&ke&&$e.alternate===null&&s(B,ke),L=y($e,L,Se),Ne===null?be=$e:Ne.sibling=$e,Ne=$e,ke=Tt}if(Se===H.length)return a(B,ke),nt&&Ys(B,Se),be;if(ke===null){for(;Se<H.length;Se++)ke=se(B,H[Se],ae),ke!==null&&(L=y(ke,L,Se),Ne===null?be=ke:Ne.sibling=ke,Ne=ke);return nt&&Ys(B,Se),be}for(ke=d(B,ke);Se<H.length;Se++)Tt=he(ke,B,Se,H[Se],ae),Tt!==null&&(r&&Tt.alternate!==null&&ke.delete(Tt.key===null?Se:Tt.key),L=y(Tt,L,Se),Ne===null?be=Tt:Ne.sibling=Tt,Ne=Tt);return r&&ke.forEach(function(fs){return s(B,fs)}),nt&&Ys(B,Se),be}function _e(B,L,H,ae){var be=pe(H);if(typeof be!="function")throw Error(t(150));if(H=be.call(H),H==null)throw Error(t(151));for(var Ne=be=null,ke=L,Se=L=0,Tt=null,$e=H.next();ke!==null&&!$e.done;Se++,$e=H.next()){ke.index>Se?(Tt=ke,ke=null):Tt=ke.sibling;var fs=te(B,ke,$e.value,ae);if(fs===null){ke===null&&(ke=Tt);break}r&&ke&&fs.alternate===null&&s(B,ke),L=y(fs,L,Se),Ne===null?be=fs:Ne.sibling=fs,Ne=fs,ke=Tt}if($e.done)return a(B,ke),nt&&Ys(B,Se),be;if(ke===null){for(;!$e.done;Se++,$e=H.next())$e=se(B,$e.value,ae),$e!==null&&(L=y($e,L,Se),Ne===null?be=$e:Ne.sibling=$e,Ne=$e);return nt&&Ys(B,Se),be}for(ke=d(B,ke);!$e.done;Se++,$e=H.next())$e=he(ke,B,Se,$e.value,ae),$e!==null&&(r&&$e.alternate!==null&&ke.delete($e.key===null?Se:$e.key),L=y($e,L,Se),Ne===null?be=$e:Ne.sibling=$e,Ne=$e);return r&&ke.forEach(function(Kx){return s(B,Kx)}),nt&&Ys(B,Se),be}function lt(B,L,H,ae){if(typeof H=="object"&&H!==null&&H.type===j&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case ie:e:{for(var be=H.key,Ne=L;Ne!==null;){if(Ne.key===be){if(be=H.type,be===j){if(Ne.tag===7){a(B,Ne.sibling),L=f(Ne,H.props.children),L.return=B,B=L;break e}}else if(Ne.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===ge&&em(be)===Ne.type){a(B,Ne.sibling),L=f(Ne,H.props),L.ref=ba(B,Ne,H),L.return=B,B=L;break e}a(B,Ne);break}else s(B,Ne);Ne=Ne.sibling}H.type===j?(L=si(H.props.children,B.mode,ae,H.key),L.return=B,B=L):(ae=Ac(H.type,H.key,H.props,null,B.mode,ae),ae.ref=ba(B,L,H),ae.return=B,B=ae)}return x(B);case ce:e:{for(Ne=H.key;L!==null;){if(L.key===Ne)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(B,L.sibling),L=f(L,H.children||[]),L.return=B,B=L;break e}else{a(B,L);break}else s(B,L);L=L.sibling}L=vh(H,B.mode,ae),L.return=B,B=L}return x(B);case ge:return Ne=H._init,lt(B,L,Ne(H._payload),ae)}if(pr(H))return ye(B,L,H,ae);if(pe(H))return _e(B,L,H,ae);oc(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,L!==null&&L.tag===6?(a(B,L.sibling),L=f(L,H),L.return=B,B=L):(a(B,L),L=_h(H,B.mode,ae),L.return=B,B=L),x(B)):a(B,L)}return lt}var so=tm(!0),nm=tm(!1),ac=ns(null),lc=null,io=null,Sd=null;function Cd(){Sd=io=lc=null}function Ad(r){var s=ac.current;Ze(ac),r._currentValue=s}function jd(r,s,a){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===a)break;r=r.return}}function oo(r,s){lc=r,Sd=io=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(en=!0),r.firstContext=null)}function wn(r){var s=r._currentValue;if(Sd!==r)if(r={context:r,memoizedValue:s,next:null},io===null){if(lc===null)throw Error(t(308));io=r,lc.dependencies={lanes:0,firstContext:r}}else io=io.next=r;return s}var Xs=null;function Pd(r){Xs===null?Xs=[r]:Xs.push(r)}function rm(r,s,a,d){var f=s.interleaved;return f===null?(a.next=a,Pd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Ir(r,d)}function Ir(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var is=!1;function Rd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Sr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function os(r,s,a){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Be&2)!==0){var f=d.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s,Ir(r,a)}return f=d.interleaved,f===null?(s.next=s,Pd(d)):(s.next=f.next,f.next=s),d.interleaved=s,Ir(r,a)}function cc(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var d=s.lanes;d&=r.pendingLanes,a|=d,s.lanes=a,Qr(r,a)}}function im(r,s){var a=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?f=y=x:y=y.next=x,a=a.next}while(a!==null);y===null?f=y=s:y=y.next=s}else f=y=s;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:d.shared,effects:d.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function uc(r,s,a,d){var f=r.updateQueue;is=!1;var y=f.firstBaseUpdate,x=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var M=S,W=M.next;M.next=null,x===null?y=W:x.next=W,x=M;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,S=ne.lastBaseUpdate,S!==x&&(S===null?ne.firstBaseUpdate=W:S.next=W,ne.lastBaseUpdate=M))}if(y!==null){var se=f.baseState;x=0,ne=W=M=null,S=y;do{var te=S.lane,he=S.eventTime;if((d&te)===te){ne!==null&&(ne=ne.next={eventTime:he,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ye=r,_e=S;switch(te=s,he=a,_e.tag){case 1:if(ye=_e.payload,typeof ye=="function"){se=ye.call(he,se,te);break e}se=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=_e.payload,te=typeof ye=="function"?ye.call(he,se,te):ye,te==null)break e;se=U({},se,te);break e;case 2:is=!0}}S.callback!==null&&S.lane!==0&&(r.flags|=64,te=f.effects,te===null?f.effects=[S]:te.push(S))}else he={eventTime:he,lane:te,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ne===null?(W=ne=he,M=se):ne=ne.next=he,x|=te;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;te=S,S=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);if(ne===null&&(M=se),f.baseState=M,f.firstBaseUpdate=W,f.lastBaseUpdate=ne,s=f.shared.interleaved,s!==null){f=s;do x|=f.lane,f=f.next;while(f!==s)}else y===null&&(f.shared.lanes=0);ei|=x,r.lanes=x,r.memoizedState=se}}function om(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var d=r[s],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var Ea={},tr=ns(Ea),Ta=ns(Ea),Na=ns(Ea);function Js(r){if(r===Ea)throw Error(t(174));return r}function Dd(r,s){switch(Xe(Na,s),Xe(Ta,r),Xe(tr,Ea),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:mt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=mt(s,r)}Ze(tr),Xe(tr,s)}function ao(){Ze(tr),Ze(Ta),Ze(Na)}function am(r){Js(Na.current);var s=Js(tr.current),a=mt(s,r.type);s!==a&&(Xe(Ta,r),Xe(tr,a))}function Md(r){Ta.current===r&&(Ze(tr),Ze(Ta))}var rt=ns(0);function dc(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ld=[];function Od(){for(var r=0;r<Ld.length;r++)Ld[r]._workInProgressVersionPrimary=null;Ld.length=0}var hc=G.ReactCurrentDispatcher,Vd=G.ReactCurrentBatchConfig,Zs=0,st=null,yt=null,bt=null,fc=!1,ka=!1,Ia=0,mx=0;function Ot(){throw Error(t(321))}function Fd(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Ln(r[a],s[a]))return!1;return!0}function Ud(r,s,a,d,f,y){if(Zs=y,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,hc.current=r===null||r.memoizedState===null?vx:xx,r=a(d,f),ka){y=0;do{if(ka=!1,Ia=0,25<=y)throw Error(t(301));y+=1,bt=yt=null,s.updateQueue=null,hc.current=wx,r=a(d,f)}while(ka)}if(hc.current=gc,s=yt!==null&&yt.next!==null,Zs=0,bt=yt=st=null,fc=!1,s)throw Error(t(300));return r}function zd(){var r=Ia!==0;return Ia=0,r}function nr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?st.memoizedState=bt=r:bt=bt.next=r,bt}function bn(){if(yt===null){var r=st.alternate;r=r!==null?r.memoizedState:null}else r=yt.next;var s=bt===null?st.memoizedState:bt.next;if(s!==null)bt=s,yt=r;else{if(r===null)throw Error(t(310));yt=r,r={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},bt===null?st.memoizedState=bt=r:bt=bt.next=r}return bt}function Sa(r,s){return typeof s=="function"?s(r):s}function Bd(r){var s=bn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=yt,f=d.baseQueue,y=a.pending;if(y!==null){if(f!==null){var x=f.next;f.next=y.next,y.next=x}d.baseQueue=f=y,a.pending=null}if(f!==null){y=f.next,d=d.baseState;var S=x=null,M=null,W=y;do{var ne=W.lane;if((Zs&ne)===ne)M!==null&&(M=M.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),d=W.hasEagerState?W.eagerState:r(d,W.action);else{var se={lane:ne,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};M===null?(S=M=se,x=d):M=M.next=se,st.lanes|=ne,ei|=ne}W=W.next}while(W!==null&&W!==y);M===null?x=d:M.next=S,Ln(d,s.memoizedState)||(en=!0),s.memoizedState=d,s.baseState=x,s.baseQueue=M,a.lastRenderedState=d}if(r=a.interleaved,r!==null){f=r;do y=f.lane,st.lanes|=y,ei|=y,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function $d(r){var s=bn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=a.dispatch,f=a.pending,y=s.memoizedState;if(f!==null){a.pending=null;var x=f=f.next;do y=r(y,x.action),x=x.next;while(x!==f);Ln(y,s.memoizedState)||(en=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,d]}function lm(){}function cm(r,s){var a=st,d=bn(),f=s(),y=!Ln(d.memoizedState,f);if(y&&(d.memoizedState=f,en=!0),d=d.queue,qd(hm.bind(null,a,d,r),[r]),d.getSnapshot!==s||y||bt!==null&&bt.memoizedState.tag&1){if(a.flags|=2048,Ca(9,dm.bind(null,a,d,f,s),void 0,null),Et===null)throw Error(t(349));(Zs&30)!==0||um(a,s,f)}return f}function um(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function dm(r,s,a,d){s.value=a,s.getSnapshot=d,fm(s)&&pm(r)}function hm(r,s,a){return a(function(){fm(s)&&pm(r)})}function fm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Ln(r,a)}catch{return!0}}function pm(r){var s=Ir(r,1);s!==null&&zn(s,r,1,-1)}function mm(r){var s=nr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:r},s.queue=r,r=r.dispatch=_x.bind(null,st,r),[s.memoizedState,r]}function Ca(r,s,a,d){return r={tag:r,create:s,destroy:a,deps:d,next:null},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(d=a.next,a.next=r,r.next=d,s.lastEffect=r)),r}function gm(){return bn().memoizedState}function pc(r,s,a,d){var f=nr();st.flags|=r,f.memoizedState=Ca(1|s,a,void 0,d===void 0?null:d)}function mc(r,s,a,d){var f=bn();d=d===void 0?null:d;var y=void 0;if(yt!==null){var x=yt.memoizedState;if(y=x.destroy,d!==null&&Fd(d,x.deps)){f.memoizedState=Ca(s,a,y,d);return}}st.flags|=r,f.memoizedState=Ca(1|s,a,y,d)}function ym(r,s){return pc(8390656,8,r,s)}function qd(r,s){return mc(2048,8,r,s)}function _m(r,s){return mc(4,2,r,s)}function vm(r,s){return mc(4,4,r,s)}function xm(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function wm(r,s,a){return a=a!=null?a.concat([r]):null,mc(4,4,xm.bind(null,s,r),a)}function Hd(){}function bm(r,s){var a=bn();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Fd(s,d[1])?d[0]:(a.memoizedState=[r,s],r)}function Em(r,s){var a=bn();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Fd(s,d[1])?d[0]:(r=r(),a.memoizedState=[r,s],r)}function Tm(r,s,a){return(Zs&21)===0?(r.baseState&&(r.baseState=!1,en=!0),r.memoizedState=a):(Ln(a,s)||(a=Bs(),st.lanes|=a,ei|=a,r.baseState=!0),s)}function gx(r,s){var a=Oe;Oe=a!==0&&4>a?a:4,r(!0);var d=Vd.transition;Vd.transition={};try{r(!1),s()}finally{Oe=a,Vd.transition=d}}function Nm(){return bn().memoizedState}function yx(r,s,a){var d=us(r);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},km(r))Im(s,a);else if(a=rm(r,s,a,d),a!==null){var f=Kt();zn(a,r,d,f),Sm(a,s,d)}}function _x(r,s,a){var d=us(r),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(km(r))Im(s,f);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var x=s.lastRenderedState,S=y(x,a);if(f.hasEagerState=!0,f.eagerState=S,Ln(S,x)){var M=s.interleaved;M===null?(f.next=f,Pd(s)):(f.next=M.next,M.next=f),s.interleaved=f;return}}catch{}a=rm(r,s,f,d),a!==null&&(f=Kt(),zn(a,r,d,f),Sm(a,s,d))}}function km(r){var s=r.alternate;return r===st||s!==null&&s===st}function Im(r,s){ka=fc=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function Sm(r,s,a){if((a&4194240)!==0){var d=s.lanes;d&=r.pendingLanes,a|=d,s.lanes=a,Qr(r,a)}}var gc={readContext:wn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},vx={readContext:wn,useCallback:function(r,s){return nr().memoizedState=[r,s===void 0?null:s],r},useContext:wn,useEffect:ym,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,pc(4194308,4,xm.bind(null,s,r),a)},useLayoutEffect:function(r,s){return pc(4194308,4,r,s)},useInsertionEffect:function(r,s){return pc(4,2,r,s)},useMemo:function(r,s){var a=nr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var d=nr();return s=a!==void 0?a(s):s,d.memoizedState=d.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},d.queue=r,r=r.dispatch=yx.bind(null,st,r),[d.memoizedState,r]},useRef:function(r){var s=nr();return r={current:r},s.memoizedState=r},useState:mm,useDebugValue:Hd,useDeferredValue:function(r){return nr().memoizedState=r},useTransition:function(){var r=mm(!1),s=r[0];return r=gx.bind(null,r[1]),nr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var d=st,f=nr();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Et===null)throw Error(t(349));(Zs&30)!==0||um(d,s,a)}f.memoizedState=a;var y={value:a,getSnapshot:s};return f.queue=y,ym(hm.bind(null,d,y,r),[r]),d.flags|=2048,Ca(9,dm.bind(null,d,y,a,s),void 0,null),a},useId:function(){var r=nr(),s=Et.identifierPrefix;if(nt){var a=kr,d=Nr;a=(d&~(1<<32-qt(d)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ia++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=mx++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},xx={readContext:wn,useCallback:bm,useContext:wn,useEffect:qd,useImperativeHandle:wm,useInsertionEffect:_m,useLayoutEffect:vm,useMemo:Em,useReducer:Bd,useRef:gm,useState:function(){return Bd(Sa)},useDebugValue:Hd,useDeferredValue:function(r){var s=bn();return Tm(s,yt.memoizedState,r)},useTransition:function(){var r=Bd(Sa)[0],s=bn().memoizedState;return[r,s]},useMutableSource:lm,useSyncExternalStore:cm,useId:Nm,unstable_isNewReconciler:!1},wx={readContext:wn,useCallback:bm,useContext:wn,useEffect:qd,useImperativeHandle:wm,useInsertionEffect:_m,useLayoutEffect:vm,useMemo:Em,useReducer:$d,useRef:gm,useState:function(){return $d(Sa)},useDebugValue:Hd,useDeferredValue:function(r){var s=bn();return yt===null?s.memoizedState=r:Tm(s,yt.memoizedState,r)},useTransition:function(){var r=$d(Sa)[0],s=bn().memoizedState;return[r,s]},useMutableSource:lm,useSyncExternalStore:cm,useId:Nm,unstable_isNewReconciler:!1};function Vn(r,s){if(r&&r.defaultProps){s=U({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Wd(r,s,a,d){s=r.memoizedState,a=a(d,s),a=a==null?s:U({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var yc={isMounted:function(r){return(r=r._reactInternals)?Cn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var d=Kt(),f=us(r),y=Sr(d,f);y.payload=s,a!=null&&(y.callback=a),s=os(r,y,f),s!==null&&(zn(s,r,f,d),cc(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var d=Kt(),f=us(r),y=Sr(d,f);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=os(r,y,f),s!==null&&(zn(s,r,f,d),cc(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Kt(),d=us(r),f=Sr(a,d);f.tag=2,s!=null&&(f.callback=s),s=os(r,f,d),s!==null&&(zn(s,r,d,a),cc(s,r,d))}};function Cm(r,s,a,d,f,y,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,y,x):s.prototype&&s.prototype.isPureReactComponent?!ma(a,d)||!ma(f,y):!0}function Am(r,s,a){var d=!1,f=rs,y=s.contextType;return typeof y=="object"&&y!==null?y=wn(y):(f=Zt(s)?Gs:Lt.current,d=s.contextTypes,y=(d=d!=null)?eo(r,f):rs),s=new s(a,y),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=yc,r.stateNode=s,s._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=y),s}function jm(r,s,a,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,d),s.state!==r&&yc.enqueueReplaceState(s,s.state,null)}function Kd(r,s,a,d){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},Rd(r);var y=s.contextType;typeof y=="object"&&y!==null?f.context=wn(y):(y=Zt(s)?Gs:Lt.current,f.context=eo(r,y)),f.state=r.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Wd(r,s,y,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&yc.enqueueReplaceState(f,f.state,null),uc(r,a,f,d),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function lo(r,s){try{var a="",d=s;do a+=we(d),d=d.return;while(d);var f=a}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:s,stack:f,digest:null}}function Gd(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function Qd(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var bx=typeof WeakMap=="function"?WeakMap:Map;function Pm(r,s,a){a=Sr(-1,a),a.tag=3,a.payload={element:null};var d=s.value;return a.callback=function(){Tc||(Tc=!0,uh=d),Qd(r,s)},a}function Rm(r,s,a){a=Sr(-1,a),a.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=s.value;a.payload=function(){return d(f)},a.callback=function(){Qd(r,s)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){Qd(r,s),typeof d!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})}),a}function Dm(r,s,a){var d=r.pingCache;if(d===null){d=r.pingCache=new bx;var f=new Set;d.set(s,f)}else f=d.get(s),f===void 0&&(f=new Set,d.set(s,f));f.has(a)||(f.add(a),r=Lx.bind(null,r,s,a),s.then(r,r))}function Mm(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Lm(r,s,a,d,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Sr(-1,1),s.tag=2,os(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var Ex=G.ReactCurrentOwner,en=!1;function Wt(r,s,a,d){s.child=r===null?nm(s,null,a,d):so(s,r.child,a,d)}function Om(r,s,a,d,f){a=a.render;var y=s.ref;return oo(s,f),d=Ud(r,s,a,d,y,f),a=zd(),r!==null&&!en?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Cr(r,s,f)):(nt&&a&&Ed(s),s.flags|=1,Wt(r,s,d,f),s.child)}function Vm(r,s,a,d,f){if(r===null){var y=a.type;return typeof y=="function"&&!yh(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=y,Fm(r,s,y,d,f)):(r=Ac(a.type,null,d,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,(r.lanes&f)===0){var x=y.memoizedProps;if(a=a.compare,a=a!==null?a:ma,a(x,d)&&r.ref===s.ref)return Cr(r,s,f)}return s.flags|=1,r=hs(y,d),r.ref=s.ref,r.return=s,s.child=r}function Fm(r,s,a,d,f){if(r!==null){var y=r.memoizedProps;if(ma(y,d)&&r.ref===s.ref)if(en=!1,s.pendingProps=d=y,(r.lanes&f)!==0)(r.flags&131072)!==0&&(en=!0);else return s.lanes=r.lanes,Cr(r,s,f)}return Yd(r,s,a,d,f)}function Um(r,s,a){var d=s.pendingProps,f=d.children,y=r!==null?r.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(uo,hn),hn|=a;else{if((a&1073741824)===0)return r=y!==null?y.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Xe(uo,hn),hn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:a,Xe(uo,hn),hn|=d}else y!==null?(d=y.baseLanes|a,s.memoizedState=null):d=a,Xe(uo,hn),hn|=d;return Wt(r,s,f,a),s.child}function zm(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Yd(r,s,a,d,f){var y=Zt(a)?Gs:Lt.current;return y=eo(s,y),oo(s,f),a=Ud(r,s,a,d,y,f),d=zd(),r!==null&&!en?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Cr(r,s,f)):(nt&&d&&Ed(s),s.flags|=1,Wt(r,s,a,f),s.child)}function Bm(r,s,a,d,f){if(Zt(a)){var y=!0;tc(s)}else y=!1;if(oo(s,f),s.stateNode===null)vc(r,s),Am(s,a,d),Kd(s,a,d,f),d=!0;else if(r===null){var x=s.stateNode,S=s.memoizedProps;x.props=S;var M=x.context,W=a.contextType;typeof W=="object"&&W!==null?W=wn(W):(W=Zt(a)?Gs:Lt.current,W=eo(s,W));var ne=a.getDerivedStateFromProps,se=typeof ne=="function"||typeof x.getSnapshotBeforeUpdate=="function";se||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(S!==d||M!==W)&&jm(s,x,d,W),is=!1;var te=s.memoizedState;x.state=te,uc(s,d,x,f),M=s.memoizedState,S!==d||te!==M||Jt.current||is?(typeof ne=="function"&&(Wd(s,a,ne,d),M=s.memoizedState),(S=is||Cm(s,a,S,d,te,M,W))?(se||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=M),x.props=d,x.state=M,x.context=W,d=S):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{x=s.stateNode,sm(r,s),S=s.memoizedProps,W=s.type===s.elementType?S:Vn(s.type,S),x.props=W,se=s.pendingProps,te=x.context,M=a.contextType,typeof M=="object"&&M!==null?M=wn(M):(M=Zt(a)?Gs:Lt.current,M=eo(s,M));var he=a.getDerivedStateFromProps;(ne=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(S!==se||te!==M)&&jm(s,x,d,M),is=!1,te=s.memoizedState,x.state=te,uc(s,d,x,f);var ye=s.memoizedState;S!==se||te!==ye||Jt.current||is?(typeof he=="function"&&(Wd(s,a,he,d),ye=s.memoizedState),(W=is||Cm(s,a,W,d,te,ye,M)||!1)?(ne||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,ye,M),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,ye,M)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||S===r.memoizedProps&&te===r.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&te===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=ye),x.props=d,x.state=ye,x.context=M,d=W):(typeof x.componentDidUpdate!="function"||S===r.memoizedProps&&te===r.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&te===r.memoizedState||(s.flags|=1024),d=!1)}return Xd(r,s,a,d,y,f)}function Xd(r,s,a,d,f,y){zm(r,s);var x=(s.flags&128)!==0;if(!d&&!x)return f&&Kp(s,a,!1),Cr(r,s,y);d=s.stateNode,Ex.current=s;var S=x&&typeof a.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,r!==null&&x?(s.child=so(s,r.child,null,y),s.child=so(s,null,S,y)):Wt(r,s,S,y),s.memoizedState=d.state,f&&Kp(s,a,!0),s.child}function $m(r){var s=r.stateNode;s.pendingContext?Hp(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Hp(r,s.context,!1),Dd(r,s.containerInfo)}function qm(r,s,a,d,f){return ro(),Id(f),s.flags|=256,Wt(r,s,a,d),s.child}var Jd={dehydrated:null,treeContext:null,retryLane:0};function Zd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Hm(r,s,a){var d=s.pendingProps,f=rt.current,y=!1,x=(s.flags&128)!==0,S;if((S=x)||(S=r!==null&&r.memoizedState===null?!1:(f&2)!==0),S?(y=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Xe(rt,f&1),r===null)return kd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(x=d.children,r=d.fallback,y?(d=s.mode,y=s.child,x={mode:"hidden",children:x},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=x):y=jc(x,d,0,null),r=si(r,d,a,null),y.return=s,r.return=s,y.sibling=r,s.child=y,s.child.memoizedState=Zd(a),s.memoizedState=Jd,r):eh(s,x));if(f=r.memoizedState,f!==null&&(S=f.dehydrated,S!==null))return Tx(r,s,x,d,S,f,a);if(y){y=d.fallback,x=s.mode,f=r.child,S=f.sibling;var M={mode:"hidden",children:d.children};return(x&1)===0&&s.child!==f?(d=s.child,d.childLanes=0,d.pendingProps=M,s.deletions=null):(d=hs(f,M),d.subtreeFlags=f.subtreeFlags&14680064),S!==null?y=hs(S,y):(y=si(y,x,a,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,x=r.child.memoizedState,x=x===null?Zd(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},y.memoizedState=x,y.childLanes=r.childLanes&~a,s.memoizedState=Jd,d}return y=r.child,r=y.sibling,d=hs(y,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=a),d.return=s,d.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=d,s.memoizedState=null,d}function eh(r,s){return s=jc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function _c(r,s,a,d){return d!==null&&Id(d),so(s,r.child,null,a),r=eh(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Tx(r,s,a,d,f,y,x){if(a)return s.flags&256?(s.flags&=-257,d=Gd(Error(t(422))),_c(r,s,x,d)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(y=d.fallback,f=s.mode,d=jc({mode:"visible",children:d.children},f,0,null),y=si(y,f,x,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,(s.mode&1)!==0&&so(s,r.child,null,x),s.child.memoizedState=Zd(x),s.memoizedState=Jd,y);if((s.mode&1)===0)return _c(r,s,x,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var S=d.dgst;return d=S,y=Error(t(419)),d=Gd(y,d,void 0),_c(r,s,x,d)}if(S=(x&r.childLanes)!==0,en||S){if(d=Et,d!==null){switch(x&-x){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|x))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,Ir(r,f),zn(d,r,f,-1))}return gh(),d=Gd(Error(t(421))),_c(r,s,x,d)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=Ox.bind(null,r),f._reactRetry=s,null):(r=y.treeContext,dn=ts(f.nextSibling),un=s,nt=!0,On=null,r!==null&&(vn[xn++]=Nr,vn[xn++]=kr,vn[xn++]=Qs,Nr=r.id,kr=r.overflow,Qs=s),s=eh(s,d.children),s.flags|=4096,s)}function Wm(r,s,a){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),jd(r.return,s,a)}function th(r,s,a,d,f){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=a,y.tailMode=f)}function Km(r,s,a){var d=s.pendingProps,f=d.revealOrder,y=d.tail;if(Wt(r,s,d.children,a),d=rt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Wm(r,a,s);else if(r.tag===19)Wm(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(Xe(rt,d),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&dc(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),th(s,!1,f,a,y);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&dc(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}th(s,!0,a,null,y);break;case"together":th(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function vc(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Cr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),ei|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=hs(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=hs(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function Nx(r,s,a){switch(s.tag){case 3:$m(s),ro();break;case 5:am(s);break;case 1:Zt(s.type)&&tc(s);break;case 4:Dd(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,f=s.memoizedProps.value;Xe(ac,d._currentValue),d._currentValue=f;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Xe(rt,rt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Hm(r,s,a):(Xe(rt,rt.current&1),r=Cr(r,s,a),r!==null?r.sibling:null);Xe(rt,rt.current&1);break;case 19:if(d=(a&s.childLanes)!==0,(r.flags&128)!==0){if(d)return Km(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Xe(rt,rt.current),d)break;return null;case 22:case 23:return s.lanes=0,Um(r,s,a)}return Cr(r,s,a)}var Gm,nh,Qm,Ym;Gm=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},nh=function(){},Qm=function(r,s,a,d){var f=r.memoizedProps;if(f!==d){r=s.stateNode,Js(tr.current);var y=null;switch(a){case"input":f=js(r,f),d=js(r,d),y=[];break;case"select":f=U({},f,{value:void 0}),d=U({},d,{value:void 0}),y=[];break;case"textarea":f=qo(r,f),d=qo(r,d),y=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(r.onclick=Jl)}Yo(a,d);var x;a=null;for(W in f)if(!d.hasOwnProperty(W)&&f.hasOwnProperty(W)&&f[W]!=null)if(W==="style"){var S=f[W];for(x in S)S.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?y||(y=[]):(y=y||[]).push(W,null));for(W in d){var M=d[W];if(S=f?.[W],d.hasOwnProperty(W)&&M!==S&&(M!=null||S!=null))if(W==="style")if(S){for(x in S)!S.hasOwnProperty(x)||M&&M.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in M)M.hasOwnProperty(x)&&S[x]!==M[x]&&(a||(a={}),a[x]=M[x])}else a||(y||(y=[]),y.push(W,a)),a=M;else W==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,S=S?S.__html:void 0,M!=null&&S!==M&&(y=y||[]).push(W,M)):W==="children"?typeof M!="string"&&typeof M!="number"||(y=y||[]).push(W,""+M):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(M!=null&&W==="onScroll"&&Je("scroll",r),y||S===M||(y=[])):(y=y||[]).push(W,M))}a&&(y=y||[]).push("style",a);var W=y;(s.updateQueue=W)&&(s.flags|=4)}},Ym=function(r,s,a,d){a!==d&&(s.flags|=4)};function Aa(r,s){if(!nt)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Vt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,d=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=d,r.childLanes=a,s}function kx(r,s,a){var d=s.pendingProps;switch(Td(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(s),null;case 1:return Zt(s.type)&&ec(),Vt(s),null;case 3:return d=s.stateNode,ao(),Ze(Jt),Ze(Lt),Od(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(ic(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,On!==null&&(fh(On),On=null))),nh(r,s),Vt(s),null;case 5:Md(s);var f=Js(Na.current);if(a=s.type,r!==null&&s.stateNode!=null)Qm(r,s,a,d,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return Vt(s),null}if(r=Js(tr.current),ic(s)){d=s.stateNode,a=s.type;var y=s.memoizedProps;switch(d[er]=s,d[xa]=y,r=(s.mode&1)!==0,a){case"dialog":Je("cancel",d),Je("close",d);break;case"iframe":case"object":case"embed":Je("load",d);break;case"video":case"audio":for(f=0;f<ya.length;f++)Je(ya[f],d);break;case"source":Je("error",d);break;case"img":case"image":case"link":Je("error",d),Je("load",d);break;case"details":Je("toggle",d);break;case"input":bi(d,y),Je("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},Je("invalid",d);break;case"textarea":Ti(d,y),Je("invalid",d)}Yo(a,y),f=null;for(var x in y)if(y.hasOwnProperty(x)){var S=y[x];x==="children"?typeof S=="string"?d.textContent!==S&&(y.suppressHydrationWarning!==!0&&Xl(d.textContent,S,r),f=["children",S]):typeof S=="number"&&d.textContent!==""+S&&(y.suppressHydrationWarning!==!0&&Xl(d.textContent,S,r),f=["children",""+S]):o.hasOwnProperty(x)&&S!=null&&x==="onScroll"&&Je("scroll",d)}switch(a){case"input":fr(d),El(d,y,!0);break;case"textarea":fr(d),Ho(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Jl)}d=f,s.updateQueue=d,d!==null&&(s.flags|=4)}else{x=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=pt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=x.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof d.is=="string"?r=x.createElement(a,{is:d.is}):(r=x.createElement(a),a==="select"&&(x=r,d.multiple?x.multiple=!0:d.size&&(x.size=d.size))):r=x.createElementNS(r,a),r[er]=s,r[xa]=d,Gm(r,s,!1,!1),s.stateNode=r;e:{switch(x=Xo(a,d),a){case"dialog":Je("cancel",r),Je("close",r),f=d;break;case"iframe":case"object":case"embed":Je("load",r),f=d;break;case"video":case"audio":for(f=0;f<ya.length;f++)Je(ya[f],r);f=d;break;case"source":Je("error",r),f=d;break;case"img":case"image":case"link":Je("error",r),Je("load",r),f=d;break;case"details":Je("toggle",r),f=d;break;case"input":bi(r,d),f=js(r,d),Je("invalid",r);break;case"option":f=d;break;case"select":r._wrapperState={wasMultiple:!!d.multiple},f=U({},d,{value:void 0}),Je("invalid",r);break;case"textarea":Ti(r,d),f=qo(r,d),Je("invalid",r);break;default:f=d}Yo(a,f),S=f;for(y in S)if(S.hasOwnProperty(y)){var M=S[y];y==="style"?Go(r,M):y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&Wo(r,M)):y==="children"?typeof M=="string"?(a!=="textarea"||M!=="")&&qr(r,M):typeof M=="number"&&qr(r,""+M):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?M!=null&&y==="onScroll"&&Je("scroll",r):M!=null&&D(r,y,M,x))}switch(a){case"input":fr(r),El(r,d,!1);break;case"textarea":fr(r),Ho(r);break;case"option":d.value!=null&&r.setAttribute("value",""+ze(d.value));break;case"select":r.multiple=!!d.multiple,y=d.value,y!=null?mr(r,!!d.multiple,y,!1):d.defaultValue!=null&&mr(r,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Jl)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Vt(s),null;case 6:if(r&&s.stateNode!=null)Ym(r,s,r.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(a=Js(Na.current),Js(tr.current),ic(s)){if(d=s.stateNode,a=s.memoizedProps,d[er]=s,(y=d.nodeValue!==a)&&(r=un,r!==null))switch(r.tag){case 3:Xl(d.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Xl(d.nodeValue,a,(r.mode&1)!==0)}y&&(s.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[er]=s,s.stateNode=d}return Vt(s),null;case 13:if(Ze(rt),d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(nt&&dn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Zp(),ro(),s.flags|=98560,y=!1;else if(y=ic(s),d!==null&&d.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[er]=s}else ro(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Vt(s),y=!1}else On!==null&&(fh(On),On=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(d=d!==null,d!==(r!==null&&r.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(rt.current&1)!==0?_t===0&&(_t=3):gh())),s.updateQueue!==null&&(s.flags|=4),Vt(s),null);case 4:return ao(),nh(r,s),r===null&&_a(s.stateNode.containerInfo),Vt(s),null;case 10:return Ad(s.type._context),Vt(s),null;case 17:return Zt(s.type)&&ec(),Vt(s),null;case 19:if(Ze(rt),y=s.memoizedState,y===null)return Vt(s),null;if(d=(s.flags&128)!==0,x=y.rendering,x===null)if(d)Aa(y,!1);else{if(_t!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(x=dc(r),x!==null){for(s.flags|=128,Aa(y,!1),d=x.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=a,a=s.child;a!==null;)y=a,r=d,y.flags&=14680066,x=y.alternate,x===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,r=x.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Xe(rt,rt.current&1|2),s.child}r=r.sibling}y.tail!==null&&Ye()>ho&&(s.flags|=128,d=!0,Aa(y,!1),s.lanes=4194304)}else{if(!d)if(r=dc(x),r!==null){if(s.flags|=128,d=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Aa(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!nt)return Vt(s),null}else 2*Ye()-y.renderingStartTime>ho&&a!==1073741824&&(s.flags|=128,d=!0,Aa(y,!1),s.lanes=4194304);y.isBackwards?(x.sibling=s.child,s.child=x):(a=y.last,a!==null?a.sibling=x:s.child=x,y.last=x)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Ye(),s.sibling=null,a=rt.current,Xe(rt,d?a&1|2:a&1),s):(Vt(s),null);case 22:case 23:return mh(),d=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(hn&1073741824)!==0&&(Vt(s),s.subtreeFlags&6&&(s.flags|=8192)):Vt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Ix(r,s){switch(Td(s),s.tag){case 1:return Zt(s.type)&&ec(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ao(),Ze(Jt),Ze(Lt),Od(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Md(s),null;case 13:if(Ze(rt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ro()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ze(rt),null;case 4:return ao(),null;case 10:return Ad(s.type._context),null;case 22:case 23:return mh(),null;case 24:return null;default:return null}}var xc=!1,Ft=!1,Sx=typeof WeakSet=="function"?WeakSet:Set,me=null;function co(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){ot(r,s,d)}else a.current=null}function rh(r,s,a){try{a()}catch(d){ot(r,s,d)}}var Xm=!1;function Cx(r,s){if(md=Jr,r=Cp(),ad(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var x=0,S=-1,M=-1,W=0,ne=0,se=r,te=null;t:for(;;){for(var he;se!==a||f!==0&&se.nodeType!==3||(S=x+f),se!==y||d!==0&&se.nodeType!==3||(M=x+d),se.nodeType===3&&(x+=se.nodeValue.length),(he=se.firstChild)!==null;)te=se,se=he;for(;;){if(se===r)break t;if(te===a&&++W===f&&(S=x),te===y&&++ne===d&&(M=x),(he=se.nextSibling)!==null)break;se=te,te=se.parentNode}se=he}a=S===-1||M===-1?null:{start:S,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(gd={focusedElem:r,selectionRange:a},Jr=!1,me=s;me!==null;)if(s=me,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,me=r;else for(;me!==null;){s=me;try{var ye=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var _e=ye.memoizedProps,lt=ye.memoizedState,B=s.stateNode,L=B.getSnapshotBeforeUpdate(s.elementType===s.type?_e:Vn(s.type,_e),lt);B.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var H=s.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){ot(s,s.return,ae)}if(r=s.sibling,r!==null){r.return=s.return,me=r;break}me=s.return}return ye=Xm,Xm=!1,ye}function ja(r,s,a){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&r)===r){var y=f.destroy;f.destroy=void 0,y!==void 0&&rh(s,a,y)}f=f.next}while(f!==d)}}function wc(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var d=a.create;a.destroy=d()}a=a.next}while(a!==s)}}function sh(r){var s=r.ref;if(s!==null){var a=r.stateNode;r.tag,r=a,typeof s=="function"?s(r):s.current=r}}function Jm(r){var s=r.alternate;s!==null&&(r.alternate=null,Jm(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[er],delete s[xa],delete s[xd],delete s[dx],delete s[hx])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Zm(r){return r.tag===5||r.tag===3||r.tag===4}function eg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Zm(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ih(r,s,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Jl));else if(d!==4&&(r=r.child,r!==null))for(ih(r,s,a),r=r.sibling;r!==null;)ih(r,s,a),r=r.sibling}function oh(r,s,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(d!==4&&(r=r.child,r!==null))for(oh(r,s,a),r=r.sibling;r!==null;)oh(r,s,a),r=r.sibling}var At=null,Fn=!1;function as(r,s,a){for(a=a.child;a!==null;)tg(r,s,a),a=a.sibling}function tg(r,s,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Us,a)}catch{}switch(a.tag){case 5:Ft||co(a,s);case 6:var d=At,f=Fn;At=null,as(r,s,a),At=d,Fn=f,At!==null&&(Fn?(r=At,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):At.removeChild(a.stateNode));break;case 18:At!==null&&(Fn?(r=At,a=a.stateNode,r.nodeType===8?vd(r.parentNode,a):r.nodeType===1&&vd(r,a),Dn(r)):vd(At,a.stateNode));break;case 4:d=At,f=Fn,At=a.stateNode.containerInfo,Fn=!0,as(r,s,a),At=d,Fn=f;break;case 0:case 11:case 14:case 15:if(!Ft&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var y=f,x=y.destroy;y=y.tag,x!==void 0&&((y&2)!==0||(y&4)!==0)&&rh(a,s,x),f=f.next}while(f!==d)}as(r,s,a);break;case 1:if(!Ft&&(co(a,s),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(S){ot(a,s,S)}as(r,s,a);break;case 21:as(r,s,a);break;case 22:a.mode&1?(Ft=(d=Ft)||a.memoizedState!==null,as(r,s,a),Ft=d):as(r,s,a);break;default:as(r,s,a)}}function ng(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new Sx),s.forEach(function(d){var f=Vx.bind(null,r,d);a.has(d)||(a.add(d),d.then(f,f))})}}function Un(r,s){var a=s.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var y=r,x=s,S=x;e:for(;S!==null;){switch(S.tag){case 5:At=S.stateNode,Fn=!1;break e;case 3:At=S.stateNode.containerInfo,Fn=!0;break e;case 4:At=S.stateNode.containerInfo,Fn=!0;break e}S=S.return}if(At===null)throw Error(t(160));tg(y,x,f),At=null,Fn=!1;var M=f.alternate;M!==null&&(M.return=null),f.return=null}catch(W){ot(f,s,W)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)rg(s,r),s=s.sibling}function rg(r,s){var a=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Un(s,r),rr(r),d&4){try{ja(3,r,r.return),wc(3,r)}catch(_e){ot(r,r.return,_e)}try{ja(5,r,r.return)}catch(_e){ot(r,r.return,_e)}}break;case 1:Un(s,r),rr(r),d&512&&a!==null&&co(a,a.return);break;case 5:if(Un(s,r),rr(r),d&512&&a!==null&&co(a,a.return),r.flags&32){var f=r.stateNode;try{qr(f,"")}catch(_e){ot(r,r.return,_e)}}if(d&4&&(f=r.stateNode,f!=null)){var y=r.memoizedProps,x=a!==null?a.memoizedProps:y,S=r.type,M=r.updateQueue;if(r.updateQueue=null,M!==null)try{S==="input"&&y.type==="radio"&&y.name!=null&&Bo(f,y),Xo(S,x);var W=Xo(S,y);for(x=0;x<M.length;x+=2){var ne=M[x],se=M[x+1];ne==="style"?Go(f,se):ne==="dangerouslySetInnerHTML"?Wo(f,se):ne==="children"?qr(f,se):D(f,ne,se,W)}switch(S){case"input":$o(f,y);break;case"textarea":Ni(f,y);break;case"select":var te=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var he=y.value;he!=null?mr(f,!!y.multiple,he,!1):te!==!!y.multiple&&(y.defaultValue!=null?mr(f,!!y.multiple,y.defaultValue,!0):mr(f,!!y.multiple,y.multiple?[]:"",!1))}f[xa]=y}catch(_e){ot(r,r.return,_e)}}break;case 6:if(Un(s,r),rr(r),d&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,y=r.memoizedProps;try{f.nodeValue=y}catch(_e){ot(r,r.return,_e)}}break;case 3:if(Un(s,r),rr(r),d&4&&a!==null&&a.memoizedState.isDehydrated)try{Dn(s.containerInfo)}catch(_e){ot(r,r.return,_e)}break;case 4:Un(s,r),rr(r);break;case 13:Un(s,r),rr(r),f=r.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(ch=Ye())),d&4&&ng(r);break;case 22:if(ne=a!==null&&a.memoizedState!==null,r.mode&1?(Ft=(W=Ft)||ne,Un(s,r),Ft=W):Un(s,r),rr(r),d&8192){if(W=r.memoizedState!==null,(r.stateNode.isHidden=W)&&!ne&&(r.mode&1)!==0)for(me=r,ne=r.child;ne!==null;){for(se=me=ne;me!==null;){switch(te=me,he=te.child,te.tag){case 0:case 11:case 14:case 15:ja(4,te,te.return);break;case 1:co(te,te.return);var ye=te.stateNode;if(typeof ye.componentWillUnmount=="function"){d=te,a=te.return;try{s=d,ye.props=s.memoizedProps,ye.state=s.memoizedState,ye.componentWillUnmount()}catch(_e){ot(d,a,_e)}}break;case 5:co(te,te.return);break;case 22:if(te.memoizedState!==null){og(se);continue}}he!==null?(he.return=te,me=he):og(se)}ne=ne.sibling}e:for(ne=null,se=r;;){if(se.tag===5){if(ne===null){ne=se;try{f=se.stateNode,W?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(S=se.stateNode,M=se.memoizedProps.style,x=M!=null&&M.hasOwnProperty("display")?M.display:null,S.style.display=Ko("display",x))}catch(_e){ot(r,r.return,_e)}}}else if(se.tag===6){if(ne===null)try{se.stateNode.nodeValue=W?"":se.memoizedProps}catch(_e){ot(r,r.return,_e)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===r)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===r)break e;for(;se.sibling===null;){if(se.return===null||se.return===r)break e;ne===se&&(ne=null),se=se.return}ne===se&&(ne=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Un(s,r),rr(r),d&4&&ng(r);break;case 21:break;default:Un(s,r),rr(r)}}function rr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Zm(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(qr(f,""),d.flags&=-33);var y=eg(r);oh(r,y,f);break;case 3:case 4:var x=d.stateNode.containerInfo,S=eg(r);ih(r,S,x);break;default:throw Error(t(161))}}catch(M){ot(r,r.return,M)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Ax(r,s,a){me=r,sg(r)}function sg(r,s,a){for(var d=(r.mode&1)!==0;me!==null;){var f=me,y=f.child;if(f.tag===22&&d){var x=f.memoizedState!==null||xc;if(!x){var S=f.alternate,M=S!==null&&S.memoizedState!==null||Ft;S=xc;var W=Ft;if(xc=x,(Ft=M)&&!W)for(me=f;me!==null;)x=me,M=x.child,x.tag===22&&x.memoizedState!==null?ag(f):M!==null?(M.return=x,me=M):ag(f);for(;y!==null;)me=y,sg(y),y=y.sibling;me=f,xc=S,Ft=W}ig(r)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,me=y):ig(r)}}function ig(r){for(;me!==null;){var s=me;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ft||wc(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Ft)if(a===null)d.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Vn(s.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&om(s,y,d);break;case 3:var x=s.updateQueue;if(x!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}om(s,x,a)}break;case 5:var S=s.stateNode;if(a===null&&s.flags&4){a=S;var M=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&a.focus();break;case"img":M.src&&(a.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var W=s.alternate;if(W!==null){var ne=W.memoizedState;if(ne!==null){var se=ne.dehydrated;se!==null&&Dn(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ft||s.flags&512&&sh(s)}catch(te){ot(s,s.return,te)}}if(s===r){me=null;break}if(a=s.sibling,a!==null){a.return=s.return,me=a;break}me=s.return}}function og(r){for(;me!==null;){var s=me;if(s===r){me=null;break}var a=s.sibling;if(a!==null){a.return=s.return,me=a;break}me=s.return}}function ag(r){for(;me!==null;){var s=me;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{wc(4,s)}catch(M){ot(s,a,M)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var f=s.return;try{d.componentDidMount()}catch(M){ot(s,f,M)}}var y=s.return;try{sh(s)}catch(M){ot(s,y,M)}break;case 5:var x=s.return;try{sh(s)}catch(M){ot(s,x,M)}}}catch(M){ot(s,s.return,M)}if(s===r){me=null;break}var S=s.sibling;if(S!==null){S.return=s.return,me=S;break}me=s.return}}var jx=Math.ceil,bc=G.ReactCurrentDispatcher,ah=G.ReactCurrentOwner,En=G.ReactCurrentBatchConfig,Be=0,Et=null,dt=null,jt=0,hn=0,uo=ns(0),_t=0,Pa=null,ei=0,Ec=0,lh=0,Ra=null,tn=null,ch=0,ho=1/0,Ar=null,Tc=!1,uh=null,ls=null,Nc=!1,cs=null,kc=0,Da=0,dh=null,Ic=-1,Sc=0;function Kt(){return(Be&6)!==0?Ye():Ic!==-1?Ic:Ic=Ye()}function us(r){return(r.mode&1)===0?1:(Be&2)!==0&&jt!==0?jt&-jt:px.transition!==null?(Sc===0&&(Sc=Bs()),Sc):(r=Oe,r!==0||(r=window.event,r=r===void 0?16:la(r.type)),r)}function zn(r,s,a,d){if(50<Da)throw Da=0,dh=null,Error(t(185));Gr(r,a,d),((Be&2)===0||r!==Et)&&(r===Et&&((Be&2)===0&&(Ec|=a),_t===4&&ds(r,jt)),nn(r,d),a===1&&Be===0&&(s.mode&1)===0&&(ho=Ye()+500,nc&&ss()))}function nn(r,s){var a=r.callbackNode;_r(r,s);var d=zs(r,r===Et?jt:0);if(d===0)a!==null&&ra(a),r.callbackNode=null,r.callbackPriority=0;else if(s=d&-d,r.callbackPriority!==s){if(a!=null&&ra(a),s===1)r.tag===0?fx(cg.bind(null,r)):Gp(cg.bind(null,r)),cx(function(){(Be&6)===0&&ss()}),a=null;else{switch(Yr(d)){case 1:a=Fs;break;case 4:a=Hr;break;case 16:a=gn;break;case 536870912:a=Sl;break;default:a=gn}a=yg(a,lg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function lg(r,s){if(Ic=-1,Sc=0,(Be&6)!==0)throw Error(t(327));var a=r.callbackNode;if(fo()&&r.callbackNode!==a)return null;var d=zs(r,r===Et?jt:0);if(d===0)return null;if((d&30)!==0||(d&r.expiredLanes)!==0||s)s=Cc(r,d);else{s=d;var f=Be;Be|=2;var y=dg();(Et!==r||jt!==s)&&(Ar=null,ho=Ye()+500,ni(r,s));do try{Dx();break}catch(S){ug(r,S)}while(!0);Cd(),bc.current=y,Be=f,dt!==null?s=0:(Et=null,jt=0,s=_t)}if(s!==0){if(s===2&&(f=an(r),f!==0&&(d=f,s=hh(r,f))),s===1)throw a=Pa,ni(r,0),ds(r,d),nn(r,Ye()),a;if(s===6)ds(r,d);else{if(f=r.current.alternate,(d&30)===0&&!Px(f)&&(s=Cc(r,d),s===2&&(y=an(r),y!==0&&(d=y,s=hh(r,y))),s===1))throw a=Pa,ni(r,0),ds(r,d),nn(r,Ye()),a;switch(r.finishedWork=f,r.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:ri(r,tn,Ar);break;case 3:if(ds(r,d),(d&130023424)===d&&(s=ch+500-Ye(),10<s)){if(zs(r,0)!==0)break;if(f=r.suspendedLanes,(f&d)!==d){Kt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=_d(ri.bind(null,r,tn,Ar),s);break}ri(r,tn,Ar);break;case 4:if(ds(r,d),(d&4194240)===d)break;for(s=r.eventTimes,f=-1;0<d;){var x=31-qt(d);y=1<<x,x=s[x],x>f&&(f=x),d&=~y}if(d=f,d=Ye()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*jx(d/1960))-d,10<d){r.timeoutHandle=_d(ri.bind(null,r,tn,Ar),d);break}ri(r,tn,Ar);break;case 5:ri(r,tn,Ar);break;default:throw Error(t(329))}}}return nn(r,Ye()),r.callbackNode===a?lg.bind(null,r):null}function hh(r,s){var a=Ra;return r.current.memoizedState.isDehydrated&&(ni(r,s).flags|=256),r=Cc(r,s),r!==2&&(s=tn,tn=a,s!==null&&fh(s)),r}function fh(r){tn===null?tn=r:tn.push.apply(tn,r)}function Px(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],y=f.getSnapshot;f=f.value;try{if(!Ln(y(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ds(r,s){for(s&=~lh,s&=~Ec,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-qt(s),d=1<<a;r[a]=-1,s&=~d}}function cg(r){if((Be&6)!==0)throw Error(t(327));fo();var s=zs(r,0);if((s&1)===0)return nn(r,Ye()),null;var a=Cc(r,s);if(r.tag!==0&&a===2){var d=an(r);d!==0&&(s=d,a=hh(r,d))}if(a===1)throw a=Pa,ni(r,0),ds(r,s),nn(r,Ye()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ri(r,tn,Ar),nn(r,Ye()),null}function ph(r,s){var a=Be;Be|=1;try{return r(s)}finally{Be=a,Be===0&&(ho=Ye()+500,nc&&ss())}}function ti(r){cs!==null&&cs.tag===0&&(Be&6)===0&&fo();var s=Be;Be|=1;var a=En.transition,d=Oe;try{if(En.transition=null,Oe=1,r)return r()}finally{Oe=d,En.transition=a,Be=s,(Be&6)===0&&ss()}}function mh(){hn=uo.current,Ze(uo)}function ni(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,lx(a)),dt!==null)for(a=dt.return;a!==null;){var d=a;switch(Td(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&ec();break;case 3:ao(),Ze(Jt),Ze(Lt),Od();break;case 5:Md(d);break;case 4:ao();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:Ad(d.type._context);break;case 22:case 23:mh()}a=a.return}if(Et=r,dt=r=hs(r.current,null),jt=hn=s,_t=0,Pa=null,lh=Ec=ei=0,tn=Ra=null,Xs!==null){for(s=0;s<Xs.length;s++)if(a=Xs[s],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,y=a.pending;if(y!==null){var x=y.next;y.next=f,d.next=x}a.pending=d}Xs=null}return r}function ug(r,s){do{var a=dt;try{if(Cd(),hc.current=gc,fc){for(var d=st.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}fc=!1}if(Zs=0,bt=yt=st=null,ka=!1,Ia=0,ah.current=null,a===null||a.return===null){_t=1,Pa=s,dt=null;break}e:{var y=r,x=a.return,S=a,M=s;if(s=jt,S.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var W=M,ne=S,se=ne.tag;if((ne.mode&1)===0&&(se===0||se===11||se===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var he=Mm(x);if(he!==null){he.flags&=-257,Lm(he,x,S,y,s),he.mode&1&&Dm(y,W,s),s=he,M=W;var ye=s.updateQueue;if(ye===null){var _e=new Set;_e.add(M),s.updateQueue=_e}else ye.add(M);break e}else{if((s&1)===0){Dm(y,W,s),gh();break e}M=Error(t(426))}}else if(nt&&S.mode&1){var lt=Mm(x);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),Lm(lt,x,S,y,s),Id(lo(M,S));break e}}y=M=lo(M,S),_t!==4&&(_t=2),Ra===null?Ra=[y]:Ra.push(y),y=x;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var B=Pm(y,M,s);im(y,B);break e;case 1:S=M;var L=y.type,H=y.stateNode;if((y.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(ls===null||!ls.has(H)))){y.flags|=65536,s&=-s,y.lanes|=s;var ae=Rm(y,S,s);im(y,ae);break e}}y=y.return}while(y!==null)}fg(a)}catch(be){s=be,dt===a&&a!==null&&(dt=a=a.return);continue}break}while(!0)}function dg(){var r=bc.current;return bc.current=gc,r===null?gc:r}function gh(){(_t===0||_t===3||_t===2)&&(_t=4),Et===null||(ei&268435455)===0&&(Ec&268435455)===0||ds(Et,jt)}function Cc(r,s){var a=Be;Be|=2;var d=dg();(Et!==r||jt!==s)&&(Ar=null,ni(r,s));do try{Rx();break}catch(f){ug(r,f)}while(!0);if(Cd(),Be=a,bc.current=d,dt!==null)throw Error(t(261));return Et=null,jt=0,_t}function Rx(){for(;dt!==null;)hg(dt)}function Dx(){for(;dt!==null&&!kl();)hg(dt)}function hg(r){var s=gg(r.alternate,r,hn);r.memoizedProps=r.pendingProps,s===null?fg(r):dt=s,ah.current=null}function fg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=kx(a,s,hn),a!==null){dt=a;return}}else{if(a=Ix(a,s),a!==null){a.flags&=32767,dt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{_t=6,dt=null;return}}if(s=s.sibling,s!==null){dt=s;return}dt=s=r}while(s!==null);_t===0&&(_t=5)}function ri(r,s,a){var d=Oe,f=En.transition;try{En.transition=null,Oe=1,Mx(r,s,a,d)}finally{En.transition=f,Oe=d}return null}function Mx(r,s,a,d){do fo();while(cs!==null);if((Be&6)!==0)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=a.lanes|a.childLanes;if(Ge(r,y),r===Et&&(dt=Et=null,jt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Nc||(Nc=!0,yg(gn,function(){return fo(),null})),y=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||y){y=En.transition,En.transition=null;var x=Oe;Oe=1;var S=Be;Be|=4,ah.current=null,Cx(r,a),rg(a,r),tx(gd),Jr=!!md,gd=md=null,r.current=a,Ax(a),Zu(),Be=S,Oe=x,En.transition=y}else r.current=a;if(Nc&&(Nc=!1,cs=r,kc=f),y=r.pendingLanes,y===0&&(ls=null),Cl(a.stateNode),nn(r,Ye()),s!==null)for(d=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(Tc)throw Tc=!1,r=uh,uh=null,r;return(kc&1)!==0&&r.tag!==0&&fo(),y=r.pendingLanes,(y&1)!==0?r===dh?Da++:(Da=0,dh=r):Da=0,ss(),null}function fo(){if(cs!==null){var r=Yr(kc),s=En.transition,a=Oe;try{if(En.transition=null,Oe=16>r?16:r,cs===null)var d=!1;else{if(r=cs,cs=null,kc=0,(Be&6)!==0)throw Error(t(331));var f=Be;for(Be|=4,me=r.current;me!==null;){var y=me,x=y.child;if((me.flags&16)!==0){var S=y.deletions;if(S!==null){for(var M=0;M<S.length;M++){var W=S[M];for(me=W;me!==null;){var ne=me;switch(ne.tag){case 0:case 11:case 15:ja(8,ne,y)}var se=ne.child;if(se!==null)se.return=ne,me=se;else for(;me!==null;){ne=me;var te=ne.sibling,he=ne.return;if(Jm(ne),ne===W){me=null;break}if(te!==null){te.return=he,me=te;break}me=he}}}var ye=y.alternate;if(ye!==null){var _e=ye.child;if(_e!==null){ye.child=null;do{var lt=_e.sibling;_e.sibling=null,_e=lt}while(_e!==null)}}me=y}}if((y.subtreeFlags&2064)!==0&&x!==null)x.return=y,me=x;else e:for(;me!==null;){if(y=me,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:ja(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,me=B;break e}me=y.return}}var L=r.current;for(me=L;me!==null;){x=me;var H=x.child;if((x.subtreeFlags&2064)!==0&&H!==null)H.return=x,me=H;else e:for(x=L;me!==null;){if(S=me,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:wc(9,S)}}catch(be){ot(S,S.return,be)}if(S===x){me=null;break e}var ae=S.sibling;if(ae!==null){ae.return=S.return,me=ae;break e}me=S.return}}if(Be=f,ss(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Us,r)}catch{}d=!0}return d}finally{Oe=a,En.transition=s}}return!1}function pg(r,s,a){s=lo(a,s),s=Pm(r,s,1),r=os(r,s,1),s=Kt(),r!==null&&(Gr(r,1,s),nn(r,s))}function ot(r,s,a){if(r.tag===3)pg(r,r,a);else for(;s!==null;){if(s.tag===3){pg(s,r,a);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ls===null||!ls.has(d))){r=lo(a,r),r=Rm(s,r,1),s=os(s,r,1),r=Kt(),s!==null&&(Gr(s,1,r),nn(s,r));break}}s=s.return}}function Lx(r,s,a){var d=r.pingCache;d!==null&&d.delete(s),s=Kt(),r.pingedLanes|=r.suspendedLanes&a,Et===r&&(jt&a)===a&&(_t===4||_t===3&&(jt&130023424)===jt&&500>Ye()-ch?ni(r,0):lh|=a),nn(r,s)}function mg(r,s){s===0&&((r.mode&1)===0?s=1:(s=Mi,Mi<<=1,(Mi&130023424)===0&&(Mi=4194304)));var a=Kt();r=Ir(r,s),r!==null&&(Gr(r,s,a),nn(r,a))}function Ox(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),mg(r,a)}function Vx(r,s){var a=0;switch(r.tag){case 13:var d=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),mg(r,a)}var gg;gg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||Jt.current)en=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return en=!1,Nx(r,s,a);en=(r.flags&131072)!==0}else en=!1,nt&&(s.flags&1048576)!==0&&Qp(s,sc,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;vc(r,s),r=s.pendingProps;var f=eo(s,Lt.current);oo(s,a),f=Ud(null,s,d,r,f,a);var y=zd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zt(d)?(y=!0,tc(s)):y=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Rd(s),f.updater=yc,s.stateNode=f,f._reactInternals=s,Kd(s,d,r,a),s=Xd(null,s,d,!0,y,a)):(s.tag=0,nt&&y&&Ed(s),Wt(null,s,f,a),s=s.child),s;case 16:d=s.elementType;e:{switch(vc(r,s),r=s.pendingProps,f=d._init,d=f(d._payload),s.type=d,f=s.tag=Ux(d),r=Vn(d,r),f){case 0:s=Yd(null,s,d,r,a);break e;case 1:s=Bm(null,s,d,r,a);break e;case 11:s=Om(null,s,d,r,a);break e;case 14:s=Vm(null,s,d,Vn(d.type,r),a);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Vn(d,f),Yd(r,s,d,f,a);case 1:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Vn(d,f),Bm(r,s,d,f,a);case 3:e:{if($m(s),r===null)throw Error(t(387));d=s.pendingProps,y=s.memoizedState,f=y.element,sm(r,s),uc(s,d,null,a);var x=s.memoizedState;if(d=x.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){f=lo(Error(t(423)),s),s=qm(r,s,d,a,f);break e}else if(d!==f){f=lo(Error(t(424)),s),s=qm(r,s,d,a,f);break e}else for(dn=ts(s.stateNode.containerInfo.firstChild),un=s,nt=!0,On=null,a=nm(s,null,d,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ro(),d===f){s=Cr(r,s,a);break e}Wt(r,s,d,a)}s=s.child}return s;case 5:return am(s),r===null&&kd(s),d=s.type,f=s.pendingProps,y=r!==null?r.memoizedProps:null,x=f.children,yd(d,f)?x=null:y!==null&&yd(d,y)&&(s.flags|=32),zm(r,s),Wt(r,s,x,a),s.child;case 6:return r===null&&kd(s),null;case 13:return Hm(r,s,a);case 4:return Dd(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=so(s,null,d,a):Wt(r,s,d,a),s.child;case 11:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Vn(d,f),Om(r,s,d,f,a);case 7:return Wt(r,s,s.pendingProps,a),s.child;case 8:return Wt(r,s,s.pendingProps.children,a),s.child;case 12:return Wt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(d=s.type._context,f=s.pendingProps,y=s.memoizedProps,x=f.value,Xe(ac,d._currentValue),d._currentValue=x,y!==null)if(Ln(y.value,x)){if(y.children===f.children&&!Jt.current){s=Cr(r,s,a);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var S=y.dependencies;if(S!==null){x=y.child;for(var M=S.firstContext;M!==null;){if(M.context===d){if(y.tag===1){M=Sr(-1,a&-a),M.tag=2;var W=y.updateQueue;if(W!==null){W=W.shared;var ne=W.pending;ne===null?M.next=M:(M.next=ne.next,ne.next=M),W.pending=M}}y.lanes|=a,M=y.alternate,M!==null&&(M.lanes|=a),jd(y.return,a,s),S.lanes|=a;break}M=M.next}}else if(y.tag===10)x=y.type===s.type?null:y.child;else if(y.tag===18){if(x=y.return,x===null)throw Error(t(341));x.lanes|=a,S=x.alternate,S!==null&&(S.lanes|=a),jd(x,a,s),x=y.sibling}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===s){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}Wt(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,d=s.pendingProps.children,oo(s,a),f=wn(f),d=d(f),s.flags|=1,Wt(r,s,d,a),s.child;case 14:return d=s.type,f=Vn(d,s.pendingProps),f=Vn(d.type,f),Vm(r,s,d,f,a);case 15:return Fm(r,s,s.type,s.pendingProps,a);case 17:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Vn(d,f),vc(r,s),s.tag=1,Zt(d)?(r=!0,tc(s)):r=!1,oo(s,a),Am(s,d,f),Kd(s,d,f,a),Xd(null,s,d,!0,r,a);case 19:return Km(r,s,a);case 22:return Um(r,s,a)}throw Error(t(156,s.tag))};function yg(r,s){return Ri(r,s)}function Fx(r,s,a,d){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(r,s,a,d){return new Fx(r,s,a,d)}function yh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ux(r){if(typeof r=="function")return yh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===C)return 11;if(r===oe)return 14}return 2}function hs(r,s){var a=r.alternate;return a===null?(a=Tn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Ac(r,s,a,d,f,y){var x=2;if(d=r,typeof r=="function")yh(r)&&(x=1);else if(typeof r=="string")x=5;else e:switch(r){case j:return si(a.children,f,y,s);case b:x=8,f|=8;break;case N:return r=Tn(12,a,s,f|2),r.elementType=N,r.lanes=y,r;case T:return r=Tn(13,a,s,f),r.elementType=T,r.lanes=y,r;case K:return r=Tn(19,a,s,f),r.elementType=K,r.lanes=y,r;case ue:return jc(a,f,y,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case I:x=10;break e;case P:x=9;break e;case C:x=11;break e;case oe:x=14;break e;case ge:x=16,d=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Tn(x,a,s,f),s.elementType=r,s.type=d,s.lanes=y,s}function si(r,s,a,d){return r=Tn(7,r,d,s),r.lanes=a,r}function jc(r,s,a,d){return r=Tn(22,r,d,s),r.elementType=ue,r.lanes=a,r.stateNode={isHidden:!1},r}function _h(r,s,a){return r=Tn(6,r,null,s),r.lanes=a,r}function vh(r,s,a){return s=Tn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function zx(r,s,a,d,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kr(0),this.expirationTimes=Kr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function xh(r,s,a,d,f,y,x,S,M){return r=new zx(r,s,a,S,M),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Tn(3,null,null,s),r.current=y,y.stateNode=r,y.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rd(y),r}function Bx(r,s,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:d==null?null:""+d,children:r,containerInfo:s,implementation:a}}function _g(r){if(!r)return rs;r=r._reactInternals;e:{if(Cn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Zt(a))return Wp(r,a,s)}return s}function vg(r,s,a,d,f,y,x,S,M){return r=xh(a,d,!0,r,f,y,x,S,M),r.context=_g(null),a=r.current,d=Kt(),f=us(a),y=Sr(d,f),y.callback=s??null,os(a,y,f),r.current.lanes=f,Gr(r,f,d),nn(r,d),r}function Pc(r,s,a,d){var f=s.current,y=Kt(),x=us(f);return a=_g(a),s.context===null?s.context=a:s.pendingContext=a,s=Sr(y,x),s.payload={element:r},d=d===void 0?null:d,d!==null&&(s.callback=d),r=os(f,s,x),r!==null&&(zn(r,f,x,y),cc(r,f,x)),x}function Rc(r){return r=r.current,r.child?(r.child.tag===5,r.child.stateNode):null}function xg(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function wh(r,s){xg(r,s),(r=r.alternate)&&xg(r,s)}function $x(){return null}var wg=typeof reportError=="function"?reportError:function(r){console.error(r)};function bh(r){this._internalRoot=r}Dc.prototype.render=bh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Pc(r,s,null,null)},Dc.prototype.unmount=bh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ti(function(){Pc(null,r,null,null)}),s[Er]=null}};function Dc(r){this._internalRoot=r}Dc.prototype.unstable_scheduleHydration=function(r){if(r){var s=Dl();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Yn.length&&s!==0&&s<Yn[a].priority;a++);Yn.splice(a,0,r),a===0&&Ol(r)}};function Eh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Mc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function bg(){}function qx(r,s,a,d,f){if(f){if(typeof d=="function"){var y=d;d=function(){var W=Rc(x);y.call(W)}}var x=vg(s,d,r,0,null,!1,!1,"",bg);return r._reactRootContainer=x,r[Er]=x.current,_a(r.nodeType===8?r.parentNode:r),ti(),x}for(;f=r.lastChild;)r.removeChild(f);if(typeof d=="function"){var S=d;d=function(){var W=Rc(M);S.call(W)}}var M=xh(r,0,!1,null,null,!1,!1,"",bg);return r._reactRootContainer=M,r[Er]=M.current,_a(r.nodeType===8?r.parentNode:r),ti(function(){Pc(s,M,a,d)}),M}function Lc(r,s,a,d,f){var y=a._reactRootContainer;if(y){var x=y;if(typeof f=="function"){var S=f;f=function(){var M=Rc(x);S.call(M)}}Pc(s,x,r,f)}else x=qx(a,s,r,f,d);return Rc(x)}Pl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Wr(s.pendingLanes);a!==0&&(Qr(s,a|1),nn(s,Ye()),(Be&6)===0&&(ho=Ye()+500,ss()))}break;case 13:ti(function(){var d=Ir(r,1);if(d!==null){var f=Kt();zn(d,r,1,f)}}),wh(r,1)}},Li=function(r){if(r.tag===13){var s=Ir(r,134217728);if(s!==null){var a=Kt();zn(s,r,134217728,a)}wh(r,134217728)}},Rl=function(r){if(r.tag===13){var s=us(r),a=Ir(r,s);if(a!==null){var d=Kt();zn(a,r,s,d)}wh(r,s)}},Dl=function(){return Oe},Ml=function(r,s){var a=Oe;try{return Oe=r,s()}finally{Oe=a}},Ii=function(r,s,a){switch(s){case"input":if($o(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var d=a[s];if(d!==r&&d.form===r.form){var f=Zl(d);if(!f)throw Error(t(90));wi(d),$o(d,f)}}}break;case"textarea":Ni(r,a);break;case"select":s=a.value,s!=null&&mr(r,!!a.multiple,s,!1)}},Ms=ph,Zo=ti;var Hx={usingClientEntryPoint:!1,Events:[wa,Ji,Zl,Gn,Jo,ph]},Ma={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wx={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=na(r),r===null?null:r.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||$x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oc.isDisabled&&Oc.supportsFiber)try{Us=Oc.inject(Wx),on=Oc}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hx,rn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eh(s))throw Error(t(200));return Bx(r,s,null,a)},rn.createRoot=function(r,s){if(!Eh(r))throw Error(t(299));var a=!1,d="",f=wg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=xh(r,1,!1,null,null,a,!1,d,f),r[Er]=s.current,_a(r.nodeType===8?r.parentNode:r),new bh(s)},rn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=na(s),r=r===null?null:r.stateNode,r},rn.flushSync=function(r){return ti(r)},rn.hydrate=function(r,s,a){if(!Mc(s))throw Error(t(200));return Lc(null,r,s,!0,a)},rn.hydrateRoot=function(r,s,a){if(!Eh(r))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,y="",x=wg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),s=vg(s,null,r,1,a??null,f,!1,y,x),r[Er]=s.current,_a(r),d)for(r=0;r<d.length;r++)a=d[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Dc(s)},rn.render=function(r,s,a){if(!Mc(s))throw Error(t(200));return Lc(null,r,s,!1,a)},rn.unmountComponentAtNode=function(r){if(!Mc(r))throw Error(t(40));return r._reactRootContainer?(ti(function(){Lc(null,null,r,!1,function(){r._reactRootContainer=null,r[Er]=null})}),!0):!1},rn.unstable_batchedUpdates=ph,rn.unstable_renderSubtreeIntoContainer=function(r,s,a,d){if(!Mc(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Lc(r,s,a,!1,d)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var Ag;function cy(){if(Ag)return kh.exports;Ag=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kh.exports=Zx(),kh.exports}var jg;function ew(){if(jg)return Vc;jg=1;var n=cy();return Vc.createRoot=n.createRoot,Vc.hydrateRoot=n.hydrateRoot,Vc}var tw=ew();const nw=ly(tw);var Pg={};const uy=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},rw=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],h=n[t++],p=n[t++],m=((o&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],h=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},dy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],h=o+1<n.length,p=h?n[o+1]:0,m=o+2<n.length,v=m?n[o+2]:0,w=l>>2,k=(l&3)<<4|p>>4;let A=(p&15)<<2|v>>6,O=v&63;m||(O=64,h||(A=64)),i.push(t[w],t[k],t[A],t[O])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rw(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],p=o<n.length?t[n.charAt(o)]:0;++o;const v=o<n.length?t[n.charAt(o)]:64;++o;const k=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||p==null||v==null||k==null)throw new sw;const A=l<<2|p>>4;if(i.push(A),v!==64){const O=p<<4&240|v>>2;if(i.push(O),k!==64){const $=v<<6&192|k;i.push($)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class sw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iw=function(n){const e=uy(n);return dy.encodeByteArray(e,!0)},ou=function(n){return iw(n).replace(/\./g,"")},hy=function(n){try{return dy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ow(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const aw=()=>ow().__FIREBASE_DEFAULTS__,lw=()=>{if(typeof process>"u"||typeof Pg>"u")return;const n=Pg.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},cw=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&hy(n[1]);return e&&JSON.parse(e)},Su=()=>{try{return aw()||lw()||cw()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fy=n=>{var e,t;return(t=(e=Su())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},uw=n=>{const e=fy(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},py=()=>{var n;return(n=Su())===null||n===void 0?void 0:n.config},my=n=>{var e;return(e=Su())===null||e===void 0?void 0:e[`_${n}`]};class dw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function hw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ou(JSON.stringify(t)),ou(JSON.stringify(h)),""].join(".")}function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function pw(){var n;const e=(n=Su())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _w(){const n=$t();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vw(){return!pw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xw(){try{return typeof indexedDB=="object"}catch{return!1}}function ww(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}const bw="FirebaseError";class zr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=bw,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?Ew(l,i):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new zr(o,p,i)}}function Ew(n,e){return n.replace(Tw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Tw=/\{\$([^}]+)}/g;function Nw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function au(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],h=e[o];if(Rg(l)&&Rg(h)){if(!au(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Rg(n){return n!==null&&typeof n=="object"}function ul(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Va(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Fa(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function kw(n,e){const t=new Iw(n,e);return t.subscribe.bind(t)}class Iw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Sw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Ch),o.error===void 0&&(o.error=Ch),o.complete===void 0&&(o.complete=Ch);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sw(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ch(){}function It(n){return n&&n._delegate?n._delegate:n}class fi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const oi="[DEFAULT]";class Cw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new dw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jw(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);i===p&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Aw(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Aw(n){return n===oi?void 0:n}function jw(n){return n.instantiationMode==="EAGER"}class Pw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Cw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ve;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ve||(Ve={}));const Rw={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Dw=Ve.INFO,Mw={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},Lw=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=Mw[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xf{constructor(e){this.name=e,this._logLevel=Dw,this._logHandler=Lw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const Ow=(n,e)=>e.some(t=>n instanceof t);let Dg,Mg;function Vw(){return Dg||(Dg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fw(){return Mg||(Mg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gy=new WeakMap,Bh=new WeakMap,yy=new WeakMap,Ah=new WeakMap,wf=new WeakMap;function Uw(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",h)},l=()=>{t(xs(n.result)),o()},h=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&gy.set(t,n)}).catch(()=>{}),wf.set(e,n),e}function zw(n){if(Bh.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",h),n.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",h),n.addEventListener("abort",h)});Bh.set(n,e)}let $h={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Bh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||yy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Bw(n){$h=n($h)}function $w(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(jh(this),e,...t);return yy.set(i,e.sort?e.sort():[e]),xs(i)}:Fw().includes(n)?function(...e){return n.apply(jh(this),e),xs(gy.get(this))}:function(...e){return xs(n.apply(jh(this),e))}}function qw(n){return typeof n=="function"?$w(n):(n instanceof IDBTransaction&&zw(n),Ow(n,Vw())?new Proxy(n,$h):n)}function xs(n){if(n instanceof IDBRequest)return Uw(n);if(Ah.has(n))return Ah.get(n);const e=qw(n);return e!==n&&(Ah.set(n,e),wf.set(e,n)),e}const jh=n=>wf.get(n);function Hw(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(n,e),p=xs(h);return i&&h.addEventListener("upgradeneeded",m=>{i(xs(h.result),m.oldVersion,m.newVersion,xs(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),p.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const Ww=["get","getKey","getAll","getAllKeys","count"],Kw=["put","add","delete","clear"],Ph=new Map;function Lg(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ph.get(e))return Ph.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Kw.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Ww.includes(t)))return;const l=async function(h,...p){const m=this.transaction(h,o?"readwrite":"readonly");let v=m.store;return i&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&m.done]))[0]};return Ph.set(e,l),l}Bw(n=>({...n,get:(e,t,i)=>Lg(e,t)||n.get(e,t,i),has:(e,t)=>!!Lg(e,t)||n.has(e,t)}));class Gw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Qw(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Qw(n){const e=n.getComponent();return e?.type==="VERSION"}const qh="@firebase/app",Og="0.10.13";const Lr=new xf("@firebase/app"),Yw="@firebase/app-compat",Xw="@firebase/analytics-compat",Jw="@firebase/analytics",Zw="@firebase/app-check-compat",e1="@firebase/app-check",t1="@firebase/auth",n1="@firebase/auth-compat",r1="@firebase/database",s1="@firebase/data-connect",i1="@firebase/database-compat",o1="@firebase/functions",a1="@firebase/functions-compat",l1="@firebase/installations",c1="@firebase/installations-compat",u1="@firebase/messaging",d1="@firebase/messaging-compat",h1="@firebase/performance",f1="@firebase/performance-compat",p1="@firebase/remote-config",m1="@firebase/remote-config-compat",g1="@firebase/storage",y1="@firebase/storage-compat",_1="@firebase/firestore",v1="@firebase/vertexai-preview",x1="@firebase/firestore-compat",w1="firebase",b1="10.14.1";const Hh="[DEFAULT]",E1={[qh]:"fire-core",[Yw]:"fire-core-compat",[Jw]:"fire-analytics",[Xw]:"fire-analytics-compat",[e1]:"fire-app-check",[Zw]:"fire-app-check-compat",[t1]:"fire-auth",[n1]:"fire-auth-compat",[r1]:"fire-rtdb",[s1]:"fire-data-connect",[i1]:"fire-rtdb-compat",[o1]:"fire-fn",[a1]:"fire-fn-compat",[l1]:"fire-iid",[c1]:"fire-iid-compat",[u1]:"fire-fcm",[d1]:"fire-fcm-compat",[h1]:"fire-perf",[f1]:"fire-perf-compat",[p1]:"fire-rc",[m1]:"fire-rc-compat",[g1]:"fire-gcs",[y1]:"fire-gcs-compat",[_1]:"fire-fst",[x1]:"fire-fst-compat",[v1]:"fire-vertex","fire-js":"fire-js",[w1]:"fire-js-all"};const lu=new Map,T1=new Map,Wh=new Map;function Vg(n,e){try{n.container.addComponent(e)}catch(t){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Eo(n){const e=n.name;if(Wh.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;Wh.set(e,n);for(const t of lu.values())Vg(t,n);for(const t of T1.values())Vg(t,n);return!0}function bf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nn(n){return n.settings!==void 0}const N1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ws=new cl("app","Firebase",N1);class k1{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ws.create("app-deleted",{appName:this._name})}}const Po=b1;function _y(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Hh,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw ws.create("bad-app-name",{appName:String(o)});if(t||(t=py()),!t)throw ws.create("no-options");const l=lu.get(o);if(l){if(au(t,l.options)&&au(i,l.config))return l;throw ws.create("duplicate-app",{appName:o})}const h=new Pw(o);for(const m of Wh.values())h.addComponent(m);const p=new k1(t,i,h);return lu.set(o,p),p}function vy(n=Hh){const e=lu.get(n);if(!e&&n===Hh&&py())return _y();if(!e)throw ws.create("no-app",{appName:n});return e}function bs(n,e,t){var i;let o=(i=E1[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(p.join(" "));return}Eo(new fi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const I1="firebase-heartbeat-database",S1=1,Ya="firebase-heartbeat-store";let Rh=null;function xy(){return Rh||(Rh=Hw(I1,S1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ya)}catch(t){console.warn(t)}}}}).catch(n=>{throw ws.create("idb-open",{originalErrorMessage:n.message})})),Rh}async function C1(n){try{const t=(await xy()).transaction(Ya),i=await t.objectStore(Ya).get(wy(n));return await t.done,i}catch(e){if(e instanceof zr)Lr.warn(e.message);else{const t=ws.create("idb-get",{originalErrorMessage:e?.message});Lr.warn(t.message)}}}async function Fg(n,e){try{const i=(await xy()).transaction(Ya,"readwrite");await i.objectStore(Ya).put(e,wy(n)),await i.done}catch(t){if(t instanceof zr)Lr.warn(t.message);else{const i=ws.create("idb-set",{originalErrorMessage:t?.message});Lr.warn(i.message)}}}function wy(n){return`${n.name}!${n.options.appId}`}const A1=1024,j1=720*60*60*1e3;class P1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new D1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Ug();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const p=new Date(h.date).valueOf();return Date.now()-p<=j1}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Lr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ug(),{heartbeatsToSend:i,unsentEntries:o}=R1(this._heartbeatsCache.heartbeats),l=ou(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Lr.warn(t),""}}}function Ug(){return new Date().toISOString().substring(0,10)}function R1(n,e=A1){const t=[];let i=n.slice();for(const o of n){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),zg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),zg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class D1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xw()?ww().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await C1(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Fg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Fg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function zg(n){return ou(JSON.stringify({version:2,heartbeats:n})).length}function M1(n){Eo(new fi("platform-logger",e=>new Gw(e),"PRIVATE")),Eo(new fi("heartbeat",e=>new P1(e),"PRIVATE")),bs(qh,Og,n),bs(qh,Og,"esm2017"),bs("fire-js","")}M1("");function Ef(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function by(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L1=by,Ey=new cl("auth","Firebase",by());const cu=new xf("@firebase/auth");function O1(n,...e){cu.logLevel<=Ve.WARN&&cu.warn(`Auth (${Po}): ${n}`,...e)}function Yc(n,...e){cu.logLevel<=Ve.ERROR&&cu.error(`Auth (${Po}): ${n}`,...e)}function kn(n,...e){throw Nf(n,...e)}function Bn(n,...e){return Nf(n,...e)}function Tf(n,e,t){const i=Object.assign(Object.assign({},L1()),{[e]:t});return new cl("auth","Firebase",i).create(e,{appName:n.name})}function or(n){return Tf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function V1(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&kn(n,"argument-error"),Tf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nf(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Ey.create(n,...e)}function Ie(n,e,...t){if(!n)throw Nf(e,...t)}function Pr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Yc(e),new Error(e)}function Or(n,e){n||Pr(e)}function Kh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function F1(){return Bg()==="http:"||Bg()==="https:"}function Bg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function U1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(F1()||gw()||"connection"in navigator)?navigator.onLine:!0}function z1(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class dl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Or(t>e,"Short delay should be less than long delay!"),this.isMobile=fw()||yw()}get(){return U1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kf(n,e){Or(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Ty{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const B1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const $1=new dl(3e4,6e4);function Is(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ss(n,e,t,i,o={}){return Ny(n,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const p=ul(Object.assign({key:n.config.apiKey},h)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const v=Object.assign({method:e,headers:m},l);return mw()||(v.referrerPolicy="no-referrer"),Ty.fetch()(ky(n,n.config.apiHost,t,p),v)})}async function Ny(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},B1),e);try{const o=new H1(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Fc(n,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const p=l.ok?h.errorMessage:h.error.message,[m,v]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fc(n,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw Fc(n,"email-already-in-use",h);if(m==="USER_DISABLED")throw Fc(n,"user-disabled",h);const w=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Tf(n,w,v);kn(n,w)}}catch(o){if(o instanceof zr)throw o;kn(n,"network-request-failed",{message:String(o)})}}async function hl(n,e,t,i,o={}){const l=await Ss(n,e,t,i,o);return"mfaPendingCredential"in l&&kn(n,"multi-factor-auth-required",{_serverResponse:l}),l}function ky(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?kf(n.config,o):`${n.config.apiScheme}://${o}`}function q1(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class H1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Bn(this.auth,"network-request-failed")),$1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Bn(n,e,i);return o.customData._tokenResponse=t,o}function $g(n){return n!==void 0&&n.enterprise!==void 0}class W1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return q1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function K1(n,e){return Ss(n,"GET","/v2/recaptchaConfig",Is(n,e))}async function G1(n,e){return Ss(n,"POST","/v1/accounts:delete",e)}async function Iy(n,e){return Ss(n,"POST","/v1/accounts:lookup",e)}function qa(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q1(n,e=!1){const t=It(n),i=await t.getIdToken(e),o=If(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:i,authTime:qa(Dh(o.auth_time)),issuedAtTime:qa(Dh(o.iat)),expirationTime:qa(Dh(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Dh(n){return Number(n)*1e3}function If(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Yc("JWT malformed, contained fewer than 3 sections"),null;try{const o=hy(t);return o?JSON.parse(o):(Yc("Failed to decode base64 JWT payload"),null)}catch(o){return Yc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function qg(n){const e=If(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Xa(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof zr&&Y1(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Y1({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class X1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Gh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qa(this.lastLoginAt),this.creationTime=qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function uu(n){var e;const t=n.auth,i=await n.getIdToken(),o=await Xa(n,Iy(t,{idToken:i}));Ie(o?.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Sy(l.providerUserInfo):[],p=Z1(n.providerData,h),m=n.isAnonymous,v=!(n.email&&l.passwordHash)&&!p?.length,w=m?v:!1,k={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new Gh(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(n,k)}async function J1(n){const e=It(n);await uu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Z1(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Sy(n){return n.map(e=>{var{providerId:t}=e,i=Ef(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function eb(n,e){const t=await Ny(n,{},async()=>{const i=ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,h=ky(n,o,"/v1/token",`key=${l}`),p=await n._getAdditionalHeaders();return p["Content-Type"]="application/x-www-form-urlencoded",Ty.fetch()(h,{method:"POST",headers:p,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tb(n,e){return Ss(n,"POST","/v2/accounts:revokeToken",Is(n,e))}class yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=qg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await eb(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new yo;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yo,this.toJSON())}_performRefresh(){return Pr("not implemented")}}function ps(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Rr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Ef(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Gh(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Xa(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Q1(this,e)}reload(){return J1(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await uu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(or(this.auth));const e=await this.getIdToken();return await Xa(this,G1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,p,m,v,w;const k=(i=t.displayName)!==null&&i!==void 0?i:void 0,A=(o=t.email)!==null&&o!==void 0?o:void 0,O=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,$=(h=t.photoURL)!==null&&h!==void 0?h:void 0,q=(p=t.tenantId)!==null&&p!==void 0?p:void 0,V=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,J=(v=t.createdAt)!==null&&v!==void 0?v:void 0,F=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:D,emailVerified:G,isAnonymous:ie,providerData:ce,stsTokenManager:j}=t;Ie(D&&j,e,"internal-error");const b=yo.fromJSON(this.name,j);Ie(typeof D=="string",e,"internal-error"),ps(k,e.name),ps(A,e.name),Ie(typeof G=="boolean",e,"internal-error"),Ie(typeof ie=="boolean",e,"internal-error"),ps(O,e.name),ps($,e.name),ps(q,e.name),ps(V,e.name),ps(J,e.name),ps(F,e.name);const N=new Rr({uid:D,auth:e,email:A,emailVerified:G,displayName:k,isAnonymous:ie,photoURL:$,phoneNumber:O,tenantId:q,stsTokenManager:b,createdAt:J,lastLoginAt:F});return ce&&Array.isArray(ce)&&(N.providerData=ce.map(I=>Object.assign({},I))),V&&(N._redirectEventId=V),N}static async _fromIdTokenResponse(e,t,i=!1){const o=new yo;o.updateFromServerResponse(t);const l=new Rr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await uu(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Sy(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,p=new yo;p.updateFromIdToken(i);const m=new Rr({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Gh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(m,v),m}}const Hg=new Map;function Dr(n){Or(n instanceof Function,"Expected a class definition");let e=Hg.get(n);return e?(Or(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Hg.set(n,e),e)}class Cy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Cy.type="NONE";const Wg=Cy;function Xc(n,e,t){return`firebase:${n}:${e}:${t}`}class _o{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Xc(this.userKey,o.apiKey,l),this.fullPersistenceKey=Xc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new _o(Dr(Wg),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Dr(Wg);const h=Xc(i,e.config.apiKey,e.name);let p=null;for(const v of t)try{const w=await v._get(h);if(w){const k=Rr._fromJSON(e,w);v!==l&&(p=k),l=v;break}}catch{}const m=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new _o(l,e,i):(l=m[0],p&&await l._set(h,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new _o(l,e,i))}}function Kg(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ry(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ay(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(My(e))return"Blackberry";if(Ly(e))return"Webos";if(jy(e))return"Safari";if((e.includes("chrome/")||Py(e))&&!e.includes("edge/"))return"Chrome";if(Dy(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Ay(n=$t()){return/firefox\//i.test(n)}function jy(n=$t()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Py(n=$t()){return/crios\//i.test(n)}function Ry(n=$t()){return/iemobile/i.test(n)}function Dy(n=$t()){return/android/i.test(n)}function My(n=$t()){return/blackberry/i.test(n)}function Ly(n=$t()){return/webos/i.test(n)}function Sf(n=$t()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nb(n=$t()){var e;return Sf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rb(){return _w()&&document.documentMode===10}function Oy(n=$t()){return Sf(n)||Dy(n)||Ly(n)||My(n)||/windows phone/i.test(n)||Ry(n)}function Vy(n,e=[]){let t;switch(n){case"Browser":t=Kg($t());break;case"Worker":t=`${Kg($t())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Po}/${i}`}class sb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,p)=>{try{const m=e(l);h(m)}catch(m){p(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function ib(n,e={}){return Ss(n,"GET","/v2/passwordPolicy",Is(n,e))}const ob=6;class ab{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:ob,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class lb{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gg(this),this.idTokenSubscription=new Gg(this),this.beforeStateQueue=new sb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ey,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Dr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Iy(this,{idToken:e}),i=await Rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Nn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o?._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===p)&&m?.user&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=z1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(or(this));const t=e?It(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ib(this),t=new ab(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await tb(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Dr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[Dr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(p,this,"internal-error"),p.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&O1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Br(n){return It(n)}class Gg{constructor(e){this.auth=e,this.observer=null,this.addObserver=kw(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Cu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cb(n){Cu=n}function Fy(n){return Cu.loadJS(n)}function ub(){return Cu.recaptchaEnterpriseScript}function db(){return Cu.gapiScript}function hb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const fb="recaptcha-enterprise",pb="NO_RECAPTCHA";class mb{constructor(e){this.type=fb,this.auth=Br(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,p)=>{K1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new W1(m);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,h(v.siteKey)}}).catch(m=>{p(m)})})}function o(l,h,p){const m=window.grecaptcha;$g(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(v=>{h(v)}).catch(()=>{h(pb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,h)=>{i(this.auth).then(p=>{if(!t&&$g(window.grecaptcha))o(p,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=ub();m.length!==0&&(m+=p),Fy(m).then(()=>{o(p,l,h)}).catch(v=>{h(v)})}}).catch(p=>{h(p)})})}}async function Qg(n,e,t,i=!1){const o=new mb(n);let l;try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const h=Object.assign({},e);return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Qh(n,e,t,i){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Qg(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Qg(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(l)})}function gb(n,e){const t=bf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(au(l,e??{}))return o;kn(o,"already-initialized")}return t.initialize({options:e})}function yb(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Dr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function _b(n,e,t){const i=Br(n);Ie(i._canInitEmulator,i,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Uy(e),{host:h,port:p}=vb(e),m=p===null?"":`:${p}`;i.config.emulator={url:`${l}//${h}${m}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),xb()}function Uy(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function vb(n){const e=Uy(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Yg(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Yg(h)}}}function Yg(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function xb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Cf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pr("not implemented")}_getIdTokenResponse(e){return Pr("not implemented")}_linkToIdToken(e,t){return Pr("not implemented")}_getReauthenticationResolver(e){return Pr("not implemented")}}async function wb(n,e){return Ss(n,"POST","/v1/accounts:signUp",e)}async function bb(n,e){return hl(n,"POST","/v1/accounts:signInWithPassword",Is(n,e))}async function Eb(n,e){return hl(n,"POST","/v1/accounts:signInWithEmailLink",Is(n,e))}async function Tb(n,e){return hl(n,"POST","/v1/accounts:signInWithEmailLink",Is(n,e))}class Ja extends Cf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ja(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ja(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qh(e,t,"signInWithPassword",bb);case"emailLink":return Eb(e,{email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qh(e,i,"signUpPassword",wb);case"emailLink":return Tb(e,{idToken:t,email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function vo(n,e){return hl(n,"POST","/v1/accounts:signInWithIdp",Is(n,e))}const Nb="http://localhost";class pi extends Cf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Ef(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new pi(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return vo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,vo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vo(e,t)}buildRequest(){const e={requestUri:Nb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ul(t)}return e}}function kb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ib(n){const e=Va(Fa(n)).link,t=e?Va(Fa(e)).deep_link_id:null,i=Va(Fa(n)).deep_link_id;return(i?Va(Fa(i)).link:null)||i||t||e||n}class Af{constructor(e){var t,i,o,l,h,p;const m=Va(Fa(e)),v=(t=m.apiKey)!==null&&t!==void 0?t:null,w=(i=m.oobCode)!==null&&i!==void 0?i:null,k=kb((o=m.mode)!==null&&o!==void 0?o:null);Ie(v&&w&&k,"argument-error"),this.apiKey=v,this.operation=k,this.code=w,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=m.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(p=m.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const t=Ib(e);try{return new Af(t)}catch{return null}}}class Ro{constructor(){this.providerId=Ro.PROVIDER_ID}static credential(e,t){return Ja._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Af.parseLink(t);return Ie(i,"argument-error"),Ja._fromEmailAndCode(e,i.code,i.tenantId)}}Ro.PROVIDER_ID="password";Ro.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ro.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class jf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fl extends jf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ms extends fl{constructor(){super("facebook.com")}static credential(e){return pi._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";ms.PROVIDER_ID="facebook.com";class jr extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pi._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return jr.credential(t,i)}catch{return null}}}jr.GOOGLE_SIGN_IN_METHOD="google.com";jr.PROVIDER_ID="google.com";class gs extends fl{constructor(){super("github.com")}static credential(e){return pi._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";class ys extends fl{constructor(){super("twitter.com")}static credential(e,t){return pi._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ys.credential(t,i)}catch{return null}}}ys.TWITTER_SIGN_IN_METHOD="twitter.com";ys.PROVIDER_ID="twitter.com";async function zy(n,e){return hl(n,"POST","/v1/accounts:signUp",Is(n,e))}class Vr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Rr._fromIdTokenResponse(e,i,o),h=Xg(i);return new Vr({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Xg(i);return new Vr({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Xg(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function Sb(n){var e;if(Nn(n.app))return Promise.reject(or(n));const t=Br(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Vr({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await zy(t,{returnSecureToken:!0}),o=await Vr._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(o.user),o}class du extends zr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,du.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new du(e,t,i,o)}}function By(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?du._fromErrorAndOperation(n,l,e,i):l})}async function Cb(n,e,t=!1){const i=await Xa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Vr._forOperation(n,"link",i)}async function Ab(n,e,t=!1){const{auth:i}=n;if(Nn(i.app))return Promise.reject(or(i));const o="reauthenticate";try{const l=await Xa(n,By(i,o,e,n),t);Ie(l.idToken,i,"internal-error");const h=If(l.idToken);Ie(h,i,"internal-error");const{sub:p}=h;return Ie(n.uid===p,i,"user-mismatch"),Vr._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&kn(i,"user-mismatch"),l}}async function $y(n,e,t=!1){if(Nn(n.app))return Promise.reject(or(n));const i="signIn",o=await By(n,i,e),l=await Vr._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function jb(n,e){return $y(Br(n),e)}async function qy(n){const e=Br(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Pb(n,e,t){if(Nn(n.app))return Promise.reject(or(n));const i=Br(n),h=await Qh(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zy).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&qy(n),m}),p=await Vr._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function Rb(n,e,t){return Nn(n.app)?Promise.reject(or(n)):jb(It(n),Ro.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&qy(n),i})}function Db(n,e,t,i){return It(n).onIdTokenChanged(e,t,i)}function Mb(n,e,t){return It(n).beforeAuthStateChanged(e,t)}function Lb(n,e,t,i){return It(n).onAuthStateChanged(e,t,i)}function Jg(n){return It(n).signOut()}const hu="__sak";class Hy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hu,"1"),this.storage.removeItem(hu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ob=1e3,Vb=10;class Wy extends Hy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Oy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);rb()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Vb):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Ob)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wy.type="LOCAL";const Fb=Wy;class Ky extends Hy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ky.type="SESSION";const Gy=Ky;function Ub(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Au{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Au(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(h).map(async v=>v(t.origin,l)),m=await Ub(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Au.receivers=[];function Pf(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class zb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((p,m)=>{const v=Pf("",20);o.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(k){const A=k;if(A.data.eventId===v)switch(A.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(A.data.response);break;default:clearTimeout(w),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function ar(){return window}function Bb(n){ar().location.href=n}function Qy(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function $b(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qb(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Hb(){return Qy()?self:null}const Yy="firebaseLocalStorageDb",Wb=1,fu="firebaseLocalStorage",Xy="fbase_key";class pl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ju(n,e){return n.transaction([fu],e?"readwrite":"readonly").objectStore(fu)}function Kb(){const n=indexedDB.deleteDatabase(Yy);return new pl(n).toPromise()}function Yh(){const n=indexedDB.open(Yy,Wb);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(fu,{keyPath:Xy})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(fu)?e(i):(i.close(),await Kb(),e(await Yh()))})})}async function Zg(n,e,t){const i=ju(n,!0).put({[Xy]:e,value:t});return new pl(i).toPromise()}async function Gb(n,e){const t=ju(n,!1).get(e),i=await new pl(t).toPromise();return i===void 0?null:i.value}function e0(n,e){const t=ju(n,!0).delete(e);return new pl(t).toPromise()}const Qb=800,Yb=3;class Jy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Yb)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Au._getInstance(Hb()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await $b(),!this.activeServiceWorker)return;this.sender=new zb(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yh();return await Zg(e,hu,"1"),await e0(e,hu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Zg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Gb(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>e0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=ju(o,!1).getAll();return new pl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Qb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jy.type="LOCAL";const Xb=Jy;new dl(3e4,6e4);function Zy(n,e){return e?Dr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Rf extends Cf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jb(n){return $y(n.auth,new Rf(n),n.bypassAuthState)}function Zb(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),Ab(t,new Rf(n),n.bypassAuthState)}async function e2(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),Cb(t,new Rf(n),n.bypassAuthState)}class e_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:p}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jb;case"linkViaPopup":case"linkViaRedirect":return e2;case"reauthViaPopup":case"reauthViaRedirect":return Zb;default:kn(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const t2=new dl(2e3,1e4);async function n2(n,e,t){if(Nn(n.app))return Promise.reject(Bn(n,"operation-not-supported-in-this-environment"));const i=Br(n);V1(n,e,jf);const o=Zy(i,t);return new ai(i,"signInViaPopup",e,o).executeNotNull()}class ai extends e_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,ai.currentPopupAction&&ai.currentPopupAction.cancel(),ai.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const e=Pf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ai.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,t2.get())};e()}}ai.currentPopupAction=null;const r2="pendingRedirect",Jc=new Map;class s2 extends e_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Jc.get(this.auth._key());if(!e){try{const i=await i2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Jc.set(this.auth._key(),e)}return this.bypassAuthState||Jc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function i2(n,e){const t=l2(e),i=a2(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function o2(n,e){Jc.set(n._key(),e)}function a2(n){return Dr(n._redirectPersistence)}function l2(n){return Xc(r2,n.config.apiKey,n.name)}async function c2(n,e,t=!1){if(Nn(n.app))return Promise.reject(or(n));const i=Br(n),o=Zy(i,e),h=await new s2(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const u2=600*1e3;class d2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!t_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Bn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u2&&this.cachedEventUids.clear(),this.cachedEventUids.has(t0(e))}saveEventToCache(e){this.cachedEventUids.add(t0(e)),this.lastProcessedEventTime=Date.now()}}function t0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function t_({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function h2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t_(n);default:return!1}}async function f2(n,e={}){return Ss(n,"GET","/v1/projects",e)}const p2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m2=/^https?/;async function g2(n){if(n.config.emulator)return;const{authorizedDomains:e}=await f2(n);for(const t of e)try{if(y2(t))return}catch{}kn(n,"unauthorized-domain")}function y2(n){const e=Kh(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!m2.test(t))return!1;if(p2.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const _2=new dl(3e4,6e4);function n0(){const n=ar().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function v2(n){return new Promise((e,t)=>{var i,o,l;function h(){n0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n0(),t(Bn(n,"network-request-failed"))},timeout:_2.get()})}if(!((o=(i=ar().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ar().gapi)===null||l===void 0)&&l.load)h();else{const p=hb("iframefcb");return ar()[p]=()=>{gapi.load?h():t(Bn(n,"network-request-failed"))},Fy(`${db()}?onload=${p}`).catch(m=>t(m))}}).catch(e=>{throw Zc=null,e})}let Zc=null;function x2(n){return Zc=Zc||v2(n),Zc}const w2=new dl(5e3,15e3),b2="__/auth/iframe",E2="emulator/auth/iframe",T2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k2(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?kf(e,E2):`https://${n.config.authDomain}/${b2}`,i={apiKey:e.apiKey,appName:n.name,v:Po},o=N2.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${ul(i).slice(1)}`}async function I2(n){const e=await x2(n),t=ar().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:k2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:T2,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Bn(n,"network-request-failed"),p=ar().setTimeout(()=>{l(h)},w2.get());function m(){ar().clearTimeout(p),o(i)}i.ping(m).then(m,()=>{l(h)})}))}const S2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},C2=500,A2=600,j2="_blank",P2="http://localhost";class r0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function R2(n,e,t,i=C2,o=A2){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const m=Object.assign(Object.assign({},S2),{width:i.toString(),height:o.toString(),top:l,left:h}),v=$t().toLowerCase();t&&(p=Py(v)?j2:t),Ay(v)&&(e=e||P2,m.scrollbars="yes");const w=Object.entries(m).reduce((A,[O,$])=>`${A}${O}=${$},`,"");if(nb(v)&&p!=="_self")return D2(e||"",p),new r0(null);const k=window.open(e||"",p,w);Ie(k,n,"popup-blocked");try{k.focus()}catch{}return new r0(k)}function D2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const M2="__/auth/handler",L2="emulator/auth/handler",O2=encodeURIComponent("fac");async function s0(n,e,t,i,o,l){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Po,eventId:o};if(e instanceof jf){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",Nw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,k]of Object.entries({}))h[w]=k}if(e instanceof fl){const w=e.getScopes().filter(k=>k!=="");w.length>0&&(h.scopes=w.join(","))}n.tenantId&&(h.tid=n.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const m=await n._getAppCheckToken(),v=m?`#${O2}=${encodeURIComponent(m)}`:"";return`${V2(n)}?${ul(p).slice(1)}${v}`}function V2({config:n}){return n.emulator?kf(n,L2):`https://${n.authDomain}/${M2}`}const Mh="webStorageSupport";class F2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gy,this._completeRedirectFn=c2,this._overrideRedirectResult=o2}async _openPopup(e,t,i,o){var l;Or((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await s0(e,t,i,Kh(),o);return R2(e,h,Pf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await s0(e,t,i,Kh(),o);return Bb(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Or(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await I2(e),i=new d2(e);return t.register("authEvent",o=>(Ie(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mh,{type:Mh},o=>{var l;const h=(l=o?.[0])===null||l===void 0?void 0:l[Mh];h!==void 0&&t(!!h),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=g2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Oy()||jy()||Sf()}}const U2=F2;var i0="@firebase/auth",o0="1.7.9";class z2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function B2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $2(n){Eo(new fi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Ie(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:h,authDomain:p,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vy(n)},v=new lb(i,o,l,m);return yb(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Eo(new fi("auth-internal",e=>{const t=Br(e.getProvider("auth").getImmediate());return(i=>new z2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bs(i0,o0,B2(n)),bs(i0,o0,"esm2017")}const q2=300,H2=my("authIdTokenMaxAge")||q2;let a0=null;const W2=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>H2)return;const o=t?.token;a0!==o&&(a0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function K2(n=vy()){const e=bf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=gb(n,{popupRedirectResolver:U2,persistence:[Xb,Fb,Gy]}),i=my("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=W2(l.toString());Mb(t,h,()=>h(t.currentUser)),Db(t,p=>h(p))}}const o=fy("auth");return o&&_b(t,`http://${o}`),t}function G2(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}cb({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=Bn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",G2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$2("Browser");var Q2="firebase",Y2="10.14.1";bs(Q2,Y2,"app");var l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ci,n_;(function(){var n;function e(j,b){function N(){}N.prototype=b.prototype,j.D=b.prototype,j.prototype=new N,j.prototype.constructor=j,j.C=function(I,P,C){for(var T=Array(arguments.length-2),K=2;K<arguments.length;K++)T[K-2]=arguments[K];return b.prototype[P].apply(I,T)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(j,b,N){N||(N=0);var I=Array(16);if(typeof b=="string")for(var P=0;16>P;++P)I[P]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(P=0;16>P;++P)I[P]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=j.g[0],N=j.g[1],P=j.g[2];var C=j.g[3],T=b+(C^N&(P^C))+I[0]+3614090360&4294967295;b=N+(T<<7&4294967295|T>>>25),T=C+(P^b&(N^P))+I[1]+3905402710&4294967295,C=b+(T<<12&4294967295|T>>>20),T=P+(N^C&(b^N))+I[2]+606105819&4294967295,P=C+(T<<17&4294967295|T>>>15),T=N+(b^P&(C^b))+I[3]+3250441966&4294967295,N=P+(T<<22&4294967295|T>>>10),T=b+(C^N&(P^C))+I[4]+4118548399&4294967295,b=N+(T<<7&4294967295|T>>>25),T=C+(P^b&(N^P))+I[5]+1200080426&4294967295,C=b+(T<<12&4294967295|T>>>20),T=P+(N^C&(b^N))+I[6]+2821735955&4294967295,P=C+(T<<17&4294967295|T>>>15),T=N+(b^P&(C^b))+I[7]+4249261313&4294967295,N=P+(T<<22&4294967295|T>>>10),T=b+(C^N&(P^C))+I[8]+1770035416&4294967295,b=N+(T<<7&4294967295|T>>>25),T=C+(P^b&(N^P))+I[9]+2336552879&4294967295,C=b+(T<<12&4294967295|T>>>20),T=P+(N^C&(b^N))+I[10]+4294925233&4294967295,P=C+(T<<17&4294967295|T>>>15),T=N+(b^P&(C^b))+I[11]+2304563134&4294967295,N=P+(T<<22&4294967295|T>>>10),T=b+(C^N&(P^C))+I[12]+1804603682&4294967295,b=N+(T<<7&4294967295|T>>>25),T=C+(P^b&(N^P))+I[13]+4254626195&4294967295,C=b+(T<<12&4294967295|T>>>20),T=P+(N^C&(b^N))+I[14]+2792965006&4294967295,P=C+(T<<17&4294967295|T>>>15),T=N+(b^P&(C^b))+I[15]+1236535329&4294967295,N=P+(T<<22&4294967295|T>>>10),T=b+(P^C&(N^P))+I[1]+4129170786&4294967295,b=N+(T<<5&4294967295|T>>>27),T=C+(N^P&(b^N))+I[6]+3225465664&4294967295,C=b+(T<<9&4294967295|T>>>23),T=P+(b^N&(C^b))+I[11]+643717713&4294967295,P=C+(T<<14&4294967295|T>>>18),T=N+(C^b&(P^C))+I[0]+3921069994&4294967295,N=P+(T<<20&4294967295|T>>>12),T=b+(P^C&(N^P))+I[5]+3593408605&4294967295,b=N+(T<<5&4294967295|T>>>27),T=C+(N^P&(b^N))+I[10]+38016083&4294967295,C=b+(T<<9&4294967295|T>>>23),T=P+(b^N&(C^b))+I[15]+3634488961&4294967295,P=C+(T<<14&4294967295|T>>>18),T=N+(C^b&(P^C))+I[4]+3889429448&4294967295,N=P+(T<<20&4294967295|T>>>12),T=b+(P^C&(N^P))+I[9]+568446438&4294967295,b=N+(T<<5&4294967295|T>>>27),T=C+(N^P&(b^N))+I[14]+3275163606&4294967295,C=b+(T<<9&4294967295|T>>>23),T=P+(b^N&(C^b))+I[3]+4107603335&4294967295,P=C+(T<<14&4294967295|T>>>18),T=N+(C^b&(P^C))+I[8]+1163531501&4294967295,N=P+(T<<20&4294967295|T>>>12),T=b+(P^C&(N^P))+I[13]+2850285829&4294967295,b=N+(T<<5&4294967295|T>>>27),T=C+(N^P&(b^N))+I[2]+4243563512&4294967295,C=b+(T<<9&4294967295|T>>>23),T=P+(b^N&(C^b))+I[7]+1735328473&4294967295,P=C+(T<<14&4294967295|T>>>18),T=N+(C^b&(P^C))+I[12]+2368359562&4294967295,N=P+(T<<20&4294967295|T>>>12),T=b+(N^P^C)+I[5]+4294588738&4294967295,b=N+(T<<4&4294967295|T>>>28),T=C+(b^N^P)+I[8]+2272392833&4294967295,C=b+(T<<11&4294967295|T>>>21),T=P+(C^b^N)+I[11]+1839030562&4294967295,P=C+(T<<16&4294967295|T>>>16),T=N+(P^C^b)+I[14]+4259657740&4294967295,N=P+(T<<23&4294967295|T>>>9),T=b+(N^P^C)+I[1]+2763975236&4294967295,b=N+(T<<4&4294967295|T>>>28),T=C+(b^N^P)+I[4]+1272893353&4294967295,C=b+(T<<11&4294967295|T>>>21),T=P+(C^b^N)+I[7]+4139469664&4294967295,P=C+(T<<16&4294967295|T>>>16),T=N+(P^C^b)+I[10]+3200236656&4294967295,N=P+(T<<23&4294967295|T>>>9),T=b+(N^P^C)+I[13]+681279174&4294967295,b=N+(T<<4&4294967295|T>>>28),T=C+(b^N^P)+I[0]+3936430074&4294967295,C=b+(T<<11&4294967295|T>>>21),T=P+(C^b^N)+I[3]+3572445317&4294967295,P=C+(T<<16&4294967295|T>>>16),T=N+(P^C^b)+I[6]+76029189&4294967295,N=P+(T<<23&4294967295|T>>>9),T=b+(N^P^C)+I[9]+3654602809&4294967295,b=N+(T<<4&4294967295|T>>>28),T=C+(b^N^P)+I[12]+3873151461&4294967295,C=b+(T<<11&4294967295|T>>>21),T=P+(C^b^N)+I[15]+530742520&4294967295,P=C+(T<<16&4294967295|T>>>16),T=N+(P^C^b)+I[2]+3299628645&4294967295,N=P+(T<<23&4294967295|T>>>9),T=b+(P^(N|~C))+I[0]+4096336452&4294967295,b=N+(T<<6&4294967295|T>>>26),T=C+(N^(b|~P))+I[7]+1126891415&4294967295,C=b+(T<<10&4294967295|T>>>22),T=P+(b^(C|~N))+I[14]+2878612391&4294967295,P=C+(T<<15&4294967295|T>>>17),T=N+(C^(P|~b))+I[5]+4237533241&4294967295,N=P+(T<<21&4294967295|T>>>11),T=b+(P^(N|~C))+I[12]+1700485571&4294967295,b=N+(T<<6&4294967295|T>>>26),T=C+(N^(b|~P))+I[3]+2399980690&4294967295,C=b+(T<<10&4294967295|T>>>22),T=P+(b^(C|~N))+I[10]+4293915773&4294967295,P=C+(T<<15&4294967295|T>>>17),T=N+(C^(P|~b))+I[1]+2240044497&4294967295,N=P+(T<<21&4294967295|T>>>11),T=b+(P^(N|~C))+I[8]+1873313359&4294967295,b=N+(T<<6&4294967295|T>>>26),T=C+(N^(b|~P))+I[15]+4264355552&4294967295,C=b+(T<<10&4294967295|T>>>22),T=P+(b^(C|~N))+I[6]+2734768916&4294967295,P=C+(T<<15&4294967295|T>>>17),T=N+(C^(P|~b))+I[13]+1309151649&4294967295,N=P+(T<<21&4294967295|T>>>11),T=b+(P^(N|~C))+I[4]+4149444226&4294967295,b=N+(T<<6&4294967295|T>>>26),T=C+(N^(b|~P))+I[11]+3174756917&4294967295,C=b+(T<<10&4294967295|T>>>22),T=P+(b^(C|~N))+I[2]+718787259&4294967295,P=C+(T<<15&4294967295|T>>>17),T=N+(C^(P|~b))+I[9]+3951481745&4294967295,j.g[0]=j.g[0]+b&4294967295,j.g[1]=j.g[1]+(P+(T<<21&4294967295|T>>>11))&4294967295,j.g[2]=j.g[2]+P&4294967295,j.g[3]=j.g[3]+C&4294967295}i.prototype.u=function(j,b){b===void 0&&(b=j.length);for(var N=b-this.blockSize,I=this.B,P=this.h,C=0;C<b;){if(P==0)for(;C<=N;)o(this,j,C),C+=this.blockSize;if(typeof j=="string"){for(;C<b;)if(I[P++]=j.charCodeAt(C++),P==this.blockSize){o(this,I),P=0;break}}else for(;C<b;)if(I[P++]=j[C++],P==this.blockSize){o(this,I),P=0;break}}this.h=P,this.o+=b},i.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var b=1;b<j.length-8;++b)j[b]=0;var N=8*this.o;for(b=j.length-8;b<j.length;++b)j[b]=N&255,N/=256;for(this.u(j),j=Array(16),b=N=0;4>b;++b)for(var I=0;32>I;I+=8)j[N++]=this.g[b]>>>I&255;return j};function l(j,b){var N=p;return Object.prototype.hasOwnProperty.call(N,j)?N[j]:N[j]=b(j)}function h(j,b){this.h=b;for(var N=[],I=!0,P=j.length-1;0<=P;P--){var C=j[P]|0;I&&C==b||(N[P]=C,I=!1)}this.g=N}var p={};function m(j){return-128<=j&&128>j?l(j,function(b){return new h([b|0],0>b?-1:0)}):new h([j|0],0>j?-1:0)}function v(j){if(isNaN(j)||!isFinite(j))return k;if(0>j)return V(v(-j));for(var b=[],N=1,I=0;j>=N;I++)b[I]=j/N|0,N*=4294967296;return new h(b,0)}function w(j,b){if(j.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(j.charAt(0)=="-")return V(w(j.substring(1),b));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=v(Math.pow(b,8)),I=k,P=0;P<j.length;P+=8){var C=Math.min(8,j.length-P),T=parseInt(j.substring(P,P+C),b);8>C?(C=v(Math.pow(b,C)),I=I.j(C).add(v(T))):(I=I.j(N),I=I.add(v(T)))}return I}var k=m(0),A=m(1),O=m(16777216);n=h.prototype,n.m=function(){if(q(this))return-V(this).m();for(var j=0,b=1,N=0;N<this.g.length;N++){var I=this.i(N);j+=(0<=I?I:4294967296+I)*b,b*=4294967296}return j},n.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if($(this))return"0";if(q(this))return"-"+V(this).toString(j);for(var b=v(Math.pow(j,6)),N=this,I="";;){var P=G(N,b).g;N=J(N,P.j(b));var C=((0<N.g.length?N.g[0]:N.h)>>>0).toString(j);if(N=P,$(N))return C+I;for(;6>C.length;)C="0"+C;I=C+I}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function $(j){if(j.h!=0)return!1;for(var b=0;b<j.g.length;b++)if(j.g[b]!=0)return!1;return!0}function q(j){return j.h==-1}n.l=function(j){return j=J(this,j),q(j)?-1:$(j)?0:1};function V(j){for(var b=j.g.length,N=[],I=0;I<b;I++)N[I]=~j.g[I];return new h(N,~j.h).add(A)}n.abs=function(){return q(this)?V(this):this},n.add=function(j){for(var b=Math.max(this.g.length,j.g.length),N=[],I=0,P=0;P<=b;P++){var C=I+(this.i(P)&65535)+(j.i(P)&65535),T=(C>>>16)+(this.i(P)>>>16)+(j.i(P)>>>16);I=T>>>16,C&=65535,T&=65535,N[P]=T<<16|C}return new h(N,N[N.length-1]&-2147483648?-1:0)};function J(j,b){return j.add(V(b))}n.j=function(j){if($(this)||$(j))return k;if(q(this))return q(j)?V(this).j(V(j)):V(V(this).j(j));if(q(j))return V(this.j(V(j)));if(0>this.l(O)&&0>j.l(O))return v(this.m()*j.m());for(var b=this.g.length+j.g.length,N=[],I=0;I<2*b;I++)N[I]=0;for(I=0;I<this.g.length;I++)for(var P=0;P<j.g.length;P++){var C=this.i(I)>>>16,T=this.i(I)&65535,K=j.i(P)>>>16,oe=j.i(P)&65535;N[2*I+2*P]+=T*oe,F(N,2*I+2*P),N[2*I+2*P+1]+=C*oe,F(N,2*I+2*P+1),N[2*I+2*P+1]+=T*K,F(N,2*I+2*P+1),N[2*I+2*P+2]+=C*K,F(N,2*I+2*P+2)}for(I=0;I<b;I++)N[I]=N[2*I+1]<<16|N[2*I];for(I=b;I<2*b;I++)N[I]=0;return new h(N,0)};function F(j,b){for(;(j[b]&65535)!=j[b];)j[b+1]+=j[b]>>>16,j[b]&=65535,b++}function D(j,b){this.g=j,this.h=b}function G(j,b){if($(b))throw Error("division by zero");if($(j))return new D(k,k);if(q(j))return b=G(V(j),b),new D(V(b.g),V(b.h));if(q(b))return b=G(j,V(b)),new D(V(b.g),b.h);if(30<j.g.length){if(q(j)||q(b))throw Error("slowDivide_ only works with positive integers.");for(var N=A,I=b;0>=I.l(j);)N=ie(N),I=ie(I);var P=ce(N,1),C=ce(I,1);for(I=ce(I,2),N=ce(N,2);!$(I);){var T=C.add(I);0>=T.l(j)&&(P=P.add(N),C=T),I=ce(I,1),N=ce(N,1)}return b=J(j,P.j(b)),new D(P,b)}for(P=k;0<=j.l(b);){for(N=Math.max(1,Math.floor(j.m()/b.m())),I=Math.ceil(Math.log(N)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),C=v(N),T=C.j(b);q(T)||0<T.l(j);)N-=I,C=v(N),T=C.j(b);$(C)&&(C=A),P=P.add(C),j=J(j,T)}return new D(P,j)}n.A=function(j){return G(this,j).h},n.and=function(j){for(var b=Math.max(this.g.length,j.g.length),N=[],I=0;I<b;I++)N[I]=this.i(I)&j.i(I);return new h(N,this.h&j.h)},n.or=function(j){for(var b=Math.max(this.g.length,j.g.length),N=[],I=0;I<b;I++)N[I]=this.i(I)|j.i(I);return new h(N,this.h|j.h)},n.xor=function(j){for(var b=Math.max(this.g.length,j.g.length),N=[],I=0;I<b;I++)N[I]=this.i(I)^j.i(I);return new h(N,this.h^j.h)};function ie(j){for(var b=j.g.length+1,N=[],I=0;I<b;I++)N[I]=j.i(I)<<1|j.i(I-1)>>>31;return new h(N,j.h)}function ce(j,b){var N=b>>5;b%=32;for(var I=j.g.length-N,P=[],C=0;C<I;C++)P[C]=0<b?j.i(C+N)>>>b|j.i(C+N+1)<<32-b:j.i(C+N);return new h(P,j.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,n_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,ci=h}).apply(typeof l0<"u"?l0:typeof self<"u"?self:typeof window<"u"?window:{});var Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var r_,Ua,s_,eu,Xh,i_,o_,a_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,_){return u==Array.prototype||u==Object.prototype||(u[g]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uc=="object"&&Uc];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,g){if(g)e:{var _=i;u=u.split(".");for(var E=0;E<u.length-1;E++){var z=u[E];if(!(z in _))break e;_=_[z]}u=u[u.length-1],E=_[u],g=g(E),g!=E&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}function l(u,g){u instanceof String&&(u+="");var _=0,E=!1,z={next:function(){if(!E&&_<u.length){var Q=_++;return{value:g(Q,u[Q]),done:!1}}return E=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(u){return u||function(){return l(this,function(g,_){return _})}});var h=h||{},p=this||self;function m(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function v(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function w(u,g,_){return u.call.apply(u.bind,arguments)}function k(u,g,_){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,E),u.apply(g,z)}}return function(){return u.apply(g,arguments)}}function A(u,g,_){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:k,A.apply(null,arguments)}function O(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var E=_.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function $(u,g){function _(){}_.prototype=g.prototype,u.aa=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(E,z,Q){for(var le=Array(arguments.length-2),He=2;He<arguments.length;He++)le[He-2]=arguments[He];return g.prototype[z].apply(E,le)}}function q(u){const g=u.length;if(0<g){const _=Array(g);for(let E=0;E<g;E++)_[E]=u[E];return _}return[]}function V(u,g){for(let _=1;_<arguments.length;_++){const E=arguments[_];if(m(E)){const z=u.length||0,Q=E.length||0;u.length=z+Q;for(let le=0;le<Q;le++)u[z+le]=E[le]}else u.push(E)}}class J{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function F(u){return/^[\s\xa0]*$/.test(u)}function D(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function G(u){return G[" "](u),u}G[" "]=function(){};var ie=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function ce(u,g,_){for(const E in u)g.call(_,u[E],E,u)}function j(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function b(u){const g={};for(const _ in u)g[_]=u[_];return g}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,g){let _,E;for(let z=1;z<arguments.length;z++){E=arguments[z];for(_ in E)u[_]=E[_];for(let Q=0;Q<N.length;Q++)_=N[Q],Object.prototype.hasOwnProperty.call(E,_)&&(u[_]=E[_])}}function P(u){var g=1;u=u.split(":");const _=[];for(;0<g&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function C(u){p.setTimeout(()=>{throw u},0)}function T(){var u=pe;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class K{constructor(){this.h=this.g=null}add(g,_){const E=oe.get();E.set(g,_),this.h?this.h.next=E:this.g=E,this.h=E}}var oe=new J(()=>new ge,u=>u.reset());class ge{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ee=!1,pe=new K,U=()=>{const u=p.Promise.resolve(void 0);ue=()=>{u.then(R)}};var R=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(_){C(_)}var g=oe;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}ee=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Ee=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,g),p.removeEventListener("test",_,g)}catch{}return u})();function we(u,g){if(de.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(ie){e:{try{G(g.nodeName);var z=!0;break e}catch{}z=!1}z||(g=null)}}else _=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Pe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&we.aa.h.call(this)}}$(we,de);var Pe={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Qe(u,g,_,E,z){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!E,this.ha=z,this.key=++ze,this.da=this.fa=!1}function xt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function fr(u){this.src=u,this.g={},this.h=0}fr.prototype.add=function(u,g,_,E,z){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var le=$r(u,g,E,z);return-1<le?(g=u[le],_||(g.fa=!1)):(g=new Qe(g,this.src,Q,!!E,z),g.fa=_,u.push(g)),g};function wi(u,g){var _=g.type;if(_ in u.g){var E=u.g[_],z=Array.prototype.indexOf.call(E,g,void 0),Q;(Q=0<=z)&&Array.prototype.splice.call(E,z,1),Q&&(xt(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function $r(u,g,_,E){for(var z=0;z<u.length;++z){var Q=u[z];if(!Q.da&&Q.listener==g&&Q.capture==!!_&&Q.ha==E)return z}return-1}var js="closure_lm_"+(1e6*Math.random()|0),bi={};function Bo(u,g,_,E,z){if(Array.isArray(g)){for(var Q=0;Q<g.length;Q++)Bo(u,g[Q],_,E,z);return null}return _=Ho(_),u&&u[Me]?u.K(g,_,v(E)?!!E.capture:!1,z):$o(u,g,_,!1,E,z)}function $o(u,g,_,E,z,Q){if(!g)throw Error("Invalid event type");var le=v(z)?!!z.capture:!!z,He=Ti(u);if(He||(u[js]=He=new fr(u)),_=He.add(g,_,E,le,Q),_.proxy)return _;if(E=El(),_.proxy=E,E.src=u,E.listener=_,u.addEventListener)Ee||(z=le),z===void 0&&(z=!1),u.addEventListener(g.toString(),E,z);else if(u.attachEvent)u.attachEvent(mr(g.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return _}function El(){function u(_){return g.call(u.src,u.listener,_)}const g=qo;return u}function Ei(u,g,_,E,z){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)Ei(u,g[Q],_,E,z);else E=v(E)?!!E.capture:!!E,_=Ho(_),u&&u[Me]?(u=u.i,g=String(g).toString(),g in u.g&&(Q=u.g[g],_=$r(Q,_,E,z),-1<_&&(xt(Q[_]),Array.prototype.splice.call(Q,_,1),Q.length==0&&(delete u.g[g],u.h--)))):u&&(u=Ti(u))&&(g=u.g[g.toString()],u=-1,g&&(u=$r(g,_,E,z)),(_=-1<u?g[u]:null)&&pr(_))}function pr(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Me])wi(g.i,u);else{var _=u.type,E=u.proxy;g.removeEventListener?g.removeEventListener(_,E,u.capture):g.detachEvent?g.detachEvent(mr(_),E):g.addListener&&g.removeListener&&g.removeListener(E),(_=Ti(g))?(wi(_,u),_.h==0&&(_.src=null,g[js]=null)):xt(u)}}}function mr(u){return u in bi?bi[u]:bi[u]="on"+u}function qo(u,g){if(u.da)u=!0;else{g=new we(g,this);var _=u.listener,E=u.ha||u.src;u.fa&&pr(u),u=_.call(E,g)}return u}function Ti(u){return u=u[js],u instanceof fr?u:null}var Ni="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ho(u){return typeof u=="function"?u:(u[Ni]||(u[Ni]=function(g){return u.handleEvent(g)}),u[Ni])}function pt(){Y.call(this),this.i=new fr(this),this.M=this,this.F=null}$(pt,Y),pt.prototype[Me]=!0,pt.prototype.removeEventListener=function(u,g,_,E){Ei(this,u,g,_,E)};function mt(u,g){var _,E=u.F;if(E)for(_=[];E;E=E.F)_.push(E);if(u=u.M,E=g.type||g,typeof g=="string")g=new de(g,u);else if(g instanceof de)g.target=g.target||u;else{var z=g;g=new de(E,u),I(g,z)}if(z=!0,_)for(var Q=_.length-1;0<=Q;Q--){var le=g.g=_[Q];z=gr(le,E,!0,g)&&z}if(le=g.g=u,z=gr(le,E,!0,g)&&z,z=gr(le,E,!1,g)&&z,_)for(Q=0;Q<_.length;Q++)le=g.g=_[Q],z=gr(le,E,!1,g)&&z}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var _=u.g[g],E=0;E<_.length;E++)xt(_[E]);delete u.g[g],u.h--}}this.F=null},pt.prototype.K=function(u,g,_,E){return this.i.add(String(u),g,!1,_,E)},pt.prototype.L=function(u,g,_,E){return this.i.add(String(u),g,!0,_,E)};function gr(u,g,_,E){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var z=!0,Q=0;Q<g.length;++Q){var le=g[Q];if(le&&!le.da&&le.capture==_){var He=le.listener,gt=le.ha||le.src;le.fa&&wi(u.i,le),z=He.call(gt,E)!==!1&&z}}return z&&!E.defaultPrevented}function Wo(u,g,_){if(typeof u=="function")_&&(u=A(u,_));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:p.setTimeout(u,g||0)}function qr(u){u.g=Wo(()=>{u.g=null,u.i&&(u.i=!1,qr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Ps extends Y{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:qr(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(u){Y.call(this),this.h=u,this.g={}}$(Rs,Y);var Ko=[];function Go(u){ce(u.g,function(g,_){this.g.hasOwnProperty(_)&&pr(g)},u),u.g={}}Rs.prototype.N=function(){Rs.aa.N.call(this),Go(this)},Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qo=p.JSON.stringify,Yo=p.JSON.parse,Xo=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function Ds(){}Ds.prototype.h=null;function ki(u){return u.h||(u.h=u.i())}function Ii(){}var mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kn(){de.call(this,"d")}$(Kn,de);function Si(){de.call(this,"c")}$(Si,de);var Gn={},Jo=null;function Ms(){return Jo=Jo||new pt}Gn.La="serverreachability";function Zo(u){de.call(this,Gn.La,u)}$(Zo,de);function yr(u){const g=Ms();mt(g,new Zo(g))}Gn.STAT_EVENT="statevent";function ea(u,g){de.call(this,Gn.STAT_EVENT,u),this.stat=g}$(ea,de);function at(u){const g=Ms();mt(g,new ea(g,u))}Gn.Ma="timingevent";function Ci(u,g){de.call(this,Gn.Ma,u),this.size=g}$(Ci,de);function In(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},g)}function Ls(){this.g=!0}Ls.prototype.xa=function(){this.g=!1};function Os(u,g,_,E,z,Q){u.info(function(){if(u.g)if(Q)for(var le="",He=Q.split("&"),gt=0;gt<He.length;gt++){var Fe=He[gt].split("=");if(1<Fe.length){var wt=Fe[0];Fe=Fe[1];var ut=wt.split("_");le=2<=ut.length&&ut[1]=="type"?le+(wt+"="+Fe+"&"):le+(wt+"=redacted&")}}else le=null;else le=Q;return"XMLHTTP REQ ("+E+") [attempt "+z+"]: "+g+`
`+_+`
`+le})}function Ai(u,g,_,E,z,Q,le){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+z+"]: "+g+`
`+_+`
`+Q+" "+le})}function Sn(u,g,_,E){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ju(u,_)+(E?" "+E:"")})}function ta(u,g){u.info(function(){return"TIMEOUT: "+g})}Ls.prototype.info=function(){};function Ju(u,g){if(!u.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var E=_[u];if(!(2>E.length)){var z=E[1];if(Array.isArray(z)&&!(1>z.length)){var Q=z[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var le=1;le<z.length;le++)z[le]=""}}}}return Qo(_)}catch{return g}}var ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cn;function Vs(){}$(Vs,Ds),Vs.prototype.g=function(){return new XMLHttpRequest},Vs.prototype.i=function(){return{}},Cn=new Vs;function An(u,g,_,E){this.j=u,this.i=g,this.l=_,this.R=E||1,this.U=new Rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nl}function Nl(){this.i=null,this.g="",this.h=!1}var na={},Pi={};function Ri(u,g,_){u.L=1,u.v=Qr(an(g)),u.m=_,u.P=!0,ra(u,null)}function ra(u,g){u.F=Date.now(),Ye(u),u.A=an(u.v);var _=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),Xr(_.i,"t",E),u.C=0,_=u.j.J,u.h=new Nl,u.g=$l(u.j,_?g:null,!u.m),0<u.O&&(u.M=new Ps(A(u.Y,u,u.g),u.O)),g=u.U,_=u.g,E=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(Ko[0]=z.toString()),z=Ko);for(var Q=0;Q<z.length;Q++){var le=Bo(_,z[Q],E||g.handleEvent,!1,g.h||g);if(!le)break;g.g[le.key]=le}g=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),yr(),Os(u.i,u.u,u.A,u.l,u.R,u.m)}An.prototype.ca=function(u){u=u.target;const g=this.M;g&&Xt(u)==3?g.j():this.Y(u)},An.prototype.Y=function(u){try{if(u==this.g)e:{const ut=Xt(this.g);var g=this.g.Ba();const _n=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||ca(this.g)))){this.J||ut!=4||g==7||(g==8||0>=_n?yr(3):yr(2)),Fs(this);var _=this.g.Z();this.X=_;t:if(kl(this)){var E=ca(this.g);u="";var z=E.length,Q=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Hr(this);var le="";break t}this.h.i=new p.TextDecoder}for(g=0;g<z;g++)this.h.h=!0,u+=this.h.i.decode(E[g],{stream:!(Q&&g==z-1)});E.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=_==200,Ai(this.i,this.u,this.A,this.l,this.R,ut,_),this.o){if(this.T&&!this.K){t:{if(this.g){var He,gt=this.g;if((He=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(He)){var Fe=He;break t}}Fe=null}if(_=Fe)Sn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sa(this,_);else{this.o=!1,this.s=3,at(12),gn(this),Hr(this);break e}}if(this.P){_=!0;let cn;for(;!this.J&&this.C<le.length;)if(cn=Zu(this,le),cn==Pi){ut==4&&(this.s=4,at(14),_=!1),Sn(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==na){this.s=4,at(15),Sn(this.i,this.l,le,"[Invalid Chunk]"),_=!1;break}else Sn(this.i,this.l,cn,null),sa(this,cn);if(kl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||le.length!=0||this.h.h||(this.s=1,at(16),_=!1),this.o=this.o&&_,!_)Sn(this.i,this.l,le,"[Invalid Chunked Response]"),gn(this),Hr(this);else if(0<le.length&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.ba&&!wt.M&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),da(wt),wt.M=!0,at(11))}}else Sn(this.i,this.l,le,null),sa(this,le);ut==4&&gn(this),this.o&&!this.J&&(ut==4?qi(this.j,this):(this.o=!1,Ye(this)))}else Fi(this.g),_==400&&0<le.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),gn(this),Hr(this)}}}catch{}};function kl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Zu(u,g){var _=u.C,E=g.indexOf(`
`,_);return E==-1?Pi:(_=Number(g.substring(_,E)),isNaN(_)?na:(E+=1,E+_>g.length?Pi:(g=g.slice(E,E+_),u.C=E+_,g)))}An.prototype.cancel=function(){this.J=!0,gn(this)};function Ye(u){u.S=Date.now()+u.I,Il(u,u.I)}function Il(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=In(A(u.ba,u),g)}function Fs(u){u.B&&(p.clearTimeout(u.B),u.B=null)}An.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ta(this.i,this.A),this.L!=2&&(yr(),at(17)),gn(this),this.s=2,Hr(this)):Il(this,this.S-u)};function Hr(u){u.j.G==0||u.J||qi(u.j,u)}function gn(u){Fs(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Go(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function sa(u,g){try{var _=u.j;if(_.G!=0&&(_.g==u||qt(_.h,u))){if(!u.K&&qt(_.h,u)&&_.G==3){try{var E=_.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var z=E;if(z[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)$i(_),Mn(_);else break e;Bi(_),at(18)}}else _.za=z[1],0<_.za-_.T&&37500>z[2]&&_.F&&_.v==0&&!_.C&&(_.C=In(A(_.Za,_),6e3));if(1>=Cl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else br(_,11)}else if((u.K||_.g==u)&&$i(_),!F(g))for(z=_.Da.g.parse(g),g=0;g<z.length;g++){let Fe=z[g];if(_.T=Fe[0],Fe=Fe[1],_.G==2)if(Fe[0]=="c"){_.K=Fe[1],_.ia=Fe[2];const wt=Fe[3];wt!=null&&(_.la=wt,_.j.info("VER="+_.la));const ut=Fe[4];ut!=null&&(_.Aa=ut,_.j.info("SVER="+_.Aa));const _n=Fe[5];_n!=null&&typeof _n=="number"&&0<_n&&(E=1.5*_n,_.L=E,_.j.info("backChannelRequestTimeoutMs_="+E)),E=_;const cn=u.g;if(cn){const Ws=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ws){var Q=E.h;Q.g||Ws.indexOf("spdy")==-1&&Ws.indexOf("quic")==-1&&Ws.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ia(Q,Q.h),Q.h=null))}if(E.D){const Wi=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Wi&&(E.ya=Wi,Ge(E.I,E.D,Wi))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),E=_;var le=u;if(E.qa=Bl(E,E.J?E.ia:null,E.W),le.K){Al(E.h,le);var He=le,gt=E.L;gt&&(He.I=gt),He.B&&(Fs(He),Ye(He)),E.g=le}else Hs(E);0<_.i.length&&Jn(_)}else Fe[0]!="stop"&&Fe[0]!="close"||br(_,7);else _.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?br(_,7):Ct(_):Fe[0]!="noop"&&_.l&&_.l.ta(Fe),_.v=0)}}yr(4)}catch{}}var Sl=class{constructor(u,g){this.g=u,this.map=g}};function Us(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function on(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Cl(u){return u.h?1:u.g?u.g.size:0}function qt(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function ia(u,g){u.g?u.g.add(g):u.h=g}function Al(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Us.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function jl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.D);return g}return q(u.i)}function Di(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var g=[],_=u.length,E=0;E<_;E++)g.push(u[E]);return g}g=[],_=0;for(E in u)g[_++]=u[E];return g}function Mi(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var g=[];u=u.length;for(var _=0;_<u;_++)g.push(_);return g}g=[],_=0;for(const E in u)g[_++]=E;return g}}}function Wr(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var _=Mi(u),E=Di(u),z=E.length,Q=0;Q<z;Q++)g.call(void 0,E[Q],_&&_[Q],u)}var zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ed(u,g){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var E=u[_].indexOf("="),z=null;if(0<=E){var Q=u[_].substring(0,E);z=u[_].substring(E+1)}else Q=u[_];g(Q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function _r(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof _r){this.h=u.h,Bs(this,u.j),this.o=u.o,this.g=u.g,Kr(this,u.s),this.l=u.l;var g=u.i,_=new Qn;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Gr(this,_),this.m=u.m}else u&&(g=String(u).match(zs))?(this.h=!1,Bs(this,g[1]||"",!0),this.o=Oe(g[2]||""),this.g=Oe(g[3]||"",!0),Kr(this,g[4]),this.l=Oe(g[5]||"",!0),Gr(this,g[6]||"",!0),this.m=Oe(g[7]||"")):(this.h=!1,this.i=new Qn(null,this.h))}_r.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Yr(g,Li,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Yr(g,Li,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Yr(_,_.charAt(0)=="/"?Dl:Rl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Yr(_,oa)),u.join("")};function an(u){return new _r(u)}function Bs(u,g,_){u.j=_?Oe(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Kr(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Gr(u,g,_){g instanceof Qn?(u.i=g,Yn(u.i,u.h)):(_||(g=Yr(g,Ml)),u.i=new Qn(g,u.h))}function Ge(u,g,_){u.i.set(g,_)}function Qr(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oe(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Yr(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,Pl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Pl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Li=/[#\/\?@]/g,Rl=/[#\?:]/g,Dl=/[#\?]/g,Ml=/[#\?@]/g,oa=/#/g;function Qn(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function St(u){u.g||(u.g=new Map,u.h=0,u.i&&ed(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=Qn.prototype,n.add=function(u,g){St(this),this.i=null,u=yn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function jn(u,g){St(u),g=yn(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Pn(u,g){return St(u),g=yn(u,g),u.g.has(g)}n.forEach=function(u,g){St(this),this.g.forEach(function(_,E){_.forEach(function(z){u.call(g,z,E,this)},this)},this)},n.na=function(){St(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let E=0;E<g.length;E++){const z=u[E];for(let Q=0;Q<z.length;Q++)_.push(g[E])}return _},n.V=function(u){St(this);let g=[];if(typeof u=="string")Pn(this,u)&&(g=g.concat(this.g.get(yn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)g=g.concat(u[_])}return g},n.set=function(u,g){return St(this),this.i=null,u=yn(this,u),Pn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Xr(u,g,_){jn(u,g),0<_.length&&(u.i=null,u.g.set(yn(u,g),q(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var E=g[_];const Q=encodeURIComponent(String(E)),le=this.V(E);for(E=0;E<le.length;E++){var z=Q;le[E]!==""&&(z+="="+encodeURIComponent(String(le[E]))),u.push(z)}}return this.i=u.join("&")};function yn(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Yn(u,g){g&&!u.j&&(St(u),u.i=null,u.g.forEach(function(_,E){var z=E.toLowerCase();E!=z&&(jn(this,E),Xr(this,z,_))},u)),u.j=g}function td(u,g){const _=new Ls;if(p.Image){const E=new Image;E.onload=O(Yt,_,"TestLoadImage: loaded",!0,g,E),E.onerror=O(Yt,_,"TestLoadImage: error",!1,g,E),E.onabort=O(Yt,_,"TestLoadImage: abort",!1,g,E),E.ontimeout=O(Yt,_,"TestLoadImage: timeout",!1,g,E),p.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else g(!1)}function Ll(u,g){const _=new Ls,E=new AbortController,z=setTimeout(()=>{E.abort(),Yt(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:E.signal}).then(Q=>{clearTimeout(z),Q.ok?Yt(_,"TestPingServer: ok",!0,g):Yt(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),Yt(_,"TestPingServer: error",!1,g)})}function Yt(u,g,_,E,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),E(_)}catch{}}function nd(){this.g=new Xo}function Ol(u,g,_){const E=_||"";try{Wr(u,function(z,Q){let le=z;v(z)&&(le=Qo(z)),g.push(E+Q+"="+encodeURIComponent(le))})}catch(z){throw g.push(E+"type="+encodeURIComponent("_badmap")),z}}function vr(u){this.l=u.Ub||null,this.j=u.eb||!1}$(vr,Ds),vr.prototype.g=function(){return new $s(this.l,this.j)},vr.prototype.i=(function(u){return function(){return u}})({});function $s(u,g){pt.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$($s,pt),n=$s.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Dn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||p).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Dn(this)),this.g&&(this.readyState=3,Dn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Rn(this):Dn(this),this.readyState==3&&Vl(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Rn(this))},n.Qa=function(u){this.g&&(this.response=u,Rn(this))},n.ga=function(){this.g&&Rn(this)};function Rn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Dn(u)}n.setRequestHeader=function(u,g){this.u.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function Dn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty($s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function xr(u){let g="";return ce(u,function(_,E){g+=E,g+=":",g+=_,g+=`\r
`}),g}function Jr(u,g,_){e:{for(E in _){var E=!1;break e}E=!0}E||(_=xr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ge(u,g,_))}function tt(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(tt,pt);var rd=/^https?$/i,aa=["POST","PUT"];n=tt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,g,_,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cn.g(),this.v=this.o?ki(this.o):ki(Cn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Q){qs(this,Q);return}if(u=_||"",_=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var z in E)_.set(z,E[z]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const Q of E.keys())_.set(Q,E.get(Q));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(aa,g,void 0))||E||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of _)this.g.setRequestHeader(Q,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vi(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){qs(this,Q)}};function qs(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,Oi(u),ln(u)}function Oi(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),ln(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ln(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?la(this):this.bb())},n.bb=function(){la(this)};function la(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Xt(u)!=4||u.Z()!=2)){if(u.u&&Xt(u)==4)Wo(u.Ea,0,u);else if(mt(u,"readystatechange"),Xt(u)==4){u.h=!1;try{const le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var E;if(E=le===0){var z=String(u.D).match(zs)[1]||null;!z&&p.self&&p.self.location&&(z=p.self.location.protocol.slice(0,-1)),E=!rd.test(z?z.toLowerCase():"")}_=E}if(_)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var Q=2<Xt(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",Oi(u)}}finally{ln(u)}}}}function ln(u,g){if(u.g){Vi(u);const _=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||mt(u,"ready");try{_.onreadystatechange=E}catch{}}}function Vi(u){u.I&&(p.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Xt(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Yo(g)}};function ca(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(u){const g={};u=(u.g&&2<=Xt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(F(u[E]))continue;var _=P(u[E]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=g[z]||[];g[z]=Q,Q.push(_)}j(g,function(E){return E.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function ua(u){this.Aa=0,this.i=[],this.j=new Ls,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,u),this.cb=Xn("retryDelaySeedMs",1e4,u),this.Wa=Xn("forwardChannelMaxRetries",2,u),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Us(u&&u.concurrentRequestLimit),this.Da=new nd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ua.prototype,n.la=8,n.G=1,n.connect=function(u,g,_,E){at(0),this.W=u,this.H=g||{},_&&E!==void 0&&(this.H.OSID=_,this.H.OAID=E),this.F=this.X,this.I=Bl(this,null,this.W),Jn(this)};function Ct(u){if(Ui(u),u.G==3){var g=u.U++,_=an(u.I);if(Ge(_,"SID",u.K),Ge(_,"RID",g),Ge(_,"TYPE","terminate"),wr(u,_),g=new An(u,u.j,g),g.L=2,g.v=Qr(an(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=g.v,_=!0),_||(g.g=$l(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ye(g)}zl(u)}function Mn(u){u.g&&(da(u),u.g.cancel(),u.g=null)}function Ui(u){Mn(u),u.u&&(p.clearTimeout(u.u),u.u=null),$i(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function Jn(u){if(!on(u.h)&&!u.s){u.s=!0;var g=u.Ga;ue||U(),ee||(ue(),ee=!0),pe.add(g,u),u.B=0}}function sd(u,g){return Cl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=In(A(u.Ga,u,g),Ul(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new An(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=b(Q),I(Q,this.S)):Q=this.S),this.m!==null||this.O||(z.H=Q,Q=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var E=this.i[_];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Zr(this,z,g),_=an(this.I),Ge(_,"RID",u),Ge(_,"CVER",22),this.D&&Ge(_,"X-HTTP-Session-Id",this.D),wr(this,_),Q&&(this.O?g="headers="+encodeURIComponent(String(xr(Q)))+"&"+g:this.m&&Jr(_,this.m,Q)),ia(this.h,z),this.Ua&&Ge(_,"TYPE","init"),this.P?(Ge(_,"$req",g),Ge(_,"SID","null"),z.T=!0,Ri(z,_,null)):Ri(z,_,g),this.G=2}}else this.G==3&&(u?zi(this,u):this.i.length==0||on(this.h)||zi(this))};function zi(u,g){var _;g?_=g.l:_=u.U++;const E=an(u.I);Ge(E,"SID",u.K),Ge(E,"RID",_),Ge(E,"AID",u.T),wr(u,E),u.m&&u.o&&Jr(E,u.m,u.o),_=new An(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),g&&(u.i=g.D.concat(u.i)),g=Zr(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ia(u.h,_),Ri(_,E,g)}function wr(u,g){u.H&&ce(u.H,function(_,E){Ge(g,E,_)}),u.l&&Wr({},function(_,E){Ge(g,E,_)})}function Zr(u,g,_){_=Math.min(u.i.length,_);var E=u.l?A(u.l.Na,u.l,u):null;e:{var z=u.i;let Q=-1;for(;;){const le=["count="+_];Q==-1?0<_?(Q=z[0].g,le.push("ofs="+Q)):Q=0:le.push("ofs="+Q);let He=!0;for(let gt=0;gt<_;gt++){let Fe=z[gt].g;const wt=z[gt].map;if(Fe-=Q,0>Fe)Q=Math.max(0,z[gt].g-100),He=!1;else try{Ol(wt,le,"req"+Fe+"_")}catch{E&&E(wt)}}if(He){E=le.join("&");break e}}}return u=u.i.splice(0,_),g.D=u,E}function Hs(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;ue||U(),ee||(ue(),ee=!0),pe.add(g,u),u.v=0}}function Bi(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=In(A(u.Fa,u),Ul(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Fl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=In(A(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Mn(this),Fl(this))};function da(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Fl(u){u.g=new An(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=an(u.qa);Ge(g,"RID","rpc"),Ge(g,"SID",u.K),Ge(g,"AID",u.T),Ge(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(g,"TO",u.ja),Ge(g,"TYPE","xmlhttp"),wr(u,g),u.m&&u.o&&Jr(g,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Qr(an(g)),_.m=null,_.P=!0,ra(_,u)}n.Za=function(){this.C!=null&&(this.C=null,Mn(this),Bi(this),at(19))};function $i(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function qi(u,g){var _=null;if(u.g==g){$i(u),da(u),u.g=null;var E=2}else if(qt(u.h,g))_=g.D,Al(u.h,g),E=1;else return;if(u.G!=0){if(g.o)if(E==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var z=u.B;E=Ms(),mt(E,new Ci(E,_)),Jn(u)}else Hs(u);else if(z=g.s,z==3||z==0&&0<g.X||!(E==1&&sd(u,g)||E==2&&Bi(u)))switch(_&&0<_.length&&(g=u.h,g.i=g.i.concat(_)),z){case 1:br(u,5);break;case 4:br(u,10);break;case 3:br(u,6);break;default:br(u,2)}}}function Ul(u,g){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*g}function br(u,g){if(u.j.info("Error code "+g),g==2){var _=A(u.fb,u),E=u.Xa;const z=!E;E=new _r(E||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Bs(E,"https"),Qr(E),z?td(E.toString(),_):Ll(E.toString(),_)}else at(2);u.G=0,u.l&&u.l.sa(g),zl(u),Ui(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function zl(u){if(u.G=0,u.ka=[],u.l){const g=jl(u.h);(g.length!=0||u.i.length!=0)&&(V(u.ka,g),V(u.ka,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.ra()}}function Bl(u,g,_){var E=_ instanceof _r?an(_):new _r(_);if(E.g!="")g&&(E.g=g+"."+E.g),Kr(E,E.s);else{var z=p.location;E=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;var Q=new _r(null);E&&Bs(Q,E),g&&(Q.g=g),z&&Kr(Q,z),_&&(Q.l=_),E=Q}return _=u.D,g=u.ya,_&&g&&Ge(E,_,g),Ge(E,"VER",u.la),wr(u,E),E}function $l(u,g,_){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new tt(new vr({eb:_})):new tt(u.pa),g.Ha(u.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ha(){}n=ha.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Hi(){}Hi.prototype.g=function(u,g){return new Ht(u,g)};function Ht(u,g){pt.call(this),this.g=new ua(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!F(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!F(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Zn(this)}$(Ht,pt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Ct(this.g)},Ht.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Qo(u),u=_);g.i.push(new Sl(g.Ya++,u)),g.G==3&&Jn(g)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Ct(this.g),delete this.g,Ht.aa.N.call(this)};function ql(u){Kn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}$(ql,Kn);function Hl(){Si.call(this),this.status=1}$(Hl,Si);function Zn(u){this.g=u}$(Zn,ha),Zn.prototype.ua=function(){mt(this.g,"a")},Zn.prototype.ta=function(u){mt(this.g,new ql(u))},Zn.prototype.sa=function(u){mt(this.g,new Hl)},Zn.prototype.ra=function(){mt(this.g,"b")},Hi.prototype.createWebChannel=Hi.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,a_=function(){return new Hi},o_=function(){return Ms()},i_=Gn,Xh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,eu=ji,Tl.COMPLETE="complete",s_=Tl,Ii.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Ua=Ii,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,r_=tt}).apply(typeof Uc<"u"?Uc:typeof self<"u"?self:typeof window<"u"?window:{});const c0="@firebase/firestore";let zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");let Do="10.14.0";const mi=new xf("@firebase/firestore");function Oa(){return mi.logLevel}function ve(n,...e){if(mi.logLevel<=Ve.DEBUG){const t=e.map(Df);mi.debug(`Firestore (${Do}): ${n}`,...t)}}function Fr(n,...e){if(mi.logLevel<=Ve.ERROR){const t=e.map(Df);mi.error(`Firestore (${Do}): ${n}`,...t)}}function To(n,...e){if(mi.logLevel<=Ve.WARN){const t=e.map(Df);mi.warn(`Firestore (${Do}): ${n}`,...t)}}function Df(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ce(n="Unexpected state"){const e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+n;throw Fr(e),new Error(e)}function We(n,e){n||Ce()}function je(n,e){return n}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends zr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class l_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class J2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Z2{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Mr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},p=m=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>p(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Mr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string"),new l_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new zt(e)}}class eE{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tE{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new eE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rE{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){We(this.o===void 0);const i=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string"),this.R=t.token,new nE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function sE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class c_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=sE(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function qe(n,e){return n<e?-1:n>e?1:0}function No(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}class vt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new vt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new vt(0,0))}static max(){return new Ae(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Za{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(),i===void 0?i=e.length-t:i>e.length-t&&Ce(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Za.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Za?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class et extends Za{construct(e,t,i){return new et(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const iE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Za{construct(e,t,i){return new Rt(e,t,i)}static isValidIdentifier(e){return iE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Rt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new fe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new fe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(i+=p,o++):(l(),o++)}if(l(),h)throw new fe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(t)}static emptyPath(){return new Rt([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(et.fromString(e))}static fromName(e){return new Te(et.fromString(e).popFirst(5))}static empty(){return new Te(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new et(e.slice()))}}function oE(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new vt(t+1,0):new vt(t,i));return new Ts(o,Te.empty(),e)}function aE(n){return new Ts(n.readTime,n.key,-1)}class Ts{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ts(Ae.min(),Te.empty(),-1)}static max(){return new Ts(Ae.max(),Te.empty(),-1)}}function lE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}const cE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ml(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==cE)throw n;ve("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,i)=>{t(e)}))}static reject(e){return new re(((t,i)=>{i(e)}))}static waitFor(e){return new re(((t,i)=>{let o=0,l=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++l,h&&l===o&&t()}),(m=>i(m)))})),h=!0,l===o&&t()}))}static or(e){let t=re.resolve(!1);for(const i of e)t=t.next((o=>o?re.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new re(((i,o)=>{const l=e.length,h=new Array(l);let p=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next((w=>{h[v]=w,++p,p===l&&i(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new re(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function dE(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function gl(n){return n.name==="IndexedDbTransactionError"}class Mf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Mf.oe=-1;function Pu(n){return n==null}function pu(n){return n===0&&1/n==-1/0}function hE(n){return typeof n=="number"&&Number.isInteger(n)&&!pu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function u0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _i(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function u_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class it{constructor(e,t){this.comparator=e,this.root=t||Pt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zc(this.root,e,this.comparator,!0)}}class zc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Pt.RED,this.left=o??Pt.EMPTY,this.right=l??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Pt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Pt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new d0(this.data.getIterator())}getIteratorFrom(e){return new d0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class d0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fn{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new fn([])}unionWith(e){let t=new Dt(Rt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class d_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new d_("Invalid base64 string: "+l):l}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const fE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(n){if(We(!!n),typeof n=="string"){let e=0;const t=fE.exec(n);if(We(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(n.seconds),nanos:ct(n.nanos)}}function ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gi(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}function Lf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Of(n){const e=n.mapValue.fields.__previous_value__;return Lf(e)?Of(e):e}function el(n){const e=Ns(n.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}class pE{constructor(e,t,i,o,l,h,p,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=v}}class tl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new tl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof tl&&e.projectId===this.projectId&&e.database===this.database}}const Bc={mapValue:{}};function yi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lf(n)?4:gE(n)?9007199254740991:mE(n)?10:11:Ce()}function dr(n,e){if(n===e)return!0;const t=yi(n);if(t!==yi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return el(n).isEqual(el(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ns(o.timestampValue),p=Ns(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return gi(o.bytesValue).isEqual(gi(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return ct(o.geoPointValue.latitude)===ct(l.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ct(o.integerValue)===ct(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ct(o.doubleValue),p=ct(l.doubleValue);return h===p?pu(h)===pu(p):isNaN(h)&&isNaN(p)}return!1})(n,e);case 9:return No(n.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},p=l.mapValue.fields||{};if(u0(h)!==u0(p))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(p[m]===void 0||!dr(h[m],p[m])))return!1;return!0})(n,e);default:return Ce()}}function nl(n,e){return(n.values||[]).find((t=>dr(t,e)))!==void 0}function ko(n,e){if(n===e)return 0;const t=yi(n),i=yi(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(l,h){const p=ct(l.integerValue||l.doubleValue),m=ct(h.integerValue||h.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1})(n,e);case 3:return h0(n.timestampValue,e.timestampValue);case 4:return h0(el(n),el(e));case 5:return qe(n.stringValue,e.stringValue);case 6:return(function(l,h){const p=gi(l),m=gi(h);return p.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,h){const p=l.split("/"),m=h.split("/");for(let v=0;v<p.length&&v<m.length;v++){const w=qe(p[v],m[v]);if(w!==0)return w}return qe(p.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,h){const p=qe(ct(l.latitude),ct(h.latitude));return p!==0?p:qe(ct(l.longitude),ct(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return f0(n.arrayValue,e.arrayValue);case 10:return(function(l,h){var p,m,v,w;const k=l.fields||{},A=h.fields||{},O=(p=k.value)===null||p===void 0?void 0:p.arrayValue,$=(m=A.value)===null||m===void 0?void 0:m.arrayValue,q=qe(((v=O?.values)===null||v===void 0?void 0:v.length)||0,((w=$?.values)===null||w===void 0?void 0:w.length)||0);return q!==0?q:f0(O,$)})(n.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Bc.mapValue&&h===Bc.mapValue)return 0;if(l===Bc.mapValue)return 1;if(h===Bc.mapValue)return-1;const p=l.fields||{},m=Object.keys(p),v=h.fields||{},w=Object.keys(v);m.sort(),w.sort();for(let k=0;k<m.length&&k<w.length;++k){const A=qe(m[k],w[k]);if(A!==0)return A;const O=ko(p[m[k]],v[w[k]]);if(O!==0)return O}return qe(m.length,w.length)})(n.mapValue,e.mapValue);default:throw Ce()}}function h0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=Ns(n),i=Ns(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function f0(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=ko(t[o],i[o]);if(l)return l}return qe(t.length,i.length)}function Io(n){return Jh(n)}function Jh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ns(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return gi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Jh(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Jh(t.fields[h])}`;return o+"}"})(n.mapValue):Ce()}function p0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zh(n){return!!n&&"integerValue"in n}function Vf(n){return!!n&&"arrayValue"in n}function m0(n){return!!n&&"nullValue"in n}function g0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tu(n){return!!n&&"mapValue"in n}function mE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ha(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _i(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ha(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ha(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!tu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ha(t)}setAll(e){let t=Rt.emptyPath(),i={},o=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=p.popLast()}h?i[p.lastSegment()]=Ha(h):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());tu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];tu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){_i(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new sn(Ha(this.value))}}function h_(n){const e=[];return _i(n.fields,((t,i)=>{const o=new Rt([t]);if(tu(i)){const l=h_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new fn(e)}class Bt{constructor(e,t,i,o,l,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Bt(e,0,Ae.min(),Ae.min(),Ae.min(),sn.empty(),0)}static newFoundDocument(e,t,i,o){return new Bt(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new Bt(e,2,t,Ae.min(),Ae.min(),sn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,Ae.min(),Ae.min(),sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mu{constructor(e,t){this.position=e,this.inclusive=t}}function y0(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(l.field.isKeyField()?i=Te.comparator(Te.fromName(h.referenceValue),t.key):i=ko(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function _0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!dr(n.position[t],e.position[t]))return!1;return!0}class rl{constructor(e,t="asc"){this.field=e,this.dir=t}}function yE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}let f_=class{};class ft extends f_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new vE(e,t,i):t==="array-contains"?new bE(e,i):t==="in"?new EE(e,i):t==="not-in"?new TE(e,i):t==="array-contains-any"?new NE(e,i):new ft(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new xE(e,i):new wE(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ko(t,this.value)):t!==null&&yi(this.value)===yi(t)&&this.matchesComparison(ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hn extends f_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Hn(e,t)}matches(e){return p_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function p_(n){return n.op==="and"}function m_(n){return _E(n)&&p_(n)}function _E(n){for(const e of n.filters)if(e instanceof Hn)return!1;return!0}function ef(n){if(n instanceof ft)return n.field.canonicalString()+n.op.toString()+Io(n.value);if(m_(n))return n.filters.map((e=>ef(e))).join(",");{const e=n.filters.map((t=>ef(t))).join(",");return`${n.op}(${e})`}}function g_(n,e){return n instanceof ft?(function(i,o){return o instanceof ft&&i.op===o.op&&i.field.isEqual(o.field)&&dr(i.value,o.value)})(n,e):n instanceof Hn?(function(i,o){return o instanceof Hn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,p)=>l&&g_(h,o.filters[p])),!0):!1})(n,e):void Ce()}function y_(n){return n instanceof ft?(function(t){return`${t.field.canonicalString()} ${t.op} ${Io(t.value)}`})(n):n instanceof Hn?(function(t){return t.op.toString()+" {"+t.getFilters().map(y_).join(" ,")+"}"})(n):"Filter"}class vE extends ft{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class xE extends ft{constructor(e,t){super(e,"in",t),this.keys=__("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wE extends ft{constructor(e,t){super(e,"not-in",t),this.keys=__("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function __(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>Te.fromName(i.referenceValue)))}class bE extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vf(t)&&nl(t.arrayValue,this.value)}}class EE extends ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nl(this.value.arrayValue,t)}}class TE extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!nl(this.value.arrayValue,t)}}class NE extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>nl(this.value.arrayValue,i)))}}class kE{constructor(e,t=null,i=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.ue=null}}function v0(n,e=null,t=[],i=[],o=null,l=null,h=null){return new kE(n,e,t,i,o,l,h)}function Ff(n){const e=je(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>ef(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Pu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Io(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Io(i))).join(",")),e.ue=t}return e.ue}function Uf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yE(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!g_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_0(n.startAt,e.startAt)&&_0(n.endAt,e.endAt)}function tf(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Mo{constructor(e,t=null,i=[],o=[],l=null,h="F",p=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function IE(n,e,t,i,o,l,h,p){return new Mo(n,e,t,i,o,l,h,p)}function zf(n){return new Mo(n)}function x0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function v_(n){return n.collectionGroup!==null}function Wa(n){const e=je(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Dt(Rt.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new rl(l,i))})),t.has(Rt.keyField().canonicalString())||e.ce.push(new rl(Rt.keyField(),i))}return e.ce}function lr(n){const e=je(n);return e.le||(e.le=SE(e,Wa(n))),e.le}function SE(n,e){if(n.limitType==="F")return v0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new rl(o.field,l)}));const t=n.endAt?new mu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new mu(n.startAt.position,n.startAt.inclusive):null;return v0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function nf(n,e){const t=n.filters.concat([e]);return new Mo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rf(n,e,t){return new Mo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ru(n,e){return Uf(lr(n),lr(e))&&n.limitType===e.limitType}function x_(n){return`${Ff(lr(n))}|lt:${n.limitType}`}function po(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>y_(o))).join(", ")}]`),Pu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Io(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Io(o))).join(",")),`Target(${i})`})(lr(n))}; limitType=${n.limitType})`}function Du(n,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Te.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,o){for(const l of Wa(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(h,p,m){const v=y0(h,p,m);return h.inclusive?v<=0:v<0})(i.startAt,Wa(i),o)||i.endAt&&!(function(h,p,m){const v=y0(h,p,m);return h.inclusive?v>=0:v>0})(i.endAt,Wa(i),o))})(n,e)}function CE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function w_(n){return(e,t)=>{let i=!1;for(const o of Wa(n)){const l=AE(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function AE(n,e,t){const i=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,h,p){const m=h.data.field(l),v=p.data.field(l);return m!==null&&v!==null?ko(m,v):Ce()})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ce()}}class Lo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_i(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return u_(this.inner)}size(){return this.innerSize}}const jE=new it(Te.comparator);function Ur(){return jE}const b_=new it(Te.comparator);function za(...n){let e=b_;for(const t of n)e=e.insert(t.key,t);return e}function E_(n){let e=b_;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function li(){return Ka()}function T_(){return Ka()}function Ka(){return new Lo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const PE=new it(Te.comparator),RE=new Dt(Te.comparator);function Le(...n){let e=RE;for(const t of n)e=e.add(t);return e}const DE=new Dt(qe);function ME(){return DE}function Bf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pu(e)?"-0":e}}function N_(n){return{integerValue:""+n}}function LE(n,e){return hE(e)?N_(e):Bf(n,e)}class Mu{constructor(){this._=void 0}}function OE(n,e,t){return n instanceof sl?(function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Lf(l)&&(l=Of(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}})(t,e):n instanceof il?I_(n,e):n instanceof ol?S_(n,e):(function(o,l){const h=k_(o,l),p=w0(h)+w0(o.Pe);return Zh(h)&&Zh(o.Pe)?N_(p):Bf(o.serializer,p)})(n,e)}function VE(n,e,t){return n instanceof il?I_(n,e):n instanceof ol?S_(n,e):t}function k_(n,e){return n instanceof gu?(function(i){return Zh(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class sl extends Mu{}class il extends Mu{constructor(e){super(),this.elements=e}}function I_(n,e){const t=C_(e);for(const i of n.elements)t.some((o=>dr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class ol extends Mu{constructor(e){super(),this.elements=e}}function S_(n,e){let t=C_(e);for(const i of n.elements)t=t.filter((o=>!dr(o,i)));return{arrayValue:{values:t}}}class gu extends Mu{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function w0(n){return ct(n.integerValue||n.doubleValue)}function C_(n){return Vf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class FE{constructor(e,t){this.field=e,this.transform=t}}function UE(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof il&&o instanceof il||i instanceof ol&&o instanceof ol?No(i.elements,o.elements,dr):i instanceof gu&&o instanceof gu?dr(i.Pe,o.Pe):i instanceof sl&&o instanceof sl})(n.transform,e.transform)}class zE{constructor(e,t){this.version=e,this.transformResults=t}}class $n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Lu{}function A_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $f(n.key,$n.none()):new yl(n.key,n.data,$n.none());{const t=n.data,i=sn.empty();let o=new Dt(Rt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Cs(n.key,i,new fn(o.toArray()),$n.none())}}function BE(n,e,t){n instanceof yl?(function(o,l,h){const p=o.value.clone(),m=E0(o.fieldTransforms,l,h.transformResults);p.setAll(m),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(n,e,t):n instanceof Cs?(function(o,l,h){if(!nu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const p=E0(o.fieldTransforms,l,h.transformResults),m=l.data;m.setAll(j_(o)),m.setAll(p),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(n,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ga(n,e,t,i){return n instanceof yl?(function(l,h,p,m){if(!nu(l.precondition,h))return p;const v=l.value.clone(),w=T0(l.fieldTransforms,m,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(n,e,t,i):n instanceof Cs?(function(l,h,p,m){if(!nu(l.precondition,h))return p;const v=T0(l.fieldTransforms,m,h),w=h.data;return w.setAll(j_(l)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((k=>k.field)))})(n,e,t,i):(function(l,h,p){return nu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(n,e,t)}function $E(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=k_(i.transform,o||null);l!=null&&(t===null&&(t=sn.empty()),t.set(i.field,l))}return t||null}function b0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&No(i,o,((l,h)=>UE(l,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class yl extends Lu{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Cs extends Lu{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function j_(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function E0(n,e,t){const i=new Map;We(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,p=e.data.field(l.field);i.set(l.field,VE(h,p,t[o]))}return i}function T0(n,e,t){const i=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);i.set(o.field,OE(l,h,e))}return i}class $f extends Lu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qE extends Lu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class HE{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&BE(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ga(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ga(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=T_();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=t.has(o.key)?null:p;const m=A_(h,p);m!==null&&i.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,((t,i)=>b0(t,i)))&&No(this.baseMutations,e.baseMutations,((t,i)=>b0(t,i)))}}class qf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){We(e.mutations.length===i.length);let o=(function(){return PE})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new qf(e,t,i,o)}}class WE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class KE{constructor(e,t){this.count=e,this.unchangedNames=t}}var ht,Ue;function GE(n){switch(n){default:return Ce();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function P_(n){if(n===void 0)return Fr("GRPC error has no .code"),Z.UNKNOWN;switch(n){case ht.OK:return Z.OK;case ht.CANCELLED:return Z.CANCELLED;case ht.UNKNOWN:return Z.UNKNOWN;case ht.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case ht.INTERNAL:return Z.INTERNAL;case ht.UNAVAILABLE:return Z.UNAVAILABLE;case ht.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case ht.NOT_FOUND:return Z.NOT_FOUND;case ht.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case ht.ABORTED:return Z.ABORTED;case ht.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case ht.DATA_LOSS:return Z.DATA_LOSS;default:return Ce()}}(Ue=ht||(ht={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";function QE(){return new TextEncoder}const YE=new ci([4294967295,4294967295],0);function N0(n){const e=QE().encode(n),t=new n_;return t.update(e),new Uint8Array(t.digest())}function k0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ci([t,i],0),new ci([o,l],0)]}class Hf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ba(`Invalid padding: ${t}`);if(i<0)throw new Ba(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ba(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ba(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ci.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(ci.fromNumber(i)));return o.compare(YE)===1&&(o=new ci([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=N0(e),[i,o]=k0(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(i,o,l);if(!this.de(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Hf(l,o,t);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.Ie===0)return;const t=N0(e),[i,o]=k0(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(i,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ou{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,_l.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ou(Ae.min(),o,new it(qe),Ur(),Le())}}class _l{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new _l(i,t,Le(),Le(),Le())}}class ru{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class R_{constructor(e,t){this.targetId=e,this.me=t}}class D_{constructor(e,t,i=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class I0{constructor(){this.fe=0,this.ge=C0(),this.pe=Mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Le(),t=Le(),i=Le();return this.ge.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ce()}})),new _l(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=C0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class XE{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ur(),this.qe=S0(),this.Qe=new it(qe)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ce()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const l=o.target;if(tf(l))if(i===0){const h=new Te(l.path);this.Ue(t,h,Bt.newNoDocument(h,Ae.min()))}else We(i===1);else{const h=this.Ye(t);if(h!==i){const p=this.Ze(e),m=p?this.Xe(p,e,h):1;if(m!==0){this.je(t);const v=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,v)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,p;try{h=gi(i).toUint8Array()}catch(m){if(m instanceof d_)return To("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new Hf(h,o,l)}catch(m){return To(m instanceof Ba?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.Ie===0?null:p}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Le.tt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Ue(t,l,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((l,h)=>{const p=this.Je(h);if(p){if(l.current&&tf(p.target)){const m=new Te(p.target.path);this.ke.get(m)!==null||this.it(h,m)||this.Ue(h,m,Bt.newNoDocument(m,e))}l.be&&(t.set(h,l.ve()),l.Ce())}}));let i=Le();this.qe.forEach(((l,h)=>{let p=!0;h.forEachWhile((m=>{const v=this.Je(m);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(l))})),this.ke.forEach(((l,h)=>h.setReadTime(e)));const o=new Ou(e,t,this.Qe,this.ke,i);return this.ke=Ur(),this.qe=S0(),this.Qe=new it(qe),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new I0,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Dt(qe),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new I0),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function S0(){return new it(Te.comparator)}function C0(){return new it(Te.comparator)}const JE={asc:"ASCENDING",desc:"DESCENDING"},ZE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eT={and:"AND",or:"OR"};class tT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sf(n,e){return n.useProto3Json||Pu(e)?e:{value:e}}function yu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nT(n,e){return yu(n,e.toTimestamp())}function cr(n){return We(!!n),Ae.fromTimestamp((function(t){const i=Ns(t);return new vt(i.seconds,i.nanos)})(n))}function Wf(n,e){return of(n,e).canonicalString()}function of(n,e){const t=(function(o){return new et(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function L_(n){const e=et.fromString(n);return We(z_(e)),e}function af(n,e){return Wf(n.databaseId,e.path)}function Lh(n,e){const t=L_(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(V_(t))}function O_(n,e){return Wf(n.databaseId,e)}function rT(n){const e=L_(n);return e.length===4?et.emptyPath():V_(e)}function lf(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function V_(n){return We(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function A0(n,e,t){return{name:af(n,e),fields:t.value.mapValue.fields}}function sT(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ce()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,w){return v.useProto3Json?(We(w===void 0||typeof w=="string"),Mt.fromBase64String(w||"")):(We(w===void 0||w instanceof Buffer||w instanceof Uint8Array),Mt.fromUint8Array(w||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(v){const w=v.code===void 0?Z.UNKNOWN:P_(v.code);return new fe(w,v.message||"")})(h);t=new D_(i,o,l,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Lh(n,i.document.name),l=cr(i.document.updateTime),h=i.document.createTime?cr(i.document.createTime):Ae.min(),p=new sn({mapValue:{fields:i.document.fields}}),m=Bt.newFoundDocument(o,l,h,p),v=i.targetIds||[],w=i.removedTargetIds||[];t=new ru(v,w,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Lh(n,i.document),l=i.readTime?cr(i.readTime):Ae.min(),h=Bt.newNoDocument(o,l),p=i.removedTargetIds||[];t=new ru([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Lh(n,i.document),l=i.removedTargetIds||[];t=new ru([],l,o,null)}else{if(!("filter"in e))return Ce();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new KE(o,l),p=i.targetId;t=new R_(p,h)}}return t}function iT(n,e){let t;if(e instanceof yl)t={update:A0(n,e.key,e.value)};else if(e instanceof $f)t={delete:af(n,e.key)};else if(e instanceof Cs)t={update:A0(n,e.key,e.data),updateMask:pT(e.fieldMask)};else{if(!(e instanceof qE))return Ce();t={verify:af(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const p=h.transform;if(p instanceof sl)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof il)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ol)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof gu)return{fieldPath:h.field.canonicalString(),increment:p.Pe};throw Ce()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:nT(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce()})(n,e.precondition)),t}function oT(n,e){return n&&n.length>0?(We(e!==void 0),n.map((t=>(function(o,l){let h=o.updateTime?cr(o.updateTime):cr(l);return h.isEqual(Ae.min())&&(h=cr(l)),new zE(h,o.transformResults||[])})(t,e)))):[]}function aT(n,e){return{documents:[O_(n,e.path)]}}function lT(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=O_(n,o);const l=(function(v){if(v.length!==0)return U_(Hn.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((w=>(function(A){return{field:mo(A.field),direction:dT(A.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=sf(n,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{_t:t,parent:o}}function cT(n){let e=rT(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){We(i===1);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(k){const A=F_(k);return A instanceof Hn&&m_(A)?A.getFilters():[A]})(t.where));let h=[];t.orderBy&&(h=(function(k){return k.map((A=>(function($){return new rl(go($.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(A)))})(t.orderBy));let p=null;t.limit&&(p=(function(k){let A;return A=typeof k=="object"?k.value:k,Pu(A)?null:A})(t.limit));let m=null;t.startAt&&(m=(function(k){const A=!!k.before,O=k.values||[];return new mu(O,A)})(t.startAt));let v=null;return t.endAt&&(v=(function(k){const A=!k.before,O=k.values||[];return new mu(O,A)})(t.endAt)),IE(e,o,h,l,p,"F",m,v)}function uT(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function F_(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=go(t.unaryFilter.field);return ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=go(t.unaryFilter.field);return ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=go(t.unaryFilter.field);return ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=go(t.unaryFilter.field);return ft.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}})(n):n.fieldFilter!==void 0?(function(t){return ft.create(go(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Hn.create(t.compositeFilter.filters.map((i=>F_(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce()}})(t.compositeFilter.op))})(n):Ce()}function dT(n){return JE[n]}function hT(n){return ZE[n]}function fT(n){return eT[n]}function mo(n){return{fieldPath:n.canonicalString()}}function go(n){return Rt.fromServerFormat(n.fieldPath)}function U_(n){return n instanceof ft?(function(t){if(t.op==="=="){if(g0(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NAN"}};if(m0(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(g0(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NAN"}};if(m0(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(t.field),op:hT(t.op),value:t.value}}})(n):n instanceof Hn?(function(t){const i=t.getFilters().map((o=>U_(o)));return i.length===1?i[0]:{compositeFilter:{op:fT(t.op),filters:i}}})(n):Ce()}function pT(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function z_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class _s{constructor(e,t,i,o,l=Ae.min(),h=Ae.min(),p=Mt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mT{constructor(e){this.ct=e}}function gT(n){const e=cT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rf(e,e.limit,"L"):e}class yT{constructor(){this.un=new _T}addToCollectionParentIndex(e,t){return this.un.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Ts.min())}updateCollectionGroup(e,t,i){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class _T{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Dt(et.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Dt(et.comparator)).toArray()}}class So{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new So(0)}static kn(){return new So(-1)}}class vT{constructor(){this.changes=new Lo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?re.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wT{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ga(i.mutation,o,fn.empty(),vt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Le()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Le()){const o=li();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=za();return l.forEach(((p,m)=>{h=h.insert(p,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=li();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Le())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,i,o){let l=Ur();const h=Ka(),p=(function(){return Ka()})();return t.forEach(((m,v)=>{const w=i.get(v.key);o.has(v.key)&&(w===void 0||w.mutation instanceof Cs)?l=l.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),Ga(w.mutation,v,w.mutation.getFieldMask(),vt.now())):h.set(v.key,fn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((v,w)=>h.set(v,w))),t.forEach(((v,w)=>{var k;return p.set(v,new xT(w,(k=h.get(v))!==null&&k!==void 0?k:null))})),p)))}recalculateAndSaveOverlays(e,t){const i=Ka();let o=new it(((h,p)=>h-p)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((m=>{const v=t.get(m);if(v===null)return;let w=i.get(m)||fn.empty();w=p.applyToLocalView(v,w),i.set(m,w);const k=(o.get(p.batchId)||Le()).add(m);o=o.insert(p.batchId,k)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),v=m.key,w=m.value,k=T_();w.forEach((A=>{if(!l.has(A)){const O=A_(t.get(A),i.get(A));O!==null&&k.set(A,O),l=l.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,k))}return re.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return Te.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):v_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):re.resolve(li());let p=-1,m=l;return h.next((v=>re.forEach(v,((w,k)=>(p<k.largestBatchId&&(p=k.largestBatchId),l.get(w)?re.resolve():this.remoteDocumentCache.getEntry(e,w).next((A=>{m=m.insert(w,A)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,m,v,Le()))).next((w=>({batchId:p,changes:E_(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((i=>{let o=za();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=za();return this.indexManager.getCollectionParents(e,l).next((p=>re.forEach(p,(m=>{const v=(function(k,A){return new Mo(A,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((w=>{w.forEach(((k,A)=>{h=h.insert(k,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((m,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,Bt.newInvalidDocument(w)))}));let p=za();return h.forEach(((m,v)=>{const w=l.get(m);w!==void 0&&Ga(w.mutation,v,fn.empty(),vt.now()),Du(t,v)&&(p=p.insert(m,v))})),p}))}}class bT{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return re.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:cr(o.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:gT(o.bundledQuery),readTime:cr(o.readTime)}})(t)),re.resolve()}}class ET{constructor(){this.overlays=new it(Te.comparator),this.Ir=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const i=li();return re.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.ht(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(i)),re.resolve()}getOverlaysForCollection(e,t,i){const o=li(),l=t.length+1,h=new Te(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const m=p.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new it(((v,w)=>v-w));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let w=l.get(v.largestBatchId);w===null&&(w=li(),l=l.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const p=li(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((v,w)=>p.set(v,w))),!(p.size()>=o)););return re.resolve(p)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new WE(t,i));let l=this.Ir.get(t);l===void 0&&(l=Le(),this.Ir.set(t,l)),this.Ir.set(t,l.add(i.key))}}class TT{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}class Kf{constructor(){this.Tr=new Dt(Nt.Er),this.dr=new Dt(Nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new Nt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new Nt(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new Te(new et([])),i=new Nt(t,e),o=new Nt(t,e+1),l=[];return this.dr.forEachInRange([i,o],(h=>{this.Vr(h),l.push(h.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Te(new et([])),i=new Nt(t,e),o=new Nt(t,e+1);let l=Le();return this.dr.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Nt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Nt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Te.comparator(e.key,t.key)||qe(e.wr,t.wr)}static Ar(e,t){return qe(e.wr,t.wr)||Te.comparator(e.key,t.key)}}class NT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Dt(Nt.Er)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new HE(l,t,i,o);this.mutationQueue.push(h);for(const p of o)this.br=this.br.add(new Nt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return re.resolve(h)}lookupMutationBatch(e,t){return re.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),l=o<0?0:o;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Nt(t,0),o=new Nt(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,o],(h=>{const p=this.Dr(h.wr);l.push(p)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Dt(qe);return t.forEach((o=>{const l=new Nt(o,0),h=new Nt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,h],(p=>{i=i.add(p.wr)}))})),re.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Te.isDocumentKey(l)||(l=l.child(""));const h=new Nt(new Te(l),0);let p=new Dt(qe);return this.br.forEachWhile((m=>{const v=m.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(p=p.add(m.wr)),!0)}),h),re.resolve(this.Cr(p))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return re.forEach(t.mutations,(o=>{const l=new Nt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new Nt(t,0),o=this.br.firstAfterOrEqual(i);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kT{constructor(e){this.Mr=e,this.docs=(function(){return new it(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return re.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let i=Ur();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Bt.newInvalidDocument(o))})),re.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Ur();const h=t.path,p=new Te(h.child("")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:v,value:{document:w}}=m.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||lE(aE(w),i)<=0||(o.has(w.key)||Du(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ce()}Or(e,t){return re.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new IT(this)}getSize(e){return re.resolve(this.size)}}class IT extends vT{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),re.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class ST{constructor(e){this.persistence=e,this.Nr=new Lo((t=>Ff(t)),Uf),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Kf,this.targetCount=0,this.kr=So.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),re.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new So(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Kn(t),re.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Nr.forEach(((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.Nr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),re.waitFor(l).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return re.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),re.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return re.resolve(i)}containsKey(e,t){return re.resolve(this.Br.containsKey(t))}}class CT{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Mf(0),this.Kr=!1,this.Kr=!0,this.$r=new TT,this.referenceDelegate=e(this),this.Ur=new ST(this),this.indexManager=new yT,this.remoteDocumentCache=(function(o){return new kT(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new mT(t),this.Gr=new bT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ET,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new NT(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){ve("MemoryPersistence","Starting transaction:",e);const o=new AT(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((l=>this.referenceDelegate.jr(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Hr(e,t){return re.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class AT extends uE{constructor(e){super(),this.currentSequenceNumber=e}}class Gf{constructor(e){this.persistence=e,this.Jr=new Kf,this.Yr=null}static Zr(e){return new Gf(e)}get Xr(){if(this.Yr)return this.Yr;throw Ce()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),re.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),re.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.Xr.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Xr,(i=>{const o=Te.fromPath(i);return this.ei(e,o).next((l=>{l||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return re.or([()=>re.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Qf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Qf(e,t.fromCache,i,o)}}class jT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class PT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return vw()?8:dE($t())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Yi(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.Zi(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new jT;return this.Xi(e,t,h).next((p=>{if(l.result=p,this.zi)return this.es(e,t,h,p.size)}))})).next((()=>l.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(Oa()<=Ve.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),re.resolve()):(Oa()<=Ve.DEBUG&&ve("QueryEngine","Query:",po(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Oa()<=Ve.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):re.resolve())}Yi(e,t){if(x0(t))return re.resolve(null);let i=lr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=rf(t,null,"F"),i=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Le(...l);return this.Ji.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((m=>{const v=this.ts(t,p);return this.ns(t,v,h,m.readTime)?this.Yi(e,rf(t,null,"F")):this.rs(e,v,t,m)}))))})))))}Zi(e,t,i,o){return x0(t)||o.isEqual(Ae.min())?re.resolve(null):this.Ji.getDocuments(e,i).next((l=>{const h=this.ts(t,l);return this.ns(t,h,i,o)?re.resolve(null):(Oa()<=Ve.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),po(t)),this.rs(e,h,t,oE(o,-1)).next((p=>p)))}))}ts(e,t){let i=new Dt(w_(e));return t.forEach(((o,l)=>{Du(e,l)&&(i=i.add(l))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,t,i){return Oa()<=Ve.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",po(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ts.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}class RT{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new it(qe),this._s=new Lo((l=>Ff(l)),Uf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function DT(n,e,t,i){return new RT(n,e,t,i)}async function B_(n,e){const t=je(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],p=[];let m=Le();for(const v of o){h.push(v.batchId);for(const w of v.mutations)m=m.add(w.key)}for(const v of l){p.push(v.batchId);for(const w of v.mutations)m=m.add(w.key)}return t.localDocuments.getDocuments(i,m).next((v=>({hs:v,removedBatchIds:h,addedBatchIds:p})))}))}))}function MT(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return(function(p,m,v,w){const k=v.batch,A=k.keys();let O=re.resolve();return A.forEach(($=>{O=O.next((()=>w.getEntry(m,$))).next((q=>{const V=v.docVersions.get($);We(V!==null),q.version.compareTo(V)<0&&(k.applyToRemoteDocument(q,v),q.isValidDocument()&&(q.setReadTime(v.commitVersion),w.addEntry(q)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(m,k)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let m=Le();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(m=m.add(p.batch.mutations[v].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function $_(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function LT(n,e){const t=je(n),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const p=[];e.targetChanges.forEach(((w,k)=>{const A=o.get(k);if(!A)return;p.push(t.Ur.removeMatchingKeys(l,w.removedDocuments,k).next((()=>t.Ur.addMatchingKeys(l,w.addedDocuments,k))));let O=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(k)!==null?O=O.withResumeToken(Mt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),o=o.insert(k,O),(function(q,V,J){return q.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(A,O,w)&&p.push(t.Ur.updateTargetData(l,O))}));let m=Ur(),v=Le();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),p.push(OT(l,h,e.documentUpdates).next((w=>{m=w.Ps,v=w.Is}))),!i.isEqual(Ae.min())){const w=t.Ur.getLastRemoteSnapshotVersion(l).next((k=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i)));p.push(w)}return re.waitFor(p).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,v))).next((()=>m))})).then((l=>(t.os=o,l)))}function OT(n,e,t){let i=Le(),o=Le();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let h=Ur();return t.forEach(((p,m)=>{const v=l.get(p);m.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Ae.min())?(e.removeEntry(p,m.readTime),h=h.insert(p,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||m.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(m),h=h.insert(p,m)):ve("LocalStore","Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",m.version)})),{Ps:h,Is:o}}))}function VT(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function FT(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((l=>l?(o=l,re.resolve(o)):t.Ur.allocateTargetId(i).next((h=>(o=new _s(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function cf(n,e,t){const i=je(n),o=i.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!gl(h))throw h;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function j0(n,e,t){const i=je(n);let o=Ae.min(),l=Le();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,v,w){const k=je(m),A=k._s.get(w);return A!==void 0?re.resolve(k.os.get(A)):k.Ur.getTargetData(v,w)})(i,h,lr(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(h,p.targetId).next((m=>{l=m}))})).next((()=>i.ss.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?l:Le()))).next((p=>(UT(i,CE(e),p),{documents:p,Ts:l})))))}function UT(n,e,t){let i=n.us.get(e)||Ae.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.us.set(e,i)}class P0{constructor(){this.activeTargetIds=ME()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zT{constructor(){this.so=new P0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new P0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class BT{_o(e){}shutdown(){}}class R0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let $c=null;function Oh(){return $c===null?$c=(function(){return 268435456+Math.round(2147483648*Math.random())})():$c++,"0x"+$c.toString(16)}const $T={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qT{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ut="WebChannelConnection";class HT extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(t,i,o,l,h){const p=Oh(),m=this.xo(t,i.toUriEncodedString());ve("RestConnection",`Sending RPC '${t}' ${p}:`,m,o);const v={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(v,l,h),this.No(t,m,v,o).then((w=>(ve("RestConnection",`Received RPC '${t}' ${p}: `,w),w)),(w=>{throw To("RestConnection",`RPC '${t}' ${p} failed with error: `,w,"url: ",m,"request:",o),w}))}Lo(t,i,o,l,h,p){return this.Mo(t,i,o,l,h)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Do})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,h)=>t[h]=l)),o&&o.headers.forEach(((l,h)=>t[h]=l))}xo(t,i){const o=$T[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const l=Oh();return new Promise(((h,p)=>{const m=new r_;m.setWithCredentials(!0),m.listenOnce(s_.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case eu.NO_ERROR:const w=m.getResponseJson();ve(Ut,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case eu.TIMEOUT:ve(Ut,`RPC '${e}' ${l} timed out`),p(new fe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case eu.HTTP_ERROR:const k=m.getStatus();if(ve(Ut,`RPC '${e}' ${l} failed with status:`,k,"response text:",m.getResponseText()),k>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const O=A?.error;if(O&&O.status&&O.message){const $=(function(V){const J=V.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(J)>=0?J:Z.UNKNOWN})(O.status);p(new fe($,O.message))}else p(new fe(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new fe(Z.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{ve(Ut,`RPC '${e}' ${l} completed.`)}}));const v=JSON.stringify(o);ve(Ut,`RPC '${e}' ${l} sending request:`,o),m.send(t,"POST",v,i,15)}))}Bo(e,t,i){const o=Oh(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=a_(),p=o_(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Oo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const w=l.join("");ve(Ut,`Creating RPC '${e}' stream ${o}: ${w}`,m);const k=h.createWebChannel(w,m);let A=!1,O=!1;const $=new qT({Io:V=>{O?ve(Ut,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(A||(ve(Ut,`Opening RPC '${e}' stream ${o} transport.`),k.open(),A=!0),ve(Ut,`RPC '${e}' stream ${o} sending:`,V),k.send(V))},To:()=>k.close()}),q=(V,J,F)=>{V.listen(J,(D=>{try{F(D)}catch(G){setTimeout((()=>{throw G}),0)}}))};return q(k,Ua.EventType.OPEN,(()=>{O||(ve(Ut,`RPC '${e}' stream ${o} transport opened.`),$.yo())})),q(k,Ua.EventType.CLOSE,(()=>{O||(O=!0,ve(Ut,`RPC '${e}' stream ${o} transport closed`),$.So())})),q(k,Ua.EventType.ERROR,(V=>{O||(O=!0,To(Ut,`RPC '${e}' stream ${o} transport errored:`,V),$.So(new fe(Z.UNAVAILABLE,"The operation could not be completed")))})),q(k,Ua.EventType.MESSAGE,(V=>{var J;if(!O){const F=V.data[0];We(!!F);const D=F,G=D.error||((J=D[0])===null||J===void 0?void 0:J.error);if(G){ve(Ut,`RPC '${e}' stream ${o} received error:`,G);const ie=G.status;let ce=(function(N){const I=ht[N];if(I!==void 0)return P_(I)})(ie),j=G.message;ce===void 0&&(ce=Z.INTERNAL,j="Unknown error status: "+ie+" with message "+G.message),O=!0,$.So(new fe(ce,j)),k.close()}else ve(Ut,`RPC '${e}' stream ${o} received:`,F),$.bo(F)}})),q(p,i_.STAT_EVENT,(V=>{V.stat===Xh.PROXY?ve(Ut,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===Xh.NOPROXY&&ve(Ut,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{$.wo()}),0),$}}function Vh(){return typeof document<"u"?document:null}function Vu(n){return new tT(n,!0)}class q_{constructor(e,t,i=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class H_{constructor(e,t,i,o,l,h,p,m){this.ui=e,this.Ho=i,this.Jo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new q_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new fe(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WT extends H_{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=sT(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?cr(h.readTime):Ae.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=lf(this.serializer),t.addTarget=(function(l,h){let p;const m=h.target;if(p=tf(m)?{documents:aT(l,m)}:{query:lT(l,m)._t},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=M_(l,h.resumeToken);const v=sf(l,h.expectedCount);v!==null&&(p.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ae.min())>0){p.readTime=yu(l,h.snapshotVersion.toTimestamp());const v=sf(l,h.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const i=uT(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=lf(this.serializer),t.removeTarget=e,this.a_(t)}}class KT extends H_{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=oT(e.writeResults,e.commitTime),i=cr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=lf(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>iT(this.serializer,i)))};this.a_(t)}}class GT extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Mo(e,of(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(Z.UNKNOWN,l.toString())}))}Lo(e,t,i,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Lo(e,of(t,i),o,h,p,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new fe(Z.UNKNOWN,h.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class QT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fr(t),this.D_=!1):ve("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class YT{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((h=>{i.enqueueAndForget((async()=>{vi(this)&&(ve("RemoteStore","Restarting streams for network reachability change."),await(async function(m){const v=je(m);v.L_.add(4),await vl(v),v.q_.set("Unknown"),v.L_.delete(4),await Fu(v)})(this))}))})),this.q_=new QT(i,o)}}async function Fu(n){if(vi(n))for(const e of n.B_)await e(!0)}async function vl(n){for(const e of n.B_)await e(!1)}function W_(n,e){const t=je(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Zf(t)?Jf(t):Oo(t).r_()&&Xf(t,e))}function Yf(n,e){const t=je(n),i=Oo(t);t.N_.delete(e),i.r_()&&K_(t,e),t.N_.size===0&&(i.r_()?i.o_():vi(t)&&t.q_.set("Unknown"))}function Xf(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Oo(n).A_(e)}function K_(n,e){n.Q_.xe(e),Oo(n).R_(e)}function Jf(n){n.Q_=new XE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Oo(n).start(),n.q_.v_()}function Zf(n){return vi(n)&&!Oo(n).n_()&&n.N_.size>0}function vi(n){return je(n).L_.size===0}function G_(n){n.Q_=void 0}async function XT(n){n.q_.set("Online")}async function JT(n){n.N_.forEach(((e,t)=>{Xf(n,e)}))}async function ZT(n,e){G_(n),Zf(n)?(n.q_.M_(e),Jf(n)):n.q_.set("Unknown")}async function eN(n,e,t){if(n.q_.set("Online"),e instanceof D_&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const p of l.targetIds)o.N_.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.N_.delete(p),o.Q_.removeTarget(p))})(n,e)}catch(i){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await _u(n,i)}else if(e instanceof ru?n.Q_.Ke(e):e instanceof R_?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ae.min()))try{const i=await $_(n.localStore);t.compareTo(i)>=0&&await(function(l,h){const p=l.Q_.rt(h);return p.targetChanges.forEach(((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const w=l.N_.get(v);w&&l.N_.set(v,w.withResumeToken(m.resumeToken,h))}})),p.targetMismatches.forEach(((m,v)=>{const w=l.N_.get(m);if(!w)return;l.N_.set(m,w.withResumeToken(Mt.EMPTY_BYTE_STRING,w.snapshotVersion)),K_(l,m);const k=new _s(w.target,m,v,w.sequenceNumber);Xf(l,k)})),l.remoteSyncer.applyRemoteEvent(p)})(n,t)}catch(i){ve("RemoteStore","Failed to raise snapshot:",i),await _u(n,i)}}async function _u(n,e,t){if(!gl(e))throw e;n.L_.add(1),await vl(n),n.q_.set("Offline"),t||(t=()=>$_(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Fu(n)}))}function Q_(n,e){return e().catch((t=>_u(n,t,e)))}async function Uu(n){const e=je(n),t=ks(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tN(e);)try{const o=await VT(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,nN(e,o)}catch(o){await _u(e,o)}Y_(e)&&X_(e)}function tN(n){return vi(n)&&n.O_.length<10}function nN(n,e){n.O_.push(e);const t=ks(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Y_(n){return vi(n)&&!ks(n).n_()&&n.O_.length>0}function X_(n){ks(n).start()}async function rN(n){ks(n).p_()}async function sN(n){const e=ks(n);for(const t of n.O_)e.m_(t.mutations)}async function iN(n,e,t){const i=n.O_.shift(),o=qf.from(i,e,t);await Q_(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Uu(n)}async function oN(n,e){e&&ks(n).V_&&await(async function(i,o){if((function(h){return GE(h)&&h!==Z.ABORTED})(o.code)){const l=i.O_.shift();ks(i).s_(),await Q_(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Uu(i)}})(n,e),Y_(n)&&X_(n)}async function D0(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const i=vi(t);t.L_.add(3),await vl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Fu(t)}async function aN(n,e){const t=je(n);e?(t.L_.delete(2),await Fu(t)):e||(t.L_.add(2),await vl(t),t.q_.set("Unknown"))}function Oo(n){return n.K_||(n.K_=(function(t,i,o){const l=je(t);return l.w_(),new WT(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Eo:XT.bind(null,n),Ro:JT.bind(null,n),mo:ZT.bind(null,n),d_:eN.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Zf(n)?Jf(n):n.q_.set("Unknown")):(await n.K_.stop(),G_(n))}))),n.K_}function ks(n){return n.U_||(n.U_=(function(t,i,o){const l=je(t);return l.w_(),new KT(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rN.bind(null,n),mo:oN.bind(null,n),f_:sN.bind(null,n),g_:iN.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await Uu(n)):(await n.U_.stop(),n.O_.length>0&&(ve("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}class ep{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,p=new ep(e,t,h,o,l);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tp(n,e){if(Fr("AsyncQueue",`${e}: ${n}`),gl(n))return new fe(Z.UNAVAILABLE,`${e}: ${n}`);throw n}class xo{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=za(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new xo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new xo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class M0{constructor(){this.W_=new it(Te.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ce():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Co{constructor(e,t,i,o,l,h,p,m,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new Co(e,t,xo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class lN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class cN{constructor(){this.queries=L0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=je(t),l=o.queries;o.queries=L0(),l.forEach(((h,p)=>{for(const m of p.j_)m.onError(i)}))})(this,new fe(Z.ABORTED,"Firestore shutting down"))}}function L0(){return new Lo((n=>x_(n)),Ru)}async function J_(n,e){const t=je(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.H_()&&e.J_()&&(i=2):(l=new lN,i=e.J_()?0:1);try{switch(i){case 0:l.z_=await t.onListen(o,!0);break;case 1:l.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=tp(h,`Initialization of query '${po(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&np(t)}async function Z_(n,e){const t=je(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.j_.indexOf(e);h>=0&&(l.j_.splice(h,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function uN(n,e){const t=je(n);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const p of h.j_)p.X_(o)&&(i=!0);h.z_=o}}i&&np(t)}function dN(n,e,t){const i=je(n),o=i.queries.get(e);if(o)for(const l of o.j_)l.onError(t);i.queries.delete(e)}function np(n){n.Y_.forEach((e=>{e.next()}))}var uf,O0;(O0=uf||(uf={})).ea="default",O0.Cache="cache";class ev{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Co(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==uf.Cache}}class tv{constructor(e){this.key=e}}class nv{constructor(e){this.key=e}}class hN{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Le(),this.mutatedKeys=Le(),this.Aa=w_(e),this.Ra=new xo(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new M0,o=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,k)=>{const A=o.get(w),O=Du(this.query,k)?k:null,$=!!A&&this.mutatedKeys.has(A.key),q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let V=!1;A&&O?A.data.isEqual(O.data)?$!==q&&(i.track({type:3,doc:O}),V=!0):this.ga(A,O)||(i.track({type:2,doc:O}),V=!0,(m&&this.Aa(O,m)>0||v&&this.Aa(O,v)<0)&&(p=!0)):!A&&O?(i.track({type:0,doc:O}),V=!0):A&&!O&&(i.track({type:1,doc:A}),V=!0,(m||v)&&(p=!0)),V&&(O?(h=h.add(O),l=q?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),i.track({type:1,doc:w})}return{Ra:h,fa:i,ns:p,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort(((w,k)=>(function(O,$){const q=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return q(O)-q($)})(w.type,k.type)||this.Aa(w.doc,k.doc))),this.pa(i),o=o!=null&&o;const p=t&&!o?this.ya():[],m=this.da.size===0&&this.current&&!o?1:0,v=m!==this.Ea;return this.Ea=m,h.length!==0||v?{snapshot:new Co(this.query,e.Ra,l,h,e.mutatedKeys,m===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:p}:{wa:p}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new M0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Le(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new nv(i))})),this.da.forEach((i=>{e.has(i)||t.push(new tv(i))})),t}ba(e){this.Ta=e.Ts,this.da=Le();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Co.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fN{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class pN{constructor(e){this.key=e,this.va=!1}}class mN{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new Lo((p=>x_(p)),Ru),this.Ma=new Map,this.xa=new Set,this.Oa=new it(Te.comparator),this.Na=new Map,this.La=new Kf,this.Ba={},this.ka=new Map,this.qa=So.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function gN(n,e,t=!0){const i=lv(n);let o;const l=i.Fa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await rv(i,e,t,!0),o}async function yN(n,e){const t=lv(n);await rv(t,e,!0,!1)}async function rv(n,e,t,i){const o=await FT(n.localStore,lr(e)),l=o.targetId,h=n.sharedClientState.addLocalQueryTarget(l,t);let p;return i&&(p=await _N(n,e,l,h==="current",o.resumeToken)),n.isPrimaryClient&&t&&W_(n.remoteStore,o),p}async function _N(n,e,t,i,o){n.Ka=(k,A,O)=>(async function(q,V,J,F){let D=V.view.ma(J);D.ns&&(D=await j0(q.localStore,V.query,!1).then((({documents:j})=>V.view.ma(j,D))));const G=F&&F.targetChanges.get(V.targetId),ie=F&&F.targetMismatches.get(V.targetId)!=null,ce=V.view.applyChanges(D,q.isPrimaryClient,G,ie);return F0(q,V.targetId,ce.wa),ce.snapshot})(n,k,A,O);const l=await j0(n.localStore,e,!0),h=new hN(e,l.Ts),p=h.ma(l.documents),m=_l.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),v=h.applyChanges(p,n.isPrimaryClient,m);F0(n,t,v.wa);const w=new fN(e,t,h);return n.Fa.set(e,w),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),v.snapshot}async function vN(n,e,t){const i=je(n),o=i.Fa.get(e),l=i.Ma.get(o.targetId);if(l.length>1)return i.Ma.set(o.targetId,l.filter((h=>!Ru(h,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await cf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Yf(i.remoteStore,o.targetId),df(i,o.targetId)})).catch(ml)):(df(i,o.targetId),await cf(i.localStore,o.targetId,!0))}async function xN(n,e){const t=je(n),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Yf(t.remoteStore,i.targetId))}async function wN(n,e,t){const i=SN(n);try{const o=await(function(h,p){const m=je(h),v=vt.now(),w=p.reduce(((O,$)=>O.add($.key)),Le());let k,A;return m.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let $=Ur(),q=Le();return m.cs.getEntries(O,w).next((V=>{$=V,$.forEach(((J,F)=>{F.isValidDocument()||(q=q.add(J))}))})).next((()=>m.localDocuments.getOverlayedDocuments(O,$))).next((V=>{k=V;const J=[];for(const F of p){const D=$E(F,k.get(F.key).overlayedDocument);D!=null&&J.push(new Cs(F.key,D,h_(D.value.mapValue),$n.exists(!0)))}return m.mutationQueue.addMutationBatch(O,v,J,p)})).next((V=>{A=V;const J=V.applyToLocalDocumentSet(k,q);return m.documentOverlayCache.saveOverlays(O,V.batchId,J)}))})).then((()=>({batchId:A.batchId,changes:E_(k)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,p,m){let v=h.Ba[h.currentUser.toKey()];v||(v=new it(qe)),v=v.insert(p,m),h.Ba[h.currentUser.toKey()]=v})(i,o.batchId,t),await xl(i,o.changes),await Uu(i.remoteStore)}catch(o){const l=tp(o,"Failed to persist write");t.reject(l)}}async function sv(n,e){const t=je(n);try{const i=await LT(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Na.get(l);h&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?We(h.va):o.removedDocuments.size>0&&(We(h.va),h.va=!1))})),await xl(t,i,e)}catch(i){await ml(i)}}function V0(n,e,t){const i=je(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((l,h)=>{const p=h.view.Z_(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const m=je(h);m.onlineState=p;let v=!1;m.queries.forEach(((w,k)=>{for(const A of k.j_)A.Z_(p)&&(v=!0)})),v&&np(m)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function bN(n,e,t){const i=je(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),l=o&&o.key;if(l){let h=new it(Te.comparator);h=h.insert(l,Bt.newNoDocument(l,Ae.min()));const p=Le().add(l),m=new Ou(Ae.min(),new Map,new it(qe),h,p);await sv(i,m),i.Oa=i.Oa.remove(l),i.Na.delete(e),rp(i)}else await cf(i.localStore,e,!1).then((()=>df(i,e,t))).catch(ml)}async function EN(n,e){const t=je(n),i=e.batch.batchId;try{const o=await MT(t.localStore,e);ov(t,i,null),iv(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await xl(t,o)}catch(o){await ml(o)}}async function TN(n,e,t){const i=je(n);try{const o=await(function(h,p){const m=je(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let w;return m.mutationQueue.lookupMutationBatch(v,p).next((k=>(We(k!==null),w=k.keys(),m.mutationQueue.removeMutationBatch(v,k)))).next((()=>m.mutationQueue.performConsistencyCheck(v))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(v,w,p))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w))).next((()=>m.localDocuments.getDocuments(v,w)))}))})(i.localStore,e);ov(i,e,t),iv(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await xl(i,o)}catch(o){await ml(o)}}function iv(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function ov(n,e,t){const i=je(n);let o=i.Ba[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function df(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((i=>{n.La.containsKey(i)||av(n,i)}))}function av(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Yf(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),rp(n))}function F0(n,e,t){for(const i of t)i instanceof tv?(n.La.addReference(i.key,e),NN(n,i)):i instanceof nv?(ve("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||av(n,i.key)):Ce()}function NN(n,e){const t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(ve("SyncEngine","New document in limbo: "+t),n.xa.add(i),rp(n))}function rp(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Te(et.fromString(e)),i=n.qa.next();n.Na.set(i,new pN(t)),n.Oa=n.Oa.insert(t,i),W_(n.remoteStore,new _s(lr(zf(t.path)),i,"TargetPurposeLimboResolution",Mf.oe))}}async function xl(n,e,t){const i=je(n),o=[],l=[],h=[];i.Fa.isEmpty()||(i.Fa.forEach(((p,m)=>{h.push(i.Ka(m,e,t).then((v=>{var w;if((v||t)&&i.isPrimaryClient){const k=v?!v.fromCache:(w=t?.targetChanges.get(m.targetId))===null||w===void 0?void 0:w.current;i.sharedClientState.updateQueryState(m.targetId,k?"current":"not-current")}if(v){o.push(v);const k=Qf.Wi(m.targetId,v);l.push(k)}})))})),await Promise.all(h),i.Ca.d_(o),await(async function(m,v){const w=je(m);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>re.forEach(v,(A=>re.forEach(A.$i,(O=>w.persistence.referenceDelegate.addReference(k,A.targetId,O))).next((()=>re.forEach(A.Ui,(O=>w.persistence.referenceDelegate.removeReference(k,A.targetId,O)))))))))}catch(k){if(!gl(k))throw k;ve("LocalStore","Failed to update sequence numbers: "+k)}for(const k of v){const A=k.targetId;if(!k.fromCache){const O=w.os.get(A),$=O.snapshotVersion,q=O.withLastLimboFreeSnapshotVersion($);w.os=w.os.insert(A,q)}}})(i.localStore,l))}async function kN(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const i=await B_(t.localStore,e);t.currentUser=e,(function(l,h){l.ka.forEach((p=>{p.forEach((m=>{m.reject(new fe(Z.CANCELLED,h))}))})),l.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await xl(t,i.hs)}}function IN(n,e){const t=je(n),i=t.Na.get(e);if(i&&i.va)return Le().add(i.key);{let o=Le();const l=t.Ma.get(e);if(!l)return o;for(const h of l){const p=t.Fa.get(h);o=o.unionWith(p.view.Va)}return o}}function lv(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bN.bind(null,e),e.Ca.d_=uN.bind(null,e.eventManager),e.Ca.$a=dN.bind(null,e.eventManager),e}function SN(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TN.bind(null,e),e}class vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return DT(this.persistence,new PT,e.initialUser,this.serializer)}Ga(e){return new CT(Gf.Zr,this.serializer)}Wa(e){return new zT}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vu.provider={build:()=>new vu};class hf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>V0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kN.bind(null,this.syncEngine),await aN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new cN})()}createDatastore(e){const t=Vu(e.databaseInfo.databaseId),i=(function(l){return new HT(l)})(e.databaseInfo);return(function(l,h,p,m){return new GT(l,h,p,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,p){return new YT(i,o,l,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>V0(this.syncEngine,t,0)),(function(){return R0.D()?new R0:new BT})())}createSyncEngine(e,t){return(function(o,l,h,p,m,v,w){const k=new mN(o,l,h,p,m,v);return w&&(k.Qa=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=je(o);ve("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await vl(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hf.provider={build:()=>new hf};class cv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class CN{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=c_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ve("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ve("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=tp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Fh(n,e){n.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await B_(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function U0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await AN(n);ve("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>D0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>D0(e.remoteStore,o))),n._onlineComponents=e}async function AN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;To("Error using user provided cache. Falling back to memory cache: "+t),await Fh(n,new vu)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),await Fh(n,new vu);return n._offlineComponents}async function uv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),await U0(n,n._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),await U0(n,new hf))),n._onlineComponents}function jN(n){return uv(n).then((e=>e.syncEngine))}async function dv(n){const e=await uv(n),t=e.eventManager;return t.onListen=gN.bind(null,e.syncEngine),t.onUnlisten=vN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xN.bind(null,e.syncEngine),t}function PN(n,e,t={}){const i=new Mr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,m,v){const w=new cv({next:A=>{w.Za(),h.enqueueAndForget((()=>Z_(l,k)));const O=A.docs.has(p);!O&&A.fromCache?v.reject(new fe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&A.fromCache&&m&&m.source==="server"?v.reject(new fe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(A)},error:A=>v.reject(A)}),k=new ev(zf(p.path),w,{includeMetadataChanges:!0,_a:!0});return J_(l,k)})(await dv(n),n.asyncQueue,e,t,i))),i.promise}function RN(n,e,t={}){const i=new Mr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,h,p,m,v){const w=new cv({next:A=>{w.Za(),h.enqueueAndForget((()=>Z_(l,k))),A.fromCache&&m.source==="server"?v.reject(new fe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(A)},error:A=>v.reject(A)}),k=new ev(p,w,{includeMetadataChanges:!0,_a:!0});return J_(l,k)})(await dv(n),n.asyncQueue,e,t,i))),i.promise}function hv(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const z0=new Map;function fv(n,e,t){if(!t)throw new fe(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DN(n,e,t,i){if(e===!0&&i===!0)throw new fe(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function B0(n){if(!Te.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $0(n){if(Te.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce()}function hr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zu(n);throw new fe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class q0{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hv((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bu{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q0(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new X2;switch(i.type){case"firstParty":return new tE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=z0.get(t);i&&(ve("ComponentProvider","Removing Datastore"),z0.delete(t),i.terminate())})(this),Promise.resolve()}}function MN(n,e,t,i={}){var o;const l=(n=hr(n,Bu))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),i.mockUserToken){let p,m;if(typeof i.mockUserToken=="string")p=i.mockUserToken,m=zt.MOCK_USER;else{p=hw(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new fe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new zt(v)}n._authCredentials=new J2(new l_(p,m))}}class xi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new xi(this.firestore,e,this._query)}}class Qt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class Es extends xi{constructor(e,t,i){super(e,t,zf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Te(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function LN(n,e,...t){if(n=It(n),fv("collection","path",e),n instanceof Bu){const i=et.fromString(e,...t);return $0(i),new Es(n,null,i)}{if(!(n instanceof Qt||n instanceof Es))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(et.fromString(e,...t));return $0(i),new Es(n.firestore,null,i)}}function wo(n,e,...t){if(n=It(n),arguments.length===1&&(e=c_.newId()),fv("doc","path",e),n instanceof Bu){const i=et.fromString(e,...t);return B0(i),new Qt(n,null,new Te(i))}{if(!(n instanceof Qt||n instanceof Es))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(et.fromString(e,...t));return B0(i),new Qt(n.firestore,n instanceof Es?n.converter:null,new Te(i))}}class H0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new q_(this,"async_queue_retry"),this.Vu=()=>{const i=Vh();i&&ve("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=Vh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Vh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Mr;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!gl(e))throw e;ve("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(h){let p=h.message||"";return h.stack&&(p=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),p})(i);throw Fr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=ep.createAndSchedule(this,e,t,i,(l=>this.yu(l)));return this.Tu.push(o),o}fu(){this.Eu&&Ce()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Vo extends Bu{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new H0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new H0(e),this._firestoreClient=void 0,await e}}}function ON(n,e){const t=typeof n=="object"?n:vy(),i=typeof n=="string"?n:"(default)",o=bf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=uw("firestore");l&&MN(o,...l)}return o}function sp(n){if(n._terminated)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||VN(n),n._firestoreClient}function VN(n){var e,t,i;const o=n._freezeSettings(),l=(function(p,m,v,w){return new pE(p,m,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,hv(w.experimentalLongPollingOptions),w.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new CN(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(p){const m=p?._online.build();return{_offline:p?._offline.build(m),_online:m}})(n._componentsProvider))}class Ao{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ao(Mt.fromBase64String(e))}catch(t){throw new fe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ao(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $u{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qu{constructor(e){this._methodName=e}}class ip{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}class op{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}}const FN=/^__.*__$/;class UN{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new yl(e,this.data,t,this.fieldTransforms)}}class pv{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class ap{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ap(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return xu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mv(this.Cu)&&FN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class zN{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Vu(e)}Qu(e,t,i,o=!1){return new ap({Cu:e,methodName:t,qu:i,path:Rt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lp(n){const e=n._freezeSettings(),t=Vu(n._databaseId);return new zN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BN(n,e,t,i,o,l={}){const h=n.Qu(l.merge||l.mergeFields?2:0,e,t,o);up("Data must be an object, but it was:",h,i);const p=gv(i,h);let m,v;if(l.merge)m=new fn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const k of l.mergeFields){const A=ff(e,k,t);if(!h.contains(A))throw new fe(Z.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);_v(w,A)||w.push(A)}m=new fn(w),v=h.fieldTransforms.filter((k=>m.covers(k.field)))}else m=null,v=h.fieldTransforms;return new UN(new sn(p),m,v)}class Hu extends qu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hu}}class cp extends qu{_toFieldTransform(e){return new FE(e.path,new sl)}isEqual(e){return e instanceof cp}}function $N(n,e,t,i){const o=n.Qu(1,e,t);up("Data must be an object, but it was:",o,i);const l=[],h=sn.empty();_i(i,((m,v)=>{const w=dp(e,m,t);v=It(v);const k=o.Nu(w);if(v instanceof Hu)l.push(w);else{const A=wl(v,k);A!=null&&(l.push(w),h.set(w,A))}}));const p=new fn(l);return new pv(h,p,o.fieldTransforms)}function qN(n,e,t,i,o,l){const h=n.Qu(1,e,t),p=[ff(e,i,t)],m=[o];if(l.length%2!=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<l.length;A+=2)p.push(ff(e,l[A])),m.push(l[A+1]);const v=[],w=sn.empty();for(let A=p.length-1;A>=0;--A)if(!_v(v,p[A])){const O=p[A];let $=m[A];$=It($);const q=h.Nu(O);if($ instanceof Hu)v.push(O);else{const V=wl($,q);V!=null&&(v.push(O),w.set(O,V))}}const k=new fn(v);return new pv(w,k,h.fieldTransforms)}function HN(n,e,t,i=!1){return wl(t,n.Qu(i?4:3,e))}function wl(n,e){if(yv(n=It(n)))return up("Unsupported field value:",e,n),gv(n,e);if(n instanceof qu)return(function(i,o){if(!mv(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const p of i){let m=wl(p,o.Lu(h));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),h++}return{arrayValue:{values:l}}})(n,e)}return(function(i,o){if((i=It(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return LE(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=vt.fromDate(i);return{timestampValue:yu(o.serializer,l)}}if(i instanceof vt){const l=new vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yu(o.serializer,l)}}if(i instanceof ip)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ao)return{bytesValue:M_(o.serializer,i._byteString)};if(i instanceof Qt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Wf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof op)return(function(h,p){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map((m=>{if(typeof m!="number")throw p.Bu("VectorValues must only contain numeric values.");return Bf(p.serializer,m)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${zu(i)}`)})(n,e)}function gv(n,e){const t={};return u_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(n,((i,o)=>{const l=wl(o,e.Mu(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function yv(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof ip||n instanceof Ao||n instanceof Qt||n instanceof qu||n instanceof op)}function up(n,e,t){if(!yv(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=zu(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function ff(n,e,t){if((e=It(e))instanceof $u)return e._internalPath;if(typeof e=="string")return dp(n,e);throw xu("Field path arguments must be of type string or ",n,!1,void 0,t)}const WN=new RegExp("[~\\*/\\[\\]]");function dp(n,e,t){if(e.search(WN)>=0)throw xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $u(...e.split("."))._internalPath}catch{throw xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xu(n,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(l||h)&&(m+=" (found",l&&(m+=` in field ${i}`),h&&(m+=` in document ${o}`),m+=")"),new fe(Z.INVALID_ARGUMENT,p+n+m)}function _v(n,e){return n.some((t=>t.isEqual(e)))}class vv{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KN extends vv{data(){return super.data()}}function Wu(n,e){return typeof e=="string"?dp(n,e):e instanceof $u?e._internalPath:e._delegate._internalPath}function GN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hp{}class xv extends hp{}function W0(n,e,...t){let i=[];e instanceof hp&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((m=>m instanceof fp)).length,p=l.filter((m=>m instanceof Ku)).length;if(h>1||h>0&&p>0)throw new fe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Ku extends xv{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Ku(e,t,i)}_apply(e){const t=this._parse(e);return wv(e._query,t),new xi(e.firestore,e.converter,nf(e._query,t))}_parse(e){const t=lp(e.firestore);return(function(l,h,p,m,v,w,k){let A;if(v.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Q0(k,w);const O=[];for(const $ of k)O.push(G0(m,l,$));A={arrayValue:{values:O}}}else A=G0(m,l,k)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Q0(k,w),A=HN(p,h,k,w==="in"||w==="not-in");return ft.create(v,w,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function QN(n,e,t){const i=e,o=Wu("where",n);return Ku._create(o,i,t)}class fp extends hp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fp(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Hn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const p=l.getFlattenedFilters();for(const m of p)wv(h,m),h=nf(h,m)})(e._query,t),new xi(e.firestore,e.converter,nf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pp extends xv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pp(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rl(l,h)})(e._query,this._field,this._direction);return new xi(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new Mo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function K0(n,e="asc"){const t=e,i=Wu("orderBy",n);return pp._create(i,t)}function G0(n,e,t){if(typeof(t=It(t))=="string"){if(t==="")throw new fe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!v_(e)&&t.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(et.fromString(t));if(!Te.isDocumentKey(i))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return p0(n,new Te(i))}if(t instanceof Qt)return p0(n,t._key);throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zu(t)}.`)}function Q0(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wv(n,e){const t=(function(o,l){for(const h of o)for(const p of h.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YN{convertValue(e,t="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return _i(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>ct(h.doubleValue)));return new op(l)}convertGeoPoint(e){return new ip(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Of(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(el(e));default:return null}}convertTimestamp(e){const t=Ns(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=et.fromString(e);We(z_(i));const o=new tl(i.get(1),i.get(3)),l=new Te(i.popFirst(5));return o.isEqual(t)||Fr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function XN(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class $a{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bv extends vv{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Wu("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class su extends bv{data(e={}){return super.data(e)}}class JN{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new $a(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new su(this._firestore,this._userDataWriter,i.key,i,new $a(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const m=new su(o._firestore,o._userDataWriter,p.doc.key,p.doc,new $a(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const m=new su(o._firestore,o._userDataWriter,p.doc.key,p.doc,new $a(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,w=-1;return p.type!==0&&(v=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:ZN(p.type),doc:m,oldIndex:v,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ZN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}function ek(n){n=hr(n,Qt);const e=hr(n.firestore,Vo);return PN(sp(e),n._key).then((t=>rk(e,n,t)))}class Ev extends YN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ao(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}}function tk(n){n=hr(n,xi);const e=hr(n.firestore,Vo),t=sp(e),i=new Ev(e);return GN(n._query),RN(t,n._query).then((o=>new JN(e,i,n,o)))}function Tv(n,e,t){n=hr(n,Qt);const i=hr(n.firestore,Vo),o=XN(n.converter,e,t);return mp(i,[BN(lp(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,$n.none())])}function nk(n,e,t,...i){n=hr(n,Qt);const o=hr(n.firestore,Vo),l=lp(o);let h;return h=typeof(e=It(e))=="string"||e instanceof $u?qN(l,"updateDoc",n._key,e,t,i):$N(l,"updateDoc",n._key,e),mp(o,[h.toMutation(n._key,$n.exists(!0))])}function Nv(n){return mp(hr(n.firestore,Vo),[new $f(n._key,$n.none())])}function mp(n,e){return(function(i,o){const l=new Mr;return i.asyncQueue.enqueueAndForget((async()=>wN(await jN(i),o,l))),l.promise})(sp(n),e)}function rk(n,e,t){const i=t.docs.get(e._key),o=new Ev(n);return new bv(n,o,e._key,i,new $a(t.hasPendingWrites,t.fromCache),e.converter)}function wu(){return new cp("serverTimestamp")}(function(e,t=!0){(function(o){Do=o})(Po),Eo(new fi("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),p=new Vo(new Z2(i.getProvider("auth-internal")),new rE(i.getProvider("app-check-internal")),(function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new fe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tl(v.options.projectId,w)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),bs(c0,"4.7.3",e),bs(c0,"4.7.3","esm2017")})();const sk={apiKey:"AIzaSyB1UL7Ji4gqaJ2EX_r1UoZzmZYl-succf4",authDomain:"lastz-power.firebaseapp.com",projectId:"lastz-power",storageBucket:"lastz-power.firebasestorage.app",messagingSenderId:"158054571749",appId:"1:158054571749:web:e223407cf48ec8cb93be0c"},kv=_y(sk),ui=K2(kv),di=ON(kv),ik=async(n,e)=>{try{let t=e.gameId.trim();if(t=t.replace(/\//g,"_"),!t)throw new Error("Game ID ");const i=wo(di,"users",t),o={gameId:e.gameId.trim(),alliance:e.alliance.trim(),team1Power:Number(e.team1Power),team2Power:Number(e.team2Power),team3Power:Number(e.team3Power),updatedAt:wu(),submittedAt:wu()};return await Tv(i,o,{merge:!0}),{success:!0}}catch(t){return console.error(":",t),{success:!1,error:t.message}}},ok=async n=>{try{const e=wo(di,"admins",n),t=await ek(e);return t.exists()&&t.data().isActive?{success:!0,isAdmin:!0,adminData:t.data()}:{success:!0,isAdmin:!1}}catch(e){return console.error(":",e),{success:!1,error:e.message}}},Iv=()=>{const[n,e]=X.useState(null),[t,i]=X.useState(!1),[o,l]=X.useState(null),[h,p]=X.useState(!0);return X.useEffect(()=>{const m=Lb(ui,async v=>{if(e(v),v){const w=await ok(v.uid);i(w.isAdmin||!1),l(w.isAdmin?w.adminData:null)}else i(!1),l(null);p(!1)});return()=>m()},[]),{user:n,isAdmin:t,adminData:o,loading:h}},ak={zh:{title:"",subtitle:" V2",guest_mode:"",admin_tag:"",logout:"",personal_entry:"",all_management:"",footer_text:" 2026 ",admin_login_gate:"",status_operational:"",duel_calculator:"",monday_calculator:"",mon_title:"",mon_desc:"",tuesday_calculator:"",tue_title:"",tue_desc:"",wed_title:"",wed_desc:"",thu_title:"",thu_desc:"",fri_title:"",fri_desc:"",sat_title:"",sat_desc:"",total_est_score:"",reset_data:"",score_base_settings:"",base_points_desc:"",save_and_apply:"",power_increase:"",power_start:"",power_end:"",power_diff:"",est_score:"",speedup_title:"",bounty_title:"",refine_title:"",pulse_title:"",sur_orange:"",sur_purple:"",sur_blue:"",diamond_gift:"1",speedup_res_title:"",tech_power_increase:"",badge_title:"",trade_title:"",unit_trade:"",unit_recruit:"",unit_alloy:"",unit_manual:"",hero_frag_orange:"",hero_frag_purple:"",hero_frag_blue:"",exclusive_frag:"",adv_recruit:"",energy_core:"",gear_upgrade:"",alloy_title:"",skill_manual:"",radar_title:"",soldier_title:"",soldiers:"",soldier_tier:"",unit_soldier:"",unit_radar:"",unit_drawing:"",unit_wrench:"",unit_case:"",unit_plugin:"",unit_target:"",unit_gathering:"",drawing_title:"",wrench_title:"",module_case:"",tactical_plugin:"",snow_leopard:"",polar_zombie:"",gathering_title:"",gathering_coin:"Z",gathering_res:"",unit_min:"",unit_hour:"",unit_day:"",unit_count:"",how_to_check:"",guide_step_1:"1. i",guide_step_2:"2. ",close_guide:"",welcome_title:"",welcome_desc:" 100%  {icon} ",dont_show_again:"",unit_item:"",unit_person:"",tips_title:"",tips_desc:"",dev_in_progress:"",calc_dev_desc:"...",monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:"",speedup_1min:"1",power_10:"10",build_power_10:"10",bounty_orange:"",refine_stone:"1",pulse_module:"",survivor_orange:"",survivor_purple:"",survivor_blue:"",diamond_1:"1",speedup_res_1min:"1",tech_power_10:"10",badge_1:"1",trade_orange:"",hero_frag_orange:"1",hero_frag_purple:"1",hero_frag_blue:"1",exclusive_frag:"1",adv_recruit:"1",energy_core:"1",gear_upgrade:"1",alloy_10:"10",skill_manual:"1",radar_1:"",soldier_t1:"11",soldier_t2:"12",soldier_t3:"13",soldier_t4:"14",soldier_t5:"15",soldier_t6:"16",soldier_t7:"17",soldier_t8:"18",soldier_t9:"19",soldier_t10:"110",drawing_1:"1",wrench_1:"1",plugin_green:"1",plugin_blue:"1",plugin_purple:"1",plugin_orange:"1",gather_coin:"Z",gather_res:"(,,)",gather_coin_1k:"1000 Z",gather_res_1k:"1000 ",speedup_accumulate:"",batch_input_mode:"",category_subtotal:"",module_L1:"1 1",module_L2:"1 2",module_L3:"1 3",module_L4:"1 4",module_L5:"1 5",module_L6:"1 6",module_L7:"1 7",sl_10:"  1-10",sl_20:"  11-20",sl_30:"  21-30",sl_40:"  31-40",sl_50:"  41-50",sl_60:"  51-60",pz_10:"  1-10",pz_20:"  11-20",pz_30:"  21-30",pz_40:"  31-40",pz_50:"  41-50",pz_60:"  51-60",level_label:"",color_green:"",color_blue:"",color_purple:"",color_orange:"",preparing_env:"...",back_to_guest:" ",login_success:"",register_success:"",op_failed:"",email_in_use:" Email ",invalid_email:"Email ",weak_password:"6",auth_failed:"Email ",google_failed:"Google ",system_name:"",login:"",register:"",password_label:"",processing:"...",or_text:"",google_login:" Google ",form_title:"",form_desc:"",save_success:" ",save_failed:"",error_occurred:"",game_id:" ID",alliance:"",game_id_placeholder:": KingArthas",alliance_placeholder:": LastHope",team1:" (M)",team2:" (M)",team3:" (M)",save_data:"",saving:"...",combat_details:"",current_total:"",data_preview:"",sync_notice:"",last_updated:"",id_required:" ID ",alliance_required:"",admin_title:"",admin_desc:"",refresh:"",export_csv:"",preparing_export:" CSV...",stats_overview:"",display_count:"",avg_s1:"S1 ",avg_s2:"S2 ",avg_s3:"S3 ",search_placeholder:"  ID  ...",filter_options:"",member_id:" ID",alliance_label:"",s1_power:"S1 (M)",s2_power:"S2 (M)",s3_power:"S3 (M)",total_eval:"",update_record:"",actions:"",delete_confirm:"  {id} ",delete_success:"",edit:"",edit_record:"",update_success:"",cancel:"",confirm_save:"",no_data:"",no_results:"",intel_v2:" V2.0 ",data_count:"",loading_data:"...",alliance_total_power:"",alliance_avg_power:"",view_members:"",view_alliances:"",view_planner:"SVS",total_member:"",tech_bonus_settings:"",global_bonus:" (%)",recruit_bonus:" (%)",energy_core_bonus:" (%)",advanced_manual_override:"",unlock_manual_override:"",lock_to_auto:"",tech_bonus_guide_title:"",tech_bonus_guide_desc:"i",speedup_1min:" (1)",build_power_10:" (10)",tech_power_10:" (10)",radar_1:" (1)",building_bonus:" (%)",tech_power_bonus:" (%)",training_bonus:" (%)",soldier_t1:"T1 ",soldier_t2:"T2 ",soldier_t3:"T3 ",soldier_t4:"T4 ",soldier_t5:"T5 ",soldier_t6:"T6 ",soldier_t7:"T7 ",soldier_t8:"T8 ",soldier_t9:"T9 ",soldier_t10:"T10 "},en:{title:"Combat Tracker",subtitle:"Alliance Intel V2",guest_mode:"Guest Mode",admin_tag:"ADMIN",logout:"Logout",personal_entry:"Entry Form",all_management:"Dashboard",footer_text:" 2026 Combat Tracker",admin_login_gate:"Admin Server Entrance",status_operational:"Operational",duel_calculator:"Duel Calculator",monday_calculator:"Monday: Mod Vehicle Boost",mon_title:"Mod Vehicle Boost",mon_desc:"Upgrade car parts and eliminate wild targets to earn points",tuesday_calculator:"Tuesday: Base Building",tue_title:"Base Building",tue_desc:"Earn points through building power, speedups, and recruiting survivors",wed_title:"Age of Science",wed_desc:"Advance research and intercity trade to earn points",thu_title:"Hero Initiate",thu_desc:"Earn points through recruitment, fragments, and upgrades",fri_title:"Holistic Growth",fri_desc:"Complete various tasks to maximize your score",sat_title:"Enemy Buster",sat_desc:"Demonstrate dominance through tasks and speedups",total_est_score:"Total Estimated Score",reset_data:"Reset Data",score_base_settings:"Score Base Settings",base_points_desc:"Adjust the points earned for each item to match your in-game values",save_and_apply:"Save & Apply",power_increase:"Structure Power Increase",power_start:"Initial Power",power_end:"Target Power",power_diff:"Diff",est_score:"Est. Score",speedup_title:"Construction Speedup",bounty_title:"Orange Bounty",refine_title:"Forging Stone",pulse_title:"Pulse Modules",sur_orange:"Orange Refugee",sur_purple:"Purple Refugee",sur_blue:"Blue Refugee",diamond_gift:"1-Diamond Pack",speedup_res_title:"Research Speedup",tech_power_increase:"Tech Power Increase",badge_title:"Badges Consumed",trade_title:"Orange Trade",unit_trade:"times",unit_recruit:"times",unit_alloy:"pcs",unit_manual:"books",hero_frag_orange:"Orange Hero Fragment",hero_frag_purple:"Purple Hero Fragment",hero_frag_blue:"Blue Hero Fragment",exclusive_frag:"Excl. Equipment Fragment",adv_recruit:"Prime Recruitment",energy_core:"Power Core",gear_upgrade:"Orange Equipment as Promotion material",alloy_title:"Enhancement Alloy",skill_manual:"Orange Skill Book",radar_title:"Radar Events",soldier_title:"Train Soldiers",soldiers:"Soldiers",soldier_tier:"Tier",unit_soldier:"soldiers",unit_radar:"times",unit_drawing:"pcs",unit_wrench:"pcs",unit_case:"cases",unit_plugin:"pcs",unit_target:"targets",unit_gathering:"unit",drawing_title:"Modification Blueprint",wrench_title:"Golden Wrench",module_case:"Mod Vehicle Exterior",tactical_plugin:"Tactical Plugin Chest",snow_leopard:"Snow Leopard",polar_zombie:"Frostbane",gathering_title:"Resource Gathering",gathering_coin:"Z-Coin",gathering_res:"Other Resources(wood, electricity, food)",unit_min:"min",unit_hour:"hr",unit_day:"day",unit_count:"times",how_to_check:"How to check power?",guide_step_1:'1. Click the "i" icon at the top left of the building (e.g., HQ)',guide_step_2:'2. View the "Power" for each level in the list',close_guide:"Got it",welcome_title:"Welcome to Duel Calculator!",welcome_desc:'For 100% accurate scoring, tap the settings button {icon} to enter your "Tech Bonuses". The system now calculates points automaticallyno more manual math!',dont_show_again:"Don't show this again",unit_item:"pcs",unit_person:"px",tips_title:"Pro Tips",tips_desc:"Just set your tech bonus percentage for automatic estimation. For specific needs, you can still manually adjust final scores in settings.",dev_in_progress:"Dev in progress",calc_dev_desc:"Building calculation logic for other days...",monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",speedup_1min:"1-min Speedup (Any type)",power_10:"10 Structure Power Increase",build_power_10:"10 Structure Power Increase",bounty_orange:"Orange Bounty Task",refine_stone:"Forging Stone",pulse_module:"Pulse Module",survivor_orange:"Orange Refugee",survivor_purple:"Purple Refugee",survivor_blue:"Blue Refugee",diamond_1:"1-Diamond Pack",speedup_res_1min:"1-min Research Speedup",tech_power_10:"10 Tech Power Increase",badge_1:"1 Badge Consumed",trade_orange:"1 Orange Trade Task",hero_frag_orange:"1 Orange Hero Fragment",hero_frag_purple:"1 Purple Hero Fragment",hero_frag_blue:"1 Blue Hero Fragment",exclusive_frag:"1 Excl. Equipment Fragment",adv_recruit:"1 Prime Recruitment",energy_core:"1 Power Core",gear_upgrade:"1 Orange Equipment as Promotion material",alloy_10:"10 Enhancement Alloy",soldier_t10:"1 Tier 10 Soldier",drawing_1:"1 Modification Blueprint",wrench_1:"1 Golden Wrench",plugin_green:"1 Green Tactical Plugin Chest",plugin_blue:"1 Blue Tactical Plugin Chest",plugin_purple:"1 Purple Tactical Plugin Chest",plugin_orange:"1 Orange Tactical Plugin Chest",gather_coin:"Z-Coin",gather_res:"Other Resources(wood, electricity, food)",gather_coin_1k:"Gather 1000 Z-Coins",gather_res_1k:"Gather 1000 Other Res",speedup_accumulate:"Accumulate Speedup",batch_input_mode:"Batch Input Mode",category_subtotal:"Subtotal",module_L1:"1 Lv.1 Mod Vehicle Exterior",module_L2:"1 Lv.2 Mod Vehicle Exterior",module_L3:"1 Lv.3 Mod Vehicle Exterior",module_L4:"1 Lv.4 Mod Vehicle Exterior",module_L5:"1 Lv.5 Mod Vehicle Exterior",module_L6:"1 Lv.6 Mod Vehicle Exterior",module_L7:"1 Lv.7 Mod Vehicle Exterior",sl_10:"Kill Snow Leopard Lv.1-10",sl_20:"Kill Snow Leopard Lv.11-20",sl_30:"Kill Snow Leopard Lv.21-30",sl_40:"Kill Snow Leopard Lv.31-40",sl_50:"Kill Snow Leopard Lv.41-50",sl_60:"Kill Snow Leopard Lv.51-60",pz_10:"Kill Frostbane Lv.1-10",pz_20:"Kill Frostbane Lv.11-20",pz_30:"Kill Frostbane Lv.21-30",pz_40:"Kill Frostbane Lv.31-40",pz_50:"Kill Frostbane Lv.41-50",pz_60:"Kill Frostbane Lv.51-60",level_label:"Lv",color_green:"Green",color_blue:"Blue",color_purple:"Purple",color_orange:"Orange",radar_1:"1 Radar Event Completed",soldier_t1:"1 Tier 1 Soldier",soldier_t2:"1 Tier 2 Soldier",soldier_t3:"1 Tier 3 Soldier",soldier_t4:"1 Tier 4 Soldier",soldier_t5:"1 Tier 5 Soldier",soldier_t6:"1 Tier 6 Soldier",soldier_t7:"1 Tier 7 Soldier",soldier_t8:"1 Tier 8 Soldier",soldier_t9:"1 Tier 9 Soldier",soldier_t10:"1 Tier 10 Soldier",loading_system:"Initializing Combat System...",preparing_env:"Preparing Combat Environment...",back_to_guest:" Back to Guest Mode",login_success:"Login successful!",register_success:"Registration successful!",op_failed:"Operation failed, please try again later",email_in_use:"This Email is already in use",invalid_email:"Invalid Email format",weak_password:"Password too weak (at least 6 characters)",auth_failed:"Invalid Email or password",google_failed:"Google login failed, please try again",system_name:"Game Power Tracker",login:"Login",register:"Register",password_label:"Password",processing:"Processing...",or_text:"Or",google_login:"Sign in with Google",form_title:"Power Data Entry",form_desc:"Enter your latest hero power info to keep allies updated",save_success:" Data saved successfully!",save_failed:"Save failed: ",error_occurred:"Error occurred: ",game_id:"Game ID",alliance:"Alliance",game_id_placeholder:"e.g., KingArthas",alliance_placeholder:"e.g., LastHope",team1:"Team 1 Power (M)",team2:"Team 2 Power (M)",team3:"Team 3 Power (M)",save_data:"Save Data",saving:"Saving...",combat_details:"Team Power Details",current_total:"Total Combat Power",data_preview:"Data Preview",sync_notice:"Data will be synced to Alliance database",last_updated:"Last updated",id_required:"Game ID is required",alliance_required:"Alliance name is required",admin_title:"Alliance Intel Center",admin_desc:"Monitor and analyze member power distribution",refresh:"Refresh",export_csv:"Export CSV",preparing_export:"Preparing CSV download...",stats_overview:"Statistics",display_count:"Members",avg_s1:"S1 Avg",avg_s2:"S2 Avg",avg_s3:"S3 Avg",search_placeholder:"Search Game ID or Alliance...",filter_options:"Filters",member_id:"Member ID",alliance_label:"Alliance",s1_power:"S1 Power(M)",s2_power:"S2 Power(M)",s3_power:"S3 Power(M)",total_eval:"Total Eval",update_record:"Update Record",actions:"Action",delete_confirm:" Are you sure you want to delete {id}? This cannot be undone.",delete_success:"Deleted successfully",edit:"Edit",edit_record:"Edit Member Record",update_success:"Update successful",cancel:"Cancel",confirm_save:"Save Changes",no_data:"No data submitted yet",no_results:"No matching records found",intel_v2:"Alliance Intel V2.0 Stable",data_count:"Total Records",loading_data:"Loading Big Data...",alliance_total_power:"Total Alliance Power",alliance_avg_power:"Avg Member Power",view_members:"Members",view_alliances:"Alliances",view_planner:"SVS Strategy",total_member:"Total Members",tech_bonus_settings:"Tech Bonus Settings",global_bonus:"All Points (%)",recruit_bonus:"Hero Recruiting-driven Points (%)",energy_core_bonus:"Power Core Usage Points (%)",advanced_manual_override:"Advanced: Manual Override Final Score",unlock_manual_override:"Unlock to manually override",lock_to_auto:"Lock to use auto-calculation",tech_bonus_guide_title:"How to find tech bonuses?",tech_bonus_guide_desc:"Click the 'i' icon at the top right of the Alliance Duel interface to view detailed bonuses.",speedup_1min:"Any Speedup (1 min)",build_power_10:"Building Power Increase (per 10)",tech_power_10:"Tech Power Increase (per 10)",radar_1:"Radar Task (1 task)",building_bonus:"Building Construction Points (%)",tech_power_bonus:"Tech Research Points (%)",training_bonus:"Soldier Training Points (%)",soldier_t1:"T1 Soldier",soldier_t2:"T2 Soldier",soldier_t3:"T3 Soldier",soldier_t4:"T4 Soldier",soldier_t5:"T5 Soldier",soldier_t6:"T6 Soldier",soldier_t7:"T7 Soldier",soldier_t8:"T8 Soldier",soldier_t9:"T9 Soldier",soldier_t10:"T10 Soldier"}},Sv=X.createContext(),lk=({children:n})=>{const[e,t]=X.useState(localStorage.getItem("preferred_lang")||"zh"),i=l=>ak[e][l]||l,o=()=>{const l=e==="zh"?"en":"zh";t(l),localStorage.setItem("preferred_lang",l)};return c.jsx(Sv.Provider,{value:{lang:e,t:i,toggleLang:o},children:n})},Wn=()=>X.useContext(Sv);function Cv(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=Cv(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function vs(){for(var n,e,t=0,i="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=Cv(n))&&(i&&(i+=" "),i+=e);return i}const al=n=>typeof n=="number"&&!isNaN(n),hi=n=>typeof n=="string",pn=n=>typeof n=="function",iu=n=>hi(n)||pn(n)?n:null,pf=n=>X.isValidElement(n)||hi(n)||pn(n)||al(n);function ck(n,e,t){t===void 0&&(t=300);const{scrollHeight:i,style:o}=n;requestAnimationFrame(()=>{o.minHeight="initial",o.height=i+"px",o.transition=`all ${t}ms`,requestAnimationFrame(()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(e,t)})})}function Gu(n){let{enter:e,exit:t,appendPosition:i=!1,collapse:o=!0,collapseDuration:l=300}=n;return function(h){let{children:p,position:m,preventExitTransition:v,done:w,nodeRef:k,isIn:A,playToast:O}=h;const $=i?`${e}--${m}`:e,q=i?`${t}--${m}`:t,V=X.useRef(0);return X.useLayoutEffect(()=>{const J=k.current,F=$.split(" "),D=G=>{G.target===k.current&&(O(),J.removeEventListener("animationend",D),J.removeEventListener("animationcancel",D),V.current===0&&G.type!=="animationcancel"&&J.classList.remove(...F))};J.classList.add(...F),J.addEventListener("animationend",D),J.addEventListener("animationcancel",D)},[]),X.useEffect(()=>{const J=k.current,F=()=>{J.removeEventListener("animationend",F),o?ck(J,w,l):w()};A||(v?F():(V.current=1,J.className+=` ${q}`,J.addEventListener("animationend",F)))},[A]),Ke.createElement(Ke.Fragment,null,p)}}function Y0(n,e){return n!=null?{content:n.content,containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,status:e}:{}}const Gt=new Map;let ll=[];const mf=new Set,uk=n=>mf.forEach(e=>e(n)),Av=()=>Gt.size>0;function jv(n,e){var t;if(e)return!((t=Gt.get(e))==null||!t.isToastActive(n));let i=!1;return Gt.forEach(o=>{o.isToastActive(n)&&(i=!0)}),i}function Pv(n,e){pf(n)&&(Av()||ll.push({content:n,options:e}),Gt.forEach(t=>{t.buildToast(n,e)}))}function X0(n,e){Gt.forEach(t=>{e!=null&&e!=null&&e.containerId?e?.containerId===t.id&&t.toggle(n,e?.id):t.toggle(n,e?.id)})}function dk(n){const{subscribe:e,getSnapshot:t,setProps:i}=X.useRef((function(l){const h=l.containerId||1;return{subscribe(p){const m=(function(w,k,A){let O=1,$=0,q=[],V=[],J=[],F=k;const D=new Map,G=new Set,ie=()=>{J=Array.from(D.values()),G.forEach(b=>b())},ce=b=>{V=b==null?[]:V.filter(N=>N!==b),ie()},j=b=>{const{toastId:N,onOpen:I,updateId:P,children:C}=b.props,T=P==null;b.staleId&&D.delete(b.staleId),D.set(N,b),V=[...V,b.props.toastId].filter(K=>K!==b.staleId),ie(),A(Y0(b,T?"added":"updated")),T&&pn(I)&&I(X.isValidElement(C)&&C.props)};return{id:w,props:F,observe:b=>(G.add(b),()=>G.delete(b)),toggle:(b,N)=>{D.forEach(I=>{N!=null&&N!==I.props.toastId||pn(I.toggle)&&I.toggle(b)})},removeToast:ce,toasts:D,clearQueue:()=>{$-=q.length,q=[]},buildToast:(b,N)=>{if((Y=>{let{containerId:de,toastId:Ee,updateId:we}=Y;const Pe=de?de!==w:w!==1,Me=D.has(Ee)&&we==null;return Pe||Me})(N))return;const{toastId:I,updateId:P,data:C,staleId:T,delay:K}=N,oe=()=>{ce(I)},ge=P==null;ge&&$++;const ue={...F,style:F.toastStyle,key:O++,...Object.fromEntries(Object.entries(N).filter(Y=>{let[de,Ee]=Y;return Ee!=null})),toastId:I,updateId:P,data:C,closeToast:oe,isIn:!1,className:iu(N.className||F.toastClassName),bodyClassName:iu(N.bodyClassName||F.bodyClassName),progressClassName:iu(N.progressClassName||F.progressClassName),autoClose:!N.isLoading&&(ee=N.autoClose,pe=F.autoClose,ee===!1||al(ee)&&ee>0?ee:pe),deleteToast(){const Y=D.get(I),{onClose:de,children:Ee}=Y.props;pn(de)&&de(X.isValidElement(Ee)&&Ee.props),A(Y0(Y,"removed")),D.delete(I),$--,$<0&&($=0),q.length>0?j(q.shift()):ie()}};var ee,pe;ue.closeButton=F.closeButton,N.closeButton===!1||pf(N.closeButton)?ue.closeButton=N.closeButton:N.closeButton===!0&&(ue.closeButton=!pf(F.closeButton)||F.closeButton);let U=b;X.isValidElement(b)&&!hi(b.type)?U=X.cloneElement(b,{closeToast:oe,toastProps:ue,data:C}):pn(b)&&(U=b({closeToast:oe,toastProps:ue,data:C}));const R={content:U,props:ue,staleId:T};F.limit&&F.limit>0&&$>F.limit&&ge?q.push(R):al(K)?setTimeout(()=>{j(R)},K):j(R)},setProps(b){F=b},setToggle:(b,N)=>{D.get(b).toggle=N},isToastActive:b=>V.some(N=>N===b),getSnapshot:()=>J}})(h,l,uk);Gt.set(h,m);const v=m.observe(p);return ll.forEach(w=>Pv(w.content,w.options)),ll=[],()=>{v(),Gt.delete(h)}},setProps(p){var m;(m=Gt.get(h))==null||m.setProps(p)},getSnapshot(){var p;return(p=Gt.get(h))==null?void 0:p.getSnapshot()}}})(n)).current;i(n);const o=X.useSyncExternalStore(e,t,t);return{getToastToRender:function(l){if(!o)return[];const h=new Map;return n.newestOnTop&&o.reverse(),o.forEach(p=>{const{position:m}=p.props;h.has(m)||h.set(m,[]),h.get(m).push(p)}),Array.from(h,p=>l(p[0],p[1]))},isToastActive:jv,count:o?.length}}function hk(n){const[e,t]=X.useState(!1),[i,o]=X.useState(!1),l=X.useRef(null),h=X.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:p,pauseOnHover:m,closeToast:v,onClick:w,closeOnClick:k}=n;var A,O;function $(){t(!0)}function q(){t(!1)}function V(D){const G=l.current;h.canDrag&&G&&(h.didMove=!0,e&&q(),h.delta=n.draggableDirection==="x"?D.clientX-h.start:D.clientY-h.start,h.start!==D.clientX&&(h.canCloseOnClick=!1),G.style.transform=`translate3d(${n.draggableDirection==="x"?`${h.delta}px, var(--y)`:`0, calc(${h.delta}px + var(--y))`},0)`,G.style.opacity=""+(1-Math.abs(h.delta/h.removalDistance)))}function J(){document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",J);const D=l.current;if(h.canDrag&&h.didMove&&D){if(h.canDrag=!1,Math.abs(h.delta)>h.removalDistance)return o(!0),n.closeToast(),void n.collapseAll();D.style.transition="transform 0.2s, opacity 0.2s",D.style.removeProperty("transform"),D.style.removeProperty("opacity")}}(O=Gt.get((A={id:n.toastId,containerId:n.containerId,fn:t}).containerId||1))==null||O.setToggle(A.id,A.fn),X.useEffect(()=>{if(n.pauseOnFocusLoss)return document.hasFocus()||q(),window.addEventListener("focus",$),window.addEventListener("blur",q),()=>{window.removeEventListener("focus",$),window.removeEventListener("blur",q)}},[n.pauseOnFocusLoss]);const F={onPointerDown:function(D){if(n.draggable===!0||n.draggable===D.pointerType){h.didMove=!1,document.addEventListener("pointermove",V),document.addEventListener("pointerup",J);const G=l.current;h.canCloseOnClick=!0,h.canDrag=!0,G.style.transition="none",n.draggableDirection==="x"?(h.start=D.clientX,h.removalDistance=G.offsetWidth*(n.draggablePercent/100)):(h.start=D.clientY,h.removalDistance=G.offsetHeight*(n.draggablePercent===80?1.5*n.draggablePercent:n.draggablePercent)/100)}},onPointerUp:function(D){const{top:G,bottom:ie,left:ce,right:j}=l.current.getBoundingClientRect();D.nativeEvent.type!=="touchend"&&n.pauseOnHover&&D.clientX>=ce&&D.clientX<=j&&D.clientY>=G&&D.clientY<=ie?q():$()}};return p&&m&&(F.onMouseEnter=q,n.stacked||(F.onMouseLeave=$)),k&&(F.onClick=D=>{w&&w(D),h.canCloseOnClick&&v()}),{playToast:$,pauseToast:q,isRunning:e,preventExitTransition:i,toastRef:l,eventHandlers:F}}function fk(n){let{delay:e,isRunning:t,closeToast:i,type:o="default",hide:l,className:h,style:p,controlledProgress:m,progress:v,rtl:w,isIn:k,theme:A}=n;const O=l||m&&v===0,$={...p,animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};m&&($.transform=`scaleX(${v})`);const q=vs("Toastify__progress-bar",m?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${A}`,`Toastify__progress-bar--${o}`,{"Toastify__progress-bar--rtl":w}),V=pn(h)?h({rtl:w,type:o,defaultClassName:q}):vs(q,h),J={[m&&v>=1?"onTransitionEnd":"onAnimationEnd"]:m&&v<1?null:()=>{k&&i()}};return Ke.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":O},Ke.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${A} Toastify__progress-bar--${o}`}),Ke.createElement("div",{role:"progressbar","aria-hidden":O?"true":"false","aria-label":"notification timer",className:V,style:$,...J}))}let pk=1;const Rv=()=>""+pk++;function mk(n){return n&&(hi(n.toastId)||al(n.toastId))?n.toastId:Rv()}function Qa(n,e){return Pv(n,e),e.toastId}function bu(n,e){return{...e,type:e&&e.type||n,toastId:mk(e)}}function qc(n){return(e,t)=>Qa(e,bu(n,t))}function Re(n,e){return Qa(n,bu("default",e))}Re.loading=(n,e)=>Qa(n,bu("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Re.promise=function(n,e,t){let i,{pending:o,error:l,success:h}=e;o&&(i=hi(o)?Re.loading(o,t):Re.loading(o.render,{...t,...o}));const p={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},m=(w,k,A)=>{if(k==null)return void Re.dismiss(i);const O={type:w,...p,...t,data:A},$=hi(k)?{render:k}:k;return i?Re.update(i,{...O,...$}):Re($.render,{...O,...$}),A},v=pn(n)?n():n;return v.then(w=>m("success",h,w)).catch(w=>m("error",l,w)),v},Re.success=qc("success"),Re.info=qc("info"),Re.error=qc("error"),Re.warning=qc("warning"),Re.warn=Re.warning,Re.dark=(n,e)=>Qa(n,bu("default",{theme:"dark",...e})),Re.dismiss=function(n){(function(e){var t;if(Av()){if(e==null||hi(t=e)||al(t))Gt.forEach(i=>{i.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const i=Gt.get(e.containerId);i?i.removeToast(e.id):Gt.forEach(o=>{o.removeToast(e.id)})}}else ll=ll.filter(i=>e!=null&&i.options.toastId!==e)})(n)},Re.clearWaitingQueue=function(n){n===void 0&&(n={}),Gt.forEach(e=>{!e.props.limit||n.containerId&&e.id!==n.containerId||e.clearQueue()})},Re.isActive=jv,Re.update=function(n,e){e===void 0&&(e={});const t=((i,o)=>{var l;let{containerId:h}=o;return(l=Gt.get(h||1))==null?void 0:l.toasts.get(i)})(n,e);if(t){const{props:i,content:o}=t,l={delay:100,...i,...e,toastId:e.toastId||n,updateId:Rv()};l.toastId!==n&&(l.staleId=n);const h=l.render||o;delete l.render,Qa(h,l)}},Re.done=n=>{Re.update(n,{progress:1})},Re.onChange=function(n){return mf.add(n),()=>{mf.delete(n)}},Re.play=n=>X0(!0,n),Re.pause=n=>X0(!1,n);const gk=typeof window<"u"?X.useLayoutEffect:X.useEffect,Hc=n=>{let{theme:e,type:t,isLoading:i,...o}=n;return Ke.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...o})},Uh={info:function(n){return Ke.createElement(Hc,{...n},Ke.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(n){return Ke.createElement(Hc,{...n},Ke.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(n){return Ke.createElement(Hc,{...n},Ke.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(n){return Ke.createElement(Hc,{...n},Ke.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Ke.createElement("div",{className:"Toastify__spinner"})}},yk=n=>{const{isRunning:e,preventExitTransition:t,toastRef:i,eventHandlers:o,playToast:l}=hk(n),{closeButton:h,children:p,autoClose:m,onClick:v,type:w,hideProgressBar:k,closeToast:A,transition:O,position:$,className:q,style:V,bodyClassName:J,bodyStyle:F,progressClassName:D,progressStyle:G,updateId:ie,role:ce,progress:j,rtl:b,toastId:N,deleteToast:I,isIn:P,isLoading:C,closeOnClick:T,theme:K}=n,oe=vs("Toastify__toast",`Toastify__toast-theme--${K}`,`Toastify__toast--${w}`,{"Toastify__toast--rtl":b},{"Toastify__toast--close-on-click":T}),ge=pn(q)?q({rtl:b,position:$,type:w,defaultClassName:oe}):vs(oe,q),ue=(function(R){let{theme:Y,type:de,isLoading:Ee,icon:we}=R,Pe=null;const Me={theme:Y,type:de};return we===!1||(pn(we)?Pe=we({...Me,isLoading:Ee}):X.isValidElement(we)?Pe=X.cloneElement(we,Me):Ee?Pe=Uh.spinner():(ze=>ze in Uh)(de)&&(Pe=Uh[de](Me))),Pe})(n),ee=!!j||!m,pe={closeToast:A,type:w,theme:K};let U=null;return h===!1||(U=pn(h)?h(pe):X.isValidElement(h)?X.cloneElement(h,pe):(function(R){let{closeToast:Y,theme:de,ariaLabel:Ee="close"}=R;return Ke.createElement("button",{className:`Toastify__close-button Toastify__close-button--${de}`,type:"button",onClick:we=>{we.stopPropagation(),Y(we)},"aria-label":Ee},Ke.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ke.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))})(pe)),Ke.createElement(O,{isIn:P,done:I,position:$,preventExitTransition:t,nodeRef:i,playToast:l},Ke.createElement("div",{id:N,onClick:v,"data-in":P,className:ge,...o,style:V,ref:i},Ke.createElement("div",{...P&&{role:ce},className:pn(J)?J({type:w}):vs("Toastify__toast-body",J),style:F},ue!=null&&Ke.createElement("div",{className:vs("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!C})},ue),Ke.createElement("div",null,p)),U,Ke.createElement(fk,{...ie&&!ee?{key:`pb-${ie}`}:{},rtl:b,theme:K,delay:m,isRunning:e,isIn:P,closeToast:A,hide:k,type:w,style:G,className:D,controlledProgress:ee,progress:j||0})))},Qu=function(n,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}},_k=Gu(Qu("bounce",!0));Gu(Qu("slide",!0));Gu(Qu("zoom"));Gu(Qu("flip"));const vk={position:"top-right",transition:_k,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function xk(n){let e={...vk,...n};const t=n.stacked,[i,o]=X.useState(!0),l=X.useRef(null),{getToastToRender:h,isToastActive:p,count:m}=dk(e),{className:v,style:w,rtl:k,containerId:A}=e;function O(q){const V=vs("Toastify__toast-container",`Toastify__toast-container--${q}`,{"Toastify__toast-container--rtl":k});return pn(v)?v({position:q,rtl:k,defaultClassName:V}):vs(V,iu(v))}function $(){t&&(o(!0),Re.play())}return gk(()=>{if(t){var q;const V=l.current.querySelectorAll('[data-in="true"]'),J=12,F=(q=e.position)==null?void 0:q.includes("top");let D=0,G=0;Array.from(V).reverse().forEach((ie,ce)=>{const j=ie;j.classList.add("Toastify__toast--stacked"),ce>0&&(j.dataset.collapsed=`${i}`),j.dataset.pos||(j.dataset.pos=F?"top":"bot");const b=D*(i?.2:1)+(i?0:J*ce);j.style.setProperty("--y",`${F?b:-1*b}px`),j.style.setProperty("--g",`${J}`),j.style.setProperty("--s",""+(1-(i?G:0))),D+=j.offsetHeight,G+=.025})}},[i,m,t]),Ke.createElement("div",{ref:l,className:"Toastify",id:A,onMouseEnter:()=>{t&&(o(!1),Re.pause())},onMouseLeave:$},h((q,V)=>{const J=V.length?{...w}:{...w,pointerEvents:"none"};return Ke.createElement("div",{className:O(q),style:J,key:`container-${q}`},V.map(F=>{let{content:D,props:G}=F;return Ke.createElement(yk,{...G,stacked:t,collapseAll:$,isIn:p(G.toastId,G.containerId),style:G.style,key:`toast-${G.key}`},D)}))}))}function wk(){const{t:n}=Wn(),[e,t]=X.useState(!0),[i,o]=X.useState(""),[l,h]=X.useState(""),[p,m]=X.useState(!1),v=async k=>{k.preventDefault(),m(!0);try{e?(await Rb(ui,i,l),Re.success(n("login_success"))):(await Pb(ui,i,l),Re.success(n("register_success")))}catch(A){console.error("Authentication error:",A);let O=n("op_failed");A.code==="auth/email-already-in-use"?O=n("email_in_use"):A.code==="auth/invalid-email"?O=n("invalid_email"):A.code==="auth/weak-password"?O=n("weak_password"):(A.code==="auth/user-not-found"||A.code==="auth/wrong-password"||A.code==="auth/invalid-credential")&&(O=n("auth_failed")),Re.error(O)}finally{m(!1)}},w=async()=>{m(!0);const k=new jr;try{await n2(ui,k),Re.success(n("login_success"))}catch(A){console.error("Google sign in error:",A),Re.error(n("google_failed"))}finally{m(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-transparent px-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md border border-gray-100 animate-in fade-in zoom-in duration-500",children:[c.jsx("h1",{className:"text-3xl font-black text-center text-gray-900 mb-8 tracking-tighter uppercase",children:n("system_name")}),c.jsx("div",{className:"mb-8",children:c.jsxs("div",{className:"flex p-1 bg-gray-50 rounded-xl border border-gray-100",children:[c.jsx("button",{className:`flex-1 py-2.5 text-center text-sm font-black rounded-lg transition-all duration-300 ${e?"bg-white text-indigo-600 shadow-sm":"text-gray-400 hover:text-gray-600"}`,onClick:()=>t(!0),children:n("login")}),c.jsx("button",{className:`flex-1 py-2.5 text-center text-sm font-black rounded-lg transition-all duration-300 ${e?"text-gray-400 hover:text-gray-600":"bg-white text-indigo-600 shadow-sm"}`,onClick:()=>t(!1),children:n("register")})]})}),c.jsxs("form",{onSubmit:v,className:"space-y-5",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Email"}),c.jsx("input",{type:"email",value:i,onChange:k=>o(k.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold",placeholder:"commander@alliance.com"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:n("password_label")}),c.jsx("input",{type:"password",value:l,onChange:k=>h(k.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 border border-gray-200 rounded-xl outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold",placeholder:""})]}),c.jsx("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-indigo-600 to-blue-600 text-white py-4 rounded-xl font-black uppercase tracking-widest text-xs hover:from-indigo-700 hover:to-blue-700 transition-all shadow-lg shadow-indigo-100 disabled:from-gray-300 disabled:to-gray-400 disabled:shadow-none transform active:scale-[0.98]",children:n(p?"processing":e?"login":"register")})]}),c.jsxs("div",{className:"relative my-8",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-100"})}),c.jsx("div",{className:"relative flex justify-center text-[10px] font-black uppercase tracking-[0.3em]",children:c.jsx("span",{className:"px-3 bg-white text-gray-300",children:n("or_text")})})]}),c.jsxs("button",{onClick:w,disabled:p,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-200 text-gray-600 py-3.5 rounded-xl text-xs font-black uppercase tracking-widest hover:bg-gray-50 hover:border-gray-300 transition-all shadow-sm disabled:opacity-50",children:[c.jsxs("svg",{className:"w-5 h-5 translate-y-[-1px]",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"}),c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"})]}),n("google_login")]})]})})}var bk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ek=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),xe=(n,e)=>{const t=X.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:h,className:p="",children:m,...v},w)=>X.createElement("svg",{ref:w,...bk,width:o,height:o,stroke:i,strokeWidth:h?Number(l)*24/Number(o):l,className:["lucide",`lucide-${Ek(n)}`,p].join(" "),...v},[...e.map(([k,A])=>X.createElement(k,A)),...Array.isArray(m)?m:[m]]));return t.displayName=`${n}`,t};const J0=xe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Fo=xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const Tk=xe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);const Nk=xe("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Dv=xe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const kk=xe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const Eu=xe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const Uo=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Tu=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const gp=xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Ik=xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Yu=xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Sk=xe("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);const Ck=xe("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const Mv=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const Ak=xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Lv=xe("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const bl=xe("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);const jk=xe("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]);const Pk=xe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Ov=xe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const ur=xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Rk=xe("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);const Dk=xe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Z0=xe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const Mk=xe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const Lk=xe("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);const Ok=xe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Nu=xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const Vk=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Fk=xe("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);const Uk=xe("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);const zk=xe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);const ey=xe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const Vv=xe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);const Bk=xe("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);const Fv=xe("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);const Wc=xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const zo=xe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const As=xe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const $k=xe("Scroll",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}]]);const ty=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const kt=xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const qk=xe("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const jo=xe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const Hk=xe("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);const bo=xe("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);const Uv=xe("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);const zv=xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const gf=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Wk=xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const yf=xe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);const Bv=xe("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);const $v=xe("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);const Kk=xe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const qv=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const qn=xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Gk=xe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const Xu=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Qk=xe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);const Yk=xe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);const Xk=xe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Kc=n=>n==null||n===""?"0":Number(n).toLocaleString("en-US",{maximumFractionDigits:2}),Jk=n=>n?new Date(n).toLocaleString("zh-TW"):"",Zk=({user:n})=>{const{t:e}=Wn(),[t,i]=X.useState({gameId:"",alliance:"",team1Power:"",team2Power:"",team3Power:""}),[o,l]=X.useState({}),[h,p]=X.useState(!1),[m,v]=X.useState(null);X.useEffect(()=>{const $=localStorage.getItem("game_power_last_entry"),q=localStorage.getItem("game_power_last_time");$&&i(JSON.parse($)),q&&v(q)},[]);const w=$=>{const{name:q,value:V}=$.target;i(J=>({...J,[q]:V})),o[q]&&l(J=>({...J,[q]:""}))},k=$=>{const q={};return $.gameId?.trim()||(q.gameId=e("id_required")),$.alliance?.trim()||(q.alliance=e("alliance_required")),{valid:Object.keys(q).length===0,errors:q}},A=async $=>{$.preventDefault();const q=k(t);if(!q.valid){l(q.errors);return}p(!0);try{const V={gameId:t.gameId,alliance:t.alliance,team1Power:Number(t.team1Power||0),team2Power:Number(t.team2Power||0),team3Power:Number(t.team3Power||0)},J=await ik(n.uid,V);if(J.success){const F=new Date().toISOString();Re.success(e("save_success")),v(F),localStorage.setItem("game_power_last_entry",JSON.stringify(t)),localStorage.setItem("game_power_last_time",F)}else Re.error(e("save_failed")+J.error),l({submit:e("save_failed")+J.error})}catch(V){Re.error(e("error_occurred")+V.message),l({submit:e("error_occurred")+V.message})}finally{p(!1)}},O=Number(t.team1Power||0)+Number(t.team2Power||0)+Number(t.team3Power||0);return c.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsxs("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight flex items-center justify-center gap-2",children:[c.jsx(yf,{className:"text-yellow-500"})," ",e("form_title")]}),c.jsx("p",{className:"text-gray-500",children:e("form_desc")})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[c.jsx("form",{onSubmit:A,className:"lg:col-span-3 space-y-6",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-gray-200/50 border border-gray-100 p-8 space-y-6",children:[o.submit&&c.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 text-red-700 text-sm rounded-r-lg animate-pulse",children:o.submit}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[c.jsx(qv,{size:16,className:"text-blue-500"})," ",e("game_id")," *"]}),c.jsx("input",{type:"text",name:"gameId",value:t.gameId,onChange:w,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 outline-none focus:ring-2 ${o.gameId?"border-red-300 ring-red-100 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-100 hover:border-gray-300"}`,placeholder:e("game_id_placeholder")}),o.gameId&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:o.gameId})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[c.jsx(qn,{size:16,className:"text-green-500"})," ",e("alliance")," *"]}),c.jsx("input",{type:"text",name:"alliance",value:t.alliance,onChange:w,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 outline-none focus:ring-2 ${o.alliance?"border-red-300 ring-red-100 bg-red-50":"border-gray-200 focus:border-blue-500 focus:ring-blue-100 hover:border-gray-300"}`,placeholder:e("alliance_placeholder")}),o.alliance&&c.jsx("p",{className:"text-xs text-red-500 mt-1",children:o.alliance})]})]}),c.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"}),c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-bold mb-2 text-sm uppercase tracking-wide",children:[c.jsx(Uv,{className:"text-red-500",size:18})," ",e("combat_details")]}),c.jsx("div",{className:"grid grid-cols-1 gap-4",children:[{name:"team1Power",label:e("team1"),color:"blue"},{name:"team2Power",label:e("team2"),color:"indigo"},{name:"team3Power",label:e("team3"),color:"purple"}].map($=>c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"flex justify-between items-center mb-1",children:c.jsxs("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-1",children:[c.jsx(jo,{size:12})," ",$.label]})}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"number",step:"any",name:$.name,value:t[$.name],onChange:w,className:"w-full px-4 py-3 pl-10 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all hover:border-gray-300 font-mono text-lg",placeholder:"0"}),c.jsxs("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-bold italic group-hover:text-indigo-400 transition-colors",children:["S",$.name.charAt(4)]})]})]},$.name))})]}),c.jsx("button",{type:"submit",disabled:h,className:"w-full py-4 mt-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 transition-all duration-300 disabled:from-gray-300 disabled:to-gray-400 disabled:shadow-none transform active:scale-[0.98] flex items-center justify-center gap-2",children:h?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e("saving")]}):c.jsxs(c.Fragment,{children:[c.jsx(As,{size:18})," ",e("save_data")]})})]})}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-blue-700 rounded-2xl p-6 text-white shadow-xl shadow-indigo-100 flex flex-col justify-between h-[180px] relative overflow-hidden",children:[c.jsxs("div",{className:"relative z-10",children:[c.jsx("p",{className:"text-indigo-100 text-[10px] font-black uppercase tracking-widest opacity-80",children:e("current_total")}),c.jsx("h3",{className:"text-4xl font-black mt-2 tracking-tighter tabular-nums leading-none",children:Kc(O)})]}),c.jsxs("div",{className:"relative z-10 flex justify-between items-end",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-[10px] text-indigo-100/60 uppercase font-bold tracking-wider",children:e("game_id")}),c.jsx("p",{className:"font-bold truncate max-w-[120px] text-sm tabular-nums",children:t.gameId||"---"})]}),c.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-lg p-2.5 flex items-center gap-2 border border-white/20",children:[c.jsx(Z0,{size:14}),c.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest leading-none",children:"STATUS OK"})]})]}),c.jsx("div",{className:"absolute -right-4 -top-4 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),c.jsx("div",{className:"absolute -left-4 -bottom-4 w-24 h-24 bg-indigo-400/20 rounded-full blur-xl"})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl shadow-gray-200/50 border border-gray-100 p-6 space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 pb-3",children:[c.jsxs("h4",{className:"font-black text-gray-800 flex items-center gap-2 text-[10px] uppercase tracking-widest",children:[c.jsx(Z0,{size:14,className:"text-gray-400"})," ",e("data_preview")]}),m&&c.jsxs("span",{className:"text-[9px] text-gray-400 font-bold uppercase tracking-tighter",children:[e("last_updated")," ",Jk(m).split(" ")[1]]})]}),c.jsx("div",{className:"space-y-4",children:[{label:e("game_id"),value:t.gameId},{label:e("alliance"),value:t.alliance},{label:e("team1"),value:Kc(t.team1Power),emphasize:!0},{label:e("team2"),value:Kc(t.team2Power),emphasize:!0},{label:e("team3"),value:Kc(t.team3Power),emphasize:!0}].map(($,q)=>c.jsxs("div",{className:"flex justify-between items-center text-xs group",children:[c.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-wider group-hover:text-gray-600 transition-colors",children:$.label}),c.jsx("span",{className:`font-black ${$.emphasize?"text-gray-700 font-mono text-sm":"text-gray-800"}`,children:$.value||(q<2?"---":"0")})]},q))}),c.jsx("div",{className:"pt-4 mt-2 border-t border-dashed border-gray-200",children:c.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-bold text-[10px] p-3 bg-blue-50/50 rounded-xl border border-blue-100/50 uppercase tracking-tight",children:[c.jsx(jo,{size:14}),c.jsx("span",{children:e("sync_notice")})]})})]})]})]})]})},eI=async(n=[])=>{try{const e=LN(di,"users");let t;!n||n.length===0||n.includes("*")?t=W0(e,K0("updatedAt","desc")):t=W0(e,QN("alliance","in",n),K0("updatedAt","desc"));const i=await tk(t),o=[];return i.forEach(l=>{o.push({id:l.id,...l.data()})}),o}catch(e){throw console.error(":",e),new Error(e.message||"")}},tI=async n=>{try{return await Nv(wo(di,"users",n)),{success:!0}}catch(e){throw console.error(":",e),new Error("")}},nI=async(n,e)=>{try{const{id:t,...i}=e;let o=e.gameId.trim().replace(/\//g,"_");if(o!==n){const l=wo(di,"users",o),h=wo(di,"users",n);await Tv(l,{...i,updatedAt:wu()}),await Nv(h)}else{const l=wo(di,"users",n);await nk(l,{...i,updatedAt:wu()})}return{success:!0}}catch(t){throw console.error(":",t),new Error(t.message||"")}},rI=n=>{if(!n||n.length===0)return{totalUsers:0,averageTeam1Power:0,averageTeam2Power:0,averageTeam3Power:0,averageTotalPower:0,maxTotalPower:0,minTotalPower:0};const e=n.map(p=>{const m=Number(p.team1Power)||0,v=Number(p.team2Power)||0,w=Number(p.team3Power)||0;return{team1:m,team2:v,team3:w,total:m+v+w}}),t=e.reduce((p,m)=>p+m.team1,0),i=e.reduce((p,m)=>p+m.team2,0),o=e.reduce((p,m)=>p+m.team3,0),l=e.reduce((p,m)=>p+m.total,0),h=e.map(p=>p.total);return{totalUsers:n.length,averageTeam1Power:Math.round(t/n.length),averageTeam2Power:Math.round(i/n.length),averageTeam3Power:Math.round(o/n.length),averageTotalPower:Math.round(l/n.length),maxTotalPower:Math.max(...h),minTotalPower:Math.min(...h)}},sI=n=>{if(!n||n.length===0)return[];const e={};return n.forEach(t=>{const i=t.alliance||"";e[i]||(e[i]={name:i,memberCount:0,totalPower:0,avgPower:0,team1Power:0,team2Power:0,team3Power:0,lastUpdated:null});const o=Number(t.team1Power)||0,l=Number(t.team2Power)||0,h=Number(t.team3Power)||0,p=o+l+h,m=t.submittedAt?.toDate?.()||new Date(t.submittedAt);e[i].memberCount++,e[i].totalPower+=p,e[i].team1Power+=o,e[i].team2Power+=l,e[i].team3Power+=h,(!e[i].lastUpdated||m>e[i].lastUpdated)&&(e[i].lastUpdated=m)}),Object.values(e).map(t=>({...t,avgPower:Math.round(t.totalPower/t.memberCount),avgTeam1Power:Math.round(t.team1Power/t.memberCount),avgTeam2Power:Math.round(t.team2Power/t.memberCount),avgTeam3Power:Math.round(t.team3Power/t.memberCount)})).sort((t,i)=>i.totalPower-t.totalPower)},iI=n=>n==null||n===""?"0":Number(n).toLocaleString("en-US",{maximumFractionDigits:2}),ny=n=>{if(!n)return"";const e=n.toDate?n.toDate():new Date(n),t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),h=String(e.getMinutes()).padStart(2,"0");return`${t}-${i}-${o} ${l}:${h}`},sr=n=>iI(n),ku=25,_f=17,ry=35,oI=55,aI=[{q:0,r:0},{q:1,r:-1},{q:1,r:0},{q:0,r:1},{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],lI=[{q:0,r:0},{q:0,r:-1},{q:0,r:1}],cI=()=>{const n=[];for(let e=-3;e<=3;e++)for(let t=-3;t<=3;t++){const i=-e-t;Math.abs(e)<=3&&Math.abs(t)<=3&&Math.abs(i)<=3&&n.push({q:e,r:t})}return n},uI=cI(),dI=()=>{const[n,e]=X.useState({}),[t,i]=X.useState("brush"),[o,l]=X.useState("#3b82f6"),[h,p]=X.useState(.8),[m,v]=X.useState({x:300,y:300}),[w,k]=X.useState(!0),[A,O]=X.useState({w:800,h:600}),$=X.useRef(null),q=X.useRef(!1),V=X.useRef({x:0,y:0}),J=()=>{const b={};[{id:"1",name:"1",center:{q:-16,r:16},label:"1"},{id:"2",name:"2",center:{q:0,r:-16},label:"2"},{id:"3",name:"3",center:{q:16,r:0},label:"3"}].forEach(I=>{const P=`battery_${I.id}`;uI.forEach(C=>{const T=I.center.q+C.q,K=I.center.r+C.r;b[`${T},${K}`]={type:"battery",color:"rgba(153, 27, 27, 0.7)",parent:P,isCenter:C.q===0&&C.r===0,label:C.q===0&&C.r===0?I.label:null}})}),e(b)};X.useEffect(()=>{Object.keys(n).length===0&&J()},[]);const F=()=>{window.confirm("")&&J()};X.useEffect(()=>{const b=$.current;if(!b)return;const N=I=>{I.preventDefault();const P=I.deltaY>0?-.05:.05;p(C=>Math.min(3,Math.max(.2,C+P)))};return b.addEventListener("wheel",N,{passive:!1}),()=>b.removeEventListener("wheel",N)},[]);const D=(b,N)=>{const I=ku*(Math.sqrt(3)*b+Math.sqrt(3)/2*N),P=ku*(3/2)*N;return{x:I,y:P}};X.useEffect(()=>{const b=()=>{$.current&&O({w:$.current.clientWidth,h:$.current.clientHeight})};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const G=b=>{(b.button===1||b.button===0&&b.altKey)&&(q.current=!0,V.current={x:b.clientX,y:b.clientY},b.preventDefault())},ie=b=>{if(q.current){const N=b.clientX-V.current.x,I=b.clientY-V.current.y;v(P=>({x:P.x+N,y:P.y+I})),V.current={x:b.clientX,y:b.clientY}}},ce=(b,N)=>{e(I=>{const P=`${b},${N}`;let C={...I};if(t==="brush")C[P]={type:"color",color:o};else if(t==="eraser"){const T=C[P];if(T?.parent){const K=T.parent;Object.keys(C).forEach(oe=>{C[oe].parent===K&&delete C[oe]})}else delete C[P]}else if(t==="hq"||t==="cannon"){const T=t==="hq"?aI:lI;if(T.some(ge=>{const ue=b+ge.q,ee=N+ge.r,pe=`${ue},${ee}`,U=C[pe];return!!(U&&U.type!=="color"||Math.max(Math.abs(ue),Math.abs(ee),Math.abs(-ue-ee))<=_f)}))return I;const oe=P;T.forEach(ge=>{const ue=b+ge.q,ee=N+ge.r;C[`${ue},${ee}`]={type:t,color:o,parent:oe,isCenter:ge.q===0&&ge.r===0}})}return C})},j=X.useMemo(()=>{const b=[],N=oI;for(let I=-N;I<=N;I++)for(let P=-N;P<=N;P++){const C=-I-P;Math.abs(C)<=N&&b.push(c.jsx(hI,{q:I,r:P,cell:n[`${I},${P}`],showCoords:w,applyAction:ce,hexToPixel:D},`${I},${P}`))}return b},[n,w]);return c.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] bg-slate-900 rounded-2xl overflow-hidden border border-slate-700 shadow-2xl relative",children:[c.jsxs("div",{className:"p-4 bg-slate-900/80 backdrop-blur-md border-b border-slate-800 flex items-center justify-between z-10",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex bg-slate-800 rounded-lg p-1",children:[c.jsx(Gc,{active:t==="brush",onClick:()=>i("brush"),icon:c.jsx(Uk,{size:18}),label:""}),c.jsx(Gc,{active:t==="hq",onClick:()=>i("hq"),icon:c.jsx(Ov,{size:18}),label:""}),c.jsx(Gc,{active:t==="cannon",onClick:()=>i("cannon"),icon:c.jsx(bo,{size:18}),label:"/"}),c.jsx(Gc,{active:t==="eraser",onClick:()=>i("eraser"),icon:c.jsx(gf,{size:18}),label:""})]}),c.jsx("div",{className:"h-6 w-[1px] bg-slate-700"}),c.jsx("div",{className:"flex gap-2",children:["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6"].map(b=>c.jsx("button",{className:`w-8 h-8 rounded-full border-2 transition-transform ${o===b?"border-white scale-110":"border-transparent opacity-60 hover:opacity-100"}`,style:{backgroundColor:b},onClick:()=>l(b)},b))})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("button",{onClick:()=>k(!w),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${w?"bg-blue-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[c.jsx(zk,{size:14})," "]}),c.jsx("div",{className:"h-6 w-[1px] bg-slate-700"}),c.jsxs("div",{className:"flex items-center gap-3 bg-slate-800/50 px-3 py-1.5 rounded-xl border border-slate-700/50",children:[c.jsx("button",{onClick:()=>p(b=>Math.max(.1,b-.1)),className:"text-slate-400 hover:text-white transition-colors",children:c.jsx(Xk,{size:16})}),c.jsx("input",{type:"range",min:"0.1",max:"2.5",step:"0.05",value:h,onChange:b=>p(parseFloat(b.target.value)),className:"w-24 h-1.5 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),c.jsx("button",{onClick:()=>p(b=>Math.min(2.5,b+.1)),className:"text-slate-400 hover:text-white transition-colors",children:c.jsx(Yk,{size:16})}),c.jsxs("span",{className:"text-[10px] font-mono text-blue-400 w-10 text-center",children:[Math.round(h*100),"%"]})]}),c.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 text-slate-400 rounded-lg text-xs font-medium hover:bg-red-900/40 hover:text-red-400 transition-all border border-slate-700",children:[c.jsx(gf,{size:14})," "]}),c.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-blue-900/20 hover:from-blue-500 transition-all",children:[c.jsx(Mv,{size:16})," "]})]})]}),c.jsxs("div",{ref:$,className:"flex-1 overflow-hidden cursor-move relative",onMouseDown:G,onMouseMove:ie,onMouseUp:()=>q.current=!1,onMouseLeave:()=>q.current=!1,children:[c.jsx("svg",{width:"100%",height:"100%",className:"absolute inset-0",children:c.jsx("g",{transform:`translate(${m.x}, ${m.y}) scale(${h})`,children:j})}),c.jsxs("div",{className:"absolute bottom-6 right-6 bg-slate-900/60 backdrop-blur border border-slate-700 p-4 rounded-xl pointer-events-none",children:[c.jsx("h4",{className:"text-blue-400 font-bold text-xs mb-2 uppercase tracking-widest",children:""}),c.jsxs("ul",{className:"text-[10px] text-slate-400 space-y-1",children:[c.jsxs("li",{children:[" ",c.jsx("b",{children:""}),": "]}),c.jsxs("li",{children:[" ",c.jsx("b",{children:""}),": "]}),c.jsxs("li",{children:[" ",c.jsx("b",{children:"Alt + "}),": "]}),c.jsxs("li",{children:[" ",c.jsx("b",{children:""}),": "]})]})]})]})]})},hI=X.memo(({q:n,r:e,cell:t,showCoords:i,applyAction:o,hexToPixel:l})=>{const{x:h,y:p}=l(n,e),m=Math.max(Math.abs(n),Math.abs(e),Math.abs(-n-e)),v=m<=_f,w=m===_f,k=m<=ry,A=m===ry,O=X.useMemo(()=>{const V=[];for(let J=0;J<6;J++){const F=Math.PI/180*(60*J+30);V.push(`${h+ku*Math.cos(F)},${p+ku*Math.sin(F)}`)}return V.join(" ")},[h,p]);let $="rgba(248, 250, 252, 0.3)",q="rgba(186, 230, 253, 0.2)";return v?($="rgba(30, 58, 138, 0.6)",q="rgba(59, 130, 246, 0.3)"):k&&($="rgba(120, 113, 108, 0.4)",q="rgba(168, 162, 158, 0.2)"),c.jsxs("g",{className:"group/hex transition-all duration-200",children:[c.jsx("polygon",{points:O,onClick:()=>o(n,e),fill:t?.color||$,fillOpacity:t?.type==="color"?.4:1,stroke:w?"#06b6d4":A?"#d97706":t?"rgba(255,255,255,0.8)":q,strokeWidth:w||A?3:t?.isCenter?2.5:.8,className:"cursor-pointer transition-all duration-300 hover:fill-slate-400/30"}),i&&n%4===0&&e%4===0&&!t?.label&&c.jsxs("text",{x:h,y:p,fontSize:"5",textAnchor:"middle",fill:v?"rgba(147, 197, 253, 0.3)":k?"rgba(68, 64, 60, 0.4)":"rgba(14, 165, 233, 0.3)",className:"pointer-events-none select-none font-mono",children:[n,",",e]}),t?.label&&c.jsx("text",{x:h,y:p+5,fontSize:"14",fontWeight:"bold",textAnchor:"middle",fill:"white",className:"pointer-events-none select-none drop-shadow-md",children:t.label}),t?.isCenter&&c.jsx("g",{transform:`translate(${h-8}, ${p-8})`,className:"pointer-events-none",children:t.type==="hq"?c.jsx(Ov,{size:16,className:"text-white drop-shadow-[0_0_10px_rgba(255,255,255,0.8)]"}):c.jsx(bo,{size:16,className:"text-white animate-pulse"})})]})}),Gc=({active:n,onClick:e,icon:t,label:i})=>c.jsx("button",{onClick:e,title:i,className:`p-2.5 rounded-md flex flex-col items-center gap-1 transition-all ${n?"bg-blue-600 text-white shadow-inner":"text-slate-400 hover:bg-slate-700 hover:text-slate-200"}`,children:t}),sy=({forcePlanner:n=!1})=>{const{t:e}=Wn(),{adminData:t}=Iv(),[i,o]=X.useState([]),[l,h]=X.useState(!0),[p,m]=X.useState(""),[v,w]=X.useState(null),[k,A]=X.useState([]),[O,$]=X.useState(n?"planner":"members"),[q,V]=X.useState(""),[J,F]=X.useState({key:"submittedAt",direction:"desc"}),[D,G]=X.useState(null),[ie,ce]=X.useState(!1),[j,b]=X.useState({gameId:"",alliance:"",team1Power:"",team2Power:"",team3Power:""}),[N,I]=X.useState(!1);X.useEffect(()=>{t&&P()},[t]);const P=async()=>{h(!0),m("");try{const U=await eI(t?.allowedAlliances||[]);Array.isArray(U)&&(o(U),w(rI(U)),A(sI(U)))}catch(U){m(e("error_occurred")+U.message),Re.error(e("error_occurred"))}finally{h(!1)}},C=U=>{let R="desc";J.key===U&&J.direction==="desc"&&(R="asc"),F({key:U,direction:R})},T=async(U,R)=>{if(window.confirm(e("delete_confirm").replace("{id}",R)))try{const Y=await tI(U);Y.success?(Re.success(e("delete_success")),P()):Re.error(e("error_occurred")+Y.error)}catch(Y){Re.error(e("error_occurred")+Y.message)}},K=U=>{G(U),b({gameId:U.gameId||"",alliance:U.alliance||"",team1Power:U.team1Power||0,team2Power:U.team2Power||0,team3Power:U.team3Power||0}),ce(!0)},oe=U=>{const{name:R,value:Y}=U.target;b(de=>({...de,[R]:Y}))},ge=async U=>{if(U.preventDefault(),!!D){I(!0);try{const R={...D,gameId:j.gameId,alliance:j.alliance,team1Power:Number(j.team1Power||0),team2Power:Number(j.team2Power||0),team3Power:Number(j.team3Power||0)};(await nI(D.id,R)).success&&(Re.success(e("update_success")),ce(!1),G(null),P())}catch(R){Re.error(e("error_occurred")+R.message)}finally{I(!1)}}},ue=i.filter(U=>U.gameId?.toLowerCase().includes(q.toLowerCase())||U.alliance?.toLowerCase().includes(q.toLowerCase())).sort((U,R)=>{let Y,de;return J.key==="totalPower"?(Y=(U.team1Power||0)+(U.team2Power||0)+(U.team3Power||0),de=(R.team1Power||0)+(R.team2Power||0)+(R.team3Power||0)):(Y=U[J.key],de=R[J.key]),Y<de?J.direction==="asc"?-1:1:Y>de?J.direction==="asc"?1:-1:0});ue.length,ue.length>0&&Math.round(ue.reduce((U,R)=>U+(R.team1Power||0),0)/ue.length),ue.length>0&&Math.round(ue.reduce((U,R)=>U+(R.team2Power||0),0)/ue.length),ue.length>0&&Math.round(ue.reduce((U,R)=>U+(R.team3Power||0),0)/ue.length);const ee=()=>{const U=[e("member_id"),e("alliance_label"),e("team1"),e("team2"),e("team3"),e("total_eval"),e("update_record")],R=ue.map(we=>[we.gameId,we.alliance,we.team1Power,we.team2Power,we.team3Power,(we.team1Power||0)+(we.team2Power||0)+(we.team3Power||0),ny(we.submittedAt)]),Y=[U.join(","),...R.map(we=>we.join(","))].join(`
`),de=new Blob(["\uFEFF"+Y],{type:"text/csv;charset=utf-8;"}),Ee=document.createElement("a");Ee.href=URL.createObjectURL(de),Ee.download=`_${new Date().toISOString().split("T")[0]}.csv`,Ee.click(),Re.info(e("preparing_export"))},pe=U=>J.key!==U?c.jsx(Wc,{size:12,className:"opacity-20 translate-y-[2px]"}):J.direction==="asc"?c.jsx(Ik,{size:14,className:"text-blue-500"}):c.jsx(Tu,{size:14,className:"text-blue-500"});return l?c.jsxs("div",{className:"flex flex-col items-center justify-center p-20 space-y-4 text-center animate-in fade-in transition-all duration-700",children:[c.jsx(Wc,{className:"w-10 h-10 text-blue-500 animate-spin"}),c.jsx("p",{className:"text-gray-400 font-black tracking-widest uppercase text-[10px]",children:e("loading_data")})]}):c.jsxs("div",{className:"space-y-8 animate-in fade-in duration-700 relative",children:[ie&&c.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[c.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>ce(!1)}),c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg relative z-10 overflow-hidden animate-in zoom-in duration-300 border border-gray-100",children:[c.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 p-6 text-white flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-md border border-white/20",children:c.jsx(ey,{size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-black text-lg tracking-tight",children:e("edit_record")}),c.jsx("p",{className:"text-xs text-indigo-100 font-bold opacity-80 uppercase tracking-widest",children:D?.gameId})]})]}),c.jsx("button",{onClick:()=>ce(!1),className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:c.jsx(Xu,{size:20})})]}),c.jsxs("form",{onSubmit:ge,className:"p-8 space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1 flex items-center gap-1.5",children:[c.jsx(qv,{size:12,className:"text-blue-500"})," ",e("game_id")]}),c.jsx("input",{type:"text",name:"gameId",value:j.gameId,onChange:oe,className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1 flex items-center gap-1.5",children:[c.jsx(jo,{size:12,className:"text-green-500"})," ",e("alliance_label")]}),c.jsx("input",{type:"text",name:"alliance",value:j.alliance,onChange:oe,className:"w-full px-4 py-2.5 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 transition-all text-sm font-bold"})]})]}),c.jsx("div",{className:"h-px bg-gray-100 italic flex items-center justify-center",children:c.jsx("span",{className:"bg-white px-3 text-[9px] font-black text-gray-300 uppercase tracking-[0.3em]",children:e("combat_details")})}),c.jsx("div",{className:"space-y-4",children:[{name:"team1Power",label:e("s1_power")},{name:"team2Power",label:e("s2_power")},{name:"team3Power",label:e("s3_power")}].map(U=>c.jsxs("div",{className:"flex items-center gap-4 group",children:[c.jsx("label",{className:"w-24 text-[10px] font-black text-gray-400 uppercase tracking-widest group-hover:text-indigo-500 transition-colors",children:U.label}),c.jsxs("div",{className:"flex-grow relative",children:[c.jsx("input",{type:"number",name:U.name,value:j[U.name],onChange:oe,className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 outline-none focus:border-indigo-500 transition-all text-sm font-mono font-bold"}),c.jsx(Uv,{size:14,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-300 group-focus-within:text-indigo-400 transition-colors"})]})]},U.name))}),c.jsxs("div",{className:"pt-6 flex gap-4",children:[c.jsx("button",{type:"button",onClick:()=>ce(!1),className:"flex-1 py-3 px-6 rounded-xl border border-gray-200 text-gray-400 text-xs font-black uppercase tracking-widest hover:bg-gray-50 transition-all",children:e("cancel")}),c.jsxs("button",{type:"submit",disabled:N,className:"flex-[2] py-3 px-6 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100 flex items-center justify-center gap-2 cursor-pointer disabled:opacity-50",children:[N?c.jsx(Wc,{size:14,className:"animate-spin"}):c.jsx(As,{size:14}),c.jsx("span",{children:e("confirm_save")})]})]})]})]})]}),!n&&c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("h2",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-2 uppercase",children:[c.jsx(J0,{className:"text-indigo-600"})," ",e("admin_title")]}),c.jsx("p",{className:"text-sm text-gray-500",children:e("admin_desc")})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"bg-white border border-gray-100 p-1 rounded-xl flex shadow-sm mr-2",children:[c.jsxs("button",{onClick:()=>$("members"),className:`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-tight flex items-center gap-1.5 transition-all ${O==="members"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:bg-gray-50"}`,children:[c.jsx(qn,{size:14})," ",e("view_members")]}),c.jsxs("button",{onClick:()=>$("alliances"),className:`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-tight flex items-center gap-1.5 transition-all ${O==="alliances"?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:bg-gray-50"}`,children:[c.jsx(Mk,{size:14})," ",e("view_alliances")]})]}),c.jsxs("button",{onClick:P,className:"p-2.5 bg-white border border-gray-200 text-gray-600 rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-all shadow-sm flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[c.jsx(Wc,{size:14})," ",c.jsx("span",{className:"hidden sm:inline",children:e("refresh")})]}),c.jsxs("button",{onClick:ee,className:"p-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all shadow-md shadow-indigo-100 flex items-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[c.jsx(Mv,{size:14})," ",e("export_csv")]})]})]}),v&&!n&&c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:e("total_member"),value:i.length,icon:c.jsx(qn,{}),color:"blue"},{label:e("alliance_total_power"),value:sr(i.reduce((U,R)=>U+(R.team1Power||0)+(R.team2Power||0)+(R.team3Power||0),0)),icon:c.jsx(Bk,{}),color:"green"},{label:e("alliance_avg_power"),value:sr(i.length>0?Math.round(i.reduce((U,R)=>U+(R.team1Power||0)+(R.team2Power||0)+(R.team3Power||0),0)/i.length):0),icon:c.jsx(Wk,{}),color:"indigo"},{label:e("data_count"),value:i.length,icon:c.jsx(J0,{}),color:"purple"}].map((U,R)=>c.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-gray-100 shadow-sm flex items-center gap-4 group hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-50 flex items-center justify-center group-hover:bg-indigo-50 transition-colors",children:c.jsx("div",{className:"text-indigo-600 group-hover:scale-110 transition-transform",children:U.icon})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:U.label}),c.jsx("p",{className:"text-xl font-black text-gray-800 tracking-tighter tabular-nums leading-none mt-1",children:U.value})]})]},R))}),c.jsxs("div",{className:n?"":"bg-white rounded-2xl border border-gray-100 shadow-xl shadow-gray-200/40 relative overflow-hidden",children:[O!=="planner"&&!n&&c.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50/30 flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"relative flex-grow",children:[c.jsx(ty,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:16}),c.jsx("input",{type:"text",placeholder:e("search_placeholder"),value:q,onChange:U=>V(U.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50/50 outline-none transition-all text-xs font-bold"})]}),c.jsxs("button",{className:"px-4 py-2.5 bg-white border border-gray-200 text-gray-400 rounded-xl hover:bg-gray-50 transition-all text-[10px] font-black uppercase tracking-widest flex items-center gap-2",children:[c.jsx(Ak,{size:14})," ",e("filter_options")]})]}),c.jsx("div",{className:n?"":"overflow-x-auto",children:O==="planner"?c.jsx("div",{className:n?"":"p-4 bg-slate-950",children:c.jsx(dI,{})}):O==="alliances"?c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50/50",children:[c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("alliance_label")}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("total_member")}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-indigo-600 bg-indigo-50/10 uppercase tracking-widest",children:e("avg_s1")}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-indigo-600 bg-indigo-50/10 uppercase tracking-widest",children:e("avg_s2")}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-indigo-600 bg-indigo-50/10 uppercase tracking-widest",children:e("avg_s3")}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("alliance_avg_power")}),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:e("last_updated")})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:k.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"7",className:"px-6 py-20 text-center text-gray-400 font-bold uppercase text-xs tracking-widest opacity-20",children:e("no_data")})}):k.filter(U=>U.name.toLowerCase().includes(q.toLowerCase())).map(U=>c.jsxs("tr",{className:"group hover:bg-indigo-50/20 transition-colors",children:[c.jsx("td",{className:"px-6 py-5",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-[10px] font-black text-indigo-500 border border-indigo-200",children:c.jsx(jo,{size:14})}),c.jsx("span",{className:"font-bold text-gray-800 tracking-tight",children:U.name})]})}),c.jsx("td",{className:"px-6 py-5",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(qn,{size:14,className:"text-gray-300"}),c.jsx("span",{className:"font-bold text-gray-600 tabular-nums",children:U.memberCount})]})}),c.jsx("td",{className:"px-6 py-5",children:c.jsx("span",{className:"font-black text-indigo-600 font-mono text-sm tabular-nums tracking-tighter",children:sr(U.avgTeam1Power)})}),c.jsx("td",{className:"px-6 py-5",children:c.jsx("span",{className:"font-black text-indigo-600 font-mono text-sm tabular-nums tracking-tighter",children:sr(U.avgTeam2Power)})}),c.jsx("td",{className:"px-6 py-5",children:c.jsx("span",{className:"font-black text-indigo-600 font-mono text-sm tabular-nums tracking-tighter",children:sr(U.avgTeam3Power)})}),c.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:sr(U.avgPower)}),c.jsx("td",{className:"px-6 py-5",children:c.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400 text-[10px] font-bold uppercase tabular-nums",children:[c.jsx(Eu,{size:12}),U.lastUpdated?U.lastUpdated.toLocaleString("zh-TW").split(" ")[0]:"---"]})})]},U.name))})]}):c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50/50",children:[[{key:"gameId",label:e("member_id")},{key:"alliance",label:e("alliance_label")},{key:"team1Power",label:e("s1_power")},{key:"team2Power",label:e("s2_power")},{key:"team3Power",label:e("s3_power")},{key:"totalPower",label:e("total_eval"),focus:!0},{key:"submittedAt",label:e("update_record")}].map(U=>c.jsx("th",{onClick:()=>C(U.key),className:`px-6 py-4 text-[10px] font-black uppercase tracking-widest cursor-pointer hover:bg-gray-100/50 transition-colors select-none ${U.focus?"text-indigo-600 bg-indigo-50/10":"text-gray-400"}`,children:c.jsxs("div",{className:"flex items-center justify-between gap-1",children:[U.label,pe(U.key)]})},U.key)),c.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:e("actions")})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:ue.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"8",className:"px-6 py-20 text-center",children:c.jsxs("div",{className:"flex flex-col items-center space-y-4 opacity-20",children:[c.jsx(ty,{size:48}),c.jsx("p",{className:"font-bold uppercase text-xs tracking-widest",children:e(q?"no_results":"no_data")})]})})}):ue.map(U=>{const R=(U.team1Power||0)+(U.team2Power||0)+(U.team3Power||0);return c.jsxs("tr",{className:"group hover:bg-indigo-50/20 transition-colors",children:[c.jsx("td",{className:"px-6 py-5",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-[10px] font-black text-gray-500 border border-gray-200",children:U.gameId?.substring(0,2).toUpperCase()}),c.jsx("span",{className:"font-bold text-gray-800 tracking-tight",children:U.gameId})]})}),c.jsx("td",{className:"px-6 py-5 text-xs font-bold text-gray-500 tracking-tighter",children:U.alliance}),c.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:sr(U.team1Power)}),c.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:sr(U.team2Power)}),c.jsx("td",{className:"px-6 py-5 font-mono text-sm text-gray-400 tabular-nums",children:sr(U.team3Power)}),c.jsx("td",{className:"px-6 py-5",children:c.jsx("span",{className:"font-black text-indigo-600 font-mono text-base tabular-nums tracking-tighter",children:sr(R)})}),c.jsx("td",{className:"px-6 py-5",children:c.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400 text-[10px] font-bold uppercase tabular-nums",children:[c.jsx(Eu,{size:12}),ny(U.submittedAt).split(" ")[0]]})}),c.jsx("td",{className:"px-6 py-5 text-center",children:c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx("button",{onClick:()=>K(U),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",title:e("edit"),children:c.jsx(ey,{size:16})}),c.jsx("button",{onClick:()=>T(U.id,U.gameId),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",title:e("delete"),children:c.jsx(gf,{size:16})})]})})]},U.id)})})]})}),c.jsxs("div",{className:"p-4 bg-gray-50/50 border-t border-gray-100 text-[9px] font-black text-gray-300 uppercase tracking-[0.2em] flex justify-between items-center",children:[c.jsx("span",{children:e("intel_v2")}),c.jsxs("span",{className:"bg-white px-2 py-0.5 rounded border border-gray-200 text-gray-400",children:[e(O==="alliances"?"alliance_label":"data_count"),": ",O==="alliances"?k.length:ue.length]})]})]})]})},iy=({icon:n,title:e,items:t,colorClass:i,t:o,subtotal:l})=>c.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100 hover:shadow-md transition-all md:col-span-2 lg:col-span-3",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:`p-3 rounded-2xl ${i} bg-opacity-10 shadow-sm`,children:c.jsx(n,{size:24,className:i.replace("bg-","text-")})}),c.jsx("h3",{className:"font-black text-gray-900 leading-tight",children:e})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:t.map(h=>c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center px-1",children:[c.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-tighter",children:h.label}),c.jsxs("span",{className:"text-[9px] font-bold text-gray-400 whitespace-nowrap",children:[h.pts," pts"]})]}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"text",name:h.key,value:h.value,onChange:h.onChange,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold focus:ring-2 focus:ring-blue-500/20 transition-all text-sm font-mono text-center"})})]},h.key))}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[o("est_score"),": ",c.jsx("span",{className:`${i.replace("bg-","text-")} font-black`,children:l})]})})]}),Qc=({icon:n,title:e,name:t,inputsKey:i,unit:o,inputUnit:l,pts:h,colorClass:p,value:m,onChange:v,score:w,t:k})=>c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`p-2 rounded-lg ${p} bg-opacity-10`,children:c.jsx(n,{size:18,className:p.replace("bg-","text-")})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:e})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[h," pts / ",o]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",name:i,value:m,onChange:v,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-base"}),c.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md",children:l||o})]}),c.jsx("div",{className:"mt-2 flex justify-end",children:c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[k("est_score"),": ",c.jsx("span",{className:"text-blue-600 font-black",children:w})]})})]}),fI=()=>{const{t:n}=Wn(),[e,t]=X.useState({drawing_1:102,wrench_1:25500,radar_1:20500,module_L1:2e3,module_L2:6100,module_L3:18500,module_L4:55500,module_L5:166600,module_L6:499800,module_L7:14e5,plugin_green:12300,plugin_blue:51400,plugin_purple:205600,plugin_orange:1e6,sl_10:2500,sl_20:3e3,sl_30:3500,sl_40:4e3,sl_50:5100,sl_60:6100,pz_10:5100,pz_20:6100,pz_30:7100,pz_40:8100,pz_50:10200,pz_60:12200,gather_coin_1k:15,gather_res_1k:5,diamond_1:30}),[i,o]=X.useState({drawing_count:"",wrench_count:"",radar_count:"",module_L1:"",module_L2:"",module_L3:"",module_L4:"",module_L5:"",module_L6:"",module_L7:"",plugin_green:"",plugin_blue:"",plugin_purple:"",plugin_orange:"",sl_count:"",sl_level:"10",pz_count:"",pz_level:"10",gather_coin:"",gather_res:"",diamond_count:""}),[l,h]=X.useState(!1),[p,m]=X.useState(!1),[v,w]=X.useState(!1);X.useEffect(()=>{const D=localStorage.getItem("duel_mon_base_values"),G=localStorage.getItem("duel_welcome_dismissed_mon");if(D)try{t(JSON.parse(D))}catch(ie){console.error("Failed to load base values",ie)}G||m(!0)},[]);const k=D=>{const{name:G,value:ie}=D.target;(ie===""||/^\d+$/.test(ie))&&o(ce=>({...ce,[G]:ie}))},A=(D,G)=>{(G===""||/^\d+(\.\d+)?$/.test(G))&&t(ie=>({...ie,[D]:Number(G)||0}))},O=()=>{localStorage.setItem("duel_mon_base_values",JSON.stringify(e)),h(!1)},$=()=>{v&&localStorage.setItem("duel_welcome_dismissed_mon","true"),m(!1)},q=()=>{o({drawing_count:"",wrench_count:"",radar_count:"",module_L1:"",module_L2:"",module_L3:"",module_L4:"",module_L5:"",module_L6:"",module_L7:"",plugin_green:"",plugin_blue:"",plugin_purple:"",plugin_orange:"",sl_count:"",sl_level:"10",pz_count:"",pz_level:"10",gather_coin:"",gather_res:"",diamond_count:""})},V=X.useMemo(()=>{let D=0;for(let ie=1;ie<=7;ie++)D+=(Number(i[`module_L${ie}`])||0)*(e[`module_L${ie}`]||0);let G=0;return["green","blue","purple","orange"].forEach(ie=>{G+=(Number(i[`plugin_${ie}`])||0)*(e[`plugin_${ie}`]||0)}),{drawing:(Number(i.drawing_count)||0)*e.drawing_1,wrench:(Number(i.wrench_count)||0)*e.wrench_1,radar:(Number(i.radar_count)||0)*e.radar_1,module:D,plugin:G,sl:(Number(i.sl_count)||0)*(e[`sl_${i.sl_level}`]||0),pz:(Number(i.pz_count)||0)*(e[`pz_${i.pz_level}`]||0),gather_coin:Math.floor((Number(i.gather_coin)||0)/1e3)*e.gather_coin_1k,gather_res:Math.floor((Number(i.gather_res)||0)/1e3)*e.gather_res_1k,diamond:(Number(i.diamond_count)||0)*e.diamond_1}},[i,e]),J=X.useMemo(()=>Object.values(V).reduce((D,G)=>D+G,0),[V]),F=D=>!D||isNaN(D)||D===0?"0":new Intl.NumberFormat("en-US").format(Math.floor(D));return c.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[p&&c.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:c.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-slate-100",children:c.jsxs("div",{className:"p-10 text-center space-y-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-20 h-20 bg-slate-800 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-slate-200 animate-bounce cursor-default relative z-10",children:c.jsx(Fo,{className:"text-white",size:40})}),c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 bg-slate-400 rounded-3xl blur-2xl opacity-20 animate-pulse"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight",children:n("welcome_title")}),c.jsxs("p",{className:"text-sm font-medium text-gray-500 leading-relaxed px-2 text-center",children:[n("welcome_desc").split("{icon}")[0],c.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-gray-100 rounded-md text-gray-900 border border-gray-200 align-middle mx-1 -mt-0.5",children:c.jsx(kt,{size:12})}),n("welcome_desc").split("{icon}")[1]]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("label",{className:"flex items-center justify-center gap-3 cursor-pointer group select-none",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"checkbox",className:"sr-only",checked:v,onChange:()=>w(!v)}),c.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center ${v?"bg-slate-800 border-slate-800":"border-gray-200 group-hover:border-slate-400"}`,children:v&&c.jsx(Uo,{size:12,className:"text-white stroke-[4]"})})]}),c.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:n("dont_show_again")})]}),c.jsx("button",{onClick:$,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black transition-all shadow-xl shadow-gray-200",children:n("close_guide")})]})]})})}),c.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-cyan-900 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:c.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"px-3 py-1 bg-cyan-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-cyan-400/30",children:"Alliance Duel"}),c.jsx("div",{className:"px-3 py-1 bg-cyan-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-cyan-400/30",children:n("monday")})]}),c.jsx("h2",{className:"text-3xl font-black tracking-tight",children:n("mon_title")}),c.jsx("p",{className:"text-slate-200/60 text-sm font-medium",children:n("mon_desc")})]}),c.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[c.jsx("div",{className:"text-slate-200 text-[10px] font-black uppercase tracking-widest mb-1",children:n("total_est_score")}),c.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-slate-100 to-cyan-100",children:F(J)}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsxs("button",{onClick:q,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[c.jsx(zo,{size:14})," ",n("reset_data")]}),c.jsx("button",{onClick:()=>h(!l),className:`p-2 rounded-xl transition-all border ${l?"bg-white text-slate-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:c.jsx(kt,{size:18})})]})]})]})}),l&&c.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl border border-slate-100 animate-in slide-in-from-top-4 duration-300",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-10 h-10 bg-slate-800 rounded-xl flex items-center justify-center shadow-lg shadow-slate-200",children:c.jsx(kt,{className:"text-white",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-black text-gray-900",children:n("score_base_settings")}),c.jsx("p",{className:"text-xs text-gray-500",children:n("base_points_desc")})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 mb-6",children:Object.keys(e).map(D=>c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest px-1",children:n(D)}),c.jsx("input",{type:"text",value:e[D],onChange:G=>A(D,G.target.value),className:"w-full bg-gray-50 border border-gray-100 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-slate-500/20 outline-none transition-all"})]},D))}),c.jsxs("button",{onClick:O,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[c.jsx(As,{size:18})," ",n("save_and_apply")]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsx(Qc,{icon:$k,title:n("drawing_title"),name:"drawing",inputsKey:"drawing_count",unit:n("unit_drawing"),pts:F(e.drawing_1),colorClass:"bg-amber-600",value:i.drawing_count,onChange:k,score:F(V.drawing),t:n}),c.jsx(Qc,{icon:Gk,title:n("wrench_title"),name:"wrench",inputsKey:"wrench_count",unit:n("unit_wrench"),pts:F(e.wrench_1),colorClass:"bg-amber-500",value:i.wrench_count,onChange:k,score:F(V.wrench),t:n}),c.jsx(Qc,{icon:Fv,title:n("radar_title"),name:"radar",inputsKey:"radar_count",unit:n("unit_radar"),pts:F(e.radar_1),colorClass:"bg-blue-600",value:i.radar_count,onChange:k,score:F(V.radar),t:n}),c.jsx(iy,{icon:Nk,title:n("module_case"),colorClass:"bg-cyan-600",t:n,subtotal:F(V.module),items:[1,2,3,4,5,6,7].map(D=>({key:`module_L${D}`,label:`${n("level_label")} ${D}`,pts:F(e[`module_L${D}`]),value:i[`module_L${D}`],onChange:k}))}),c.jsx(iy,{icon:Ck,title:n("tactical_plugin"),colorClass:"bg-indigo-600",t:n,subtotal:F(V.plugin),items:["green","blue","purple","orange"].map(D=>({key:`plugin_${D}`,label:n(`color_${D}`),pts:F(e[`plugin_${D}`]),value:i[`plugin_${D}`],onChange:k}))}),c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-slate-100 hover:shadow-md transition-all",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 rounded-lg bg-slate-800 bg-opacity-10",children:c.jsx(zv,{size:18,className:"text-slate-800"})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:n("snow_leopard")})]}),c.jsxs("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-wider",children:[F(e[`sl_${i.sl_level}`])," pts / ",n("unit_target")]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("select",{value:i.sl_level,onChange:D=>o(G=>({...G,sl_level:D.target.value})),className:"w-full appearance-none bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold focus:ring-2 focus:ring-slate-500/20 transition-all text-xs cursor-pointer",children:["10","20","30","40","50","60"].map(D=>c.jsxs("option",{value:D,children:[n("level_label")," ",Number(D)-9,"-",D]},D))}),c.jsx(Tu,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:14})]}),c.jsx("input",{type:"text",name:"sl_count",value:i.sl_count,onChange:k,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold focus:ring-2 focus:ring-slate-500/20 transition-all text-base font-mono"})]}),c.jsxs("div",{className:"mt-4 flex justify-end text-xs font-bold text-gray-400",children:[n("est_score"),": ",c.jsx("span",{className:"text-slate-800 font-black",children:F(V.sl)})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-blue-100 hover:shadow-md transition-all",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 rounded-lg bg-blue-800 bg-opacity-10",children:c.jsx(Hk,{size:18,className:"text-blue-800"})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:n("polar_zombie")})]}),c.jsxs("span",{className:"text-[10px] font-black text-blue-500 uppercase tracking-wider",children:[F(e[`pz_${i.pz_level}`])," pts / ",n("unit_target")]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("select",{value:i.pz_level,onChange:D=>o(G=>({...G,pz_level:D.target.value})),className:"w-full appearance-none bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold focus:ring-2 focus:ring-blue-500/20 transition-all text-xs cursor-pointer",children:["10","20","30","40","50","60"].map(D=>c.jsxs("option",{value:D,children:[n("level_label")," ",Number(D)-9,"-",D]},D))}),c.jsx(Tu,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:14})]}),c.jsx("input",{type:"text",name:"pz_count",value:i.pz_count,onChange:k,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold focus:ring-2 focus:ring-blue-500/20 transition-all text-base font-mono"})]}),c.jsxs("div",{className:"mt-4 flex justify-end text-xs font-bold text-gray-400",children:[n("est_score"),": ",c.jsx("span",{className:"text-blue-800 font-black",children:F(V.pz)})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-green-100 md:col-span-2 lg:col-span-1 border-t-4 border-t-green-500",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx("div",{className:"p-2 rounded-lg bg-green-500 bg-opacity-10",children:c.jsx(Sk,{size:18,className:"text-green-500"})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:n("gathering_title")})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("span",{className:"text-[9px] font-black text-green-700 uppercase ml-1 flex justify-between",children:[n("gathering_coin")," ",c.jsxs("span",{className:"text-gray-400",children:[e.gather_coin_1k," pts/1k"]})]}),c.jsx("input",{type:"text",name:"gather_coin",value:i.gather_coin,onChange:k,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold focus:ring-2 focus:ring-green-500/20 transition-all text-sm font-mono"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("span",{className:"text-[9px] font-black text-green-700 uppercase ml-1 flex justify-between",children:[n("gathering_res")," ",c.jsxs("span",{className:"text-gray-400",children:[e.gather_res_1k," pts/1k"]})]}),c.jsx("input",{type:"text",name:"gather_res",value:i.gather_res,onChange:k,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold focus:ring-2 focus:ring-green-500/20 transition-all text-sm font-mono"})]})]}),c.jsx("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:c.jsxs("span",{className:"text-gray-400",children:[n("est_score"),": ",c.jsx("span",{className:"text-green-600 font-black",children:F(V.gather_coin+V.gather_res)})]})})]}),c.jsx(Qc,{icon:bl,title:n("diamond_gift"),name:"diamond",inputsKey:"diamond_count",unit:n("unit_item"),pts:e.diamond_1,colorClass:"bg-cyan-500",value:i.diamond_count,onChange:k,score:F(V.diamond),t:n})]}),c.jsxs("div",{className:"bg-slate-50/50 rounded-2xl p-6 border border-slate-100 flex gap-4",children:[c.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(ur,{size:16,className:"text-slate-600"})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-bold text-slate-900 underline decoration-slate-200 decoration-2 underline-offset-2",children:n("tips_title")}),c.jsx("p",{className:"text-xs text-slate-700 leading-relaxed font-medium",children:n("tips_desc")})]})]})]})},ii=({icon:n,title:e,name:t,inputsKey:i,unit:o,pts:l,colorClass:h,value:p,onChange:m,score:v,t:w})=>c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`p-2 rounded-lg ${h} bg-opacity-10`,children:c.jsx(n,{size:18,className:h.replace("bg-","text-")})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:e})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[l," pts / ",o]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",name:i,value:p,onChange:m,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-base"}),c.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md",children:o})]}),c.jsx("div",{className:"mt-2 flex justify-end",children:c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[w("est_score"),": ",c.jsx("span",{className:"text-blue-600 font-black",children:v})]})})]}),pI=()=>{const{t:n}=Wn(),[e,t]=X.useState({speedup_1min:164,power_10:5,bounty_orange:246800,refine_stone:16400,pulse_module:411300,survivor_orange:164500,survivor_purple:41100,survivor_blue:8200,diamond_1:30}),[i,o]=X.useState({speedup_d:"",speedup_h:"",speedup_m:"",power_start:"",power_end:"",bounty_count:"",refine_count:"",pulse_count:"",sur_orange_count:"",sur_purple_count:"",sur_blue_count:"",diamond_count:""}),[l,h]=X.useState(!1),[p,m]=X.useState(!1),[v,w]=X.useState(!1),[k,A]=X.useState(!1);X.useEffect(()=>{const G=localStorage.getItem("duel_tue_base_values"),ie=localStorage.getItem("duel_welcome_dismissed");if(G)try{t(JSON.parse(G))}catch(ce){console.error("Failed to load base values",ce)}ie||w(!0)},[]);const O=G=>{const{name:ie,value:ce}=G.target;(ce===""||/^\d+$/.test(ce))&&o(j=>({...j,[ie]:ce}))},$=(G,ie)=>{(ie===""||/^\d+(\.\d+)?$/.test(ie))&&t(ce=>({...ce,[G]:Number(ie)||0}))},q=()=>{localStorage.setItem("duel_tue_base_values",JSON.stringify(e)),h(!1)},V=()=>{k&&localStorage.setItem("duel_welcome_dismissed","true"),w(!1)},J=()=>{o({speedup_d:"",speedup_h:"",speedup_m:"",power_start:"",power_end:"",bounty_count:"",refine_count:"",pulse_count:"",sur_orange_count:"",sur_purple_count:"",sur_blue_count:"",diamond_count:""})},F=X.useMemo(()=>{const G=(Number(i.speedup_d)||0)*1440+(Number(i.speedup_h)||0)*60+(Number(i.speedup_m)||0),ie={speedup:G*e.speedup_1min,power:Math.max(0,(Number(i.power_end)||0)-(Number(i.power_start)||0))/10*e.power_10,bounty:(Number(i.bounty_count)||0)*e.bounty_orange,refine:(Number(i.refine_count)||0)*e.refine_stone,pulse:(Number(i.pulse_count)||0)*e.pulse_module,sur_orange:(Number(i.sur_orange_count)||0)*e.survivor_orange,sur_purple:(Number(i.sur_purple_count)||0)*e.survivor_purple,sur_blue:(Number(i.sur_blue_count)||0)*e.survivor_blue,diamond:(Number(i.diamond_count)||0)*e.diamond_1,totalMinutes:G};return ie.total=ie.speedup+ie.power+ie.bounty+ie.refine+ie.pulse+ie.sur_orange+ie.sur_purple+ie.sur_blue+ie.diamond,ie},[i,e]),D=G=>!G||isNaN(G)?"0":new Intl.NumberFormat("en-US").format(Math.floor(G));return c.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[v&&c.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:c.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-blue-100",children:c.jsxs("div",{className:"p-10 text-center space-y-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-blue-200 animate-bounce cursor-default relative z-10",children:c.jsx(Fo,{className:"text-white",size:40})}),c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 bg-blue-400 rounded-3xl blur-2xl opacity-20 animate-pulse"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight",children:n("welcome_title")}),c.jsxs("p",{className:"text-sm font-medium text-gray-500 leading-relaxed px-2 text-center",children:[n("welcome_desc").split("{icon}")[0],c.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-gray-100 rounded-md text-gray-900 border border-gray-200 align-middle mx-1 -mt-0.5",children:c.jsx(kt,{size:12})}),n("welcome_desc").split("{icon}")[1]]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("label",{className:"flex items-center justify-center gap-3 cursor-pointer group select-none",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"checkbox",className:"sr-only",checked:k,onChange:()=>A(!k)}),c.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center ${k?"bg-blue-600 border-blue-600":"border-gray-200 group-hover:border-blue-400"}`,children:k&&c.jsx(Uo,{size:12,className:"text-white stroke-[4]"})})]}),c.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:n("dont_show_again")})]}),c.jsx("button",{onClick:V,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black hover:scale-[1.02] active:scale-95 transition-all shadow-xl shadow-gray-200",children:n("close_guide")})]})]})})}),p&&c.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:c.jsxs("div",{className:"bg-white rounded-[2rem] w-full max-w-md overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300",children:[c.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[c.jsx("h3",{className:"font-black text-gray-900",children:n("how_to_check")}),c.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:c.jsx(Xu,{size:20})})]}),c.jsxs("div",{className:"p-6 space-y-8 overflow-y-auto max-h-[70vh]",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-sm font-bold text-gray-600 flex items-center gap-2",children:[c.jsx("span",{className:"w-5 h-5 bg-orange-500 text-white rounded-full flex items-center justify-center text-[10px]",children:"1"}),n("guide_step_1")]}),c.jsx("div",{className:"rounded-2xl overflow-hidden border border-gray-100 shadow-lg bg-gray-50",children:c.jsx("img",{src:"/lastZ-power/guide/step1.png",alt:"Step 1",className:"w-full h-auto"})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-sm font-bold text-gray-600 flex items-center gap-2",children:[c.jsx("span",{className:"w-5 h-5 bg-orange-500 text-white rounded-full flex items-center justify-center text-[10px]",children:"2"}),n("guide_step_2")]}),c.jsx("div",{className:"rounded-2xl overflow-hidden border border-gray-100 shadow-lg bg-gray-50",children:c.jsx("img",{src:"/lastZ-power/guide/step2.png",alt:"Step 2",className:"w-full h-auto"})})]})]}),c.jsx("div",{className:"p-6 bg-gray-50",children:c.jsx("button",{onClick:()=>m(!1),className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black transition-all shadow-xl shadow-gray-200",children:n("close_guide")})})]})}),c.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-blue-900 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:c.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"px-3 py-1 bg-blue-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-blue-400/30",children:"Alliance Duel"}),c.jsx("div",{className:"px-3 py-1 bg-blue-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-blue-400/30",children:n("tuesday")})]}),c.jsx("h2",{className:"text-3xl font-black tracking-tight",children:n("tue_title")}),c.jsx("p",{className:"text-blue-200/60 text-sm font-medium",children:n("tue_desc")})]}),c.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[c.jsx("div",{className:"text-blue-200 text-[10px] font-black uppercase tracking-widest mb-1",children:n("total_est_score")}),c.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-blue-100 to-indigo-100",children:D(F.total)}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsxs("button",{onClick:J,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[c.jsx(zo,{size:14})," ",n("reset_data")]}),c.jsx("button",{onClick:()=>h(!l),className:`p-2 rounded-xl transition-all border ${l?"bg-white text-blue-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:c.jsx(kt,{size:18})})]})]})]})}),l&&c.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl border border-blue-100 animate-in slide-in-from-top-4 duration-300",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-200",children:c.jsx(kt,{className:"text-white",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-black text-gray-900",children:n("score_base_settings")}),c.jsx("p",{className:"text-xs text-gray-500",children:n("base_points_desc")})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:Object.keys(e).map(G=>c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest px-1",children:n(G)}),c.jsx("input",{type:"text",value:e[G],onChange:ie=>$(G,ie.target.value),className:"w-full bg-gray-50 border border-gray-100 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"})]},G))}),c.jsxs("button",{onClick:q,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[c.jsx(As,{size:18})," ",n("save_and_apply")]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-blue-100 border-l-4 border-l-blue-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 rounded-lg bg-blue-500 bg-opacity-10",children:c.jsx(Yu,{size:18,className:"text-blue-500"})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:n("speedup_title")})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.speedup_1min," pts / ",n("unit_min")]})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["d","h","m"].map(G=>c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:n(`unit_${G==="d"?"day":G==="h"?"hour":"min"}`)}),c.jsx("input",{type:"text",name:`speedup_${G}`,value:i[`speedup_${G}`],onChange:O,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all text-base font-mono"})]},G))}),c.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[c.jsxs("span",{className:"text-gray-400 px-1",children:[n("current_total"),": ",c.jsxs("span",{className:"text-blue-600",children:[D(F.totalMinutes)," ",n("unit_min")]})]}),c.jsxs("span",{className:"text-gray-400",children:[n("est_score"),": ",c.jsx("span",{className:"text-blue-600 font-black",children:D(F.speedup)})]})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-orange-100 border-l-4 border-l-orange-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 rounded-lg bg-orange-500 bg-opacity-10",children:c.jsx(Dv,{size:18,className:"text-orange-500"})}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:n("power_increase")}),c.jsx("button",{onClick:()=>m(!0),className:"p-1 hover:bg-orange-100 rounded-full transition-colors group/help",title:n("how_to_check"),children:c.jsx(Pk,{size:14,className:"text-orange-400 group-hover/help:text-orange-600"})})]})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.power_10," pts / 10 Power"]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:n("power_start")}),c.jsx("input",{type:"text",name:"power_start",value:i.power_start,onChange:O,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-orange-500/20 transition-all text-base font-mono"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:n("power_end")}),c.jsx("input",{type:"text",name:"power_end",value:i.power_end,onChange:O,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-orange-500/20 transition-all text-base font-mono"})]})]}),c.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[c.jsxs("span",{className:"text-gray-400 px-1",children:[n("power_diff"),": ",c.jsx("span",{className:"text-orange-600",children:D(Math.max(0,(Number(i.power_end)||0)-(Number(i.power_start)||0)))})]}),c.jsxs("span",{className:"text-gray-400",children:[n("est_score"),": ",c.jsx("span",{className:"text-orange-600 font-black",children:D(F.power)})]})]})]}),c.jsx(ii,{icon:yf,title:n("bounty_title"),name:"bounty",inputsKey:"bounty_count",unit:n("unit_count"),pts:D(e.bounty_orange),colorClass:"bg-yellow-500",value:i.bounty_count,onChange:O,score:D(F.bounty),t:n}),c.jsx(ii,{icon:jk,title:n("refine_title"),name:"refine",inputsKey:"refine_count",unit:n("unit_item"),pts:D(e.refine_stone),colorClass:"bg-red-500",value:i.refine_count,onChange:O,score:D(F.refine),t:n}),c.jsx(ii,{icon:yf,title:n("pulse_title"),name:"pulse",inputsKey:"pulse_count",unit:n("unit_item"),pts:D(e.pulse_module),colorClass:"bg-purple-500",value:i.pulse_count,onChange:O,score:D(F.pulse),t:n}),c.jsx(ii,{icon:qn,title:n("sur_orange"),name:"sur_orange",inputsKey:"sur_orange_count",unit:n("unit_person"),pts:D(e.survivor_orange),colorClass:"bg-orange-600",value:i.sur_orange_count,onChange:O,score:D(F.sur_orange),t:n}),c.jsx(ii,{icon:qn,title:n("sur_purple"),name:"sur_purple",inputsKey:"sur_purple_count",unit:n("unit_person"),pts:D(e.survivor_purple),colorClass:"bg-purple-400",value:i.sur_purple_count,onChange:O,score:D(F.sur_purple),t:n}),c.jsx(ii,{icon:qn,title:n("sur_blue"),name:"sur_blue",inputsKey:"sur_blue_count",unit:n("unit_person"),pts:D(e.survivor_blue),colorClass:"bg-blue-400",value:i.sur_blue_count,onChange:O,score:D(F.sur_blue),t:n}),c.jsx(ii,{icon:bl,title:n("diamond_gift"),name:"diamond",inputsKey:"diamond_count",unit:n("unit_item"),pts:e.diamond_1,colorClass:"bg-cyan-500",value:i.diamond_count,onChange:O,score:D(F.diamond),t:n})]}),c.jsxs("div",{className:"bg-blue-50/50 rounded-2xl p-6 border border-blue-100 flex gap-4",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(ur,{size:16,className:"text-blue-600"})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-bold text-blue-900 underline decoration-blue-200 decoration-2 underline-offset-2",children:n("tips_title")}),c.jsx("p",{className:"text-xs text-blue-700 leading-relaxed font-medium",children:n("tips_desc")})]})]})]})},zh=({icon:n,title:e,name:t,inputsKey:i,unit:o,pts:l,colorClass:h,value:p,onChange:m,score:v,t:w})=>c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`p-2 rounded-lg ${h} bg-opacity-10`,children:c.jsx(n,{size:18,className:h.replace("bg-","text-")})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:e})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[l," pts / ",o]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",name:i,value:p,onChange:m,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-base"}),c.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md",children:o})]}),c.jsx("div",{className:"mt-2 flex justify-end",children:c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[w("est_score"),": ",c.jsx("span",{className:"text-blue-600 font-black",children:v})]})})]}),mI=()=>{const{t:n}=Wn(),[e,t]=X.useState({speedup_res_1min:123,tech_power_10:5,badge_1:164,trade_orange:308500,diamond_1:30}),[i,o]=X.useState({speedup_d:"",speedup_h:"",speedup_m:"",power_start:"",power_end:"",badge_count:"",trade_count:"",diamond_count:""}),[l,h]=X.useState(!1),[p,m]=X.useState(!1),[v,w]=X.useState(!1);X.useEffect(()=>{const F=localStorage.getItem("duel_wed_base_values"),D=localStorage.getItem("duel_welcome_dismissed_wed");if(F)try{t(JSON.parse(F))}catch(G){console.error("Failed to load base values",G)}D||m(!0)},[]);const k=F=>{const{name:D,value:G}=F.target;(G===""||/^\d+$/.test(G))&&o(ie=>({...ie,[D]:G}))},A=(F,D)=>{(D===""||/^\d+(\.\d+)?$/.test(D))&&t(G=>({...G,[F]:Number(D)||0}))},O=()=>{localStorage.setItem("duel_wed_base_values",JSON.stringify(e)),h(!1)},$=()=>{v&&localStorage.setItem("duel_welcome_dismissed_wed","true"),m(!1)},q=()=>{o({speedup_d:"",speedup_h:"",speedup_m:"",power_start:"",power_end:"",badge_count:"",trade_count:"",diamond_count:""})},V=X.useMemo(()=>{const F=(Number(i.speedup_d)||0)*1440+(Number(i.speedup_h)||0)*60+(Number(i.speedup_m)||0),D={speedup:F*e.speedup_res_1min,power:Math.max(0,(Number(i.power_end)||0)-(Number(i.power_start)||0))/10*e.tech_power_10,badge:(Number(i.badge_count)||0)*e.badge_1,trade:(Number(i.trade_count)||0)*e.trade_orange,diamond:(Number(i.diamond_count)||0)*e.diamond_1,totalMinutes:F};return D.total=D.speedup+D.power+D.badge+D.trade+D.diamond,D},[i,e]),J=F=>!F||isNaN(F)||F===0?"0":new Intl.NumberFormat("en-US").format(Math.floor(F));return c.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[p&&c.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:c.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-blue-100",children:c.jsxs("div",{className:"p-10 text-center space-y-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-blue-200 animate-bounce cursor-default relative z-10",children:c.jsx(Fo,{className:"text-white",size:40})}),c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 bg-blue-400 rounded-3xl blur-2xl opacity-20 animate-pulse"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight",children:n("welcome_title")}),c.jsxs("p",{className:"text-sm font-medium text-gray-500 leading-relaxed px-2 text-center",children:[n("welcome_desc").split("{icon}")[0],c.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-gray-100 rounded-md text-gray-900 border border-gray-200 align-middle mx-1 -mt-0.5",children:c.jsx(kt,{size:12})}),n("welcome_desc").split("{icon}")[1]]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("label",{className:"flex items-center justify-center gap-3 cursor-pointer group select-none",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"checkbox",className:"sr-only",checked:v,onChange:()=>w(!v)}),c.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center ${v?"bg-blue-600 border-blue-600":"border-gray-200 group-hover:border-blue-400"}`,children:v&&c.jsx(Uo,{size:12,className:"text-white stroke-[4]"})})]}),c.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:n("dont_show_again")})]}),c.jsx("button",{onClick:$,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black hover:scale-[1.02] active:scale-95 transition-all shadow-xl shadow-gray-200",children:n("close_guide")})]})]})})}),c.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-indigo-900 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:c.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"px-3 py-1 bg-indigo-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-indigo-400/30",children:"Alliance Duel"}),c.jsx("div",{className:"px-3 py-1 bg-purple-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-purple-400/30",children:n("wednesday")})]}),c.jsx("h2",{className:"text-3xl font-black tracking-tight",children:n("wed_title")}),c.jsx("p",{className:"text-indigo-200/60 text-sm font-medium",children:n("wed_desc")})]}),c.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[c.jsx("div",{className:"text-indigo-200 text-[10px] font-black uppercase tracking-widest mb-1",children:n("total_est_score")}),c.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-indigo-100 to-purple-100",children:J(V.total)}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsxs("button",{onClick:q,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[c.jsx(zo,{size:14})," ",n("reset_data")]}),c.jsx("button",{onClick:()=>h(!l),className:`p-2 rounded-xl transition-all border ${l?"bg-white text-indigo-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:c.jsx(kt,{size:18})})]})]})]})}),l&&c.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl border border-indigo-100 animate-in slide-in-from-top-4 duration-300",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx(kt,{className:"text-white",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-black text-gray-900",children:n("score_base_settings")}),c.jsx("p",{className:"text-xs text-gray-500",children:n("base_points_desc")})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:Object.keys(e).map(F=>c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest px-1",children:n(F)}),c.jsx("input",{type:"text",value:e[F],onChange:D=>A(F,D.target.value),className:"w-full bg-gray-50 border border-gray-100 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all"})]},F))}),c.jsxs("button",{onClick:O,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[c.jsx(As,{size:18})," ",n("save_and_apply")]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-indigo-100 border-l-4 border-l-indigo-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 rounded-lg bg-indigo-500 bg-opacity-10",children:c.jsx(Yu,{size:18,className:"text-indigo-500"})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:n("speedup_res_title")})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.speedup_res_1min," pts / ",n("unit_min")]})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["d","h","m"].map(F=>c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:n(`unit_${F==="d"?"day":F==="h"?"hour":"min"}`)}),c.jsx("input",{type:"text",name:`speedup_${F}`,value:i[`speedup_${F}`],onChange:k,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-indigo-500/20 transition-all text-base font-mono"})]},F))}),c.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[c.jsxs("span",{className:"text-gray-400 px-1",children:[n("current_total"),": ",c.jsxs("span",{className:"text-indigo-600",children:[J(V.totalMinutes)," ",n("unit_min")]})]}),c.jsxs("span",{className:"text-gray-400",children:[n("est_score"),": ",c.jsx("span",{className:"text-indigo-600 font-black",children:J(V.speedup)})]})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-purple-100 border-l-4 border-l-purple-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 rounded-lg bg-purple-500 bg-opacity-10",children:c.jsx(Lv,{size:18,className:"text-purple-500"})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:n("tech_power_increase")})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.tech_power_10," pts / 10 Power"]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:n("power_start")}),c.jsx("input",{type:"text",name:"power_start",value:i.power_start,onChange:k,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-purple-500/20 transition-all text-base font-mono"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:n("power_end")}),c.jsx("input",{type:"text",name:"power_end",value:i.power_end,onChange:k,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-purple-500/20 transition-all text-base font-mono"})]})]}),c.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[c.jsxs("span",{className:"text-gray-400 px-1",children:[n("power_diff"),": ",c.jsx("span",{className:"text-purple-600",children:J(Math.max(0,(Number(i.power_end)||0)-(Number(i.power_start)||0)))})]}),c.jsxs("span",{className:"text-gray-400",children:[n("est_score"),": ",c.jsx("span",{className:"text-purple-600 font-black",children:J(V.power)})]})]})]}),c.jsx(zh,{icon:jo,title:n("badge_title"),name:"badge",inputsKey:"badge_count",unit:n("unit_item"),pts:J(e.badge_1),colorClass:"bg-blue-500",value:i.badge_count,onChange:k,score:J(V.badge),t:n}),c.jsx(zh,{icon:Bv,title:n("trade_title"),name:"trade",inputsKey:"trade_count",unit:n("unit_trade"),pts:J(e.trade_orange),colorClass:"bg-sky-500",value:i.trade_count,onChange:k,score:J(V.trade),t:n}),c.jsx(zh,{icon:bl,title:n("diamond_gift"),name:"diamond",inputsKey:"diamond_count",unit:n("unit_item"),pts:e.diamond_1,colorClass:"bg-cyan-500",value:i.diamond_count,onChange:k,score:J(V.diamond),t:n})]}),c.jsxs("div",{className:"bg-indigo-50/50 rounded-2xl p-6 border border-indigo-100 flex gap-4",children:[c.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(ur,{size:16,className:"text-indigo-600"})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-bold text-indigo-900 underline decoration-indigo-200 decoration-2 underline-offset-2",children:n("tips_title")}),c.jsx("p",{className:"text-xs text-indigo-700 leading-relaxed font-medium",children:n("tips_desc")})]})]})]})};var Iu=cy();const ir=({icon:n,title:e,name:t,inputsKey:i,unit:o,inputUnit:l,finalScore:h,colorClass:p,value:m,onChange:v,score:w,t:k})=>c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`p-2 rounded-lg ${p} bg-opacity-10`,children:c.jsx(n,{size:18,className:p.replace("bg-","text-")})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:e})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[h," pts / ",o]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",name:i,value:m,onChange:v,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-base"}),c.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md",children:l||o})]}),c.jsx("div",{className:"mt-2 flex justify-end",children:c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[k("est_score"),": ",c.jsx("span",{className:"text-blue-600 font-black",children:w})]})})]}),gI=()=>{const{t:n,lang:e}=Wn(),t={hero_frag_orange:5e3,hero_frag_purple:1700,hero_frag_blue:500,exclusive_frag:5e3,adv_recruit:500,energy_core:400,gear_upgrade:3e5,alloy_10:3,skill_manual:10,diamond_1:30},[i,o]=X.useState({global:"313",recruit:"100",energy_core:"100"}),[l,h]=X.useState({}),[p,m]=X.useState({frag_orange_count:"",frag_purple_count:"",frag_blue_count:"",excl_frag_count:"",recruit_count:"",core_count:"",gear_count:"",alloy_count:"",manual_count:"",diamond_count:""}),[v,w]=X.useState(!1),[k,A]=X.useState(!1),[O,$]=X.useState(!1),[q,V]=X.useState(!1),J=T=>{const K=parseFloat(T);return isNaN(K)?0:K};X.useEffect(()=>{const T=localStorage.getItem("duel_thu_bonus_settings"),K=localStorage.getItem("duel_thu_manual_overrides"),oe=localStorage.getItem("duel_welcome_dismissed_thu");if(T)try{const ge=JSON.parse(T),ue={};for(const ee in ge)ue[ee]=String(ge[ee]);o(ue)}catch(ge){console.error("Failed to load bonus settings",ge)}if(K)try{h(JSON.parse(K))}catch(ge){console.error("Failed to load manual overrides",ge)}oe||A(!0)},[]);const F=T=>{const{name:K,value:oe}=T.target;(oe===""||/^\d+$/.test(oe))&&m(ge=>({...ge,[K]:oe}))},D=(T,K)=>{(K===""||/^\d*\.?\d*$/.test(K))&&o(oe=>({...oe,[T]:K}))},G=(T,K)=>{(K===""||/^\d*\.?\d*$/.test(K))&&h(oe=>({...oe,[T]:Number(K)||0}))},ie=T=>{h(K=>{const oe={...K};return oe[T]!==void 0?delete oe[T]:oe[T]=ce(T),oe})},ce=T=>{const K=t[T];if(T==="diamond_1")return K;let oe=J(i.global);return T==="adv_recruit"&&(oe+=J(i.recruit)),T==="energy_core"&&(oe+=J(i.energy_core)),Math.floor(K*(1+oe/100))},j=()=>{localStorage.setItem("duel_thu_bonus_settings",JSON.stringify(i)),localStorage.setItem("duel_thu_manual_overrides",JSON.stringify(l)),w(!1)},b=()=>{O&&localStorage.setItem("duel_welcome_dismissed_thu","true"),A(!1)},N=()=>{m({frag_orange_count:"",frag_purple_count:"",frag_blue_count:"",excl_frag_count:"",recruit_count:"",core_count:"",gear_count:"",alloy_count:"",manual_count:"",diamond_count:""})},I=X.useMemo(()=>{const T=K=>l[K]!==void 0?l[K]:ce(K);return{frag_orange:(Number(p.frag_orange_count)||0)*T("hero_frag_orange"),frag_purple:(Number(p.frag_purple_count)||0)*T("hero_frag_purple"),frag_blue:(Number(p.frag_blue_count)||0)*T("hero_frag_blue"),excl_frag:(Number(p.excl_frag_count)||0)*T("exclusive_frag"),recruit:(Number(p.recruit_count)||0)*T("adv_recruit"),core:(Number(p.core_count)||0)*T("energy_core"),gear:(Number(p.gear_count)||0)*T("gear_upgrade"),alloy:Math.floor((Number(p.alloy_count)||0)/10)*T("alloy_10"),manual:(Number(p.manual_count)||0)*T("skill_manual"),diamond:(Number(p.diamond_count)||0)*T("diamond_1")}},[p,i,l]),P=X.useMemo(()=>Object.values(I).reduce((T,K)=>T+K,0),[I]),C=T=>!T||isNaN(T)||T===0?"0":new Intl.NumberFormat("en-US").format(Math.floor(T));return c.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[k&&Iu.createPortal(c.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:c.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-blue-100",children:c.jsxs("div",{className:"p-10 text-center space-y-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-20 h-20 bg-orange-600 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-orange-200 animate-bounce cursor-default relative z-10",children:c.jsx(Fo,{className:"text-white",size:40})}),c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 bg-orange-400 rounded-3xl blur-2xl opacity-20 animate-pulse"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight",children:n("welcome_title")}),c.jsxs("p",{className:"text-sm font-medium text-gray-500 leading-relaxed px-2 text-center",children:[n("welcome_desc").split("{icon}")[0],c.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-gray-100 rounded-md text-gray-900 border border-gray-200 align-middle mx-1 -mt-0.5",children:c.jsx(kt,{size:12})}),n("welcome_desc").split("{icon}")[1]]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("label",{className:"flex items-center justify-center gap-3 cursor-pointer group select-none",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"checkbox",className:"sr-only",checked:O,onChange:()=>$(!O)}),c.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center ${O?"bg-orange-600 border-orange-600":"border-gray-200 group-hover:border-orange-400"}`,children:O&&c.jsx(Uo,{size:12,className:"text-white stroke-[4]"})})]}),c.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:n("dont_show_again")})]}),c.jsx("button",{onClick:b,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black hover:scale-[1.02] active:scale-95 transition-all shadow-xl shadow-gray-200",children:n("close_guide")})]})]})})}),document.body),c.jsx("div",{className:"bg-gradient-to-br from-gray-900 via-orange-950 to-red-900 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:c.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"px-3 py-1 bg-orange-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-orange-400/30",children:"Alliance Duel"}),c.jsx("div",{className:"px-3 py-1 bg-orange-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-orange-400/30",children:n("thursday")})]}),c.jsx("h2",{className:"text-3xl font-black tracking-tight",children:n("thu_title")}),c.jsx("p",{className:"text-orange-200/60 text-sm font-medium",children:n("thu_desc")})]}),c.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[c.jsx("div",{className:"text-orange-200 text-[10px] font-black uppercase tracking-widest mb-1",children:n("total_est_score")}),c.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-orange-100 to-red-100",children:C(P)}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsxs("button",{onClick:N,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[c.jsx(zo,{size:14})," ",n("reset_data")]}),c.jsx("button",{onClick:()=>w(!v),className:`p-2 rounded-xl transition-all border ${v?"bg-white text-orange-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:c.jsx(kt,{size:18})})]})]})]})}),v&&c.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl border border-orange-100 animate-in slide-in-from-top-4 duration-300",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-10 h-10 bg-orange-600 rounded-xl flex items-center justify-center shadow-lg shadow-orange-200",children:c.jsx(kt,{className:"text-white",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-black text-gray-900",children:n("score_base_settings")}),c.jsx("p",{className:"text-xs text-gray-500",children:n("base_points_desc")})]})]}),c.jsxs("div",{className:"mb-6 p-4 bg-orange-50 rounded-xl border border-orange-100",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Vv,{className:"text-orange-600",size:18}),c.jsx("h4",{className:"font-black text-orange-900",children:n("tech_bonus_settings")})]}),c.jsxs("button",{onClick:()=>V(!q),className:"flex items-center gap-1.5 px-3 py-1 bg-white text-[10px] font-black text-orange-600 rounded-lg border border-orange-200 hover:bg-orange-100 transition-all",children:[c.jsx(ur,{size:12}),n("tech_bonus_guide_title")]})]}),q&&Iu.createPortal(c.jsxs("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:[c.jsx("div",{className:"absolute inset-0",onClick:()=>V(!1)}),c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-3xl shadow-2xl animate-in zoom-in-95 duration-300 border border-orange-100 flex flex-col",style:{maxHeight:"calc(100vh - 3rem)"},children:[c.jsxs("div",{className:"px-5 py-3 border-b border-gray-100 flex items-center justify-between bg-gradient-to-r from-orange-50/50 to-orange-50/30 flex-shrink-0 rounded-t-3xl",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-1.5 bg-orange-600 rounded-lg text-white shadow-sm",children:c.jsx(ur,{size:16})}),c.jsx("h3",{className:"font-black text-gray-900 text-sm",children:n("tech_bonus_guide_title")})]}),c.jsx("button",{onClick:()=>V(!1),className:"p-1.5 hover:bg-white rounded-full transition-all text-gray-400 hover:text-gray-600",children:c.jsx(Xu,{size:18})})]}),c.jsxs("div",{className:"p-5 overflow-y-auto custom-scrollbar space-y-4 flex-1",children:[c.jsx("div",{className:"bg-orange-50 border border-orange-100 rounded-xl p-3",children:c.jsxs("p",{className:"text-xs text-orange-900 font-medium leading-relaxed flex items-start gap-2",children:[c.jsx(gp,{size:16,className:"text-orange-500 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:n("tech_bonus_guide_desc")})]})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest px-1",children:" / Screenshot"}),c.jsx("div",{className:"rounded-xl overflow-hidden border-2 border-gray-200 bg-white shadow-sm",children:c.jsx("img",{src:`./guide/tech_${e}.webp`,alt:"Tech Bonus Guide",className:"w-full h-auto object-contain"})})]})]}),c.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-100 flex-shrink-0 rounded-b-3xl",children:c.jsx("button",{onClick:()=>V(!1),className:"w-full py-2.5 bg-gray-900 text-white rounded-xl font-black text-sm hover:bg-black transition-all shadow-lg",children:n("close_guide")})})]})]}),document.body),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black text-orange-600 uppercase tracking-widest px-1",children:n("global_bonus")}),c.jsx("input",{type:"text",value:i.global,onChange:T=>D("global",T.target.value),className:"w-full bg-white border border-orange-200 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-orange-500/20 outline-none transition-all"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black text-orange-600 uppercase tracking-widest px-1",children:n("recruit_bonus")}),c.jsx("input",{type:"text",value:i.recruit,onChange:T=>D("recruit",T.target.value),className:"w-full bg-white border border-orange-200 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-orange-500/20 outline-none transition-all"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black text-orange-600 uppercase tracking-widest px-1",children:n("energy_core_bonus")}),c.jsx("input",{type:"text",value:i.energy_core,onChange:T=>D("energy_core",T.target.value),className:"w-full bg-white border border-orange-200 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-orange-500/20 outline-none transition-all"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(Nu,{className:"text-gray-600",size:18}),c.jsx("h4",{className:"font-black text-gray-900",children:n("advanced_manual_override")})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4",children:Object.keys(t).map(T=>{const K=l[T]!==void 0,oe=K?l[T]:ce(T);return c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("div",{className:"flex items-center justify-between px-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:n(T)}),c.jsx("button",{onClick:()=>ie(T),className:`p-1 rounded-md transition-all ${K?"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:K?"":"",children:K?c.jsx($v,{size:12}):c.jsx(Nu,{size:12})})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"text-xs text-gray-500 whitespace-nowrap",children:[t[T]," "]}),c.jsx("input",{type:"text",value:K?l[T]:oe,onChange:ge=>G(T,ge.target.value),disabled:!K,className:`flex-1 border rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-orange-500/20 outline-none transition-all ${K?"bg-white border-orange-200":"bg-gray-50 border-gray-100 text-gray-400 cursor-not-allowed"}`})]})]},T)})})]}),c.jsxs("button",{onClick:j,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[c.jsx(As,{size:18})," ",n("save_and_apply")]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsx(ir,{icon:qn,title:n("hero_frag_orange"),name:"frag_orange",inputsKey:"frag_orange_count",unit:n("unit_item"),finalScore:C(l.hero_frag_orange!==void 0?l.hero_frag_orange:ce("hero_frag_orange")),colorClass:"bg-orange-500",value:p.frag_orange_count,onChange:F,score:C(I.frag_orange),t:n}),c.jsx(ir,{icon:qn,title:n("hero_frag_purple"),name:"frag_purple",inputsKey:"frag_purple_count",unit:n("unit_item"),finalScore:C(l.hero_frag_purple!==void 0?l.hero_frag_purple:ce("hero_frag_purple")),colorClass:"bg-purple-500",value:p.frag_purple_count,onChange:F,score:C(I.frag_purple),t:n}),c.jsx(ir,{icon:qn,title:n("hero_frag_blue"),name:"frag_blue",inputsKey:"frag_blue_count",unit:n("unit_item"),finalScore:C(l.hero_frag_blue!==void 0?l.hero_frag_blue:ce("hero_frag_blue")),colorClass:"bg-blue-500",value:p.frag_blue_count,onChange:F,score:C(I.frag_blue),t:n}),c.jsx(ir,{icon:jo,title:n("exclusive_frag"),name:"excl_frag",inputsKey:"excl_frag_count",unit:n("unit_item"),finalScore:C(l.exclusive_frag!==void 0?l.exclusive_frag:ce("exclusive_frag")),colorClass:"bg-red-500",value:p.excl_frag_count,onChange:F,score:C(I.excl_frag),t:n}),c.jsx(ir,{icon:Kk,title:n("adv_recruit"),name:"recruit",inputsKey:"recruit_count",unit:n("unit_recruit"),finalScore:C(l.adv_recruit!==void 0?l.adv_recruit:ce("adv_recruit")),colorClass:"bg-yellow-500",value:p.recruit_count,onChange:F,score:C(I.recruit),t:n}),c.jsx(ir,{icon:Qk,title:n("energy_core"),name:"core",inputsKey:"core_count",unit:n("unit_item"),finalScore:C(l.energy_core!==void 0?l.energy_core:ce("energy_core")),colorClass:"bg-cyan-500",value:p.core_count,onChange:F,score:C(I.core),t:n}),c.jsx(ir,{icon:bo,title:n("gear_upgrade"),name:"gear",inputsKey:"gear_count",unit:n("unit_item"),finalScore:C(l.gear_upgrade!==void 0?l.gear_upgrade:ce("gear_upgrade")),colorClass:"bg-orange-600",value:p.gear_count,onChange:F,score:C(I.gear),t:n}),c.jsx(ir,{icon:Dk,title:n("alloy_title"),name:"alloy",inputsKey:"alloy_count",unit:`10 ${n("unit_alloy")}`,inputUnit:n("unit_alloy"),finalScore:C(l.alloy_10!==void 0?l.alloy_10:ce("alloy_10")),colorClass:"bg-gray-500",value:p.alloy_count,onChange:F,score:C(I.alloy),t:n}),c.jsx(ir,{icon:Tk,title:n("skill_manual"),name:"manual",inputsKey:"manual_count",unit:n("unit_manual"),finalScore:C(l.skill_manual!==void 0?l.skill_manual:ce("skill_manual")),colorClass:"bg-green-500",value:p.manual_count,onChange:F,score:C(I.manual),t:n}),c.jsx(ir,{icon:bl,title:n("diamond_gift"),name:"diamond",inputsKey:"diamond_count",unit:n("unit_item"),finalScore:t.diamond_1,colorClass:"bg-cyan-500",value:p.diamond_count,onChange:F,score:C(I.diamond),t:n})]}),c.jsxs("div",{className:"bg-orange-50/50 rounded-2xl p-6 border border-orange-100 flex gap-4",children:[c.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(ur,{size:16,className:"text-orange-600"})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-bold text-orange-900 underline decoration-orange-200 decoration-2 underline-offset-2",children:n("tips_title")}),c.jsx("p",{className:"text-xs text-orange-700 leading-relaxed font-medium",children:n("tips_desc")})]})]})]})},oy=({icon:n,title:e,name:t,inputsKey:i,unit:o,inputUnit:l,finalScore:h,colorClass:p,value:m,onChange:v,score:w,t:k})=>c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`p-2 rounded-lg ${p} bg-opacity-10`,children:c.jsx(n,{size:18,className:p.replace("bg-","text-")})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:e})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[h," pts / ",o]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",name:i,value:m,onChange:v,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-base"}),c.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-md",children:l||o})]}),c.jsx("div",{className:"mt-2 flex justify-end",children:c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[k("est_score"),": ",c.jsx("span",{className:"text-blue-600 font-black",children:w})]})})]}),yI=()=>{const{t:n,lang:e}=Wn(),t={speedup_1min:40,build_power_10:1,tech_power_10:1,radar_1:5e3,soldier_t1:57,soldier_t2:86.5,soldier_t3:114,soldier_t4:143.5,soldier_t5:173,soldier_t6:198,soldier_t7:227.5,soldier_t8:242.5,soldier_t9:266.5,soldier_t10:315,diamond_1:30},[i,o]=X.useState({global:"313",build:"100",tech:"100",train:"100"}),[l,h]=X.useState({}),[p,m]=X.useState({speedup_d:"",speedup_h:"",speedup_m:"",build_power_start:"",build_power_end:"",tech_power_start:"",tech_power_end:"",radar_count:"",soldier_count:"",selected_tier:"8",diamond_count:""}),[v,w]=X.useState(!1),[k,A]=X.useState(!1),[O,$]=X.useState(!1),[q,V]=X.useState(!1),J=K=>{const oe=parseFloat(K);return isNaN(oe)?0:oe};X.useEffect(()=>{const K=localStorage.getItem("duel_fri_bonus_settings"),oe=localStorage.getItem("duel_fri_manual_overrides"),ge=localStorage.getItem("duel_welcome_dismissed_fri");if(K)try{const ue=JSON.parse(K),ee={};for(const pe in ue)ee[pe]=String(ue[pe]);o(ee)}catch(ue){console.error("Failed to load bonus settings",ue)}if(oe)try{h(JSON.parse(oe))}catch(ue){console.error("Failed to load manual overrides",ue)}ge||A(!0)},[]);const F=K=>{const{name:oe,value:ge}=K.target;(ge===""||/^\d+$/.test(ge))&&m(ue=>({...ue,[oe]:ge}))},D=(K,oe)=>{(oe===""||/^\d*\.?\d*$/.test(oe))&&o(ge=>({...ge,[K]:oe}))},G=(K,oe)=>{(oe===""||/^\d*\.?\d*$/.test(oe))&&h(ge=>({...ge,[K]:oe}))},ie=K=>{h(oe=>{const ge={...oe};return ge[K]!==void 0?delete ge[K]:ge[K]=String(N(K)),ge})},ce=()=>{localStorage.setItem("duel_fri_bonus_settings",JSON.stringify(i)),localStorage.setItem("duel_fri_manual_overrides",JSON.stringify(l)),w(!1)},j=()=>{O&&localStorage.setItem("duel_welcome_dismissed_fri","true"),A(!1)},b=()=>{m({speedup_d:"",speedup_h:"",speedup_m:"",build_power_start:"",build_power_end:"",tech_power_start:"",tech_power_end:"",radar_count:"",soldier_count:"",selected_tier:"8",diamond_count:""})},N=K=>{const oe=t[K]||0;if(K==="diamond_1")return oe;const ge=J(i.global)/100;let ue=0;return K==="build_power_10"?ue=J(i.build)/100:K==="tech_power_10"?ue=J(i.tech)/100:K.startsWith("soldier_t")&&(ue=J(i.train)/100),Math.floor(oe*(1+ge+ue))},I=X.useMemo(()=>{const K=ee=>l[ee]!==void 0?J(l[ee]):N(ee),oe=(Number(p.speedup_d)||0)*1440+(Number(p.speedup_h)||0)*60+(Number(p.speedup_m)||0),ge=Math.max(0,(Number(p.build_power_end)||0)-(Number(p.build_power_start)||0)),ue=Math.max(0,(Number(p.tech_power_end)||0)-(Number(p.tech_power_start)||0));return{speedup:oe*K("speedup_1min"),build_power:ge/10*K("build_power_10"),tech_power:ue/10*K("tech_power_10"),radar:(Number(p.radar_count)||0)*K("radar_1"),soldier:(Number(p.soldier_count)||0)*K(`soldier_t${p.selected_tier}`),diamond:(Number(p.diamond_count)||0)*K("diamond_1"),totalSpeedupMinutes:oe,buildPowerDiff:ge,techPowerDiff:ue}},[p,i,l]),P=X.useMemo(()=>Object.values(I).reduce((K,oe)=>typeof oe=="number"?K+oe:K,0),[I]),C=K=>!K||isNaN(K)||K===0?"0":new Intl.NumberFormat("en-US").format(Math.floor(K)),T=Array.from({length:10},(K,oe)=>(oe+1).toString());return c.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[k&&Iu.createPortal(c.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:c.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-green-100",children:c.jsxs("div",{className:"p-10 text-center space-y-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-20 h-20 bg-green-600 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-green-200 animate-bounce cursor-default relative z-10",children:c.jsx(Fo,{className:"text-white",size:40})}),c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 bg-green-400 rounded-3xl blur-2xl opacity-20 animate-pulse"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight",children:n("welcome_title")}),c.jsxs("p",{className:"text-sm font-medium text-gray-500 leading-relaxed px-2 text-center",children:[n("welcome_desc").split("{icon}")[0],c.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-gray-100 rounded-md text-gray-900 border border-gray-200 align-middle mx-1 -mt-0.5",children:c.jsx(kt,{size:12})}),n("welcome_desc").split("{icon}")[1]]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("label",{className:"flex items-center justify-center gap-3 cursor-pointer group select-none",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"checkbox",className:"sr-only",checked:O,onChange:()=>$(!O)}),c.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center ${O?"bg-green-600 border-green-600":"border-gray-200 group-hover:border-green-400"}`,children:O&&c.jsx(Uo,{size:12,className:"text-white stroke-[4]"})})]}),c.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:n("dont_show_again")})]}),c.jsx("button",{onClick:j,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black hover:scale-[1.02] active:scale-95 transition-all shadow-xl shadow-gray-200",children:n("close_guide")})]})]})})}),document.body),c.jsx("div",{className:"bg-gradient-to-br from-gray-900 via-green-950 to-emerald-900 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:c.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"px-3 py-1 bg-green-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-green-400/30",children:"Alliance Duel"}),c.jsx("div",{className:"px-3 py-1 bg-emerald-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-emerald-400/30",children:n("friday")})]}),c.jsx("h2",{className:"text-3xl font-black tracking-tight",children:n("fri_title")}),c.jsx("p",{className:"text-green-200/60 text-sm font-medium",children:n("fri_desc")})]}),c.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[c.jsx("div",{className:"text-green-200 text-[10px] font-black uppercase tracking-widest mb-1",children:n("total_est_score")}),c.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-green-100 to-emerald-100",children:C(P)}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsxs("button",{onClick:b,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[c.jsx(zo,{size:14})," ",n("reset_data")]}),c.jsx("button",{onClick:()=>w(!v),className:`p-2 rounded-xl transition-all border ${v?"bg-white text-green-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:c.jsx(kt,{size:18})})]})]})]})}),v&&c.jsxs("div",{className:"bg-white rounded-[2rem] p-8 shadow-xl border border-green-100 animate-in slide-in-from-top-4 duration-300",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[c.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-xl flex items-center justify-center shadow-lg shadow-green-200",children:c.jsx(kt,{className:"text-white",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-black text-gray-900",children:n("score_base_settings")}),c.jsx("p",{className:"text-xs text-gray-500",children:n("base_points_desc")})]})]}),c.jsxs("div",{className:"mb-8 p-6 bg-green-50 rounded-2xl border border-green-100",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Vv,{className:"text-green-600",size:18}),c.jsx("h4",{className:"font-black text-green-900",children:n("tech_bonus_settings")})]}),c.jsxs("button",{onClick:()=>V(!q),className:"flex items-center gap-1.5 px-3 py-1 bg-white text-[10px] font-black text-green-600 rounded-lg border border-green-200 hover:bg-green-100 transition-all",children:[c.jsx(ur,{size:12}),n("tech_bonus_guide_title")]})]}),q&&Iu.createPortal(c.jsxs("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:[c.jsx("div",{className:"absolute inset-0",onClick:()=>V(!1)}),c.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-3xl shadow-2xl animate-in zoom-in-95 duration-300 border border-green-100 flex flex-col",style:{maxHeight:"calc(100vh - 3rem)"},children:[c.jsxs("div",{className:"px-5 py-3 border-b border-gray-100 flex items-center justify-between bg-gradient-to-r from-green-50/50 to-green-50/30 flex-shrink-0 rounded-t-3xl",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-1.5 bg-green-600 rounded-lg text-white shadow-sm",children:c.jsx(ur,{size:16})}),c.jsx("h3",{className:"font-black text-gray-900 text-sm",children:n("tech_bonus_guide_title")})]}),c.jsx("button",{onClick:()=>V(!1),className:"p-1.5 hover:bg-white rounded-full transition-all text-gray-400 hover:text-gray-600",children:c.jsx(Xu,{size:18})})]}),c.jsxs("div",{className:"p-5 overflow-y-auto custom-scrollbar space-y-4 flex-1",children:[c.jsx("div",{className:"bg-green-50 border border-green-100 rounded-xl p-3",children:c.jsxs("p",{className:"text-xs text-green-900 font-medium leading-relaxed flex items-start gap-2",children:[c.jsx(gp,{size:16,className:"text-green-500 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:n("tech_bonus_guide_desc")})]})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest px-1",children:" / Screenshot"}),c.jsx("div",{className:"rounded-xl overflow-hidden border-2 border-gray-200 bg-white shadow-sm",children:c.jsx("img",{src:`./guide/tech_${e}.webp`,alt:"Tech Bonus Guide",className:"w-full h-auto object-contain"})})]})]}),c.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-100 flex-shrink-0 rounded-b-3xl",children:c.jsx("button",{onClick:()=>V(!1),className:"w-full py-2.5 bg-gray-900 text-white rounded-xl font-black text-sm hover:bg-black transition-all shadow-lg",children:n("close_guide")})})]})]}),document.body),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black text-green-600 uppercase tracking-widest px-1",children:n("global_bonus")}),c.jsx("input",{type:"text",value:i.global,onChange:K=>D("global",K.target.value),className:"w-full bg-white border border-green-200 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-green-500/20 outline-none transition-all"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black text-green-600 uppercase tracking-widest px-1",children:n("building_bonus")}),c.jsx("input",{type:"text",value:i.build,onChange:K=>D("build",K.target.value),className:"w-full bg-white border border-green-200 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-green-500/20 outline-none transition-all"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black text-green-600 uppercase tracking-widest px-1",children:n("tech_power_bonus")}),c.jsx("input",{type:"text",value:i.tech,onChange:K=>D("tech",K.target.value),className:"w-full bg-white border border-green-200 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-green-500/20 outline-none transition-all"})]}),c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black text-green-600 uppercase tracking-widest px-1",children:n("training_bonus")}),c.jsx("input",{type:"text",value:i.train,onChange:K=>D("train",K.target.value),className:"w-full bg-white border border-green-200 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-green-500/20 outline-none transition-all"})]})]})]}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(Nu,{className:"text-gray-600",size:18}),c.jsx("h4",{className:"font-black text-gray-900",children:n("advanced_manual_override")})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4",children:Object.keys(t).filter(K=>K!=="diamond_1").map(K=>{const oe=l[K]!==void 0,ge=oe?l[K]:N(K);return c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("div",{className:"flex items-center justify-between px-1",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:n(K)}),c.jsx("button",{onClick:()=>ie(K),className:`p-1 rounded-md transition-all ${oe?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,children:oe?c.jsx($v,{size:12}):c.jsx(Nu,{size:12})})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"text-xs text-gray-500 whitespace-nowrap",children:[t[K]," "]}),c.jsx("input",{type:"text",value:oe?l[K]:ge,onChange:ue=>G(K,ue.target.value),disabled:!oe,className:`flex-1 border rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-green-500/20 outline-none transition-all ${oe?"bg-white border-green-200":"bg-gray-50 border-gray-100 text-gray-400 cursor-not-allowed"}`})]})]},K)})})]}),c.jsxs("button",{onClick:ce,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[c.jsx(As,{size:18})," ",n("save_and_apply")]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-emerald-100 border-l-4 border-l-emerald-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 rounded-lg bg-emerald-500 bg-opacity-10",children:c.jsx(Yu,{size:18,className:"text-emerald-500"})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm font-black text-emerald-700",children:n("speedup_accumulate")})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[C(l.speedup_1min!==void 0?l.speedup_1min:N("speedup_1min"))," pts / ",n("unit_min")]})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["d","h","m"].map(K=>c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:n(`unit_${K==="d"?"day":K==="h"?"hour":"min"}`)}),c.jsx("input",{type:"text",name:`speedup_${K}`,value:p[`speedup_${K}`],onChange:F,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-emerald-500/20 transition-all text-base font-mono"})]},K))}),c.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[c.jsxs("span",{className:"text-gray-400 px-1",children:[n("current_total"),": ",c.jsxs("span",{className:"text-emerald-600",children:[C(I.totalSpeedupMinutes)," ",n("unit_min")]})]}),c.jsxs("span",{className:"text-gray-400",children:[n("est_score"),": ",c.jsx("span",{className:"text-emerald-600 font-black",children:C(I.speedup)})]})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-orange-100 border-l-4 border-l-orange-500 hover:shadow-md transition-all",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 rounded-lg bg-orange-500 bg-opacity-10",children:c.jsx(Dv,{size:18,className:"text-orange-500"})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:n("power_increase")})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[C(l.build_power_10!==void 0?l.build_power_10:N("build_power_10"))," pts / 10 Power"]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:n("power_start")}),c.jsx("input",{type:"text",name:"build_power_start",value:p.build_power_start,onChange:F,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-orange-500/20 transition-all text-base font-mono"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:n("power_end")}),c.jsx("input",{type:"text",name:"build_power_end",value:p.build_power_end,onChange:F,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-orange-500/20 transition-all text-base font-mono"})]})]}),c.jsx("div",{className:"mt-4 flex justify-end text-xs font-bold",children:c.jsxs("span",{className:"text-gray-400",children:[n("est_score"),": ",c.jsx("span",{className:"text-orange-600 font-black",children:C(I.build_power)})]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-purple-100 border-l-4 border-l-purple-500 hover:shadow-md transition-all",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 rounded-lg bg-purple-500 bg-opacity-10",children:c.jsx(Lv,{size:18,className:"text-purple-500"})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:n("tech_power_increase")})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[C(l.tech_power_10!==void 0?l.tech_power_10:N("tech_power_10"))," pts / 10 Power"]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:n("power_start")}),c.jsx("input",{type:"text",name:"tech_power_start",value:p.tech_power_start,onChange:F,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-purple-500/20 transition-all text-base font-mono"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:n("power_end")}),c.jsx("input",{type:"text",name:"tech_power_end",value:p.tech_power_end,onChange:F,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-purple-500/20 transition-all text-base font-mono"})]})]}),c.jsx("div",{className:"mt-4 flex justify-end text-xs font-bold",children:c.jsxs("span",{className:"text-gray-400",children:[n("est_score"),": ",c.jsx("span",{className:"text-purple-600 font-black",children:C(I.tech_power)})]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-orange-100 border-l-4 border-l-orange-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 rounded-lg bg-orange-500 bg-opacity-10",children:c.jsx(qn,{size:18,className:"text-orange-500"})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:n("soldier_title")})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[C(l[`soldier_t${p.selected_tier}`]!==void 0?l[`soldier_t${p.selected_tier}`]:N(`soldier_t${p.selected_tier}`))," pts / ",n("unit_soldier")]})]}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx("select",{value:p.selected_tier,onChange:K=>m(oe=>({...oe,selected_tier:K.target.value})),className:"w-full appearance-none bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold focus:ring-2 focus:ring-orange-500/20 transition-all text-sm cursor-pointer",children:T.map(K=>c.jsxs("option",{value:K,children:["T",K," ",n("soldiers")]},K))}),c.jsx(Tu,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",name:"soldier_count",value:p.soldier_count,onChange:F,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-orange-500/20 transition-all font-mono text-base"}),c.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-orange-600 bg-orange-50 px-2 py-0.5 rounded-md",children:n("unit_soldier")})]})]}),c.jsx("div",{className:"mt-4 flex justify-end text-xs font-bold",children:c.jsxs("span",{className:"text-gray-400",children:[n("est_score"),": ",c.jsx("span",{className:"text-orange-600 font-black",children:C(I.soldier)})]})})]}),c.jsx(oy,{icon:Fv,title:n("radar_title"),name:"radar",inputsKey:"radar_count",unit:n("unit_radar"),finalScore:C(l.radar_1!==void 0?l.radar_1:N("radar_1")),colorClass:"bg-blue-600",value:p.radar_count,onChange:F,score:C(I.radar),t:n}),c.jsx(oy,{icon:bl,title:n("diamond_gift"),name:"diamond",inputsKey:"diamond_count",unit:n("unit_item"),finalScore:t.diamond_1,colorClass:"bg-cyan-500",value:p.diamond_count,onChange:F,score:C(I.diamond),t:n})]}),c.jsxs("div",{className:"bg-green-50/50 rounded-2xl p-6 border border-green-100 flex gap-4",children:[c.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(ur,{size:16,className:"text-green-600"})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-bold text-green-900 underline decoration-green-200 decoration-2 underline-offset-2",children:n("tips_title")}),c.jsx("p",{className:"text-xs text-green-700 leading-relaxed font-medium",children:n("tips_desc")})]})]})]})},ay=({icon:n,title:e,name:t,inputsKey:i,unit:o,inputUnit:l,pts:h,colorClass:p,value:m,onChange:v,score:w,t:k})=>c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all group",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`p-2 rounded-lg ${p} bg-opacity-10`,children:c.jsx(n,{size:18,className:p.replace("bg-","text-")})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm",children:e})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[h," pts / ",o]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",name:i,value:m,onChange:v,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-4 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-red-500/20 transition-all font-mono text-base"}),c.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-black text-red-600 bg-red-50 px-2 py-0.5 rounded-md",children:l||o})]}),c.jsx("div",{className:"mt-2 flex justify-end",children:c.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[k("est_score"),": ",c.jsx("span",{className:"text-red-600 font-black",children:w})]})})]}),_I=()=>{const{t:n}=Wn(),[e,t]=X.useState({speedup_1min:41,bounty_orange:49300,trade_orange:61700}),[i,o]=X.useState({speedup_d:"",speedup_h:"",speedup_m:"",bounty_count:"",trade_count:""}),[l,h]=X.useState(!1),[p,m]=X.useState(!1),[v,w]=X.useState(!1);X.useEffect(()=>{const D=localStorage.getItem("duel_sat_base_values"),G=localStorage.getItem("duel_welcome_dismissed_sat");if(D)try{t(JSON.parse(D))}catch(ie){console.error("Failed to load base values",ie)}G||m(!0)},[]);const k=D=>{const{name:G,value:ie}=D.target;(ie===""||/^\d+$/.test(ie))&&o(ce=>({...ce,[G]:ie}))},A=(D,G)=>{(G===""||/^\d+(\.\d+)?$/.test(G))&&t(ie=>({...ie,[D]:Number(G)||0}))},O=()=>{localStorage.setItem("duel_sat_base_values",JSON.stringify(e)),h(!1)},$=()=>{v&&localStorage.setItem("duel_welcome_dismissed_sat","true"),m(!1)},q=()=>{o({speedup_d:"",speedup_h:"",speedup_m:"",bounty_count:"",trade_count:""})},V=X.useMemo(()=>{const D=(Number(i.speedup_d)||0)*1440+(Number(i.speedup_h)||0)*60+(Number(i.speedup_m)||0);return{speedup:D*e.speedup_1min,bounty:(Number(i.bounty_count)||0)*e.bounty_orange,trade:(Number(i.trade_count)||0)*e.trade_orange,totalSpeedupMinutes:D}},[i,e]),J=X.useMemo(()=>V.speedup+V.bounty+V.trade,[V]),F=D=>!D||isNaN(D)||D===0?"0":new Intl.NumberFormat("en-US").format(Math.floor(D));return c.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[p&&c.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:c.jsx("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300 border border-red-100",children:c.jsxs("div",{className:"p-10 text-center space-y-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-3xl flex items-center justify-center mx-auto shadow-xl shadow-red-200 animate-bounce cursor-default relative z-10",children:c.jsx(Fo,{className:"text-white",size:40})}),c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-20 h-20 bg-red-400 rounded-3xl blur-2xl opacity-20 animate-pulse"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-2xl font-black text-gray-900 leading-tight",children:n("welcome_title")}),c.jsxs("p",{className:"text-sm font-medium text-gray-500 leading-relaxed px-2 text-center",children:[n("welcome_desc").split("{icon}")[0],c.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-gray-100 rounded-md text-gray-900 border border-gray-200 align-middle mx-1 -mt-0.5",children:c.jsx(kt,{size:12})}),n("welcome_desc").split("{icon}")[1]]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("label",{className:"flex items-center justify-center gap-3 cursor-pointer group select-none",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"checkbox",className:"sr-only",checked:v,onChange:()=>w(!v)}),c.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all flex items-center justify-center ${v?"bg-red-600 border-red-600":"border-gray-200 group-hover:border-red-400"}`,children:v&&c.jsx(Uo,{size:12,className:"text-white stroke-[4]"})})]}),c.jsx("span",{className:"text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors",children:n("dont_show_again")})]}),c.jsx("button",{onClick:$,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm hover:bg-black transition-all shadow-xl shadow-gray-200",children:n("close_guide")})]})]})})}),c.jsx("div",{className:"bg-gradient-to-br from-gray-950 via-red-950 to-rose-950 rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden",children:c.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"px-3 py-1 bg-red-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-red-400/30",children:"Alliance Duel"}),c.jsx("div",{className:"px-3 py-1 bg-rose-500/20 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-rose-400/30",children:n("saturday")})]}),c.jsx("h2",{className:"text-3xl font-black tracking-tight",children:n("sat_title")}),c.jsx("p",{className:"text-rose-200/60 text-sm font-medium",children:n("sat_desc")})]}),c.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/10 w-full md:w-auto min-w-[280px]",children:[c.jsx("div",{className:"text-rose-200 text-[10px] font-black uppercase tracking-widest mb-1",children:n("total_est_score")}),c.jsx("div",{className:"text-5xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-red-100 to-rose-100",children:F(J)}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsxs("button",{onClick:q,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-xs font-bold transition-all border border-white/5",children:[c.jsx(zo,{size:14})," ",n("reset_data")]}),c.jsx("button",{onClick:()=>h(!l),className:`p-2 rounded-xl transition-all border ${l?"bg-white text-red-900":"bg-white/5 hover:bg-white/10 border-white/5"}`,children:c.jsx(kt,{size:18})})]})]})]})}),l&&c.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl border border-red-100 animate-in slide-in-from-top-4 duration-300",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-10 h-10 bg-red-600 rounded-xl flex items-center justify-center shadow-lg shadow-red-200",children:c.jsx(kt,{className:"text-white",size:20})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-black text-gray-900",children:n("score_base_settings")}),c.jsx("p",{className:"text-xs text-gray-500",children:n("base_points_desc")})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 mb-6",children:Object.keys(e).map(D=>c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest px-1",children:n(D)}),c.jsx("input",{type:"text",value:e[D],onChange:G=>A(D,G.target.value),className:"w-full bg-gray-50 border border-gray-100 rounded-xl py-2 px-3 text-sm font-bold focus:ring-2 focus:ring-red-500/20 outline-none transition-all"})]},D))}),c.jsxs("button",{onClick:O,className:"w-full py-4 bg-gray-900 text-white rounded-2xl font-black text-sm flex items-center justify-center gap-2 hover:bg-black transition-all shadow-xl shadow-gray-200",children:[c.jsx(As,{size:18})," ",n("save_and_apply")]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm border border-red-100 border-l-4 border-l-red-500 hover:shadow-md transition-all md:col-span-2 lg:col-span-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 rounded-lg bg-red-500 bg-opacity-10",children:c.jsx(Yu,{size:18,className:"text-red-500"})}),c.jsx("span",{className:"font-bold text-gray-700 text-sm font-black text-red-700",children:n("speedup_accumulate")})]}),c.jsxs("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-wider",children:[e.speedup_1min," pts / ",n("unit_min")]})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:["d","h","m"].map(D=>c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:n(`unit_${D==="d"?"day":D==="h"?"hour":"min"}`)}),c.jsx("input",{type:"text",name:`speedup_${D}`,value:i[`speedup_${D}`],onChange:k,placeholder:"0",className:"w-full bg-gray-50 border-none rounded-xl py-3 px-3 text-gray-900 font-bold placeholder:text-gray-300 focus:ring-2 focus:ring-red-500/20 transition-all text-base font-mono"})]},D))}),c.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs font-bold",children:[c.jsxs("span",{className:"text-gray-400 px-1",children:[n("current_total"),": ",c.jsxs("span",{className:"text-red-600",children:[F(V.totalSpeedupMinutes)," ",n("unit_min")]})]}),c.jsxs("span",{className:"text-gray-400",children:[n("est_score"),": ",c.jsx("span",{className:"text-red-600 font-black",children:F(V.speedup)})]})]})]}),c.jsx(ay,{icon:zv,title:n("bounty_title"),name:"bounty",inputsKey:"bounty_count",unit:n("unit_count"),pts:F(e.bounty_orange),colorClass:"bg-orange-600",value:i.bounty_count,onChange:k,score:F(V.bounty),t:n}),c.jsx(ay,{icon:Bv,title:n("trade_title"),name:"trade",inputsKey:"trade_count",unit:n("unit_trade"),pts:F(e.trade_orange),colorClass:"bg-sky-600",value:i.trade_count,onChange:k,score:F(V.trade),t:n})]}),c.jsxs("div",{className:"bg-red-50/50 rounded-2xl p-6 border border-red-100 flex gap-4",children:[c.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(ur,{size:16,className:"text-red-600"})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-bold text-red-900 underline decoration-red-200 decoration-2 underline-offset-2",children:n("tips_title")}),c.jsx("p",{className:"text-xs text-red-700 leading-relaxed font-medium",children:n("tips_desc")})]})]})]})},vI=()=>{const{t:n}=Wn(),[e,t]=X.useState(()=>{const m=new Date,v=m.getUTCHours();let w=m.getUTCDay();return v<2&&(w=w-1,w<0&&(w=6)),w===0?1:w}),i=["monday","tuesday","wednesday","thursday","friday","saturday"],o=m=>{switch(m){case 1:return n("mon_title");case 2:return n("tue_title");case 3:return n("wed_title");case 4:return n("thu_title");case 5:return n("fri_title");case 6:return n("sat_title");default:return n("duel_calculator")}},l=m=>{switch(m){case 1:return n("mon_desc");case 2:return n("tue_desc");case 3:return n("wed_desc");case 4:return n("thu_desc");case 5:return n("fri_desc");case 6:return n("sat_desc");default:return n("calc_dev_desc")}},h=m=>[1,2,3,4,5,6].includes(m),p=m=>{switch(m){case 1:return"text-cyan-600";case 2:return"text-blue-600";case 3:return"text-indigo-600";case 4:return"text-orange-600";case 5:return"text-emerald-600";case 6:return"text-red-600";default:return"text-gray-900"}};return c.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:`text-2xl font-black tracking-tight ${p(e)}`,children:o(e)}),c.jsx("p",{className:"text-gray-500 text-sm font-medium",children:l(e)})]}),c.jsx("div",{className:"flex bg-white p-1.5 rounded-2xl shadow-sm border border-gray-100 overflow-x-auto max-w-full",children:[1,2,3,4,5,6].map(m=>{const v=h(m),w=k=>{switch(k){case 1:return"bg-cyan-600 shadow-cyan-200";case 2:return"bg-blue-600 shadow-blue-200";case 3:return"bg-indigo-600 shadow-indigo-200";case 4:return"bg-orange-600 shadow-orange-200";case 5:return"bg-emerald-600 shadow-emerald-200";case 6:return"bg-red-600 shadow-red-200";default:return"bg-gray-900 shadow-gray-200"}};return c.jsxs("button",{onClick:()=>t(m),disabled:!v,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all whitespace-nowrap ${e===m?`${w(m)} text-white shadow-lg`:v?"text-gray-400 hover:text-gray-600 hover:bg-gray-50":"text-gray-200 cursor-not-allowed"}`,children:[c.jsx(Eu,{size:14}),n(i[m-1]),!v&&c.jsxs("span",{className:"text-[8px] opacity-40 ml-1",children:["(",n("dev_in_progress"),")"]})]},m)})})]}),c.jsxs("div",{className:"transition-all duration-300",children:[e===1&&c.jsx(fI,{}),e===2&&c.jsx(pI,{}),e===3&&c.jsx(mI,{}),e===4&&c.jsx(gI,{}),e===5&&c.jsx(yI,{}),e===6&&c.jsx(_I,{}),!h(e)&&c.jsxs("div",{className:"bg-white rounded-[2rem] p-12 text-center border-2 border-dashed border-gray-100",children:[c.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-2xl flex items-center justify-center mx-auto mb-4",children:c.jsx(Eu,{className:"text-gray-200",size:32})}),c.jsxs("h3",{className:"text-lg font-black text-gray-900 mb-2",children:[n(i[e-1])," ",n("duel_calculator")," ",n("dev_in_progress")]}),c.jsx("p",{className:"text-gray-400 text-sm font-medium",children:n("calc_dev_desc")})]})]})]})};function xI(){const[n,e]=X.useState("form"),[t,i]=X.useState(!1),{user:o,isAdmin:l,loading:h}=Iv(),{lang:p,t:m,toggleLang:v}=Wn();X.useEffect(()=>{const O=localStorage.getItem("isLoginMode")==="true";!h&&!o&&!t&&!O&&Sb(ui).catch($=>{console.error(":",$)}),!o&&O&&i(!0)},[o,h,t]),X.useEffect(()=>{o&&(localStorage.removeItem("isLoginMode"),i(!1))},[o]);const w=async()=>{try{localStorage.removeItem("isLoginMode"),i(!1),await Jg(ui)}catch(O){console.error(":",O)}},k=async()=>{localStorage.setItem("isLoginMode","true"),i(!0),await Jg(ui)},A=()=>{localStorage.removeItem("isLoginMode"),i(!1)};return h?c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 space-y-4",children:[c.jsx(Ok,{className:"w-10 h-10 text-blue-600 animate-spin"}),c.jsx("p",{className:"text-gray-500 font-medium animate-pulse",children:m("loading_system")})]}):t&&!o?c.jsx("div",{className:"min-h-screen bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-blue-100 via-white to-indigo-100 flex flex-col items-center justify-center p-4",children:c.jsxs("div",{className:"w-full max-w-md animate-in fade-in zoom-in duration-500",children:[c.jsx(wk,{}),c.jsx("button",{onClick:A,className:"w-full mt-6 py-3 text-gray-400 hover:text-gray-600 text-sm font-bold flex items-center justify-center gap-2 transition-colors border border-transparent hover:border-gray-200 rounded-xl",children:m("back_to_guest")})]})}):o?c.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] flex flex-col font-sans selection:bg-indigo-100 selection:text-indigo-900",children:[c.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-gray-100 shadow-sm",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-18 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3 group cursor-default",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-200 group-hover:rotate-12 transition-transform duration-300",children:c.jsx(bo,{className:"text-white w-6 h-6"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-black text-gray-900 tracking-tight leading-none",children:m("title")}),c.jsx("p",{className:"text-[10px] font-bold text-blue-600 uppercase tracking-[0.2em] mt-1 opacity-80",children:m("subtitle")})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-3 py-1.5 rounded-full border border-gray-100 bg-gray-50 text-xs font-bold text-gray-600 hover:bg-gray-100 transition-all",children:[c.jsx(Rk,{size:14,className:"text-blue-500"}),p==="zh"?"English":""]}),c.jsxs("div",{className:"hidden md:flex items-center gap-4 py-1.5 px-3 bg-gray-50 rounded-full border border-gray-100",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${o.isAnonymous?"bg-orange-400 animate-pulse":"bg-green-500"}`}),c.jsx("span",{className:"text-xs font-bold text-gray-600 tracking-wide",children:o.isAnonymous?m("guest_mode"):o.email?.split("@")[0]})]}),l&&c.jsx("span",{className:"bg-indigo-600 text-[10px] text-white px-2 py-0.5 rounded-full font-black uppercase tracking-wider shadow-sm",children:m("admin_tag")})]}),!o.isAnonymous&&c.jsx("button",{onClick:w,className:"group flex items-center gap-2 text-gray-400 hover:text-red-500 transition-colors p-2 rounded-lg hover:bg-red-50",title:m("logout"),children:c.jsx(Vk,{size:20,className:"group-hover:-translate-x-0.5 transition-transform"})})]})]})}),c.jsx("main",{className:"flex-grow",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12",children:[c.jsxs("div",{className:"inline-flex p-1 bg-white border border-gray-200 rounded-2xl mb-10 shadow-sm overflow-x-auto max-w-full",children:[c.jsxs("button",{onClick:()=>e("form"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 whitespace-nowrap ${n==="form"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[c.jsx(Lk,{size:18})," ",m("personal_entry")]}),c.jsxs("button",{onClick:()=>e("calculator"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 whitespace-nowrap ${n==="calculator"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[c.jsx(kk,{size:18})," ",m("duel_calculator")]}),l&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>e("admin"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 whitespace-nowrap ${n==="admin"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[c.jsx(qk,{size:18})," ",m("all_management")]}),c.jsxs("button",{onClick:()=>e("planner"),className:`flex items-center gap-2 py-2.5 px-6 rounded-xl text-sm font-bold transition-all duration-300 whitespace-nowrap ${n==="planner"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-indigo-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:[c.jsx(Fk,{size:18})," ",m("view_planner")]})]})]}),c.jsxs("div",{className:"relative",children:[n==="admin"&&l&&c.jsx(sy,{}),n==="planner"&&l&&c.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:c.jsx(sy,{forcePlanner:!0})}),n==="form"&&c.jsx(Zk,{user:o}),n==="calculator"&&c.jsx(vI,{})]})]})}),c.jsx("footer",{className:"bg-white border-t border-gray-100 py-12 px-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-8",children:[c.jsxs("div",{className:"flex flex-col items-center md:items-start gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2 opacity-30 grayscale",children:[c.jsx(bo,{size:20}),c.jsx("span",{className:"font-black text-lg tracking-tighter uppercase whitespace-nowrap",children:m("title")})]}),c.jsx("p",{className:"text-gray-400 text-xs font-medium",children:m("footer_text")})]}),c.jsxs("div",{className:"flex items-center gap-8",children:[c.jsxs("div",{className:"text-[10px] font-black text-gray-300 uppercase tracking-[0.3em] hidden sm:block",children:["Intel Status: ",c.jsx("span",{className:"text-green-500",children:m("status_operational")})]}),o.isAnonymous&&c.jsxs("button",{onClick:k,className:"group flex items-center gap-2 py-2 px-4 rounded-full border border-gray-200 text-[11px] font-black text-gray-500 hover:bg-gray-900 hover:text-white hover:border-gray-900 transition-all shadow-sm",children:[m("admin_login_gate")," ",c.jsx(gp,{size:14,className:"group-hover:translate-x-0.5 transition-transform"})]})]})]})}),c.jsx(xk,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!1,theme:"light"})]}):c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 space-y-4",children:[c.jsx(bo,{className:"w-12 h-12 text-blue-600 animate-bounce"}),c.jsx("div",{className:"text-gray-600 font-black tracking-widest uppercase text-xs",children:m("preparing_env")})]})}nw.createRoot(document.getElementById("root")).render(c.jsx(Ke.StrictMode,{children:c.jsx(lk,{children:c.jsx(xI,{})})}));
